(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function t(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=t(i);fetch(i.href,o)}})();function nb(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Jp={exports:{}},ru={},Xp={exports:{}},xe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var K_;function rb(){if(K_)return xe;K_=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),E=Symbol.iterator;function w(L){return L===null||typeof L!="object"?null:(L=E&&L[E]||L["@@iterator"],typeof L=="function"?L:null)}var A={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,V={};function x(L,Y,De){this.props=L,this.context=Y,this.refs=V,this.updater=De||A}x.prototype.isReactComponent={},x.prototype.setState=function(L,Y){if(typeof L!="object"&&typeof L!="function"&&L!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,L,Y,"setState")},x.prototype.forceUpdate=function(L){this.updater.enqueueForceUpdate(this,L,"forceUpdate")};function H(){}H.prototype=x.prototype;function Q(L,Y,De){this.props=L,this.context=Y,this.refs=V,this.updater=De||A}var Z=Q.prototype=new H;Z.constructor=Q,b(Z,x.prototype),Z.isPureReactComponent=!0;var ae=Array.isArray,ve=Object.prototype.hasOwnProperty,he={current:null},k={key:!0,ref:!0,__self:!0,__source:!0};function S(L,Y,De){var ke,Ne={},Oe=null,Ge=null;if(Y!=null)for(ke in Y.ref!==void 0&&(Ge=Y.ref),Y.key!==void 0&&(Oe=""+Y.key),Y)ve.call(Y,ke)&&!k.hasOwnProperty(ke)&&(Ne[ke]=Y[ke]);var Ue=arguments.length-2;if(Ue===1)Ne.children=De;else if(1<Ue){for(var Je=Array(Ue),nn=0;nn<Ue;nn++)Je[nn]=arguments[nn+2];Ne.children=Je}if(L&&L.defaultProps)for(ke in Ue=L.defaultProps,Ue)Ne[ke]===void 0&&(Ne[ke]=Ue[ke]);return{$$typeof:n,type:L,key:Oe,ref:Ge,props:Ne,_owner:he.current}}function D(L,Y){return{$$typeof:n,type:L.type,key:Y,ref:L.ref,props:L.props,_owner:L._owner}}function M(L){return typeof L=="object"&&L!==null&&L.$$typeof===n}function N(L){var Y={"=":"=0",":":"=2"};return"$"+L.replace(/[=:]/g,function(De){return Y[De]})}var F=/\/+/g;function C(L,Y){return typeof L=="object"&&L!==null&&L.key!=null?N(""+L.key):Y.toString(36)}function Ze(L,Y,De,ke,Ne){var Oe=typeof L;(Oe==="undefined"||Oe==="boolean")&&(L=null);var Ge=!1;if(L===null)Ge=!0;else switch(Oe){case"string":case"number":Ge=!0;break;case"object":switch(L.$$typeof){case n:case e:Ge=!0}}if(Ge)return Ge=L,Ne=Ne(Ge),L=ke===""?"."+C(Ge,0):ke,ae(Ne)?(De="",L!=null&&(De=L.replace(F,"$&/")+"/"),Ze(Ne,Y,De,"",function(nn){return nn})):Ne!=null&&(M(Ne)&&(Ne=D(Ne,De+(!Ne.key||Ge&&Ge.key===Ne.key?"":(""+Ne.key).replace(F,"$&/")+"/")+L)),Y.push(Ne)),1;if(Ge=0,ke=ke===""?".":ke+":",ae(L))for(var Ue=0;Ue<L.length;Ue++){Oe=L[Ue];var Je=ke+C(Oe,Ue);Ge+=Ze(Oe,Y,De,Je,Ne)}else if(Je=w(L),typeof Je=="function")for(L=Je.call(L),Ue=0;!(Oe=L.next()).done;)Oe=Oe.value,Je=ke+C(Oe,Ue++),Ge+=Ze(Oe,Y,De,Je,Ne);else if(Oe==="object")throw Y=String(L),Error("Objects are not valid as a React child (found: "+(Y==="[object Object]"?"object with keys {"+Object.keys(L).join(", ")+"}":Y)+"). If you meant to render a collection of children, use an array instead.");return Ge}function xt(L,Y,De){if(L==null)return L;var ke=[],Ne=0;return Ze(L,ke,"","",function(Oe){return Y.call(De,Oe,Ne++)}),ke}function qt(L){if(L._status===-1){var Y=L._result;Y=Y(),Y.then(function(De){(L._status===0||L._status===-1)&&(L._status=1,L._result=De)},function(De){(L._status===0||L._status===-1)&&(L._status=2,L._result=De)}),L._status===-1&&(L._status=0,L._result=Y)}if(L._status===1)return L._result.default;throw L._result}var it={current:null},le={transition:null},_e={ReactCurrentDispatcher:it,ReactCurrentBatchConfig:le,ReactCurrentOwner:he};function ce(){throw Error("act(...) is not supported in production builds of React.")}return xe.Children={map:xt,forEach:function(L,Y,De){xt(L,function(){Y.apply(this,arguments)},De)},count:function(L){var Y=0;return xt(L,function(){Y++}),Y},toArray:function(L){return xt(L,function(Y){return Y})||[]},only:function(L){if(!M(L))throw Error("React.Children.only expected to receive a single React element child.");return L}},xe.Component=x,xe.Fragment=t,xe.Profiler=i,xe.PureComponent=Q,xe.StrictMode=r,xe.Suspense=f,xe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=_e,xe.act=ce,xe.cloneElement=function(L,Y,De){if(L==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+L+".");var ke=b({},L.props),Ne=L.key,Oe=L.ref,Ge=L._owner;if(Y!=null){if(Y.ref!==void 0&&(Oe=Y.ref,Ge=he.current),Y.key!==void 0&&(Ne=""+Y.key),L.type&&L.type.defaultProps)var Ue=L.type.defaultProps;for(Je in Y)ve.call(Y,Je)&&!k.hasOwnProperty(Je)&&(ke[Je]=Y[Je]===void 0&&Ue!==void 0?Ue[Je]:Y[Je])}var Je=arguments.length-2;if(Je===1)ke.children=De;else if(1<Je){Ue=Array(Je);for(var nn=0;nn<Je;nn++)Ue[nn]=arguments[nn+2];ke.children=Ue}return{$$typeof:n,type:L.type,key:Ne,ref:Oe,props:ke,_owner:Ge}},xe.createContext=function(L){return L={$$typeof:l,_currentValue:L,_currentValue2:L,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},L.Provider={$$typeof:o,_context:L},L.Consumer=L},xe.createElement=S,xe.createFactory=function(L){var Y=S.bind(null,L);return Y.type=L,Y},xe.createRef=function(){return{current:null}},xe.forwardRef=function(L){return{$$typeof:c,render:L}},xe.isValidElement=M,xe.lazy=function(L){return{$$typeof:g,_payload:{_status:-1,_result:L},_init:qt}},xe.memo=function(L,Y){return{$$typeof:p,type:L,compare:Y===void 0?null:Y}},xe.startTransition=function(L){var Y=le.transition;le.transition={};try{L()}finally{le.transition=Y}},xe.unstable_act=ce,xe.useCallback=function(L,Y){return it.current.useCallback(L,Y)},xe.useContext=function(L){return it.current.useContext(L)},xe.useDebugValue=function(){},xe.useDeferredValue=function(L){return it.current.useDeferredValue(L)},xe.useEffect=function(L,Y){return it.current.useEffect(L,Y)},xe.useId=function(){return it.current.useId()},xe.useImperativeHandle=function(L,Y,De){return it.current.useImperativeHandle(L,Y,De)},xe.useInsertionEffect=function(L,Y){return it.current.useInsertionEffect(L,Y)},xe.useLayoutEffect=function(L,Y){return it.current.useLayoutEffect(L,Y)},xe.useMemo=function(L,Y){return it.current.useMemo(L,Y)},xe.useReducer=function(L,Y,De){return it.current.useReducer(L,Y,De)},xe.useRef=function(L){return it.current.useRef(L)},xe.useState=function(L){return it.current.useState(L)},xe.useSyncExternalStore=function(L,Y,De){return it.current.useSyncExternalStore(L,Y,De)},xe.useTransition=function(){return it.current.useTransition()},xe.version="18.3.1",xe}var Y_;function Sg(){return Y_||(Y_=1,Xp.exports=rb()),Xp.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var J_;function ib(){if(J_)return ru;J_=1;var n=Sg(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function l(c,f,p){var g,E={},w=null,A=null;p!==void 0&&(w=""+p),f.key!==void 0&&(w=""+f.key),f.ref!==void 0&&(A=f.ref);for(g in f)r.call(f,g)&&!o.hasOwnProperty(g)&&(E[g]=f[g]);if(c&&c.defaultProps)for(g in f=c.defaultProps,f)E[g]===void 0&&(E[g]=f[g]);return{$$typeof:e,type:c,key:w,ref:A,props:E,_owner:i.current}}return ru.Fragment=t,ru.jsx=l,ru.jsxs=l,ru}var X_;function sb(){return X_||(X_=1,Jp.exports=ib()),Jp.exports}var re=sb(),Dt=Sg();const Pm=nb(Dt);var bd={},Zp={exports:{}},pn={},em={exports:{}},tm={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Z_;function ob(){return Z_||(Z_=1,(function(n){function e(le,_e){var ce=le.length;le.push(_e);e:for(;0<ce;){var L=ce-1>>>1,Y=le[L];if(0<i(Y,_e))le[L]=_e,le[ce]=Y,ce=L;else break e}}function t(le){return le.length===0?null:le[0]}function r(le){if(le.length===0)return null;var _e=le[0],ce=le.pop();if(ce!==_e){le[0]=ce;e:for(var L=0,Y=le.length,De=Y>>>1;L<De;){var ke=2*(L+1)-1,Ne=le[ke],Oe=ke+1,Ge=le[Oe];if(0>i(Ne,ce))Oe<Y&&0>i(Ge,Ne)?(le[L]=Ge,le[Oe]=ce,L=Oe):(le[L]=Ne,le[ke]=ce,L=ke);else if(Oe<Y&&0>i(Ge,ce))le[L]=Ge,le[Oe]=ce,L=Oe;else break e}}return _e}function i(le,_e){var ce=le.sortIndex-_e.sortIndex;return ce!==0?ce:le.id-_e.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var l=Date,c=l.now();n.unstable_now=function(){return l.now()-c}}var f=[],p=[],g=1,E=null,w=3,A=!1,b=!1,V=!1,x=typeof setTimeout=="function"?setTimeout:null,H=typeof clearTimeout=="function"?clearTimeout:null,Q=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function Z(le){for(var _e=t(p);_e!==null;){if(_e.callback===null)r(p);else if(_e.startTime<=le)r(p),_e.sortIndex=_e.expirationTime,e(f,_e);else break;_e=t(p)}}function ae(le){if(V=!1,Z(le),!b)if(t(f)!==null)b=!0,qt(ve);else{var _e=t(p);_e!==null&&it(ae,_e.startTime-le)}}function ve(le,_e){b=!1,V&&(V=!1,H(S),S=-1),A=!0;var ce=w;try{for(Z(_e),E=t(f);E!==null&&(!(E.expirationTime>_e)||le&&!N());){var L=E.callback;if(typeof L=="function"){E.callback=null,w=E.priorityLevel;var Y=L(E.expirationTime<=_e);_e=n.unstable_now(),typeof Y=="function"?E.callback=Y:E===t(f)&&r(f),Z(_e)}else r(f);E=t(f)}if(E!==null)var De=!0;else{var ke=t(p);ke!==null&&it(ae,ke.startTime-_e),De=!1}return De}finally{E=null,w=ce,A=!1}}var he=!1,k=null,S=-1,D=5,M=-1;function N(){return!(n.unstable_now()-M<D)}function F(){if(k!==null){var le=n.unstable_now();M=le;var _e=!0;try{_e=k(!0,le)}finally{_e?C():(he=!1,k=null)}}else he=!1}var C;if(typeof Q=="function")C=function(){Q(F)};else if(typeof MessageChannel<"u"){var Ze=new MessageChannel,xt=Ze.port2;Ze.port1.onmessage=F,C=function(){xt.postMessage(null)}}else C=function(){x(F,0)};function qt(le){k=le,he||(he=!0,C())}function it(le,_e){S=x(function(){le(n.unstable_now())},_e)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(le){le.callback=null},n.unstable_continueExecution=function(){b||A||(b=!0,qt(ve))},n.unstable_forceFrameRate=function(le){0>le||125<le?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<le?Math.floor(1e3/le):5},n.unstable_getCurrentPriorityLevel=function(){return w},n.unstable_getFirstCallbackNode=function(){return t(f)},n.unstable_next=function(le){switch(w){case 1:case 2:case 3:var _e=3;break;default:_e=w}var ce=w;w=_e;try{return le()}finally{w=ce}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(le,_e){switch(le){case 1:case 2:case 3:case 4:case 5:break;default:le=3}var ce=w;w=le;try{return _e()}finally{w=ce}},n.unstable_scheduleCallback=function(le,_e,ce){var L=n.unstable_now();switch(typeof ce=="object"&&ce!==null?(ce=ce.delay,ce=typeof ce=="number"&&0<ce?L+ce:L):ce=L,le){case 1:var Y=-1;break;case 2:Y=250;break;case 5:Y=1073741823;break;case 4:Y=1e4;break;default:Y=5e3}return Y=ce+Y,le={id:g++,callback:_e,priorityLevel:le,startTime:ce,expirationTime:Y,sortIndex:-1},ce>L?(le.sortIndex=ce,e(p,le),t(f)===null&&le===t(p)&&(V?(H(S),S=-1):V=!0,it(ae,ce-L))):(le.sortIndex=Y,e(f,le),b||A||(b=!0,qt(ve))),le},n.unstable_shouldYield=N,n.unstable_wrapCallback=function(le){var _e=w;return function(){var ce=w;w=_e;try{return le.apply(this,arguments)}finally{w=ce}}}})(tm)),tm}var eE;function ab(){return eE||(eE=1,em.exports=ob()),em.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tE;function lb(){if(tE)return pn;tE=1;var n=Sg(),e=ab();function t(s){for(var a="https://reactjs.org/docs/error-decoder.html?invariant="+s,u=1;u<arguments.length;u++)a+="&args[]="+encodeURIComponent(arguments[u]);return"Minified React error #"+s+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function o(s,a){l(s,a),l(s+"Capture",a)}function l(s,a){for(i[s]=a,s=0;s<a.length;s++)r.add(a[s])}var c=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),f=Object.prototype.hasOwnProperty,p=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,g={},E={};function w(s){return f.call(E,s)?!0:f.call(g,s)?!1:p.test(s)?E[s]=!0:(g[s]=!0,!1)}function A(s,a,u,h){if(u!==null&&u.type===0)return!1;switch(typeof a){case"function":case"symbol":return!0;case"boolean":return h?!1:u!==null?!u.acceptsBooleans:(s=s.toLowerCase().slice(0,5),s!=="data-"&&s!=="aria-");default:return!1}}function b(s,a,u,h){if(a===null||typeof a>"u"||A(s,a,u,h))return!0;if(h)return!1;if(u!==null)switch(u.type){case 3:return!a;case 4:return a===!1;case 5:return isNaN(a);case 6:return isNaN(a)||1>a}return!1}function V(s,a,u,h,m,y,T){this.acceptsBooleans=a===2||a===3||a===4,this.attributeName=h,this.attributeNamespace=m,this.mustUseProperty=u,this.propertyName=s,this.type=a,this.sanitizeURL=y,this.removeEmptyString=T}var x={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(s){x[s]=new V(s,0,!1,s,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(s){var a=s[0];x[a]=new V(a,1,!1,s[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(s){x[s]=new V(s,2,!1,s.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(s){x[s]=new V(s,2,!1,s,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(s){x[s]=new V(s,3,!1,s.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(s){x[s]=new V(s,3,!0,s,null,!1,!1)}),["capture","download"].forEach(function(s){x[s]=new V(s,4,!1,s,null,!1,!1)}),["cols","rows","size","span"].forEach(function(s){x[s]=new V(s,6,!1,s,null,!1,!1)}),["rowSpan","start"].forEach(function(s){x[s]=new V(s,5,!1,s.toLowerCase(),null,!1,!1)});var H=/[\-:]([a-z])/g;function Q(s){return s[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(s){var a=s.replace(H,Q);x[a]=new V(a,1,!1,s,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(s){var a=s.replace(H,Q);x[a]=new V(a,1,!1,s,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(s){var a=s.replace(H,Q);x[a]=new V(a,1,!1,s,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(s){x[s]=new V(s,1,!1,s.toLowerCase(),null,!1,!1)}),x.xlinkHref=new V("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(s){x[s]=new V(s,1,!1,s.toLowerCase(),null,!0,!0)});function Z(s,a,u,h){var m=x.hasOwnProperty(a)?x[a]:null;(m!==null?m.type!==0:h||!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(b(a,u,m,h)&&(u=null),h||m===null?w(a)&&(u===null?s.removeAttribute(a):s.setAttribute(a,""+u)):m.mustUseProperty?s[m.propertyName]=u===null?m.type===3?!1:"":u:(a=m.attributeName,h=m.attributeNamespace,u===null?s.removeAttribute(a):(m=m.type,u=m===3||m===4&&u===!0?"":""+u,h?s.setAttributeNS(h,a,u):s.setAttribute(a,u))))}var ae=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ve=Symbol.for("react.element"),he=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),D=Symbol.for("react.profiler"),M=Symbol.for("react.provider"),N=Symbol.for("react.context"),F=Symbol.for("react.forward_ref"),C=Symbol.for("react.suspense"),Ze=Symbol.for("react.suspense_list"),xt=Symbol.for("react.memo"),qt=Symbol.for("react.lazy"),it=Symbol.for("react.offscreen"),le=Symbol.iterator;function _e(s){return s===null||typeof s!="object"?null:(s=le&&s[le]||s["@@iterator"],typeof s=="function"?s:null)}var ce=Object.assign,L;function Y(s){if(L===void 0)try{throw Error()}catch(u){var a=u.stack.trim().match(/\n( *(at )?)/);L=a&&a[1]||""}return`
`+L+s}var De=!1;function ke(s,a){if(!s||De)return"";De=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(a)if(a=function(){throw Error()},Object.defineProperty(a.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(a,[])}catch(W){var h=W}Reflect.construct(s,[],a)}else{try{a.call()}catch(W){h=W}s.call(a.prototype)}else{try{throw Error()}catch(W){h=W}s()}}catch(W){if(W&&h&&typeof W.stack=="string"){for(var m=W.stack.split(`
`),y=h.stack.split(`
`),T=m.length-1,R=y.length-1;1<=T&&0<=R&&m[T]!==y[R];)R--;for(;1<=T&&0<=R;T--,R--)if(m[T]!==y[R]){if(T!==1||R!==1)do if(T--,R--,0>R||m[T]!==y[R]){var P=`
`+m[T].replace(" at new "," at ");return s.displayName&&P.includes("<anonymous>")&&(P=P.replace("<anonymous>",s.displayName)),P}while(1<=T&&0<=R);break}}}finally{De=!1,Error.prepareStackTrace=u}return(s=s?s.displayName||s.name:"")?Y(s):""}function Ne(s){switch(s.tag){case 5:return Y(s.type);case 16:return Y("Lazy");case 13:return Y("Suspense");case 19:return Y("SuspenseList");case 0:case 2:case 15:return s=ke(s.type,!1),s;case 11:return s=ke(s.type.render,!1),s;case 1:return s=ke(s.type,!0),s;default:return""}}function Oe(s){if(s==null)return null;if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case k:return"Fragment";case he:return"Portal";case D:return"Profiler";case S:return"StrictMode";case C:return"Suspense";case Ze:return"SuspenseList"}if(typeof s=="object")switch(s.$$typeof){case N:return(s.displayName||"Context")+".Consumer";case M:return(s._context.displayName||"Context")+".Provider";case F:var a=s.render;return s=s.displayName,s||(s=a.displayName||a.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case xt:return a=s.displayName||null,a!==null?a:Oe(s.type)||"Memo";case qt:a=s._payload,s=s._init;try{return Oe(s(a))}catch{}}return null}function Ge(s){var a=s.type;switch(s.tag){case 24:return"Cache";case 9:return(a.displayName||"Context")+".Consumer";case 10:return(a._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return s=a.render,s=s.displayName||s.name||"",a.displayName||(s!==""?"ForwardRef("+s+")":"ForwardRef");case 7:return"Fragment";case 5:return a;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Oe(a);case 8:return a===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a}return null}function Ue(s){switch(typeof s){case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function Je(s){var a=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function nn(s){var a=Je(s)?"checked":"value",u=Object.getOwnPropertyDescriptor(s.constructor.prototype,a),h=""+s[a];if(!s.hasOwnProperty(a)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var m=u.get,y=u.set;return Object.defineProperty(s,a,{configurable:!0,get:function(){return m.call(this)},set:function(T){h=""+T,y.call(this,T)}}),Object.defineProperty(s,a,{enumerable:u.enumerable}),{getValue:function(){return h},setValue:function(T){h=""+T},stopTracking:function(){s._valueTracker=null,delete s[a]}}}}function Do(s){s._valueTracker||(s._valueTracker=nn(s))}function ul(s){if(!s)return!1;var a=s._valueTracker;if(!a)return!0;var u=a.getValue(),h="";return s&&(h=Je(s)?s.checked?"true":"false":s.value),s=h,s!==u?(a.setValue(s),!0):!1}function ci(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}function ko(s,a){var u=a.checked;return ce({},a,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:u??s._wrapperState.initialChecked})}function fc(s,a){var u=a.defaultValue==null?"":a.defaultValue,h=a.checked!=null?a.checked:a.defaultChecked;u=Ue(a.value!=null?a.value:u),s._wrapperState={initialChecked:h,initialValue:u,controlled:a.type==="checkbox"||a.type==="radio"?a.checked!=null:a.value!=null}}function Po(s,a){a=a.checked,a!=null&&Z(s,"checked",a,!1)}function Es(s,a){Po(s,a);var u=Ue(a.value),h=a.type;if(u!=null)h==="number"?(u===0&&s.value===""||s.value!=u)&&(s.value=""+u):s.value!==""+u&&(s.value=""+u);else if(h==="submit"||h==="reset"){s.removeAttribute("value");return}a.hasOwnProperty("value")?Tt(s,a.type,u):a.hasOwnProperty("defaultValue")&&Tt(s,a.type,Ue(a.defaultValue)),a.checked==null&&a.defaultChecked!=null&&(s.defaultChecked=!!a.defaultChecked)}function cl(s,a,u){if(a.hasOwnProperty("value")||a.hasOwnProperty("defaultValue")){var h=a.type;if(!(h!=="submit"&&h!=="reset"||a.value!==void 0&&a.value!==null))return;a=""+s._wrapperState.initialValue,u||a===s.value||(s.value=a),s.defaultValue=a}u=s.name,u!==""&&(s.name=""),s.defaultChecked=!!s._wrapperState.initialChecked,u!==""&&(s.name=u)}function Tt(s,a,u){(a!=="number"||ci(s.ownerDocument)!==s)&&(u==null?s.defaultValue=""+s._wrapperState.initialValue:s.defaultValue!==""+u&&(s.defaultValue=""+u))}var yt=Array.isArray;function jn(s,a,u,h){if(s=s.options,a){a={};for(var m=0;m<u.length;m++)a["$"+u[m]]=!0;for(u=0;u<s.length;u++)m=a.hasOwnProperty("$"+s[u].value),s[u].selected!==m&&(s[u].selected=m),m&&h&&(s[u].defaultSelected=!0)}else{for(u=""+Ue(u),a=null,m=0;m<s.length;m++){if(s[m].value===u){s[m].selected=!0,h&&(s[m].defaultSelected=!0);return}a!==null||s[m].disabled||(a=s[m])}a!==null&&(a.selected=!0)}}function dl(s,a){if(a.dangerouslySetInnerHTML!=null)throw Error(t(91));return ce({},a,{value:void 0,defaultValue:void 0,children:""+s._wrapperState.initialValue})}function hl(s,a){var u=a.value;if(u==null){if(u=a.children,a=a.defaultValue,u!=null){if(a!=null)throw Error(t(92));if(yt(u)){if(1<u.length)throw Error(t(93));u=u[0]}a=u}a==null&&(a=""),u=a}s._wrapperState={initialValue:Ue(u)}}function pc(s,a){var u=Ue(a.value),h=Ue(a.defaultValue);u!=null&&(u=""+u,u!==s.value&&(s.value=u),a.defaultValue==null&&s.defaultValue!==u&&(s.defaultValue=u)),h!=null&&(s.defaultValue=""+h)}function di(s){var a=s.textContent;a===s._wrapperState.initialValue&&a!==""&&a!==null&&(s.value=a)}function fl(s){switch(s){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function xo(s,a){return s==null||s==="http://www.w3.org/1999/xhtml"?fl(a):s==="http://www.w3.org/2000/svg"&&a==="foreignObject"?"http://www.w3.org/1999/xhtml":s}var hi,mc=(function(s){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(a,u,h,m){MSApp.execUnsafeLocalFunction(function(){return s(a,u,h,m)})}:s})(function(s,a){if(s.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in s)s.innerHTML=a;else{for(hi=hi||document.createElement("div"),hi.innerHTML="<svg>"+a.valueOf().toString()+"</svg>",a=hi.firstChild;s.firstChild;)s.removeChild(s.firstChild);for(;a.firstChild;)s.appendChild(a.firstChild)}});function ws(s,a){if(a){var u=s.firstChild;if(u&&u===s.lastChild&&u.nodeType===3){u.nodeValue=a;return}}s.textContent=a}var fi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},gc=["Webkit","ms","Moz","O"];Object.keys(fi).forEach(function(s){gc.forEach(function(a){a=a+s.charAt(0).toUpperCase()+s.substring(1),fi[a]=fi[s]})});function pi(s,a,u){return a==null||typeof a=="boolean"||a===""?"":u||typeof a!="number"||a===0||fi.hasOwnProperty(s)&&fi[s]?(""+a).trim():a+"px"}function No(s,a){s=s.style;for(var u in a)if(a.hasOwnProperty(u)){var h=u.indexOf("--")===0,m=pi(u,a[u],h);u==="float"&&(u="cssFloat"),h?s.setProperty(u,m):s[u]=m}}var pl=ce({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Hn(s,a){if(a){if(pl[s]&&(a.children!=null||a.dangerouslySetInnerHTML!=null))throw Error(t(137,s));if(a.dangerouslySetInnerHTML!=null){if(a.children!=null)throw Error(t(60));if(typeof a.dangerouslySetInnerHTML!="object"||!("__html"in a.dangerouslySetInnerHTML))throw Error(t(61))}if(a.style!=null&&typeof a.style!="object")throw Error(t(62))}}function Oo(s,a){if(s.indexOf("-")===-1)return typeof a.is=="string";switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var mi=null;function Mo(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var Pr=null,xr=null,ft=null;function ml(s){if(s=jl(s)){if(typeof Pr!="function")throw Error(t(280));var a=s.stateNode;a&&(a=Hc(a),Pr(s.stateNode,s.type,a))}}function gi(s){xr?ft?ft.push(s):ft=[s]:xr=s}function yi(){if(xr){var s=xr,a=ft;if(ft=xr=null,ml(s),a)for(s=0;s<a.length;s++)ml(a[s])}}function yc(s,a){return s(a)}function vc(){}var rr=!1;function _c(s,a,u){if(rr)return s(a,u);rr=!0;try{return yc(s,a,u)}finally{rr=!1,(xr!==null||ft!==null)&&(vc(),yi())}}function Ts(s,a){var u=s.stateNode;if(u===null)return null;var h=Hc(u);if(h===null)return null;u=h[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(s=s.type,h=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!h;break e;default:s=!1}if(s)return null;if(u&&typeof u!="function")throw Error(t(231,a,typeof u));return u}var vi=!1;if(c)try{var _i={};Object.defineProperty(_i,"passive",{get:function(){vi=!0}}),window.addEventListener("test",_i,_i),window.removeEventListener("test",_i,_i)}catch{vi=!1}function Ec(s,a,u,h,m,y,T,R,P){var W=Array.prototype.slice.call(arguments,3);try{a.apply(u,W)}catch(X){this.onError(X)}}var Nr=!1,ir=null,Vo=!1,Pn=null,wc={onError:function(s){Nr=!0,ir=s}};function Tc(s,a,u,h,m,y,T,R,P){Nr=!1,ir=null,Ec.apply(wc,arguments)}function gl(s,a,u,h,m,y,T,R,P){if(Tc.apply(this,arguments),Nr){if(Nr){var W=ir;Nr=!1,ir=null}else throw Error(t(198));Vo||(Vo=!0,Pn=W)}}function Wn(s){var a=s,u=s;if(s.alternate)for(;a.return;)a=a.return;else{s=a;do a=s,(a.flags&4098)!==0&&(u=a.return),s=a.return;while(s)}return a.tag===3?u:null}function yl(s){if(s.tag===13){var a=s.memoizedState;if(a===null&&(s=s.alternate,s!==null&&(a=s.memoizedState)),a!==null)return a.dehydrated}return null}function Ac(s){if(Wn(s)!==s)throw Error(t(188))}function Ic(s){var a=s.alternate;if(!a){if(a=Wn(s),a===null)throw Error(t(188));return a!==s?null:s}for(var u=s,h=a;;){var m=u.return;if(m===null)break;var y=m.alternate;if(y===null){if(h=m.return,h!==null){u=h;continue}break}if(m.child===y.child){for(y=m.child;y;){if(y===u)return Ac(m),s;if(y===h)return Ac(m),a;y=y.sibling}throw Error(t(188))}if(u.return!==h.return)u=m,h=y;else{for(var T=!1,R=m.child;R;){if(R===u){T=!0,u=m,h=y;break}if(R===h){T=!0,h=m,u=y;break}R=R.sibling}if(!T){for(R=y.child;R;){if(R===u){T=!0,u=y,h=m;break}if(R===h){T=!0,h=y,u=m;break}R=R.sibling}if(!T)throw Error(t(189))}}if(u.alternate!==h)throw Error(t(190))}if(u.tag!==3)throw Error(t(188));return u.stateNode.current===u?s:a}function Sc(s){return s=Ic(s),s!==null?As(s):null}function As(s){if(s.tag===5||s.tag===6)return s;for(s=s.child;s!==null;){var a=As(s);if(a!==null)return a;s=s.sibling}return null}var vl=e.unstable_scheduleCallback,Lo=e.unstable_cancelCallback,Is=e.unstable_shouldYield,Or=e.unstable_requestPaint,tt=e.unstable_now,bf=e.unstable_getCurrentPriorityLevel,Fo=e.unstable_ImmediatePriority,_l=e.unstable_UserBlockingPriority,Ss=e.unstable_NormalPriority,El=e.unstable_LowPriority,Uo=e.unstable_IdlePriority,Rs=null,yn=null;function Rc(s){if(yn&&typeof yn.onCommitFiberRoot=="function")try{yn.onCommitFiberRoot(Rs,s,void 0,(s.current.flags&128)===128)}catch{}}var vn=Math.clz32?Math.clz32:Cs,sr=Math.log,xn=Math.LN2;function Cs(s){return s>>>=0,s===0?32:31-(sr(s)/xn|0)|0}var or=64,Ei=4194304;function We(s){switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return s&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return s}}function Mr(s,a){var u=s.pendingLanes;if(u===0)return 0;var h=0,m=s.suspendedLanes,y=s.pingedLanes,T=u&268435455;if(T!==0){var R=T&~m;R!==0?h=We(R):(y&=T,y!==0&&(h=We(y)))}else T=u&~m,T!==0?h=We(T):y!==0&&(h=We(y));if(h===0)return 0;if(a!==0&&a!==h&&(a&m)===0&&(m=h&-h,y=a&-a,m>=y||m===16&&(y&4194240)!==0))return a;if((h&4)!==0&&(h|=u&16),a=s.entangledLanes,a!==0)for(s=s.entanglements,a&=h;0<a;)u=31-vn(a),m=1<<u,h|=s[u],a&=~m;return h}function bs(s,a){switch(s){case 1:case 2:case 4:return a+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ds(s,a){for(var u=s.suspendedLanes,h=s.pingedLanes,m=s.expirationTimes,y=s.pendingLanes;0<y;){var T=31-vn(y),R=1<<T,P=m[T];P===-1?((R&u)===0||(R&h)!==0)&&(m[T]=bs(R,a)):P<=a&&(s.expiredLanes|=R),y&=~R}}function wl(s){return s=s.pendingLanes&-1073741825,s!==0?s:s&1073741824?1073741824:0}function Tl(){var s=or;return or<<=1,(or&4194240)===0&&(or=64),s}function Al(s){for(var a=[],u=0;31>u;u++)a.push(s);return a}function ks(s,a,u){s.pendingLanes|=a,a!==536870912&&(s.suspendedLanes=0,s.pingedLanes=0),s=s.eventTimes,a=31-vn(a),s[a]=u}function Df(s,a){var u=s.pendingLanes&~a;s.pendingLanes=a,s.suspendedLanes=0,s.pingedLanes=0,s.expiredLanes&=a,s.mutableReadLanes&=a,s.entangledLanes&=a,a=s.entanglements;var h=s.eventTimes;for(s=s.expirationTimes;0<u;){var m=31-vn(u),y=1<<m;a[m]=0,h[m]=-1,s[m]=-1,u&=~y}}function Il(s,a){var u=s.entangledLanes|=a;for(s=s.entanglements;u;){var h=31-vn(u),m=1<<h;m&a|s[h]&a&&(s[h]|=a),u&=~m}}var Le=0;function ar(s){return s&=-s,1<s?4<s?(s&268435455)!==0?16:536870912:4:1}var Sl,Bo,Rl,Cl,bl,lr=!1,zo=[],ur=null,cr=null,Ut=null,Ps=new Map,Vr=new Map,_n=[],Cc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function wi(s,a){switch(s){case"focusin":case"focusout":ur=null;break;case"dragenter":case"dragleave":cr=null;break;case"mouseover":case"mouseout":Ut=null;break;case"pointerover":case"pointerout":Ps.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Vr.delete(a.pointerId)}}function qn(s,a,u,h,m,y){return s===null||s.nativeEvent!==y?(s={blockedOn:a,domEventName:u,eventSystemFlags:h,nativeEvent:y,targetContainers:[m]},a!==null&&(a=jl(a),a!==null&&Bo(a)),s):(s.eventSystemFlags|=h,a=s.targetContainers,m!==null&&a.indexOf(m)===-1&&a.push(m),s)}function bc(s,a,u,h,m){switch(a){case"focusin":return ur=qn(ur,s,a,u,h,m),!0;case"dragenter":return cr=qn(cr,s,a,u,h,m),!0;case"mouseover":return Ut=qn(Ut,s,a,u,h,m),!0;case"pointerover":var y=m.pointerId;return Ps.set(y,qn(Ps.get(y)||null,s,a,u,h,m)),!0;case"gotpointercapture":return y=m.pointerId,Vr.set(y,qn(Vr.get(y)||null,s,a,u,h,m)),!0}return!1}function jo(s){var a=Ms(s.target);if(a!==null){var u=Wn(a);if(u!==null){if(a=u.tag,a===13){if(a=yl(u),a!==null){s.blockedOn=a,bl(s.priority,function(){Rl(u)});return}}else if(a===3&&u.stateNode.current.memoizedState.isDehydrated){s.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Xe(s){if(s.blockedOn!==null)return!1;for(var a=s.targetContainers;0<a.length;){var u=Ho(s.domEventName,s.eventSystemFlags,a[0],s.nativeEvent);if(u===null){u=s.nativeEvent;var h=new u.constructor(u.type,u);mi=h,u.target.dispatchEvent(h),mi=null}else return a=jl(u),a!==null&&Bo(a),s.blockedOn=u,!1;a.shift()}return!0}function Dc(s,a,u){Xe(s)&&u.delete(a)}function kf(){lr=!1,ur!==null&&Xe(ur)&&(ur=null),cr!==null&&Xe(cr)&&(cr=null),Ut!==null&&Xe(Ut)&&(Ut=null),Ps.forEach(Dc),Vr.forEach(Dc)}function Ti(s,a){s.blockedOn===a&&(s.blockedOn=null,lr||(lr=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,kf)))}function Ai(s){function a(m){return Ti(m,s)}if(0<zo.length){Ti(zo[0],s);for(var u=1;u<zo.length;u++){var h=zo[u];h.blockedOn===s&&(h.blockedOn=null)}}for(ur!==null&&Ti(ur,s),cr!==null&&Ti(cr,s),Ut!==null&&Ti(Ut,s),Ps.forEach(a),Vr.forEach(a),u=0;u<_n.length;u++)h=_n[u],h.blockedOn===s&&(h.blockedOn=null);for(;0<_n.length&&(u=_n[0],u.blockedOn===null);)jo(u),u.blockedOn===null&&_n.shift()}var Lr=ae.ReactCurrentBatchConfig,Fr=!0;function dr(s,a,u,h){var m=Le,y=Lr.transition;Lr.transition=null;try{Le=1,Dl(s,a,u,h)}finally{Le=m,Lr.transition=y}}function kc(s,a,u,h){var m=Le,y=Lr.transition;Lr.transition=null;try{Le=4,Dl(s,a,u,h)}finally{Le=m,Lr.transition=y}}function Dl(s,a,u,h){if(Fr){var m=Ho(s,a,u,h);if(m===null)zf(s,a,h,hr,u),wi(s,h);else if(bc(m,s,a,u,h))h.stopPropagation();else if(wi(s,h),a&4&&-1<Cc.indexOf(s)){for(;m!==null;){var y=jl(m);if(y!==null&&Sl(y),y=Ho(s,a,u,h),y===null&&zf(s,a,h,hr,u),y===m)break;m=y}m!==null&&h.stopPropagation()}else zf(s,a,h,null,u)}}var hr=null;function Ho(s,a,u,h){if(hr=null,s=Mo(h),s=Ms(s),s!==null)if(a=Wn(s),a===null)s=null;else if(u=a.tag,u===13){if(s=yl(a),s!==null)return s;s=null}else if(u===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;s=null}else a!==s&&(s=null);return hr=s,null}function Wo(s){switch(s){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(bf()){case Fo:return 1;case _l:return 4;case Ss:case El:return 16;case Uo:return 536870912;default:return 16}default:return 16}}var En=null,qo=null,Ur=null;function Pc(){if(Ur)return Ur;var s,a=qo,u=a.length,h,m="value"in En?En.value:En.textContent,y=m.length;for(s=0;s<u&&a[s]===m[s];s++);var T=u-s;for(h=1;h<=T&&a[u-h]===m[y-h];h++);return Ur=m.slice(s,1<h?1-h:void 0)}function xs(s){var a=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&a===13&&(s=13)):s=a,s===10&&(s=13),32<=s||s===13?s:0}function fr(){return!0}function kl(){return!1}function Gt(s){function a(u,h,m,y,T){this._reactName=u,this._targetInst=m,this.type=h,this.nativeEvent=y,this.target=T,this.currentTarget=null;for(var R in s)s.hasOwnProperty(R)&&(u=s[R],this[R]=u?u(y):y[R]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?fr:kl,this.isPropagationStopped=kl,this}return ce(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=fr)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=fr)},persist:function(){},isPersistent:fr}),a}var pr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ns=Gt(pr),Ii=ce({},pr,{view:0,detail:0}),Go=Gt(Ii),$o,Qo,wn,Os=ce({},Ii,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:be,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==wn&&(wn&&s.type==="mousemove"?($o=s.screenX-wn.screenX,Qo=s.screenY-wn.screenY):Qo=$o=0,wn=s),$o)},movementY:function(s){return"movementY"in s?s.movementY:Qo}}),Pl=Gt(Os),xc=ce({},Os,{dataTransfer:0}),Nc=Gt(xc),Ko=ce({},Ii,{relatedTarget:0}),Bt=Gt(Ko),Oc=ce({},pr,{animationName:0,elapsedTime:0,pseudoElement:0}),Mc=Gt(Oc),Si=ce({},pr,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),d=Gt(Si),v=ce({},pr,{data:0}),_=Gt(v),I={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},z={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},q={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ie(s){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(s):(s=q[s])?!!a[s]:!1}function be(){return ie}var vt=ce({},Ii,{key:function(s){if(s.key){var a=I[s.key]||s.key;if(a!=="Unidentified")return a}return s.type==="keypress"?(s=xs(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?z[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:be,charCode:function(s){return s.type==="keypress"?xs(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?xs(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),$e=Gt(vt),At=ce({},Os,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Tn=Gt(At),Br=ce({},Ii,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:be}),mr=Gt(Br),gr=ce({},pr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Yo=Gt(gr),xl=ce({},Os,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),YR=Gt(xl),JR=[9,13,27,32],Pf=c&&"CompositionEvent"in window,Nl=null;c&&"documentMode"in document&&(Nl=document.documentMode);var XR=c&&"TextEvent"in window&&!Nl,zy=c&&(!Pf||Nl&&8<Nl&&11>=Nl),jy=" ",Hy=!1;function Wy(s,a){switch(s){case"keyup":return JR.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function qy(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var Jo=!1;function ZR(s,a){switch(s){case"compositionend":return qy(a);case"keypress":return a.which!==32?null:(Hy=!0,jy);case"textInput":return s=a.data,s===jy&&Hy?null:s;default:return null}}function eC(s,a){if(Jo)return s==="compositionend"||!Pf&&Wy(s,a)?(s=Pc(),Ur=qo=En=null,Jo=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return zy&&a.locale!=="ko"?null:a.data;default:return null}}var tC={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gy(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a==="input"?!!tC[s.type]:a==="textarea"}function $y(s,a,u,h){gi(h),a=Bc(a,"onChange"),0<a.length&&(u=new Ns("onChange","change",null,u,h),s.push({event:u,listeners:a}))}var Ol=null,Ml=null;function nC(s){dv(s,0)}function Vc(s){var a=na(s);if(ul(a))return s}function rC(s,a){if(s==="change")return a}var Qy=!1;if(c){var xf;if(c){var Nf="oninput"in document;if(!Nf){var Ky=document.createElement("div");Ky.setAttribute("oninput","return;"),Nf=typeof Ky.oninput=="function"}xf=Nf}else xf=!1;Qy=xf&&(!document.documentMode||9<document.documentMode)}function Yy(){Ol&&(Ol.detachEvent("onpropertychange",Jy),Ml=Ol=null)}function Jy(s){if(s.propertyName==="value"&&Vc(Ml)){var a=[];$y(a,Ml,s,Mo(s)),_c(nC,a)}}function iC(s,a,u){s==="focusin"?(Yy(),Ol=a,Ml=u,Ol.attachEvent("onpropertychange",Jy)):s==="focusout"&&Yy()}function sC(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Vc(Ml)}function oC(s,a){if(s==="click")return Vc(a)}function aC(s,a){if(s==="input"||s==="change")return Vc(a)}function lC(s,a){return s===a&&(s!==0||1/s===1/a)||s!==s&&a!==a}var Gn=typeof Object.is=="function"?Object.is:lC;function Vl(s,a){if(Gn(s,a))return!0;if(typeof s!="object"||s===null||typeof a!="object"||a===null)return!1;var u=Object.keys(s),h=Object.keys(a);if(u.length!==h.length)return!1;for(h=0;h<u.length;h++){var m=u[h];if(!f.call(a,m)||!Gn(s[m],a[m]))return!1}return!0}function Xy(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function Zy(s,a){var u=Xy(s);s=0;for(var h;u;){if(u.nodeType===3){if(h=s+u.textContent.length,s<=a&&h>=a)return{node:u,offset:a-s};s=h}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=Xy(u)}}function ev(s,a){return s&&a?s===a?!0:s&&s.nodeType===3?!1:a&&a.nodeType===3?ev(s,a.parentNode):"contains"in s?s.contains(a):s.compareDocumentPosition?!!(s.compareDocumentPosition(a)&16):!1:!1}function tv(){for(var s=window,a=ci();a instanceof s.HTMLIFrameElement;){try{var u=typeof a.contentWindow.location.href=="string"}catch{u=!1}if(u)s=a.contentWindow;else break;a=ci(s.document)}return a}function Of(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a&&(a==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||a==="textarea"||s.contentEditable==="true")}function uC(s){var a=tv(),u=s.focusedElem,h=s.selectionRange;if(a!==u&&u&&u.ownerDocument&&ev(u.ownerDocument.documentElement,u)){if(h!==null&&Of(u)){if(a=h.start,s=h.end,s===void 0&&(s=a),"selectionStart"in u)u.selectionStart=a,u.selectionEnd=Math.min(s,u.value.length);else if(s=(a=u.ownerDocument||document)&&a.defaultView||window,s.getSelection){s=s.getSelection();var m=u.textContent.length,y=Math.min(h.start,m);h=h.end===void 0?y:Math.min(h.end,m),!s.extend&&y>h&&(m=h,h=y,y=m),m=Zy(u,y);var T=Zy(u,h);m&&T&&(s.rangeCount!==1||s.anchorNode!==m.node||s.anchorOffset!==m.offset||s.focusNode!==T.node||s.focusOffset!==T.offset)&&(a=a.createRange(),a.setStart(m.node,m.offset),s.removeAllRanges(),y>h?(s.addRange(a),s.extend(T.node,T.offset)):(a.setEnd(T.node,T.offset),s.addRange(a)))}}for(a=[],s=u;s=s.parentNode;)s.nodeType===1&&a.push({element:s,left:s.scrollLeft,top:s.scrollTop});for(typeof u.focus=="function"&&u.focus(),u=0;u<a.length;u++)s=a[u],s.element.scrollLeft=s.left,s.element.scrollTop=s.top}}var cC=c&&"documentMode"in document&&11>=document.documentMode,Xo=null,Mf=null,Ll=null,Vf=!1;function nv(s,a,u){var h=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;Vf||Xo==null||Xo!==ci(h)||(h=Xo,"selectionStart"in h&&Of(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),Ll&&Vl(Ll,h)||(Ll=h,h=Bc(Mf,"onSelect"),0<h.length&&(a=new Ns("onSelect","select",null,a,u),s.push({event:a,listeners:h}),a.target=Xo)))}function Lc(s,a){var u={};return u[s.toLowerCase()]=a.toLowerCase(),u["Webkit"+s]="webkit"+a,u["Moz"+s]="moz"+a,u}var Zo={animationend:Lc("Animation","AnimationEnd"),animationiteration:Lc("Animation","AnimationIteration"),animationstart:Lc("Animation","AnimationStart"),transitionend:Lc("Transition","TransitionEnd")},Lf={},rv={};c&&(rv=document.createElement("div").style,"AnimationEvent"in window||(delete Zo.animationend.animation,delete Zo.animationiteration.animation,delete Zo.animationstart.animation),"TransitionEvent"in window||delete Zo.transitionend.transition);function Fc(s){if(Lf[s])return Lf[s];if(!Zo[s])return s;var a=Zo[s],u;for(u in a)if(a.hasOwnProperty(u)&&u in rv)return Lf[s]=a[u];return s}var iv=Fc("animationend"),sv=Fc("animationiteration"),ov=Fc("animationstart"),av=Fc("transitionend"),lv=new Map,uv="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ri(s,a){lv.set(s,a),o(a,[s])}for(var Ff=0;Ff<uv.length;Ff++){var Uf=uv[Ff],dC=Uf.toLowerCase(),hC=Uf[0].toUpperCase()+Uf.slice(1);Ri(dC,"on"+hC)}Ri(iv,"onAnimationEnd"),Ri(sv,"onAnimationIteration"),Ri(ov,"onAnimationStart"),Ri("dblclick","onDoubleClick"),Ri("focusin","onFocus"),Ri("focusout","onBlur"),Ri(av,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Fl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),fC=new Set("cancel close invalid load scroll toggle".split(" ").concat(Fl));function cv(s,a,u){var h=s.type||"unknown-event";s.currentTarget=u,gl(h,a,void 0,s),s.currentTarget=null}function dv(s,a){a=(a&4)!==0;for(var u=0;u<s.length;u++){var h=s[u],m=h.event;h=h.listeners;e:{var y=void 0;if(a)for(var T=h.length-1;0<=T;T--){var R=h[T],P=R.instance,W=R.currentTarget;if(R=R.listener,P!==y&&m.isPropagationStopped())break e;cv(m,R,W),y=P}else for(T=0;T<h.length;T++){if(R=h[T],P=R.instance,W=R.currentTarget,R=R.listener,P!==y&&m.isPropagationStopped())break e;cv(m,R,W),y=P}}}if(Vo)throw s=Pn,Vo=!1,Pn=null,s}function nt(s,a){var u=a[$f];u===void 0&&(u=a[$f]=new Set);var h=s+"__bubble";u.has(h)||(hv(a,s,2,!1),u.add(h))}function Bf(s,a,u){var h=0;a&&(h|=4),hv(u,s,h,a)}var Uc="_reactListening"+Math.random().toString(36).slice(2);function Ul(s){if(!s[Uc]){s[Uc]=!0,r.forEach(function(u){u!=="selectionchange"&&(fC.has(u)||Bf(u,!1,s),Bf(u,!0,s))});var a=s.nodeType===9?s:s.ownerDocument;a===null||a[Uc]||(a[Uc]=!0,Bf("selectionchange",!1,a))}}function hv(s,a,u,h){switch(Wo(a)){case 1:var m=dr;break;case 4:m=kc;break;default:m=Dl}u=m.bind(null,a,u,s),m=void 0,!vi||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(m=!0),h?m!==void 0?s.addEventListener(a,u,{capture:!0,passive:m}):s.addEventListener(a,u,!0):m!==void 0?s.addEventListener(a,u,{passive:m}):s.addEventListener(a,u,!1)}function zf(s,a,u,h,m){var y=h;if((a&1)===0&&(a&2)===0&&h!==null)e:for(;;){if(h===null)return;var T=h.tag;if(T===3||T===4){var R=h.stateNode.containerInfo;if(R===m||R.nodeType===8&&R.parentNode===m)break;if(T===4)for(T=h.return;T!==null;){var P=T.tag;if((P===3||P===4)&&(P=T.stateNode.containerInfo,P===m||P.nodeType===8&&P.parentNode===m))return;T=T.return}for(;R!==null;){if(T=Ms(R),T===null)return;if(P=T.tag,P===5||P===6){h=y=T;continue e}R=R.parentNode}}h=h.return}_c(function(){var W=y,X=Mo(u),ee=[];e:{var J=lv.get(s);if(J!==void 0){var ue=Ns,fe=s;switch(s){case"keypress":if(xs(u)===0)break e;case"keydown":case"keyup":ue=$e;break;case"focusin":fe="focus",ue=Bt;break;case"focusout":fe="blur",ue=Bt;break;case"beforeblur":case"afterblur":ue=Bt;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ue=Pl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ue=Nc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ue=mr;break;case iv:case sv:case ov:ue=Mc;break;case av:ue=Yo;break;case"scroll":ue=Go;break;case"wheel":ue=YR;break;case"copy":case"cut":case"paste":ue=d;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ue=Tn}var me=(a&4)!==0,_t=!me&&s==="scroll",B=me?J!==null?J+"Capture":null:J;me=[];for(var O=W,j;O!==null;){j=O;var ne=j.stateNode;if(j.tag===5&&ne!==null&&(j=ne,B!==null&&(ne=Ts(O,B),ne!=null&&me.push(Bl(O,ne,j)))),_t)break;O=O.return}0<me.length&&(J=new ue(J,fe,null,u,X),ee.push({event:J,listeners:me}))}}if((a&7)===0){e:{if(J=s==="mouseover"||s==="pointerover",ue=s==="mouseout"||s==="pointerout",J&&u!==mi&&(fe=u.relatedTarget||u.fromElement)&&(Ms(fe)||fe[zr]))break e;if((ue||J)&&(J=X.window===X?X:(J=X.ownerDocument)?J.defaultView||J.parentWindow:window,ue?(fe=u.relatedTarget||u.toElement,ue=W,fe=fe?Ms(fe):null,fe!==null&&(_t=Wn(fe),fe!==_t||fe.tag!==5&&fe.tag!==6)&&(fe=null)):(ue=null,fe=W),ue!==fe)){if(me=Pl,ne="onMouseLeave",B="onMouseEnter",O="mouse",(s==="pointerout"||s==="pointerover")&&(me=Tn,ne="onPointerLeave",B="onPointerEnter",O="pointer"),_t=ue==null?J:na(ue),j=fe==null?J:na(fe),J=new me(ne,O+"leave",ue,u,X),J.target=_t,J.relatedTarget=j,ne=null,Ms(X)===W&&(me=new me(B,O+"enter",fe,u,X),me.target=j,me.relatedTarget=_t,ne=me),_t=ne,ue&&fe)t:{for(me=ue,B=fe,O=0,j=me;j;j=ea(j))O++;for(j=0,ne=B;ne;ne=ea(ne))j++;for(;0<O-j;)me=ea(me),O--;for(;0<j-O;)B=ea(B),j--;for(;O--;){if(me===B||B!==null&&me===B.alternate)break t;me=ea(me),B=ea(B)}me=null}else me=null;ue!==null&&fv(ee,J,ue,me,!1),fe!==null&&_t!==null&&fv(ee,_t,fe,me,!0)}}e:{if(J=W?na(W):window,ue=J.nodeName&&J.nodeName.toLowerCase(),ue==="select"||ue==="input"&&J.type==="file")var ge=rC;else if(Gy(J))if(Qy)ge=aC;else{ge=sC;var we=iC}else(ue=J.nodeName)&&ue.toLowerCase()==="input"&&(J.type==="checkbox"||J.type==="radio")&&(ge=oC);if(ge&&(ge=ge(s,W))){$y(ee,ge,u,X);break e}we&&we(s,J,W),s==="focusout"&&(we=J._wrapperState)&&we.controlled&&J.type==="number"&&Tt(J,"number",J.value)}switch(we=W?na(W):window,s){case"focusin":(Gy(we)||we.contentEditable==="true")&&(Xo=we,Mf=W,Ll=null);break;case"focusout":Ll=Mf=Xo=null;break;case"mousedown":Vf=!0;break;case"contextmenu":case"mouseup":case"dragend":Vf=!1,nv(ee,u,X);break;case"selectionchange":if(cC)break;case"keydown":case"keyup":nv(ee,u,X)}var Te;if(Pf)e:{switch(s){case"compositionstart":var Ie="onCompositionStart";break e;case"compositionend":Ie="onCompositionEnd";break e;case"compositionupdate":Ie="onCompositionUpdate";break e}Ie=void 0}else Jo?Wy(s,u)&&(Ie="onCompositionEnd"):s==="keydown"&&u.keyCode===229&&(Ie="onCompositionStart");Ie&&(zy&&u.locale!=="ko"&&(Jo||Ie!=="onCompositionStart"?Ie==="onCompositionEnd"&&Jo&&(Te=Pc()):(En=X,qo="value"in En?En.value:En.textContent,Jo=!0)),we=Bc(W,Ie),0<we.length&&(Ie=new _(Ie,s,null,u,X),ee.push({event:Ie,listeners:we}),Te?Ie.data=Te:(Te=qy(u),Te!==null&&(Ie.data=Te)))),(Te=XR?ZR(s,u):eC(s,u))&&(W=Bc(W,"onBeforeInput"),0<W.length&&(X=new _("onBeforeInput","beforeinput",null,u,X),ee.push({event:X,listeners:W}),X.data=Te))}dv(ee,a)})}function Bl(s,a,u){return{instance:s,listener:a,currentTarget:u}}function Bc(s,a){for(var u=a+"Capture",h=[];s!==null;){var m=s,y=m.stateNode;m.tag===5&&y!==null&&(m=y,y=Ts(s,u),y!=null&&h.unshift(Bl(s,y,m)),y=Ts(s,a),y!=null&&h.push(Bl(s,y,m))),s=s.return}return h}function ea(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5);return s||null}function fv(s,a,u,h,m){for(var y=a._reactName,T=[];u!==null&&u!==h;){var R=u,P=R.alternate,W=R.stateNode;if(P!==null&&P===h)break;R.tag===5&&W!==null&&(R=W,m?(P=Ts(u,y),P!=null&&T.unshift(Bl(u,P,R))):m||(P=Ts(u,y),P!=null&&T.push(Bl(u,P,R)))),u=u.return}T.length!==0&&s.push({event:a,listeners:T})}var pC=/\r\n?/g,mC=/\u0000|\uFFFD/g;function pv(s){return(typeof s=="string"?s:""+s).replace(pC,`
`).replace(mC,"")}function zc(s,a,u){if(a=pv(a),pv(s)!==a&&u)throw Error(t(425))}function jc(){}var jf=null,Hf=null;function Wf(s,a){return s==="textarea"||s==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var qf=typeof setTimeout=="function"?setTimeout:void 0,gC=typeof clearTimeout=="function"?clearTimeout:void 0,mv=typeof Promise=="function"?Promise:void 0,yC=typeof queueMicrotask=="function"?queueMicrotask:typeof mv<"u"?function(s){return mv.resolve(null).then(s).catch(vC)}:qf;function vC(s){setTimeout(function(){throw s})}function Gf(s,a){var u=a,h=0;do{var m=u.nextSibling;if(s.removeChild(u),m&&m.nodeType===8)if(u=m.data,u==="/$"){if(h===0){s.removeChild(m),Ai(a);return}h--}else u!=="$"&&u!=="$?"&&u!=="$!"||h++;u=m}while(u);Ai(a)}function Ci(s){for(;s!=null;s=s.nextSibling){var a=s.nodeType;if(a===1||a===3)break;if(a===8){if(a=s.data,a==="$"||a==="$!"||a==="$?")break;if(a==="/$")return null}}return s}function gv(s){s=s.previousSibling;for(var a=0;s;){if(s.nodeType===8){var u=s.data;if(u==="$"||u==="$!"||u==="$?"){if(a===0)return s;a--}else u==="/$"&&a++}s=s.previousSibling}return null}var ta=Math.random().toString(36).slice(2),yr="__reactFiber$"+ta,zl="__reactProps$"+ta,zr="__reactContainer$"+ta,$f="__reactEvents$"+ta,_C="__reactListeners$"+ta,EC="__reactHandles$"+ta;function Ms(s){var a=s[yr];if(a)return a;for(var u=s.parentNode;u;){if(a=u[zr]||u[yr]){if(u=a.alternate,a.child!==null||u!==null&&u.child!==null)for(s=gv(s);s!==null;){if(u=s[yr])return u;s=gv(s)}return a}s=u,u=s.parentNode}return null}function jl(s){return s=s[yr]||s[zr],!s||s.tag!==5&&s.tag!==6&&s.tag!==13&&s.tag!==3?null:s}function na(s){if(s.tag===5||s.tag===6)return s.stateNode;throw Error(t(33))}function Hc(s){return s[zl]||null}var Qf=[],ra=-1;function bi(s){return{current:s}}function rt(s){0>ra||(s.current=Qf[ra],Qf[ra]=null,ra--)}function et(s,a){ra++,Qf[ra]=s.current,s.current=a}var Di={},$t=bi(Di),un=bi(!1),Vs=Di;function ia(s,a){var u=s.type.contextTypes;if(!u)return Di;var h=s.stateNode;if(h&&h.__reactInternalMemoizedUnmaskedChildContext===a)return h.__reactInternalMemoizedMaskedChildContext;var m={},y;for(y in u)m[y]=a[y];return h&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=a,s.__reactInternalMemoizedMaskedChildContext=m),m}function cn(s){return s=s.childContextTypes,s!=null}function Wc(){rt(un),rt($t)}function yv(s,a,u){if($t.current!==Di)throw Error(t(168));et($t,a),et(un,u)}function vv(s,a,u){var h=s.stateNode;if(a=a.childContextTypes,typeof h.getChildContext!="function")return u;h=h.getChildContext();for(var m in h)if(!(m in a))throw Error(t(108,Ge(s)||"Unknown",m));return ce({},u,h)}function qc(s){return s=(s=s.stateNode)&&s.__reactInternalMemoizedMergedChildContext||Di,Vs=$t.current,et($t,s),et(un,un.current),!0}function _v(s,a,u){var h=s.stateNode;if(!h)throw Error(t(169));u?(s=vv(s,a,Vs),h.__reactInternalMemoizedMergedChildContext=s,rt(un),rt($t),et($t,s)):rt(un),et(un,u)}var jr=null,Gc=!1,Kf=!1;function Ev(s){jr===null?jr=[s]:jr.push(s)}function wC(s){Gc=!0,Ev(s)}function ki(){if(!Kf&&jr!==null){Kf=!0;var s=0,a=Le;try{var u=jr;for(Le=1;s<u.length;s++){var h=u[s];do h=h(!0);while(h!==null)}jr=null,Gc=!1}catch(m){throw jr!==null&&(jr=jr.slice(s+1)),vl(Fo,ki),m}finally{Le=a,Kf=!1}}return null}var sa=[],oa=0,$c=null,Qc=0,Nn=[],On=0,Ls=null,Hr=1,Wr="";function Fs(s,a){sa[oa++]=Qc,sa[oa++]=$c,$c=s,Qc=a}function wv(s,a,u){Nn[On++]=Hr,Nn[On++]=Wr,Nn[On++]=Ls,Ls=s;var h=Hr;s=Wr;var m=32-vn(h)-1;h&=~(1<<m),u+=1;var y=32-vn(a)+m;if(30<y){var T=m-m%5;y=(h&(1<<T)-1).toString(32),h>>=T,m-=T,Hr=1<<32-vn(a)+m|u<<m|h,Wr=y+s}else Hr=1<<y|u<<m|h,Wr=s}function Yf(s){s.return!==null&&(Fs(s,1),wv(s,1,0))}function Jf(s){for(;s===$c;)$c=sa[--oa],sa[oa]=null,Qc=sa[--oa],sa[oa]=null;for(;s===Ls;)Ls=Nn[--On],Nn[On]=null,Wr=Nn[--On],Nn[On]=null,Hr=Nn[--On],Nn[On]=null}var An=null,In=null,st=!1,$n=null;function Tv(s,a){var u=Fn(5,null,null,0);u.elementType="DELETED",u.stateNode=a,u.return=s,a=s.deletions,a===null?(s.deletions=[u],s.flags|=16):a.push(u)}function Av(s,a){switch(s.tag){case 5:var u=s.type;return a=a.nodeType!==1||u.toLowerCase()!==a.nodeName.toLowerCase()?null:a,a!==null?(s.stateNode=a,An=s,In=Ci(a.firstChild),!0):!1;case 6:return a=s.pendingProps===""||a.nodeType!==3?null:a,a!==null?(s.stateNode=a,An=s,In=null,!0):!1;case 13:return a=a.nodeType!==8?null:a,a!==null?(u=Ls!==null?{id:Hr,overflow:Wr}:null,s.memoizedState={dehydrated:a,treeContext:u,retryLane:1073741824},u=Fn(18,null,null,0),u.stateNode=a,u.return=s,s.child=u,An=s,In=null,!0):!1;default:return!1}}function Xf(s){return(s.mode&1)!==0&&(s.flags&128)===0}function Zf(s){if(st){var a=In;if(a){var u=a;if(!Av(s,a)){if(Xf(s))throw Error(t(418));a=Ci(u.nextSibling);var h=An;a&&Av(s,a)?Tv(h,u):(s.flags=s.flags&-4097|2,st=!1,An=s)}}else{if(Xf(s))throw Error(t(418));s.flags=s.flags&-4097|2,st=!1,An=s}}}function Iv(s){for(s=s.return;s!==null&&s.tag!==5&&s.tag!==3&&s.tag!==13;)s=s.return;An=s}function Kc(s){if(s!==An)return!1;if(!st)return Iv(s),st=!0,!1;var a;if((a=s.tag!==3)&&!(a=s.tag!==5)&&(a=s.type,a=a!=="head"&&a!=="body"&&!Wf(s.type,s.memoizedProps)),a&&(a=In)){if(Xf(s))throw Sv(),Error(t(418));for(;a;)Tv(s,a),a=Ci(a.nextSibling)}if(Iv(s),s.tag===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(t(317));e:{for(s=s.nextSibling,a=0;s;){if(s.nodeType===8){var u=s.data;if(u==="/$"){if(a===0){In=Ci(s.nextSibling);break e}a--}else u!=="$"&&u!=="$!"&&u!=="$?"||a++}s=s.nextSibling}In=null}}else In=An?Ci(s.stateNode.nextSibling):null;return!0}function Sv(){for(var s=In;s;)s=Ci(s.nextSibling)}function aa(){In=An=null,st=!1}function ep(s){$n===null?$n=[s]:$n.push(s)}var TC=ae.ReactCurrentBatchConfig;function Hl(s,a,u){if(s=u.ref,s!==null&&typeof s!="function"&&typeof s!="object"){if(u._owner){if(u=u._owner,u){if(u.tag!==1)throw Error(t(309));var h=u.stateNode}if(!h)throw Error(t(147,s));var m=h,y=""+s;return a!==null&&a.ref!==null&&typeof a.ref=="function"&&a.ref._stringRef===y?a.ref:(a=function(T){var R=m.refs;T===null?delete R[y]:R[y]=T},a._stringRef=y,a)}if(typeof s!="string")throw Error(t(284));if(!u._owner)throw Error(t(290,s))}return s}function Yc(s,a){throw s=Object.prototype.toString.call(a),Error(t(31,s==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":s))}function Rv(s){var a=s._init;return a(s._payload)}function Cv(s){function a(B,O){if(s){var j=B.deletions;j===null?(B.deletions=[O],B.flags|=16):j.push(O)}}function u(B,O){if(!s)return null;for(;O!==null;)a(B,O),O=O.sibling;return null}function h(B,O){for(B=new Map;O!==null;)O.key!==null?B.set(O.key,O):B.set(O.index,O),O=O.sibling;return B}function m(B,O){return B=Fi(B,O),B.index=0,B.sibling=null,B}function y(B,O,j){return B.index=j,s?(j=B.alternate,j!==null?(j=j.index,j<O?(B.flags|=2,O):j):(B.flags|=2,O)):(B.flags|=1048576,O)}function T(B){return s&&B.alternate===null&&(B.flags|=2),B}function R(B,O,j,ne){return O===null||O.tag!==6?(O=qp(j,B.mode,ne),O.return=B,O):(O=m(O,j),O.return=B,O)}function P(B,O,j,ne){var ge=j.type;return ge===k?X(B,O,j.props.children,ne,j.key):O!==null&&(O.elementType===ge||typeof ge=="object"&&ge!==null&&ge.$$typeof===qt&&Rv(ge)===O.type)?(ne=m(O,j.props),ne.ref=Hl(B,O,j),ne.return=B,ne):(ne=Ed(j.type,j.key,j.props,null,B.mode,ne),ne.ref=Hl(B,O,j),ne.return=B,ne)}function W(B,O,j,ne){return O===null||O.tag!==4||O.stateNode.containerInfo!==j.containerInfo||O.stateNode.implementation!==j.implementation?(O=Gp(j,B.mode,ne),O.return=B,O):(O=m(O,j.children||[]),O.return=B,O)}function X(B,O,j,ne,ge){return O===null||O.tag!==7?(O=Gs(j,B.mode,ne,ge),O.return=B,O):(O=m(O,j),O.return=B,O)}function ee(B,O,j){if(typeof O=="string"&&O!==""||typeof O=="number")return O=qp(""+O,B.mode,j),O.return=B,O;if(typeof O=="object"&&O!==null){switch(O.$$typeof){case ve:return j=Ed(O.type,O.key,O.props,null,B.mode,j),j.ref=Hl(B,null,O),j.return=B,j;case he:return O=Gp(O,B.mode,j),O.return=B,O;case qt:var ne=O._init;return ee(B,ne(O._payload),j)}if(yt(O)||_e(O))return O=Gs(O,B.mode,j,null),O.return=B,O;Yc(B,O)}return null}function J(B,O,j,ne){var ge=O!==null?O.key:null;if(typeof j=="string"&&j!==""||typeof j=="number")return ge!==null?null:R(B,O,""+j,ne);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case ve:return j.key===ge?P(B,O,j,ne):null;case he:return j.key===ge?W(B,O,j,ne):null;case qt:return ge=j._init,J(B,O,ge(j._payload),ne)}if(yt(j)||_e(j))return ge!==null?null:X(B,O,j,ne,null);Yc(B,j)}return null}function ue(B,O,j,ne,ge){if(typeof ne=="string"&&ne!==""||typeof ne=="number")return B=B.get(j)||null,R(O,B,""+ne,ge);if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case ve:return B=B.get(ne.key===null?j:ne.key)||null,P(O,B,ne,ge);case he:return B=B.get(ne.key===null?j:ne.key)||null,W(O,B,ne,ge);case qt:var we=ne._init;return ue(B,O,j,we(ne._payload),ge)}if(yt(ne)||_e(ne))return B=B.get(j)||null,X(O,B,ne,ge,null);Yc(O,ne)}return null}function fe(B,O,j,ne){for(var ge=null,we=null,Te=O,Ie=O=0,Mt=null;Te!==null&&Ie<j.length;Ie++){Te.index>Ie?(Mt=Te,Te=null):Mt=Te.sibling;var je=J(B,Te,j[Ie],ne);if(je===null){Te===null&&(Te=Mt);break}s&&Te&&je.alternate===null&&a(B,Te),O=y(je,O,Ie),we===null?ge=je:we.sibling=je,we=je,Te=Mt}if(Ie===j.length)return u(B,Te),st&&Fs(B,Ie),ge;if(Te===null){for(;Ie<j.length;Ie++)Te=ee(B,j[Ie],ne),Te!==null&&(O=y(Te,O,Ie),we===null?ge=Te:we.sibling=Te,we=Te);return st&&Fs(B,Ie),ge}for(Te=h(B,Te);Ie<j.length;Ie++)Mt=ue(Te,B,Ie,j[Ie],ne),Mt!==null&&(s&&Mt.alternate!==null&&Te.delete(Mt.key===null?Ie:Mt.key),O=y(Mt,O,Ie),we===null?ge=Mt:we.sibling=Mt,we=Mt);return s&&Te.forEach(function(Ui){return a(B,Ui)}),st&&Fs(B,Ie),ge}function me(B,O,j,ne){var ge=_e(j);if(typeof ge!="function")throw Error(t(150));if(j=ge.call(j),j==null)throw Error(t(151));for(var we=ge=null,Te=O,Ie=O=0,Mt=null,je=j.next();Te!==null&&!je.done;Ie++,je=j.next()){Te.index>Ie?(Mt=Te,Te=null):Mt=Te.sibling;var Ui=J(B,Te,je.value,ne);if(Ui===null){Te===null&&(Te=Mt);break}s&&Te&&Ui.alternate===null&&a(B,Te),O=y(Ui,O,Ie),we===null?ge=Ui:we.sibling=Ui,we=Ui,Te=Mt}if(je.done)return u(B,Te),st&&Fs(B,Ie),ge;if(Te===null){for(;!je.done;Ie++,je=j.next())je=ee(B,je.value,ne),je!==null&&(O=y(je,O,Ie),we===null?ge=je:we.sibling=je,we=je);return st&&Fs(B,Ie),ge}for(Te=h(B,Te);!je.done;Ie++,je=j.next())je=ue(Te,B,Ie,je.value,ne),je!==null&&(s&&je.alternate!==null&&Te.delete(je.key===null?Ie:je.key),O=y(je,O,Ie),we===null?ge=je:we.sibling=je,we=je);return s&&Te.forEach(function(tb){return a(B,tb)}),st&&Fs(B,Ie),ge}function _t(B,O,j,ne){if(typeof j=="object"&&j!==null&&j.type===k&&j.key===null&&(j=j.props.children),typeof j=="object"&&j!==null){switch(j.$$typeof){case ve:e:{for(var ge=j.key,we=O;we!==null;){if(we.key===ge){if(ge=j.type,ge===k){if(we.tag===7){u(B,we.sibling),O=m(we,j.props.children),O.return=B,B=O;break e}}else if(we.elementType===ge||typeof ge=="object"&&ge!==null&&ge.$$typeof===qt&&Rv(ge)===we.type){u(B,we.sibling),O=m(we,j.props),O.ref=Hl(B,we,j),O.return=B,B=O;break e}u(B,we);break}else a(B,we);we=we.sibling}j.type===k?(O=Gs(j.props.children,B.mode,ne,j.key),O.return=B,B=O):(ne=Ed(j.type,j.key,j.props,null,B.mode,ne),ne.ref=Hl(B,O,j),ne.return=B,B=ne)}return T(B);case he:e:{for(we=j.key;O!==null;){if(O.key===we)if(O.tag===4&&O.stateNode.containerInfo===j.containerInfo&&O.stateNode.implementation===j.implementation){u(B,O.sibling),O=m(O,j.children||[]),O.return=B,B=O;break e}else{u(B,O);break}else a(B,O);O=O.sibling}O=Gp(j,B.mode,ne),O.return=B,B=O}return T(B);case qt:return we=j._init,_t(B,O,we(j._payload),ne)}if(yt(j))return fe(B,O,j,ne);if(_e(j))return me(B,O,j,ne);Yc(B,j)}return typeof j=="string"&&j!==""||typeof j=="number"?(j=""+j,O!==null&&O.tag===6?(u(B,O.sibling),O=m(O,j),O.return=B,B=O):(u(B,O),O=qp(j,B.mode,ne),O.return=B,B=O),T(B)):u(B,O)}return _t}var la=Cv(!0),bv=Cv(!1),Jc=bi(null),Xc=null,ua=null,tp=null;function np(){tp=ua=Xc=null}function rp(s){var a=Jc.current;rt(Jc),s._currentValue=a}function ip(s,a,u){for(;s!==null;){var h=s.alternate;if((s.childLanes&a)!==a?(s.childLanes|=a,h!==null&&(h.childLanes|=a)):h!==null&&(h.childLanes&a)!==a&&(h.childLanes|=a),s===u)break;s=s.return}}function ca(s,a){Xc=s,tp=ua=null,s=s.dependencies,s!==null&&s.firstContext!==null&&((s.lanes&a)!==0&&(dn=!0),s.firstContext=null)}function Mn(s){var a=s._currentValue;if(tp!==s)if(s={context:s,memoizedValue:a,next:null},ua===null){if(Xc===null)throw Error(t(308));ua=s,Xc.dependencies={lanes:0,firstContext:s}}else ua=ua.next=s;return a}var Us=null;function sp(s){Us===null?Us=[s]:Us.push(s)}function Dv(s,a,u,h){var m=a.interleaved;return m===null?(u.next=u,sp(a)):(u.next=m.next,m.next=u),a.interleaved=u,qr(s,h)}function qr(s,a){s.lanes|=a;var u=s.alternate;for(u!==null&&(u.lanes|=a),u=s,s=s.return;s!==null;)s.childLanes|=a,u=s.alternate,u!==null&&(u.childLanes|=a),u=s,s=s.return;return u.tag===3?u.stateNode:null}var Pi=!1;function op(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function kv(s,a){s=s.updateQueue,a.updateQueue===s&&(a.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,effects:s.effects})}function Gr(s,a){return{eventTime:s,lane:a,tag:0,payload:null,callback:null,next:null}}function xi(s,a,u){var h=s.updateQueue;if(h===null)return null;if(h=h.shared,(Be&2)!==0){var m=h.pending;return m===null?a.next=a:(a.next=m.next,m.next=a),h.pending=a,qr(s,u)}return m=h.interleaved,m===null?(a.next=a,sp(h)):(a.next=m.next,m.next=a),h.interleaved=a,qr(s,u)}function Zc(s,a,u){if(a=a.updateQueue,a!==null&&(a=a.shared,(u&4194240)!==0)){var h=a.lanes;h&=s.pendingLanes,u|=h,a.lanes=u,Il(s,u)}}function Pv(s,a){var u=s.updateQueue,h=s.alternate;if(h!==null&&(h=h.updateQueue,u===h)){var m=null,y=null;if(u=u.firstBaseUpdate,u!==null){do{var T={eventTime:u.eventTime,lane:u.lane,tag:u.tag,payload:u.payload,callback:u.callback,next:null};y===null?m=y=T:y=y.next=T,u=u.next}while(u!==null);y===null?m=y=a:y=y.next=a}else m=y=a;u={baseState:h.baseState,firstBaseUpdate:m,lastBaseUpdate:y,shared:h.shared,effects:h.effects},s.updateQueue=u;return}s=u.lastBaseUpdate,s===null?u.firstBaseUpdate=a:s.next=a,u.lastBaseUpdate=a}function ed(s,a,u,h){var m=s.updateQueue;Pi=!1;var y=m.firstBaseUpdate,T=m.lastBaseUpdate,R=m.shared.pending;if(R!==null){m.shared.pending=null;var P=R,W=P.next;P.next=null,T===null?y=W:T.next=W,T=P;var X=s.alternate;X!==null&&(X=X.updateQueue,R=X.lastBaseUpdate,R!==T&&(R===null?X.firstBaseUpdate=W:R.next=W,X.lastBaseUpdate=P))}if(y!==null){var ee=m.baseState;T=0,X=W=P=null,R=y;do{var J=R.lane,ue=R.eventTime;if((h&J)===J){X!==null&&(X=X.next={eventTime:ue,lane:0,tag:R.tag,payload:R.payload,callback:R.callback,next:null});e:{var fe=s,me=R;switch(J=a,ue=u,me.tag){case 1:if(fe=me.payload,typeof fe=="function"){ee=fe.call(ue,ee,J);break e}ee=fe;break e;case 3:fe.flags=fe.flags&-65537|128;case 0:if(fe=me.payload,J=typeof fe=="function"?fe.call(ue,ee,J):fe,J==null)break e;ee=ce({},ee,J);break e;case 2:Pi=!0}}R.callback!==null&&R.lane!==0&&(s.flags|=64,J=m.effects,J===null?m.effects=[R]:J.push(R))}else ue={eventTime:ue,lane:J,tag:R.tag,payload:R.payload,callback:R.callback,next:null},X===null?(W=X=ue,P=ee):X=X.next=ue,T|=J;if(R=R.next,R===null){if(R=m.shared.pending,R===null)break;J=R,R=J.next,J.next=null,m.lastBaseUpdate=J,m.shared.pending=null}}while(!0);if(X===null&&(P=ee),m.baseState=P,m.firstBaseUpdate=W,m.lastBaseUpdate=X,a=m.shared.interleaved,a!==null){m=a;do T|=m.lane,m=m.next;while(m!==a)}else y===null&&(m.shared.lanes=0);js|=T,s.lanes=T,s.memoizedState=ee}}function xv(s,a,u){if(s=a.effects,a.effects=null,s!==null)for(a=0;a<s.length;a++){var h=s[a],m=h.callback;if(m!==null){if(h.callback=null,h=u,typeof m!="function")throw Error(t(191,m));m.call(h)}}}var Wl={},vr=bi(Wl),ql=bi(Wl),Gl=bi(Wl);function Bs(s){if(s===Wl)throw Error(t(174));return s}function ap(s,a){switch(et(Gl,a),et(ql,s),et(vr,Wl),s=a.nodeType,s){case 9:case 11:a=(a=a.documentElement)?a.namespaceURI:xo(null,"");break;default:s=s===8?a.parentNode:a,a=s.namespaceURI||null,s=s.tagName,a=xo(a,s)}rt(vr),et(vr,a)}function da(){rt(vr),rt(ql),rt(Gl)}function Nv(s){Bs(Gl.current);var a=Bs(vr.current),u=xo(a,s.type);a!==u&&(et(ql,s),et(vr,u))}function lp(s){ql.current===s&&(rt(vr),rt(ql))}var ut=bi(0);function td(s){for(var a=s;a!==null;){if(a.tag===13){var u=a.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||u.data==="$?"||u.data==="$!"))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var up=[];function cp(){for(var s=0;s<up.length;s++)up[s]._workInProgressVersionPrimary=null;up.length=0}var nd=ae.ReactCurrentDispatcher,dp=ae.ReactCurrentBatchConfig,zs=0,ct=null,Ct=null,Nt=null,rd=!1,$l=!1,Ql=0,AC=0;function Qt(){throw Error(t(321))}function hp(s,a){if(a===null)return!1;for(var u=0;u<a.length&&u<s.length;u++)if(!Gn(s[u],a[u]))return!1;return!0}function fp(s,a,u,h,m,y){if(zs=y,ct=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,nd.current=s===null||s.memoizedState===null?CC:bC,s=u(h,m),$l){y=0;do{if($l=!1,Ql=0,25<=y)throw Error(t(301));y+=1,Nt=Ct=null,a.updateQueue=null,nd.current=DC,s=u(h,m)}while($l)}if(nd.current=od,a=Ct!==null&&Ct.next!==null,zs=0,Nt=Ct=ct=null,rd=!1,a)throw Error(t(300));return s}function pp(){var s=Ql!==0;return Ql=0,s}function _r(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Nt===null?ct.memoizedState=Nt=s:Nt=Nt.next=s,Nt}function Vn(){if(Ct===null){var s=ct.alternate;s=s!==null?s.memoizedState:null}else s=Ct.next;var a=Nt===null?ct.memoizedState:Nt.next;if(a!==null)Nt=a,Ct=s;else{if(s===null)throw Error(t(310));Ct=s,s={memoizedState:Ct.memoizedState,baseState:Ct.baseState,baseQueue:Ct.baseQueue,queue:Ct.queue,next:null},Nt===null?ct.memoizedState=Nt=s:Nt=Nt.next=s}return Nt}function Kl(s,a){return typeof a=="function"?a(s):a}function mp(s){var a=Vn(),u=a.queue;if(u===null)throw Error(t(311));u.lastRenderedReducer=s;var h=Ct,m=h.baseQueue,y=u.pending;if(y!==null){if(m!==null){var T=m.next;m.next=y.next,y.next=T}h.baseQueue=m=y,u.pending=null}if(m!==null){y=m.next,h=h.baseState;var R=T=null,P=null,W=y;do{var X=W.lane;if((zs&X)===X)P!==null&&(P=P.next={lane:0,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null}),h=W.hasEagerState?W.eagerState:s(h,W.action);else{var ee={lane:X,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null};P===null?(R=P=ee,T=h):P=P.next=ee,ct.lanes|=X,js|=X}W=W.next}while(W!==null&&W!==y);P===null?T=h:P.next=R,Gn(h,a.memoizedState)||(dn=!0),a.memoizedState=h,a.baseState=T,a.baseQueue=P,u.lastRenderedState=h}if(s=u.interleaved,s!==null){m=s;do y=m.lane,ct.lanes|=y,js|=y,m=m.next;while(m!==s)}else m===null&&(u.lanes=0);return[a.memoizedState,u.dispatch]}function gp(s){var a=Vn(),u=a.queue;if(u===null)throw Error(t(311));u.lastRenderedReducer=s;var h=u.dispatch,m=u.pending,y=a.memoizedState;if(m!==null){u.pending=null;var T=m=m.next;do y=s(y,T.action),T=T.next;while(T!==m);Gn(y,a.memoizedState)||(dn=!0),a.memoizedState=y,a.baseQueue===null&&(a.baseState=y),u.lastRenderedState=y}return[y,h]}function Ov(){}function Mv(s,a){var u=ct,h=Vn(),m=a(),y=!Gn(h.memoizedState,m);if(y&&(h.memoizedState=m,dn=!0),h=h.queue,yp(Fv.bind(null,u,h,s),[s]),h.getSnapshot!==a||y||Nt!==null&&Nt.memoizedState.tag&1){if(u.flags|=2048,Yl(9,Lv.bind(null,u,h,m,a),void 0,null),Ot===null)throw Error(t(349));(zs&30)!==0||Vv(u,a,m)}return m}function Vv(s,a,u){s.flags|=16384,s={getSnapshot:a,value:u},a=ct.updateQueue,a===null?(a={lastEffect:null,stores:null},ct.updateQueue=a,a.stores=[s]):(u=a.stores,u===null?a.stores=[s]:u.push(s))}function Lv(s,a,u,h){a.value=u,a.getSnapshot=h,Uv(a)&&Bv(s)}function Fv(s,a,u){return u(function(){Uv(a)&&Bv(s)})}function Uv(s){var a=s.getSnapshot;s=s.value;try{var u=a();return!Gn(s,u)}catch{return!0}}function Bv(s){var a=qr(s,1);a!==null&&Jn(a,s,1,-1)}function zv(s){var a=_r();return typeof s=="function"&&(s=s()),a.memoizedState=a.baseState=s,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Kl,lastRenderedState:s},a.queue=s,s=s.dispatch=RC.bind(null,ct,s),[a.memoizedState,s]}function Yl(s,a,u,h){return s={tag:s,create:a,destroy:u,deps:h,next:null},a=ct.updateQueue,a===null?(a={lastEffect:null,stores:null},ct.updateQueue=a,a.lastEffect=s.next=s):(u=a.lastEffect,u===null?a.lastEffect=s.next=s:(h=u.next,u.next=s,s.next=h,a.lastEffect=s)),s}function jv(){return Vn().memoizedState}function id(s,a,u,h){var m=_r();ct.flags|=s,m.memoizedState=Yl(1|a,u,void 0,h===void 0?null:h)}function sd(s,a,u,h){var m=Vn();h=h===void 0?null:h;var y=void 0;if(Ct!==null){var T=Ct.memoizedState;if(y=T.destroy,h!==null&&hp(h,T.deps)){m.memoizedState=Yl(a,u,y,h);return}}ct.flags|=s,m.memoizedState=Yl(1|a,u,y,h)}function Hv(s,a){return id(8390656,8,s,a)}function yp(s,a){return sd(2048,8,s,a)}function Wv(s,a){return sd(4,2,s,a)}function qv(s,a){return sd(4,4,s,a)}function Gv(s,a){if(typeof a=="function")return s=s(),a(s),function(){a(null)};if(a!=null)return s=s(),a.current=s,function(){a.current=null}}function $v(s,a,u){return u=u!=null?u.concat([s]):null,sd(4,4,Gv.bind(null,a,s),u)}function vp(){}function Qv(s,a){var u=Vn();a=a===void 0?null:a;var h=u.memoizedState;return h!==null&&a!==null&&hp(a,h[1])?h[0]:(u.memoizedState=[s,a],s)}function Kv(s,a){var u=Vn();a=a===void 0?null:a;var h=u.memoizedState;return h!==null&&a!==null&&hp(a,h[1])?h[0]:(s=s(),u.memoizedState=[s,a],s)}function Yv(s,a,u){return(zs&21)===0?(s.baseState&&(s.baseState=!1,dn=!0),s.memoizedState=u):(Gn(u,a)||(u=Tl(),ct.lanes|=u,js|=u,s.baseState=!0),a)}function IC(s,a){var u=Le;Le=u!==0&&4>u?u:4,s(!0);var h=dp.transition;dp.transition={};try{s(!1),a()}finally{Le=u,dp.transition=h}}function Jv(){return Vn().memoizedState}function SC(s,a,u){var h=Vi(s);if(u={lane:h,action:u,hasEagerState:!1,eagerState:null,next:null},Xv(s))Zv(a,u);else if(u=Dv(s,a,u,h),u!==null){var m=sn();Jn(u,s,h,m),e_(u,a,h)}}function RC(s,a,u){var h=Vi(s),m={lane:h,action:u,hasEagerState:!1,eagerState:null,next:null};if(Xv(s))Zv(a,m);else{var y=s.alternate;if(s.lanes===0&&(y===null||y.lanes===0)&&(y=a.lastRenderedReducer,y!==null))try{var T=a.lastRenderedState,R=y(T,u);if(m.hasEagerState=!0,m.eagerState=R,Gn(R,T)){var P=a.interleaved;P===null?(m.next=m,sp(a)):(m.next=P.next,P.next=m),a.interleaved=m;return}}catch{}finally{}u=Dv(s,a,m,h),u!==null&&(m=sn(),Jn(u,s,h,m),e_(u,a,h))}}function Xv(s){var a=s.alternate;return s===ct||a!==null&&a===ct}function Zv(s,a){$l=rd=!0;var u=s.pending;u===null?a.next=a:(a.next=u.next,u.next=a),s.pending=a}function e_(s,a,u){if((u&4194240)!==0){var h=a.lanes;h&=s.pendingLanes,u|=h,a.lanes=u,Il(s,u)}}var od={readContext:Mn,useCallback:Qt,useContext:Qt,useEffect:Qt,useImperativeHandle:Qt,useInsertionEffect:Qt,useLayoutEffect:Qt,useMemo:Qt,useReducer:Qt,useRef:Qt,useState:Qt,useDebugValue:Qt,useDeferredValue:Qt,useTransition:Qt,useMutableSource:Qt,useSyncExternalStore:Qt,useId:Qt,unstable_isNewReconciler:!1},CC={readContext:Mn,useCallback:function(s,a){return _r().memoizedState=[s,a===void 0?null:a],s},useContext:Mn,useEffect:Hv,useImperativeHandle:function(s,a,u){return u=u!=null?u.concat([s]):null,id(4194308,4,Gv.bind(null,a,s),u)},useLayoutEffect:function(s,a){return id(4194308,4,s,a)},useInsertionEffect:function(s,a){return id(4,2,s,a)},useMemo:function(s,a){var u=_r();return a=a===void 0?null:a,s=s(),u.memoizedState=[s,a],s},useReducer:function(s,a,u){var h=_r();return a=u!==void 0?u(a):a,h.memoizedState=h.baseState=a,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:a},h.queue=s,s=s.dispatch=SC.bind(null,ct,s),[h.memoizedState,s]},useRef:function(s){var a=_r();return s={current:s},a.memoizedState=s},useState:zv,useDebugValue:vp,useDeferredValue:function(s){return _r().memoizedState=s},useTransition:function(){var s=zv(!1),a=s[0];return s=IC.bind(null,s[1]),_r().memoizedState=s,[a,s]},useMutableSource:function(){},useSyncExternalStore:function(s,a,u){var h=ct,m=_r();if(st){if(u===void 0)throw Error(t(407));u=u()}else{if(u=a(),Ot===null)throw Error(t(349));(zs&30)!==0||Vv(h,a,u)}m.memoizedState=u;var y={value:u,getSnapshot:a};return m.queue=y,Hv(Fv.bind(null,h,y,s),[s]),h.flags|=2048,Yl(9,Lv.bind(null,h,y,u,a),void 0,null),u},useId:function(){var s=_r(),a=Ot.identifierPrefix;if(st){var u=Wr,h=Hr;u=(h&~(1<<32-vn(h)-1)).toString(32)+u,a=":"+a+"R"+u,u=Ql++,0<u&&(a+="H"+u.toString(32)),a+=":"}else u=AC++,a=":"+a+"r"+u.toString(32)+":";return s.memoizedState=a},unstable_isNewReconciler:!1},bC={readContext:Mn,useCallback:Qv,useContext:Mn,useEffect:yp,useImperativeHandle:$v,useInsertionEffect:Wv,useLayoutEffect:qv,useMemo:Kv,useReducer:mp,useRef:jv,useState:function(){return mp(Kl)},useDebugValue:vp,useDeferredValue:function(s){var a=Vn();return Yv(a,Ct.memoizedState,s)},useTransition:function(){var s=mp(Kl)[0],a=Vn().memoizedState;return[s,a]},useMutableSource:Ov,useSyncExternalStore:Mv,useId:Jv,unstable_isNewReconciler:!1},DC={readContext:Mn,useCallback:Qv,useContext:Mn,useEffect:yp,useImperativeHandle:$v,useInsertionEffect:Wv,useLayoutEffect:qv,useMemo:Kv,useReducer:gp,useRef:jv,useState:function(){return gp(Kl)},useDebugValue:vp,useDeferredValue:function(s){var a=Vn();return Ct===null?a.memoizedState=s:Yv(a,Ct.memoizedState,s)},useTransition:function(){var s=gp(Kl)[0],a=Vn().memoizedState;return[s,a]},useMutableSource:Ov,useSyncExternalStore:Mv,useId:Jv,unstable_isNewReconciler:!1};function Qn(s,a){if(s&&s.defaultProps){a=ce({},a),s=s.defaultProps;for(var u in s)a[u]===void 0&&(a[u]=s[u]);return a}return a}function _p(s,a,u,h){a=s.memoizedState,u=u(h,a),u=u==null?a:ce({},a,u),s.memoizedState=u,s.lanes===0&&(s.updateQueue.baseState=u)}var ad={isMounted:function(s){return(s=s._reactInternals)?Wn(s)===s:!1},enqueueSetState:function(s,a,u){s=s._reactInternals;var h=sn(),m=Vi(s),y=Gr(h,m);y.payload=a,u!=null&&(y.callback=u),a=xi(s,y,m),a!==null&&(Jn(a,s,m,h),Zc(a,s,m))},enqueueReplaceState:function(s,a,u){s=s._reactInternals;var h=sn(),m=Vi(s),y=Gr(h,m);y.tag=1,y.payload=a,u!=null&&(y.callback=u),a=xi(s,y,m),a!==null&&(Jn(a,s,m,h),Zc(a,s,m))},enqueueForceUpdate:function(s,a){s=s._reactInternals;var u=sn(),h=Vi(s),m=Gr(u,h);m.tag=2,a!=null&&(m.callback=a),a=xi(s,m,h),a!==null&&(Jn(a,s,h,u),Zc(a,s,h))}};function t_(s,a,u,h,m,y,T){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(h,y,T):a.prototype&&a.prototype.isPureReactComponent?!Vl(u,h)||!Vl(m,y):!0}function n_(s,a,u){var h=!1,m=Di,y=a.contextType;return typeof y=="object"&&y!==null?y=Mn(y):(m=cn(a)?Vs:$t.current,h=a.contextTypes,y=(h=h!=null)?ia(s,m):Di),a=new a(u,y),s.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,a.updater=ad,s.stateNode=a,a._reactInternals=s,h&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=m,s.__reactInternalMemoizedMaskedChildContext=y),a}function r_(s,a,u,h){s=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(u,h),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(u,h),a.state!==s&&ad.enqueueReplaceState(a,a.state,null)}function Ep(s,a,u,h){var m=s.stateNode;m.props=u,m.state=s.memoizedState,m.refs={},op(s);var y=a.contextType;typeof y=="object"&&y!==null?m.context=Mn(y):(y=cn(a)?Vs:$t.current,m.context=ia(s,y)),m.state=s.memoizedState,y=a.getDerivedStateFromProps,typeof y=="function"&&(_p(s,a,y,u),m.state=s.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(a=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),a!==m.state&&ad.enqueueReplaceState(m,m.state,null),ed(s,u,m,h),m.state=s.memoizedState),typeof m.componentDidMount=="function"&&(s.flags|=4194308)}function ha(s,a){try{var u="",h=a;do u+=Ne(h),h=h.return;while(h);var m=u}catch(y){m=`
Error generating stack: `+y.message+`
`+y.stack}return{value:s,source:a,stack:m,digest:null}}function wp(s,a,u){return{value:s,source:null,stack:u??null,digest:a??null}}function Tp(s,a){try{console.error(a.value)}catch(u){setTimeout(function(){throw u})}}var kC=typeof WeakMap=="function"?WeakMap:Map;function i_(s,a,u){u=Gr(-1,u),u.tag=3,u.payload={element:null};var h=a.value;return u.callback=function(){pd||(pd=!0,Lp=h),Tp(s,a)},u}function s_(s,a,u){u=Gr(-1,u),u.tag=3;var h=s.type.getDerivedStateFromError;if(typeof h=="function"){var m=a.value;u.payload=function(){return h(m)},u.callback=function(){Tp(s,a)}}var y=s.stateNode;return y!==null&&typeof y.componentDidCatch=="function"&&(u.callback=function(){Tp(s,a),typeof h!="function"&&(Oi===null?Oi=new Set([this]):Oi.add(this));var T=a.stack;this.componentDidCatch(a.value,{componentStack:T!==null?T:""})}),u}function o_(s,a,u){var h=s.pingCache;if(h===null){h=s.pingCache=new kC;var m=new Set;h.set(a,m)}else m=h.get(a),m===void 0&&(m=new Set,h.set(a,m));m.has(u)||(m.add(u),s=WC.bind(null,s,a,u),a.then(s,s))}function a_(s){do{var a;if((a=s.tag===13)&&(a=s.memoizedState,a=a!==null?a.dehydrated!==null:!0),a)return s;s=s.return}while(s!==null);return null}function l_(s,a,u,h,m){return(s.mode&1)===0?(s===a?s.flags|=65536:(s.flags|=128,u.flags|=131072,u.flags&=-52805,u.tag===1&&(u.alternate===null?u.tag=17:(a=Gr(-1,1),a.tag=2,xi(u,a,1))),u.lanes|=1),s):(s.flags|=65536,s.lanes=m,s)}var PC=ae.ReactCurrentOwner,dn=!1;function rn(s,a,u,h){a.child=s===null?bv(a,null,u,h):la(a,s.child,u,h)}function u_(s,a,u,h,m){u=u.render;var y=a.ref;return ca(a,m),h=fp(s,a,u,h,y,m),u=pp(),s!==null&&!dn?(a.updateQueue=s.updateQueue,a.flags&=-2053,s.lanes&=~m,$r(s,a,m)):(st&&u&&Yf(a),a.flags|=1,rn(s,a,h,m),a.child)}function c_(s,a,u,h,m){if(s===null){var y=u.type;return typeof y=="function"&&!Wp(y)&&y.defaultProps===void 0&&u.compare===null&&u.defaultProps===void 0?(a.tag=15,a.type=y,d_(s,a,y,h,m)):(s=Ed(u.type,null,h,a,a.mode,m),s.ref=a.ref,s.return=a,a.child=s)}if(y=s.child,(s.lanes&m)===0){var T=y.memoizedProps;if(u=u.compare,u=u!==null?u:Vl,u(T,h)&&s.ref===a.ref)return $r(s,a,m)}return a.flags|=1,s=Fi(y,h),s.ref=a.ref,s.return=a,a.child=s}function d_(s,a,u,h,m){if(s!==null){var y=s.memoizedProps;if(Vl(y,h)&&s.ref===a.ref)if(dn=!1,a.pendingProps=h=y,(s.lanes&m)!==0)(s.flags&131072)!==0&&(dn=!0);else return a.lanes=s.lanes,$r(s,a,m)}return Ap(s,a,u,h,m)}function h_(s,a,u){var h=a.pendingProps,m=h.children,y=s!==null?s.memoizedState:null;if(h.mode==="hidden")if((a.mode&1)===0)a.memoizedState={baseLanes:0,cachePool:null,transitions:null},et(pa,Sn),Sn|=u;else{if((u&1073741824)===0)return s=y!==null?y.baseLanes|u:u,a.lanes=a.childLanes=1073741824,a.memoizedState={baseLanes:s,cachePool:null,transitions:null},a.updateQueue=null,et(pa,Sn),Sn|=s,null;a.memoizedState={baseLanes:0,cachePool:null,transitions:null},h=y!==null?y.baseLanes:u,et(pa,Sn),Sn|=h}else y!==null?(h=y.baseLanes|u,a.memoizedState=null):h=u,et(pa,Sn),Sn|=h;return rn(s,a,m,u),a.child}function f_(s,a){var u=a.ref;(s===null&&u!==null||s!==null&&s.ref!==u)&&(a.flags|=512,a.flags|=2097152)}function Ap(s,a,u,h,m){var y=cn(u)?Vs:$t.current;return y=ia(a,y),ca(a,m),u=fp(s,a,u,h,y,m),h=pp(),s!==null&&!dn?(a.updateQueue=s.updateQueue,a.flags&=-2053,s.lanes&=~m,$r(s,a,m)):(st&&h&&Yf(a),a.flags|=1,rn(s,a,u,m),a.child)}function p_(s,a,u,h,m){if(cn(u)){var y=!0;qc(a)}else y=!1;if(ca(a,m),a.stateNode===null)ud(s,a),n_(a,u,h),Ep(a,u,h,m),h=!0;else if(s===null){var T=a.stateNode,R=a.memoizedProps;T.props=R;var P=T.context,W=u.contextType;typeof W=="object"&&W!==null?W=Mn(W):(W=cn(u)?Vs:$t.current,W=ia(a,W));var X=u.getDerivedStateFromProps,ee=typeof X=="function"||typeof T.getSnapshotBeforeUpdate=="function";ee||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(R!==h||P!==W)&&r_(a,T,h,W),Pi=!1;var J=a.memoizedState;T.state=J,ed(a,h,T,m),P=a.memoizedState,R!==h||J!==P||un.current||Pi?(typeof X=="function"&&(_p(a,u,X,h),P=a.memoizedState),(R=Pi||t_(a,u,R,h,J,P,W))?(ee||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount()),typeof T.componentDidMount=="function"&&(a.flags|=4194308)):(typeof T.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=h,a.memoizedState=P),T.props=h,T.state=P,T.context=W,h=R):(typeof T.componentDidMount=="function"&&(a.flags|=4194308),h=!1)}else{T=a.stateNode,kv(s,a),R=a.memoizedProps,W=a.type===a.elementType?R:Qn(a.type,R),T.props=W,ee=a.pendingProps,J=T.context,P=u.contextType,typeof P=="object"&&P!==null?P=Mn(P):(P=cn(u)?Vs:$t.current,P=ia(a,P));var ue=u.getDerivedStateFromProps;(X=typeof ue=="function"||typeof T.getSnapshotBeforeUpdate=="function")||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(R!==ee||J!==P)&&r_(a,T,h,P),Pi=!1,J=a.memoizedState,T.state=J,ed(a,h,T,m);var fe=a.memoizedState;R!==ee||J!==fe||un.current||Pi?(typeof ue=="function"&&(_p(a,u,ue,h),fe=a.memoizedState),(W=Pi||t_(a,u,W,h,J,fe,P)||!1)?(X||typeof T.UNSAFE_componentWillUpdate!="function"&&typeof T.componentWillUpdate!="function"||(typeof T.componentWillUpdate=="function"&&T.componentWillUpdate(h,fe,P),typeof T.UNSAFE_componentWillUpdate=="function"&&T.UNSAFE_componentWillUpdate(h,fe,P)),typeof T.componentDidUpdate=="function"&&(a.flags|=4),typeof T.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof T.componentDidUpdate!="function"||R===s.memoizedProps&&J===s.memoizedState||(a.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||R===s.memoizedProps&&J===s.memoizedState||(a.flags|=1024),a.memoizedProps=h,a.memoizedState=fe),T.props=h,T.state=fe,T.context=P,h=W):(typeof T.componentDidUpdate!="function"||R===s.memoizedProps&&J===s.memoizedState||(a.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||R===s.memoizedProps&&J===s.memoizedState||(a.flags|=1024),h=!1)}return Ip(s,a,u,h,y,m)}function Ip(s,a,u,h,m,y){f_(s,a);var T=(a.flags&128)!==0;if(!h&&!T)return m&&_v(a,u,!1),$r(s,a,y);h=a.stateNode,PC.current=a;var R=T&&typeof u.getDerivedStateFromError!="function"?null:h.render();return a.flags|=1,s!==null&&T?(a.child=la(a,s.child,null,y),a.child=la(a,null,R,y)):rn(s,a,R,y),a.memoizedState=h.state,m&&_v(a,u,!0),a.child}function m_(s){var a=s.stateNode;a.pendingContext?yv(s,a.pendingContext,a.pendingContext!==a.context):a.context&&yv(s,a.context,!1),ap(s,a.containerInfo)}function g_(s,a,u,h,m){return aa(),ep(m),a.flags|=256,rn(s,a,u,h),a.child}var Sp={dehydrated:null,treeContext:null,retryLane:0};function Rp(s){return{baseLanes:s,cachePool:null,transitions:null}}function y_(s,a,u){var h=a.pendingProps,m=ut.current,y=!1,T=(a.flags&128)!==0,R;if((R=T)||(R=s!==null&&s.memoizedState===null?!1:(m&2)!==0),R?(y=!0,a.flags&=-129):(s===null||s.memoizedState!==null)&&(m|=1),et(ut,m&1),s===null)return Zf(a),s=a.memoizedState,s!==null&&(s=s.dehydrated,s!==null)?((a.mode&1)===0?a.lanes=1:s.data==="$!"?a.lanes=8:a.lanes=1073741824,null):(T=h.children,s=h.fallback,y?(h=a.mode,y=a.child,T={mode:"hidden",children:T},(h&1)===0&&y!==null?(y.childLanes=0,y.pendingProps=T):y=wd(T,h,0,null),s=Gs(s,h,u,null),y.return=a,s.return=a,y.sibling=s,a.child=y,a.child.memoizedState=Rp(u),a.memoizedState=Sp,s):Cp(a,T));if(m=s.memoizedState,m!==null&&(R=m.dehydrated,R!==null))return xC(s,a,T,h,R,m,u);if(y){y=h.fallback,T=a.mode,m=s.child,R=m.sibling;var P={mode:"hidden",children:h.children};return(T&1)===0&&a.child!==m?(h=a.child,h.childLanes=0,h.pendingProps=P,a.deletions=null):(h=Fi(m,P),h.subtreeFlags=m.subtreeFlags&14680064),R!==null?y=Fi(R,y):(y=Gs(y,T,u,null),y.flags|=2),y.return=a,h.return=a,h.sibling=y,a.child=h,h=y,y=a.child,T=s.child.memoizedState,T=T===null?Rp(u):{baseLanes:T.baseLanes|u,cachePool:null,transitions:T.transitions},y.memoizedState=T,y.childLanes=s.childLanes&~u,a.memoizedState=Sp,h}return y=s.child,s=y.sibling,h=Fi(y,{mode:"visible",children:h.children}),(a.mode&1)===0&&(h.lanes=u),h.return=a,h.sibling=null,s!==null&&(u=a.deletions,u===null?(a.deletions=[s],a.flags|=16):u.push(s)),a.child=h,a.memoizedState=null,h}function Cp(s,a){return a=wd({mode:"visible",children:a},s.mode,0,null),a.return=s,s.child=a}function ld(s,a,u,h){return h!==null&&ep(h),la(a,s.child,null,u),s=Cp(a,a.pendingProps.children),s.flags|=2,a.memoizedState=null,s}function xC(s,a,u,h,m,y,T){if(u)return a.flags&256?(a.flags&=-257,h=wp(Error(t(422))),ld(s,a,T,h)):a.memoizedState!==null?(a.child=s.child,a.flags|=128,null):(y=h.fallback,m=a.mode,h=wd({mode:"visible",children:h.children},m,0,null),y=Gs(y,m,T,null),y.flags|=2,h.return=a,y.return=a,h.sibling=y,a.child=h,(a.mode&1)!==0&&la(a,s.child,null,T),a.child.memoizedState=Rp(T),a.memoizedState=Sp,y);if((a.mode&1)===0)return ld(s,a,T,null);if(m.data==="$!"){if(h=m.nextSibling&&m.nextSibling.dataset,h)var R=h.dgst;return h=R,y=Error(t(419)),h=wp(y,h,void 0),ld(s,a,T,h)}if(R=(T&s.childLanes)!==0,dn||R){if(h=Ot,h!==null){switch(T&-T){case 4:m=2;break;case 16:m=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:m=32;break;case 536870912:m=268435456;break;default:m=0}m=(m&(h.suspendedLanes|T))!==0?0:m,m!==0&&m!==y.retryLane&&(y.retryLane=m,qr(s,m),Jn(h,s,m,-1))}return Hp(),h=wp(Error(t(421))),ld(s,a,T,h)}return m.data==="$?"?(a.flags|=128,a.child=s.child,a=qC.bind(null,s),m._reactRetry=a,null):(s=y.treeContext,In=Ci(m.nextSibling),An=a,st=!0,$n=null,s!==null&&(Nn[On++]=Hr,Nn[On++]=Wr,Nn[On++]=Ls,Hr=s.id,Wr=s.overflow,Ls=a),a=Cp(a,h.children),a.flags|=4096,a)}function v_(s,a,u){s.lanes|=a;var h=s.alternate;h!==null&&(h.lanes|=a),ip(s.return,a,u)}function bp(s,a,u,h,m){var y=s.memoizedState;y===null?s.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:h,tail:u,tailMode:m}:(y.isBackwards=a,y.rendering=null,y.renderingStartTime=0,y.last=h,y.tail=u,y.tailMode=m)}function __(s,a,u){var h=a.pendingProps,m=h.revealOrder,y=h.tail;if(rn(s,a,h.children,u),h=ut.current,(h&2)!==0)h=h&1|2,a.flags|=128;else{if(s!==null&&(s.flags&128)!==0)e:for(s=a.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&v_(s,u,a);else if(s.tag===19)v_(s,u,a);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===a)break e;for(;s.sibling===null;){if(s.return===null||s.return===a)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}h&=1}if(et(ut,h),(a.mode&1)===0)a.memoizedState=null;else switch(m){case"forwards":for(u=a.child,m=null;u!==null;)s=u.alternate,s!==null&&td(s)===null&&(m=u),u=u.sibling;u=m,u===null?(m=a.child,a.child=null):(m=u.sibling,u.sibling=null),bp(a,!1,m,u,y);break;case"backwards":for(u=null,m=a.child,a.child=null;m!==null;){if(s=m.alternate,s!==null&&td(s)===null){a.child=m;break}s=m.sibling,m.sibling=u,u=m,m=s}bp(a,!0,u,null,y);break;case"together":bp(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function ud(s,a){(a.mode&1)===0&&s!==null&&(s.alternate=null,a.alternate=null,a.flags|=2)}function $r(s,a,u){if(s!==null&&(a.dependencies=s.dependencies),js|=a.lanes,(u&a.childLanes)===0)return null;if(s!==null&&a.child!==s.child)throw Error(t(153));if(a.child!==null){for(s=a.child,u=Fi(s,s.pendingProps),a.child=u,u.return=a;s.sibling!==null;)s=s.sibling,u=u.sibling=Fi(s,s.pendingProps),u.return=a;u.sibling=null}return a.child}function NC(s,a,u){switch(a.tag){case 3:m_(a),aa();break;case 5:Nv(a);break;case 1:cn(a.type)&&qc(a);break;case 4:ap(a,a.stateNode.containerInfo);break;case 10:var h=a.type._context,m=a.memoizedProps.value;et(Jc,h._currentValue),h._currentValue=m;break;case 13:if(h=a.memoizedState,h!==null)return h.dehydrated!==null?(et(ut,ut.current&1),a.flags|=128,null):(u&a.child.childLanes)!==0?y_(s,a,u):(et(ut,ut.current&1),s=$r(s,a,u),s!==null?s.sibling:null);et(ut,ut.current&1);break;case 19:if(h=(u&a.childLanes)!==0,(s.flags&128)!==0){if(h)return __(s,a,u);a.flags|=128}if(m=a.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),et(ut,ut.current),h)break;return null;case 22:case 23:return a.lanes=0,h_(s,a,u)}return $r(s,a,u)}var E_,Dp,w_,T_;E_=function(s,a){for(var u=a.child;u!==null;){if(u.tag===5||u.tag===6)s.appendChild(u.stateNode);else if(u.tag!==4&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===a)break;for(;u.sibling===null;){if(u.return===null||u.return===a)return;u=u.return}u.sibling.return=u.return,u=u.sibling}},Dp=function(){},w_=function(s,a,u,h){var m=s.memoizedProps;if(m!==h){s=a.stateNode,Bs(vr.current);var y=null;switch(u){case"input":m=ko(s,m),h=ko(s,h),y=[];break;case"select":m=ce({},m,{value:void 0}),h=ce({},h,{value:void 0}),y=[];break;case"textarea":m=dl(s,m),h=dl(s,h),y=[];break;default:typeof m.onClick!="function"&&typeof h.onClick=="function"&&(s.onclick=jc)}Hn(u,h);var T;u=null;for(W in m)if(!h.hasOwnProperty(W)&&m.hasOwnProperty(W)&&m[W]!=null)if(W==="style"){var R=m[W];for(T in R)R.hasOwnProperty(T)&&(u||(u={}),u[T]="")}else W!=="dangerouslySetInnerHTML"&&W!=="children"&&W!=="suppressContentEditableWarning"&&W!=="suppressHydrationWarning"&&W!=="autoFocus"&&(i.hasOwnProperty(W)?y||(y=[]):(y=y||[]).push(W,null));for(W in h){var P=h[W];if(R=m?.[W],h.hasOwnProperty(W)&&P!==R&&(P!=null||R!=null))if(W==="style")if(R){for(T in R)!R.hasOwnProperty(T)||P&&P.hasOwnProperty(T)||(u||(u={}),u[T]="");for(T in P)P.hasOwnProperty(T)&&R[T]!==P[T]&&(u||(u={}),u[T]=P[T])}else u||(y||(y=[]),y.push(W,u)),u=P;else W==="dangerouslySetInnerHTML"?(P=P?P.__html:void 0,R=R?R.__html:void 0,P!=null&&R!==P&&(y=y||[]).push(W,P)):W==="children"?typeof P!="string"&&typeof P!="number"||(y=y||[]).push(W,""+P):W!=="suppressContentEditableWarning"&&W!=="suppressHydrationWarning"&&(i.hasOwnProperty(W)?(P!=null&&W==="onScroll"&&nt("scroll",s),y||R===P||(y=[])):(y=y||[]).push(W,P))}u&&(y=y||[]).push("style",u);var W=y;(a.updateQueue=W)&&(a.flags|=4)}},T_=function(s,a,u,h){u!==h&&(a.flags|=4)};function Jl(s,a){if(!st)switch(s.tailMode){case"hidden":a=s.tail;for(var u=null;a!==null;)a.alternate!==null&&(u=a),a=a.sibling;u===null?s.tail=null:u.sibling=null;break;case"collapsed":u=s.tail;for(var h=null;u!==null;)u.alternate!==null&&(h=u),u=u.sibling;h===null?a||s.tail===null?s.tail=null:s.tail.sibling=null:h.sibling=null}}function Kt(s){var a=s.alternate!==null&&s.alternate.child===s.child,u=0,h=0;if(a)for(var m=s.child;m!==null;)u|=m.lanes|m.childLanes,h|=m.subtreeFlags&14680064,h|=m.flags&14680064,m.return=s,m=m.sibling;else for(m=s.child;m!==null;)u|=m.lanes|m.childLanes,h|=m.subtreeFlags,h|=m.flags,m.return=s,m=m.sibling;return s.subtreeFlags|=h,s.childLanes=u,a}function OC(s,a,u){var h=a.pendingProps;switch(Jf(a),a.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Kt(a),null;case 1:return cn(a.type)&&Wc(),Kt(a),null;case 3:return h=a.stateNode,da(),rt(un),rt($t),cp(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(s===null||s.child===null)&&(Kc(a)?a.flags|=4:s===null||s.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,$n!==null&&(Bp($n),$n=null))),Dp(s,a),Kt(a),null;case 5:lp(a);var m=Bs(Gl.current);if(u=a.type,s!==null&&a.stateNode!=null)w_(s,a,u,h,m),s.ref!==a.ref&&(a.flags|=512,a.flags|=2097152);else{if(!h){if(a.stateNode===null)throw Error(t(166));return Kt(a),null}if(s=Bs(vr.current),Kc(a)){h=a.stateNode,u=a.type;var y=a.memoizedProps;switch(h[yr]=a,h[zl]=y,s=(a.mode&1)!==0,u){case"dialog":nt("cancel",h),nt("close",h);break;case"iframe":case"object":case"embed":nt("load",h);break;case"video":case"audio":for(m=0;m<Fl.length;m++)nt(Fl[m],h);break;case"source":nt("error",h);break;case"img":case"image":case"link":nt("error",h),nt("load",h);break;case"details":nt("toggle",h);break;case"input":fc(h,y),nt("invalid",h);break;case"select":h._wrapperState={wasMultiple:!!y.multiple},nt("invalid",h);break;case"textarea":hl(h,y),nt("invalid",h)}Hn(u,y),m=null;for(var T in y)if(y.hasOwnProperty(T)){var R=y[T];T==="children"?typeof R=="string"?h.textContent!==R&&(y.suppressHydrationWarning!==!0&&zc(h.textContent,R,s),m=["children",R]):typeof R=="number"&&h.textContent!==""+R&&(y.suppressHydrationWarning!==!0&&zc(h.textContent,R,s),m=["children",""+R]):i.hasOwnProperty(T)&&R!=null&&T==="onScroll"&&nt("scroll",h)}switch(u){case"input":Do(h),cl(h,y,!0);break;case"textarea":Do(h),di(h);break;case"select":case"option":break;default:typeof y.onClick=="function"&&(h.onclick=jc)}h=m,a.updateQueue=h,h!==null&&(a.flags|=4)}else{T=m.nodeType===9?m:m.ownerDocument,s==="http://www.w3.org/1999/xhtml"&&(s=fl(u)),s==="http://www.w3.org/1999/xhtml"?u==="script"?(s=T.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild)):typeof h.is=="string"?s=T.createElement(u,{is:h.is}):(s=T.createElement(u),u==="select"&&(T=s,h.multiple?T.multiple=!0:h.size&&(T.size=h.size))):s=T.createElementNS(s,u),s[yr]=a,s[zl]=h,E_(s,a,!1,!1),a.stateNode=s;e:{switch(T=Oo(u,h),u){case"dialog":nt("cancel",s),nt("close",s),m=h;break;case"iframe":case"object":case"embed":nt("load",s),m=h;break;case"video":case"audio":for(m=0;m<Fl.length;m++)nt(Fl[m],s);m=h;break;case"source":nt("error",s),m=h;break;case"img":case"image":case"link":nt("error",s),nt("load",s),m=h;break;case"details":nt("toggle",s),m=h;break;case"input":fc(s,h),m=ko(s,h),nt("invalid",s);break;case"option":m=h;break;case"select":s._wrapperState={wasMultiple:!!h.multiple},m=ce({},h,{value:void 0}),nt("invalid",s);break;case"textarea":hl(s,h),m=dl(s,h),nt("invalid",s);break;default:m=h}Hn(u,m),R=m;for(y in R)if(R.hasOwnProperty(y)){var P=R[y];y==="style"?No(s,P):y==="dangerouslySetInnerHTML"?(P=P?P.__html:void 0,P!=null&&mc(s,P)):y==="children"?typeof P=="string"?(u!=="textarea"||P!=="")&&ws(s,P):typeof P=="number"&&ws(s,""+P):y!=="suppressContentEditableWarning"&&y!=="suppressHydrationWarning"&&y!=="autoFocus"&&(i.hasOwnProperty(y)?P!=null&&y==="onScroll"&&nt("scroll",s):P!=null&&Z(s,y,P,T))}switch(u){case"input":Do(s),cl(s,h,!1);break;case"textarea":Do(s),di(s);break;case"option":h.value!=null&&s.setAttribute("value",""+Ue(h.value));break;case"select":s.multiple=!!h.multiple,y=h.value,y!=null?jn(s,!!h.multiple,y,!1):h.defaultValue!=null&&jn(s,!!h.multiple,h.defaultValue,!0);break;default:typeof m.onClick=="function"&&(s.onclick=jc)}switch(u){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break e;case"img":h=!0;break e;default:h=!1}}h&&(a.flags|=4)}a.ref!==null&&(a.flags|=512,a.flags|=2097152)}return Kt(a),null;case 6:if(s&&a.stateNode!=null)T_(s,a,s.memoizedProps,h);else{if(typeof h!="string"&&a.stateNode===null)throw Error(t(166));if(u=Bs(Gl.current),Bs(vr.current),Kc(a)){if(h=a.stateNode,u=a.memoizedProps,h[yr]=a,(y=h.nodeValue!==u)&&(s=An,s!==null))switch(s.tag){case 3:zc(h.nodeValue,u,(s.mode&1)!==0);break;case 5:s.memoizedProps.suppressHydrationWarning!==!0&&zc(h.nodeValue,u,(s.mode&1)!==0)}y&&(a.flags|=4)}else h=(u.nodeType===9?u:u.ownerDocument).createTextNode(h),h[yr]=a,a.stateNode=h}return Kt(a),null;case 13:if(rt(ut),h=a.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(st&&In!==null&&(a.mode&1)!==0&&(a.flags&128)===0)Sv(),aa(),a.flags|=98560,y=!1;else if(y=Kc(a),h!==null&&h.dehydrated!==null){if(s===null){if(!y)throw Error(t(318));if(y=a.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(t(317));y[yr]=a}else aa(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Kt(a),y=!1}else $n!==null&&(Bp($n),$n=null),y=!0;if(!y)return a.flags&65536?a:null}return(a.flags&128)!==0?(a.lanes=u,a):(h=h!==null,h!==(s!==null&&s.memoizedState!==null)&&h&&(a.child.flags|=8192,(a.mode&1)!==0&&(s===null||(ut.current&1)!==0?bt===0&&(bt=3):Hp())),a.updateQueue!==null&&(a.flags|=4),Kt(a),null);case 4:return da(),Dp(s,a),s===null&&Ul(a.stateNode.containerInfo),Kt(a),null;case 10:return rp(a.type._context),Kt(a),null;case 17:return cn(a.type)&&Wc(),Kt(a),null;case 19:if(rt(ut),y=a.memoizedState,y===null)return Kt(a),null;if(h=(a.flags&128)!==0,T=y.rendering,T===null)if(h)Jl(y,!1);else{if(bt!==0||s!==null&&(s.flags&128)!==0)for(s=a.child;s!==null;){if(T=td(s),T!==null){for(a.flags|=128,Jl(y,!1),h=T.updateQueue,h!==null&&(a.updateQueue=h,a.flags|=4),a.subtreeFlags=0,h=u,u=a.child;u!==null;)y=u,s=h,y.flags&=14680066,T=y.alternate,T===null?(y.childLanes=0,y.lanes=s,y.child=null,y.subtreeFlags=0,y.memoizedProps=null,y.memoizedState=null,y.updateQueue=null,y.dependencies=null,y.stateNode=null):(y.childLanes=T.childLanes,y.lanes=T.lanes,y.child=T.child,y.subtreeFlags=0,y.deletions=null,y.memoizedProps=T.memoizedProps,y.memoizedState=T.memoizedState,y.updateQueue=T.updateQueue,y.type=T.type,s=T.dependencies,y.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),u=u.sibling;return et(ut,ut.current&1|2),a.child}s=s.sibling}y.tail!==null&&tt()>ma&&(a.flags|=128,h=!0,Jl(y,!1),a.lanes=4194304)}else{if(!h)if(s=td(T),s!==null){if(a.flags|=128,h=!0,u=s.updateQueue,u!==null&&(a.updateQueue=u,a.flags|=4),Jl(y,!0),y.tail===null&&y.tailMode==="hidden"&&!T.alternate&&!st)return Kt(a),null}else 2*tt()-y.renderingStartTime>ma&&u!==1073741824&&(a.flags|=128,h=!0,Jl(y,!1),a.lanes=4194304);y.isBackwards?(T.sibling=a.child,a.child=T):(u=y.last,u!==null?u.sibling=T:a.child=T,y.last=T)}return y.tail!==null?(a=y.tail,y.rendering=a,y.tail=a.sibling,y.renderingStartTime=tt(),a.sibling=null,u=ut.current,et(ut,h?u&1|2:u&1),a):(Kt(a),null);case 22:case 23:return jp(),h=a.memoizedState!==null,s!==null&&s.memoizedState!==null!==h&&(a.flags|=8192),h&&(a.mode&1)!==0?(Sn&1073741824)!==0&&(Kt(a),a.subtreeFlags&6&&(a.flags|=8192)):Kt(a),null;case 24:return null;case 25:return null}throw Error(t(156,a.tag))}function MC(s,a){switch(Jf(a),a.tag){case 1:return cn(a.type)&&Wc(),s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 3:return da(),rt(un),rt($t),cp(),s=a.flags,(s&65536)!==0&&(s&128)===0?(a.flags=s&-65537|128,a):null;case 5:return lp(a),null;case 13:if(rt(ut),s=a.memoizedState,s!==null&&s.dehydrated!==null){if(a.alternate===null)throw Error(t(340));aa()}return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 19:return rt(ut),null;case 4:return da(),null;case 10:return rp(a.type._context),null;case 22:case 23:return jp(),null;case 24:return null;default:return null}}var cd=!1,Yt=!1,VC=typeof WeakSet=="function"?WeakSet:Set,de=null;function fa(s,a){var u=s.ref;if(u!==null)if(typeof u=="function")try{u(null)}catch(h){pt(s,a,h)}else u.current=null}function kp(s,a,u){try{u()}catch(h){pt(s,a,h)}}var A_=!1;function LC(s,a){if(jf=Fr,s=tv(),Of(s)){if("selectionStart"in s)var u={start:s.selectionStart,end:s.selectionEnd};else e:{u=(u=s.ownerDocument)&&u.defaultView||window;var h=u.getSelection&&u.getSelection();if(h&&h.rangeCount!==0){u=h.anchorNode;var m=h.anchorOffset,y=h.focusNode;h=h.focusOffset;try{u.nodeType,y.nodeType}catch{u=null;break e}var T=0,R=-1,P=-1,W=0,X=0,ee=s,J=null;t:for(;;){for(var ue;ee!==u||m!==0&&ee.nodeType!==3||(R=T+m),ee!==y||h!==0&&ee.nodeType!==3||(P=T+h),ee.nodeType===3&&(T+=ee.nodeValue.length),(ue=ee.firstChild)!==null;)J=ee,ee=ue;for(;;){if(ee===s)break t;if(J===u&&++W===m&&(R=T),J===y&&++X===h&&(P=T),(ue=ee.nextSibling)!==null)break;ee=J,J=ee.parentNode}ee=ue}u=R===-1||P===-1?null:{start:R,end:P}}else u=null}u=u||{start:0,end:0}}else u=null;for(Hf={focusedElem:s,selectionRange:u},Fr=!1,de=a;de!==null;)if(a=de,s=a.child,(a.subtreeFlags&1028)!==0&&s!==null)s.return=a,de=s;else for(;de!==null;){a=de;try{var fe=a.alternate;if((a.flags&1024)!==0)switch(a.tag){case 0:case 11:case 15:break;case 1:if(fe!==null){var me=fe.memoizedProps,_t=fe.memoizedState,B=a.stateNode,O=B.getSnapshotBeforeUpdate(a.elementType===a.type?me:Qn(a.type,me),_t);B.__reactInternalSnapshotBeforeUpdate=O}break;case 3:var j=a.stateNode.containerInfo;j.nodeType===1?j.textContent="":j.nodeType===9&&j.documentElement&&j.removeChild(j.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(ne){pt(a,a.return,ne)}if(s=a.sibling,s!==null){s.return=a.return,de=s;break}de=a.return}return fe=A_,A_=!1,fe}function Xl(s,a,u){var h=a.updateQueue;if(h=h!==null?h.lastEffect:null,h!==null){var m=h=h.next;do{if((m.tag&s)===s){var y=m.destroy;m.destroy=void 0,y!==void 0&&kp(a,u,y)}m=m.next}while(m!==h)}}function dd(s,a){if(a=a.updateQueue,a=a!==null?a.lastEffect:null,a!==null){var u=a=a.next;do{if((u.tag&s)===s){var h=u.create;u.destroy=h()}u=u.next}while(u!==a)}}function Pp(s){var a=s.ref;if(a!==null){var u=s.stateNode;switch(s.tag){case 5:s=u;break;default:s=u}typeof a=="function"?a(s):a.current=s}}function I_(s){var a=s.alternate;a!==null&&(s.alternate=null,I_(a)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(a=s.stateNode,a!==null&&(delete a[yr],delete a[zl],delete a[$f],delete a[_C],delete a[EC])),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}function S_(s){return s.tag===5||s.tag===3||s.tag===4}function R_(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||S_(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function xp(s,a,u){var h=s.tag;if(h===5||h===6)s=s.stateNode,a?u.nodeType===8?u.parentNode.insertBefore(s,a):u.insertBefore(s,a):(u.nodeType===8?(a=u.parentNode,a.insertBefore(s,u)):(a=u,a.appendChild(s)),u=u._reactRootContainer,u!=null||a.onclick!==null||(a.onclick=jc));else if(h!==4&&(s=s.child,s!==null))for(xp(s,a,u),s=s.sibling;s!==null;)xp(s,a,u),s=s.sibling}function Np(s,a,u){var h=s.tag;if(h===5||h===6)s=s.stateNode,a?u.insertBefore(s,a):u.appendChild(s);else if(h!==4&&(s=s.child,s!==null))for(Np(s,a,u),s=s.sibling;s!==null;)Np(s,a,u),s=s.sibling}var zt=null,Kn=!1;function Ni(s,a,u){for(u=u.child;u!==null;)C_(s,a,u),u=u.sibling}function C_(s,a,u){if(yn&&typeof yn.onCommitFiberUnmount=="function")try{yn.onCommitFiberUnmount(Rs,u)}catch{}switch(u.tag){case 5:Yt||fa(u,a);case 6:var h=zt,m=Kn;zt=null,Ni(s,a,u),zt=h,Kn=m,zt!==null&&(Kn?(s=zt,u=u.stateNode,s.nodeType===8?s.parentNode.removeChild(u):s.removeChild(u)):zt.removeChild(u.stateNode));break;case 18:zt!==null&&(Kn?(s=zt,u=u.stateNode,s.nodeType===8?Gf(s.parentNode,u):s.nodeType===1&&Gf(s,u),Ai(s)):Gf(zt,u.stateNode));break;case 4:h=zt,m=Kn,zt=u.stateNode.containerInfo,Kn=!0,Ni(s,a,u),zt=h,Kn=m;break;case 0:case 11:case 14:case 15:if(!Yt&&(h=u.updateQueue,h!==null&&(h=h.lastEffect,h!==null))){m=h=h.next;do{var y=m,T=y.destroy;y=y.tag,T!==void 0&&((y&2)!==0||(y&4)!==0)&&kp(u,a,T),m=m.next}while(m!==h)}Ni(s,a,u);break;case 1:if(!Yt&&(fa(u,a),h=u.stateNode,typeof h.componentWillUnmount=="function"))try{h.props=u.memoizedProps,h.state=u.memoizedState,h.componentWillUnmount()}catch(R){pt(u,a,R)}Ni(s,a,u);break;case 21:Ni(s,a,u);break;case 22:u.mode&1?(Yt=(h=Yt)||u.memoizedState!==null,Ni(s,a,u),Yt=h):Ni(s,a,u);break;default:Ni(s,a,u)}}function b_(s){var a=s.updateQueue;if(a!==null){s.updateQueue=null;var u=s.stateNode;u===null&&(u=s.stateNode=new VC),a.forEach(function(h){var m=GC.bind(null,s,h);u.has(h)||(u.add(h),h.then(m,m))})}}function Yn(s,a){var u=a.deletions;if(u!==null)for(var h=0;h<u.length;h++){var m=u[h];try{var y=s,T=a,R=T;e:for(;R!==null;){switch(R.tag){case 5:zt=R.stateNode,Kn=!1;break e;case 3:zt=R.stateNode.containerInfo,Kn=!0;break e;case 4:zt=R.stateNode.containerInfo,Kn=!0;break e}R=R.return}if(zt===null)throw Error(t(160));C_(y,T,m),zt=null,Kn=!1;var P=m.alternate;P!==null&&(P.return=null),m.return=null}catch(W){pt(m,a,W)}}if(a.subtreeFlags&12854)for(a=a.child;a!==null;)D_(a,s),a=a.sibling}function D_(s,a){var u=s.alternate,h=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:if(Yn(a,s),Er(s),h&4){try{Xl(3,s,s.return),dd(3,s)}catch(me){pt(s,s.return,me)}try{Xl(5,s,s.return)}catch(me){pt(s,s.return,me)}}break;case 1:Yn(a,s),Er(s),h&512&&u!==null&&fa(u,u.return);break;case 5:if(Yn(a,s),Er(s),h&512&&u!==null&&fa(u,u.return),s.flags&32){var m=s.stateNode;try{ws(m,"")}catch(me){pt(s,s.return,me)}}if(h&4&&(m=s.stateNode,m!=null)){var y=s.memoizedProps,T=u!==null?u.memoizedProps:y,R=s.type,P=s.updateQueue;if(s.updateQueue=null,P!==null)try{R==="input"&&y.type==="radio"&&y.name!=null&&Po(m,y),Oo(R,T);var W=Oo(R,y);for(T=0;T<P.length;T+=2){var X=P[T],ee=P[T+1];X==="style"?No(m,ee):X==="dangerouslySetInnerHTML"?mc(m,ee):X==="children"?ws(m,ee):Z(m,X,ee,W)}switch(R){case"input":Es(m,y);break;case"textarea":pc(m,y);break;case"select":var J=m._wrapperState.wasMultiple;m._wrapperState.wasMultiple=!!y.multiple;var ue=y.value;ue!=null?jn(m,!!y.multiple,ue,!1):J!==!!y.multiple&&(y.defaultValue!=null?jn(m,!!y.multiple,y.defaultValue,!0):jn(m,!!y.multiple,y.multiple?[]:"",!1))}m[zl]=y}catch(me){pt(s,s.return,me)}}break;case 6:if(Yn(a,s),Er(s),h&4){if(s.stateNode===null)throw Error(t(162));m=s.stateNode,y=s.memoizedProps;try{m.nodeValue=y}catch(me){pt(s,s.return,me)}}break;case 3:if(Yn(a,s),Er(s),h&4&&u!==null&&u.memoizedState.isDehydrated)try{Ai(a.containerInfo)}catch(me){pt(s,s.return,me)}break;case 4:Yn(a,s),Er(s);break;case 13:Yn(a,s),Er(s),m=s.child,m.flags&8192&&(y=m.memoizedState!==null,m.stateNode.isHidden=y,!y||m.alternate!==null&&m.alternate.memoizedState!==null||(Vp=tt())),h&4&&b_(s);break;case 22:if(X=u!==null&&u.memoizedState!==null,s.mode&1?(Yt=(W=Yt)||X,Yn(a,s),Yt=W):Yn(a,s),Er(s),h&8192){if(W=s.memoizedState!==null,(s.stateNode.isHidden=W)&&!X&&(s.mode&1)!==0)for(de=s,X=s.child;X!==null;){for(ee=de=X;de!==null;){switch(J=de,ue=J.child,J.tag){case 0:case 11:case 14:case 15:Xl(4,J,J.return);break;case 1:fa(J,J.return);var fe=J.stateNode;if(typeof fe.componentWillUnmount=="function"){h=J,u=J.return;try{a=h,fe.props=a.memoizedProps,fe.state=a.memoizedState,fe.componentWillUnmount()}catch(me){pt(h,u,me)}}break;case 5:fa(J,J.return);break;case 22:if(J.memoizedState!==null){x_(ee);continue}}ue!==null?(ue.return=J,de=ue):x_(ee)}X=X.sibling}e:for(X=null,ee=s;;){if(ee.tag===5){if(X===null){X=ee;try{m=ee.stateNode,W?(y=m.style,typeof y.setProperty=="function"?y.setProperty("display","none","important"):y.display="none"):(R=ee.stateNode,P=ee.memoizedProps.style,T=P!=null&&P.hasOwnProperty("display")?P.display:null,R.style.display=pi("display",T))}catch(me){pt(s,s.return,me)}}}else if(ee.tag===6){if(X===null)try{ee.stateNode.nodeValue=W?"":ee.memoizedProps}catch(me){pt(s,s.return,me)}}else if((ee.tag!==22&&ee.tag!==23||ee.memoizedState===null||ee===s)&&ee.child!==null){ee.child.return=ee,ee=ee.child;continue}if(ee===s)break e;for(;ee.sibling===null;){if(ee.return===null||ee.return===s)break e;X===ee&&(X=null),ee=ee.return}X===ee&&(X=null),ee.sibling.return=ee.return,ee=ee.sibling}}break;case 19:Yn(a,s),Er(s),h&4&&b_(s);break;case 21:break;default:Yn(a,s),Er(s)}}function Er(s){var a=s.flags;if(a&2){try{e:{for(var u=s.return;u!==null;){if(S_(u)){var h=u;break e}u=u.return}throw Error(t(160))}switch(h.tag){case 5:var m=h.stateNode;h.flags&32&&(ws(m,""),h.flags&=-33);var y=R_(s);Np(s,y,m);break;case 3:case 4:var T=h.stateNode.containerInfo,R=R_(s);xp(s,R,T);break;default:throw Error(t(161))}}catch(P){pt(s,s.return,P)}s.flags&=-3}a&4096&&(s.flags&=-4097)}function FC(s,a,u){de=s,k_(s)}function k_(s,a,u){for(var h=(s.mode&1)!==0;de!==null;){var m=de,y=m.child;if(m.tag===22&&h){var T=m.memoizedState!==null||cd;if(!T){var R=m.alternate,P=R!==null&&R.memoizedState!==null||Yt;R=cd;var W=Yt;if(cd=T,(Yt=P)&&!W)for(de=m;de!==null;)T=de,P=T.child,T.tag===22&&T.memoizedState!==null?N_(m):P!==null?(P.return=T,de=P):N_(m);for(;y!==null;)de=y,k_(y),y=y.sibling;de=m,cd=R,Yt=W}P_(s)}else(m.subtreeFlags&8772)!==0&&y!==null?(y.return=m,de=y):P_(s)}}function P_(s){for(;de!==null;){var a=de;if((a.flags&8772)!==0){var u=a.alternate;try{if((a.flags&8772)!==0)switch(a.tag){case 0:case 11:case 15:Yt||dd(5,a);break;case 1:var h=a.stateNode;if(a.flags&4&&!Yt)if(u===null)h.componentDidMount();else{var m=a.elementType===a.type?u.memoizedProps:Qn(a.type,u.memoizedProps);h.componentDidUpdate(m,u.memoizedState,h.__reactInternalSnapshotBeforeUpdate)}var y=a.updateQueue;y!==null&&xv(a,y,h);break;case 3:var T=a.updateQueue;if(T!==null){if(u=null,a.child!==null)switch(a.child.tag){case 5:u=a.child.stateNode;break;case 1:u=a.child.stateNode}xv(a,T,u)}break;case 5:var R=a.stateNode;if(u===null&&a.flags&4){u=R;var P=a.memoizedProps;switch(a.type){case"button":case"input":case"select":case"textarea":P.autoFocus&&u.focus();break;case"img":P.src&&(u.src=P.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(a.memoizedState===null){var W=a.alternate;if(W!==null){var X=W.memoizedState;if(X!==null){var ee=X.dehydrated;ee!==null&&Ai(ee)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Yt||a.flags&512&&Pp(a)}catch(J){pt(a,a.return,J)}}if(a===s){de=null;break}if(u=a.sibling,u!==null){u.return=a.return,de=u;break}de=a.return}}function x_(s){for(;de!==null;){var a=de;if(a===s){de=null;break}var u=a.sibling;if(u!==null){u.return=a.return,de=u;break}de=a.return}}function N_(s){for(;de!==null;){var a=de;try{switch(a.tag){case 0:case 11:case 15:var u=a.return;try{dd(4,a)}catch(P){pt(a,u,P)}break;case 1:var h=a.stateNode;if(typeof h.componentDidMount=="function"){var m=a.return;try{h.componentDidMount()}catch(P){pt(a,m,P)}}var y=a.return;try{Pp(a)}catch(P){pt(a,y,P)}break;case 5:var T=a.return;try{Pp(a)}catch(P){pt(a,T,P)}}}catch(P){pt(a,a.return,P)}if(a===s){de=null;break}var R=a.sibling;if(R!==null){R.return=a.return,de=R;break}de=a.return}}var UC=Math.ceil,hd=ae.ReactCurrentDispatcher,Op=ae.ReactCurrentOwner,Ln=ae.ReactCurrentBatchConfig,Be=0,Ot=null,It=null,jt=0,Sn=0,pa=bi(0),bt=0,Zl=null,js=0,fd=0,Mp=0,eu=null,hn=null,Vp=0,ma=1/0,Qr=null,pd=!1,Lp=null,Oi=null,md=!1,Mi=null,gd=0,tu=0,Fp=null,yd=-1,vd=0;function sn(){return(Be&6)!==0?tt():yd!==-1?yd:yd=tt()}function Vi(s){return(s.mode&1)===0?1:(Be&2)!==0&&jt!==0?jt&-jt:TC.transition!==null?(vd===0&&(vd=Tl()),vd):(s=Le,s!==0||(s=window.event,s=s===void 0?16:Wo(s.type)),s)}function Jn(s,a,u,h){if(50<tu)throw tu=0,Fp=null,Error(t(185));ks(s,u,h),((Be&2)===0||s!==Ot)&&(s===Ot&&((Be&2)===0&&(fd|=u),bt===4&&Li(s,jt)),fn(s,h),u===1&&Be===0&&(a.mode&1)===0&&(ma=tt()+500,Gc&&ki()))}function fn(s,a){var u=s.callbackNode;Ds(s,a);var h=Mr(s,s===Ot?jt:0);if(h===0)u!==null&&Lo(u),s.callbackNode=null,s.callbackPriority=0;else if(a=h&-h,s.callbackPriority!==a){if(u!=null&&Lo(u),a===1)s.tag===0?wC(M_.bind(null,s)):Ev(M_.bind(null,s)),yC(function(){(Be&6)===0&&ki()}),u=null;else{switch(ar(h)){case 1:u=Fo;break;case 4:u=_l;break;case 16:u=Ss;break;case 536870912:u=Uo;break;default:u=Ss}u=H_(u,O_.bind(null,s))}s.callbackPriority=a,s.callbackNode=u}}function O_(s,a){if(yd=-1,vd=0,(Be&6)!==0)throw Error(t(327));var u=s.callbackNode;if(ga()&&s.callbackNode!==u)return null;var h=Mr(s,s===Ot?jt:0);if(h===0)return null;if((h&30)!==0||(h&s.expiredLanes)!==0||a)a=_d(s,h);else{a=h;var m=Be;Be|=2;var y=L_();(Ot!==s||jt!==a)&&(Qr=null,ma=tt()+500,Ws(s,a));do try{jC();break}catch(R){V_(s,R)}while(!0);np(),hd.current=y,Be=m,It!==null?a=0:(Ot=null,jt=0,a=bt)}if(a!==0){if(a===2&&(m=wl(s),m!==0&&(h=m,a=Up(s,m))),a===1)throw u=Zl,Ws(s,0),Li(s,h),fn(s,tt()),u;if(a===6)Li(s,h);else{if(m=s.current.alternate,(h&30)===0&&!BC(m)&&(a=_d(s,h),a===2&&(y=wl(s),y!==0&&(h=y,a=Up(s,y))),a===1))throw u=Zl,Ws(s,0),Li(s,h),fn(s,tt()),u;switch(s.finishedWork=m,s.finishedLanes=h,a){case 0:case 1:throw Error(t(345));case 2:qs(s,hn,Qr);break;case 3:if(Li(s,h),(h&130023424)===h&&(a=Vp+500-tt(),10<a)){if(Mr(s,0)!==0)break;if(m=s.suspendedLanes,(m&h)!==h){sn(),s.pingedLanes|=s.suspendedLanes&m;break}s.timeoutHandle=qf(qs.bind(null,s,hn,Qr),a);break}qs(s,hn,Qr);break;case 4:if(Li(s,h),(h&4194240)===h)break;for(a=s.eventTimes,m=-1;0<h;){var T=31-vn(h);y=1<<T,T=a[T],T>m&&(m=T),h&=~y}if(h=m,h=tt()-h,h=(120>h?120:480>h?480:1080>h?1080:1920>h?1920:3e3>h?3e3:4320>h?4320:1960*UC(h/1960))-h,10<h){s.timeoutHandle=qf(qs.bind(null,s,hn,Qr),h);break}qs(s,hn,Qr);break;case 5:qs(s,hn,Qr);break;default:throw Error(t(329))}}}return fn(s,tt()),s.callbackNode===u?O_.bind(null,s):null}function Up(s,a){var u=eu;return s.current.memoizedState.isDehydrated&&(Ws(s,a).flags|=256),s=_d(s,a),s!==2&&(a=hn,hn=u,a!==null&&Bp(a)),s}function Bp(s){hn===null?hn=s:hn.push.apply(hn,s)}function BC(s){for(var a=s;;){if(a.flags&16384){var u=a.updateQueue;if(u!==null&&(u=u.stores,u!==null))for(var h=0;h<u.length;h++){var m=u[h],y=m.getSnapshot;m=m.value;try{if(!Gn(y(),m))return!1}catch{return!1}}}if(u=a.child,a.subtreeFlags&16384&&u!==null)u.return=a,a=u;else{if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function Li(s,a){for(a&=~Mp,a&=~fd,s.suspendedLanes|=a,s.pingedLanes&=~a,s=s.expirationTimes;0<a;){var u=31-vn(a),h=1<<u;s[u]=-1,a&=~h}}function M_(s){if((Be&6)!==0)throw Error(t(327));ga();var a=Mr(s,0);if((a&1)===0)return fn(s,tt()),null;var u=_d(s,a);if(s.tag!==0&&u===2){var h=wl(s);h!==0&&(a=h,u=Up(s,h))}if(u===1)throw u=Zl,Ws(s,0),Li(s,a),fn(s,tt()),u;if(u===6)throw Error(t(345));return s.finishedWork=s.current.alternate,s.finishedLanes=a,qs(s,hn,Qr),fn(s,tt()),null}function zp(s,a){var u=Be;Be|=1;try{return s(a)}finally{Be=u,Be===0&&(ma=tt()+500,Gc&&ki())}}function Hs(s){Mi!==null&&Mi.tag===0&&(Be&6)===0&&ga();var a=Be;Be|=1;var u=Ln.transition,h=Le;try{if(Ln.transition=null,Le=1,s)return s()}finally{Le=h,Ln.transition=u,Be=a,(Be&6)===0&&ki()}}function jp(){Sn=pa.current,rt(pa)}function Ws(s,a){s.finishedWork=null,s.finishedLanes=0;var u=s.timeoutHandle;if(u!==-1&&(s.timeoutHandle=-1,gC(u)),It!==null)for(u=It.return;u!==null;){var h=u;switch(Jf(h),h.tag){case 1:h=h.type.childContextTypes,h!=null&&Wc();break;case 3:da(),rt(un),rt($t),cp();break;case 5:lp(h);break;case 4:da();break;case 13:rt(ut);break;case 19:rt(ut);break;case 10:rp(h.type._context);break;case 22:case 23:jp()}u=u.return}if(Ot=s,It=s=Fi(s.current,null),jt=Sn=a,bt=0,Zl=null,Mp=fd=js=0,hn=eu=null,Us!==null){for(a=0;a<Us.length;a++)if(u=Us[a],h=u.interleaved,h!==null){u.interleaved=null;var m=h.next,y=u.pending;if(y!==null){var T=y.next;y.next=m,h.next=T}u.pending=h}Us=null}return s}function V_(s,a){do{var u=It;try{if(np(),nd.current=od,rd){for(var h=ct.memoizedState;h!==null;){var m=h.queue;m!==null&&(m.pending=null),h=h.next}rd=!1}if(zs=0,Nt=Ct=ct=null,$l=!1,Ql=0,Op.current=null,u===null||u.return===null){bt=1,Zl=a,It=null;break}e:{var y=s,T=u.return,R=u,P=a;if(a=jt,R.flags|=32768,P!==null&&typeof P=="object"&&typeof P.then=="function"){var W=P,X=R,ee=X.tag;if((X.mode&1)===0&&(ee===0||ee===11||ee===15)){var J=X.alternate;J?(X.updateQueue=J.updateQueue,X.memoizedState=J.memoizedState,X.lanes=J.lanes):(X.updateQueue=null,X.memoizedState=null)}var ue=a_(T);if(ue!==null){ue.flags&=-257,l_(ue,T,R,y,a),ue.mode&1&&o_(y,W,a),a=ue,P=W;var fe=a.updateQueue;if(fe===null){var me=new Set;me.add(P),a.updateQueue=me}else fe.add(P);break e}else{if((a&1)===0){o_(y,W,a),Hp();break e}P=Error(t(426))}}else if(st&&R.mode&1){var _t=a_(T);if(_t!==null){(_t.flags&65536)===0&&(_t.flags|=256),l_(_t,T,R,y,a),ep(ha(P,R));break e}}y=P=ha(P,R),bt!==4&&(bt=2),eu===null?eu=[y]:eu.push(y),y=T;do{switch(y.tag){case 3:y.flags|=65536,a&=-a,y.lanes|=a;var B=i_(y,P,a);Pv(y,B);break e;case 1:R=P;var O=y.type,j=y.stateNode;if((y.flags&128)===0&&(typeof O.getDerivedStateFromError=="function"||j!==null&&typeof j.componentDidCatch=="function"&&(Oi===null||!Oi.has(j)))){y.flags|=65536,a&=-a,y.lanes|=a;var ne=s_(y,R,a);Pv(y,ne);break e}}y=y.return}while(y!==null)}U_(u)}catch(ge){a=ge,It===u&&u!==null&&(It=u=u.return);continue}break}while(!0)}function L_(){var s=hd.current;return hd.current=od,s===null?od:s}function Hp(){(bt===0||bt===3||bt===2)&&(bt=4),Ot===null||(js&268435455)===0&&(fd&268435455)===0||Li(Ot,jt)}function _d(s,a){var u=Be;Be|=2;var h=L_();(Ot!==s||jt!==a)&&(Qr=null,Ws(s,a));do try{zC();break}catch(m){V_(s,m)}while(!0);if(np(),Be=u,hd.current=h,It!==null)throw Error(t(261));return Ot=null,jt=0,bt}function zC(){for(;It!==null;)F_(It)}function jC(){for(;It!==null&&!Is();)F_(It)}function F_(s){var a=j_(s.alternate,s,Sn);s.memoizedProps=s.pendingProps,a===null?U_(s):It=a,Op.current=null}function U_(s){var a=s;do{var u=a.alternate;if(s=a.return,(a.flags&32768)===0){if(u=OC(u,a,Sn),u!==null){It=u;return}}else{if(u=MC(u,a),u!==null){u.flags&=32767,It=u;return}if(s!==null)s.flags|=32768,s.subtreeFlags=0,s.deletions=null;else{bt=6,It=null;return}}if(a=a.sibling,a!==null){It=a;return}It=a=s}while(a!==null);bt===0&&(bt=5)}function qs(s,a,u){var h=Le,m=Ln.transition;try{Ln.transition=null,Le=1,HC(s,a,u,h)}finally{Ln.transition=m,Le=h}return null}function HC(s,a,u,h){do ga();while(Mi!==null);if((Be&6)!==0)throw Error(t(327));u=s.finishedWork;var m=s.finishedLanes;if(u===null)return null;if(s.finishedWork=null,s.finishedLanes=0,u===s.current)throw Error(t(177));s.callbackNode=null,s.callbackPriority=0;var y=u.lanes|u.childLanes;if(Df(s,y),s===Ot&&(It=Ot=null,jt=0),(u.subtreeFlags&2064)===0&&(u.flags&2064)===0||md||(md=!0,H_(Ss,function(){return ga(),null})),y=(u.flags&15990)!==0,(u.subtreeFlags&15990)!==0||y){y=Ln.transition,Ln.transition=null;var T=Le;Le=1;var R=Be;Be|=4,Op.current=null,LC(s,u),D_(u,s),uC(Hf),Fr=!!jf,Hf=jf=null,s.current=u,FC(u),Or(),Be=R,Le=T,Ln.transition=y}else s.current=u;if(md&&(md=!1,Mi=s,gd=m),y=s.pendingLanes,y===0&&(Oi=null),Rc(u.stateNode),fn(s,tt()),a!==null)for(h=s.onRecoverableError,u=0;u<a.length;u++)m=a[u],h(m.value,{componentStack:m.stack,digest:m.digest});if(pd)throw pd=!1,s=Lp,Lp=null,s;return(gd&1)!==0&&s.tag!==0&&ga(),y=s.pendingLanes,(y&1)!==0?s===Fp?tu++:(tu=0,Fp=s):tu=0,ki(),null}function ga(){if(Mi!==null){var s=ar(gd),a=Ln.transition,u=Le;try{if(Ln.transition=null,Le=16>s?16:s,Mi===null)var h=!1;else{if(s=Mi,Mi=null,gd=0,(Be&6)!==0)throw Error(t(331));var m=Be;for(Be|=4,de=s.current;de!==null;){var y=de,T=y.child;if((de.flags&16)!==0){var R=y.deletions;if(R!==null){for(var P=0;P<R.length;P++){var W=R[P];for(de=W;de!==null;){var X=de;switch(X.tag){case 0:case 11:case 15:Xl(8,X,y)}var ee=X.child;if(ee!==null)ee.return=X,de=ee;else for(;de!==null;){X=de;var J=X.sibling,ue=X.return;if(I_(X),X===W){de=null;break}if(J!==null){J.return=ue,de=J;break}de=ue}}}var fe=y.alternate;if(fe!==null){var me=fe.child;if(me!==null){fe.child=null;do{var _t=me.sibling;me.sibling=null,me=_t}while(me!==null)}}de=y}}if((y.subtreeFlags&2064)!==0&&T!==null)T.return=y,de=T;else e:for(;de!==null;){if(y=de,(y.flags&2048)!==0)switch(y.tag){case 0:case 11:case 15:Xl(9,y,y.return)}var B=y.sibling;if(B!==null){B.return=y.return,de=B;break e}de=y.return}}var O=s.current;for(de=O;de!==null;){T=de;var j=T.child;if((T.subtreeFlags&2064)!==0&&j!==null)j.return=T,de=j;else e:for(T=O;de!==null;){if(R=de,(R.flags&2048)!==0)try{switch(R.tag){case 0:case 11:case 15:dd(9,R)}}catch(ge){pt(R,R.return,ge)}if(R===T){de=null;break e}var ne=R.sibling;if(ne!==null){ne.return=R.return,de=ne;break e}de=R.return}}if(Be=m,ki(),yn&&typeof yn.onPostCommitFiberRoot=="function")try{yn.onPostCommitFiberRoot(Rs,s)}catch{}h=!0}return h}finally{Le=u,Ln.transition=a}}return!1}function B_(s,a,u){a=ha(u,a),a=i_(s,a,1),s=xi(s,a,1),a=sn(),s!==null&&(ks(s,1,a),fn(s,a))}function pt(s,a,u){if(s.tag===3)B_(s,s,u);else for(;a!==null;){if(a.tag===3){B_(a,s,u);break}else if(a.tag===1){var h=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(Oi===null||!Oi.has(h))){s=ha(u,s),s=s_(a,s,1),a=xi(a,s,1),s=sn(),a!==null&&(ks(a,1,s),fn(a,s));break}}a=a.return}}function WC(s,a,u){var h=s.pingCache;h!==null&&h.delete(a),a=sn(),s.pingedLanes|=s.suspendedLanes&u,Ot===s&&(jt&u)===u&&(bt===4||bt===3&&(jt&130023424)===jt&&500>tt()-Vp?Ws(s,0):Mp|=u),fn(s,a)}function z_(s,a){a===0&&((s.mode&1)===0?a=1:(a=Ei,Ei<<=1,(Ei&130023424)===0&&(Ei=4194304)));var u=sn();s=qr(s,a),s!==null&&(ks(s,a,u),fn(s,u))}function qC(s){var a=s.memoizedState,u=0;a!==null&&(u=a.retryLane),z_(s,u)}function GC(s,a){var u=0;switch(s.tag){case 13:var h=s.stateNode,m=s.memoizedState;m!==null&&(u=m.retryLane);break;case 19:h=s.stateNode;break;default:throw Error(t(314))}h!==null&&h.delete(a),z_(s,u)}var j_;j_=function(s,a,u){if(s!==null)if(s.memoizedProps!==a.pendingProps||un.current)dn=!0;else{if((s.lanes&u)===0&&(a.flags&128)===0)return dn=!1,NC(s,a,u);dn=(s.flags&131072)!==0}else dn=!1,st&&(a.flags&1048576)!==0&&wv(a,Qc,a.index);switch(a.lanes=0,a.tag){case 2:var h=a.type;ud(s,a),s=a.pendingProps;var m=ia(a,$t.current);ca(a,u),m=fp(null,a,h,s,m,u);var y=pp();return a.flags|=1,typeof m=="object"&&m!==null&&typeof m.render=="function"&&m.$$typeof===void 0?(a.tag=1,a.memoizedState=null,a.updateQueue=null,cn(h)?(y=!0,qc(a)):y=!1,a.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,op(a),m.updater=ad,a.stateNode=m,m._reactInternals=a,Ep(a,h,s,u),a=Ip(null,a,h,!0,y,u)):(a.tag=0,st&&y&&Yf(a),rn(null,a,m,u),a=a.child),a;case 16:h=a.elementType;e:{switch(ud(s,a),s=a.pendingProps,m=h._init,h=m(h._payload),a.type=h,m=a.tag=QC(h),s=Qn(h,s),m){case 0:a=Ap(null,a,h,s,u);break e;case 1:a=p_(null,a,h,s,u);break e;case 11:a=u_(null,a,h,s,u);break e;case 14:a=c_(null,a,h,Qn(h.type,s),u);break e}throw Error(t(306,h,""))}return a;case 0:return h=a.type,m=a.pendingProps,m=a.elementType===h?m:Qn(h,m),Ap(s,a,h,m,u);case 1:return h=a.type,m=a.pendingProps,m=a.elementType===h?m:Qn(h,m),p_(s,a,h,m,u);case 3:e:{if(m_(a),s===null)throw Error(t(387));h=a.pendingProps,y=a.memoizedState,m=y.element,kv(s,a),ed(a,h,null,u);var T=a.memoizedState;if(h=T.element,y.isDehydrated)if(y={element:h,isDehydrated:!1,cache:T.cache,pendingSuspenseBoundaries:T.pendingSuspenseBoundaries,transitions:T.transitions},a.updateQueue.baseState=y,a.memoizedState=y,a.flags&256){m=ha(Error(t(423)),a),a=g_(s,a,h,u,m);break e}else if(h!==m){m=ha(Error(t(424)),a),a=g_(s,a,h,u,m);break e}else for(In=Ci(a.stateNode.containerInfo.firstChild),An=a,st=!0,$n=null,u=bv(a,null,h,u),a.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling;else{if(aa(),h===m){a=$r(s,a,u);break e}rn(s,a,h,u)}a=a.child}return a;case 5:return Nv(a),s===null&&Zf(a),h=a.type,m=a.pendingProps,y=s!==null?s.memoizedProps:null,T=m.children,Wf(h,m)?T=null:y!==null&&Wf(h,y)&&(a.flags|=32),f_(s,a),rn(s,a,T,u),a.child;case 6:return s===null&&Zf(a),null;case 13:return y_(s,a,u);case 4:return ap(a,a.stateNode.containerInfo),h=a.pendingProps,s===null?a.child=la(a,null,h,u):rn(s,a,h,u),a.child;case 11:return h=a.type,m=a.pendingProps,m=a.elementType===h?m:Qn(h,m),u_(s,a,h,m,u);case 7:return rn(s,a,a.pendingProps,u),a.child;case 8:return rn(s,a,a.pendingProps.children,u),a.child;case 12:return rn(s,a,a.pendingProps.children,u),a.child;case 10:e:{if(h=a.type._context,m=a.pendingProps,y=a.memoizedProps,T=m.value,et(Jc,h._currentValue),h._currentValue=T,y!==null)if(Gn(y.value,T)){if(y.children===m.children&&!un.current){a=$r(s,a,u);break e}}else for(y=a.child,y!==null&&(y.return=a);y!==null;){var R=y.dependencies;if(R!==null){T=y.child;for(var P=R.firstContext;P!==null;){if(P.context===h){if(y.tag===1){P=Gr(-1,u&-u),P.tag=2;var W=y.updateQueue;if(W!==null){W=W.shared;var X=W.pending;X===null?P.next=P:(P.next=X.next,X.next=P),W.pending=P}}y.lanes|=u,P=y.alternate,P!==null&&(P.lanes|=u),ip(y.return,u,a),R.lanes|=u;break}P=P.next}}else if(y.tag===10)T=y.type===a.type?null:y.child;else if(y.tag===18){if(T=y.return,T===null)throw Error(t(341));T.lanes|=u,R=T.alternate,R!==null&&(R.lanes|=u),ip(T,u,a),T=y.sibling}else T=y.child;if(T!==null)T.return=y;else for(T=y;T!==null;){if(T===a){T=null;break}if(y=T.sibling,y!==null){y.return=T.return,T=y;break}T=T.return}y=T}rn(s,a,m.children,u),a=a.child}return a;case 9:return m=a.type,h=a.pendingProps.children,ca(a,u),m=Mn(m),h=h(m),a.flags|=1,rn(s,a,h,u),a.child;case 14:return h=a.type,m=Qn(h,a.pendingProps),m=Qn(h.type,m),c_(s,a,h,m,u);case 15:return d_(s,a,a.type,a.pendingProps,u);case 17:return h=a.type,m=a.pendingProps,m=a.elementType===h?m:Qn(h,m),ud(s,a),a.tag=1,cn(h)?(s=!0,qc(a)):s=!1,ca(a,u),n_(a,h,m),Ep(a,h,m,u),Ip(null,a,h,!0,s,u);case 19:return __(s,a,u);case 22:return h_(s,a,u)}throw Error(t(156,a.tag))};function H_(s,a){return vl(s,a)}function $C(s,a,u,h){this.tag=s,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Fn(s,a,u,h){return new $C(s,a,u,h)}function Wp(s){return s=s.prototype,!(!s||!s.isReactComponent)}function QC(s){if(typeof s=="function")return Wp(s)?1:0;if(s!=null){if(s=s.$$typeof,s===F)return 11;if(s===xt)return 14}return 2}function Fi(s,a){var u=s.alternate;return u===null?(u=Fn(s.tag,a,s.key,s.mode),u.elementType=s.elementType,u.type=s.type,u.stateNode=s.stateNode,u.alternate=s,s.alternate=u):(u.pendingProps=a,u.type=s.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=s.flags&14680064,u.childLanes=s.childLanes,u.lanes=s.lanes,u.child=s.child,u.memoizedProps=s.memoizedProps,u.memoizedState=s.memoizedState,u.updateQueue=s.updateQueue,a=s.dependencies,u.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},u.sibling=s.sibling,u.index=s.index,u.ref=s.ref,u}function Ed(s,a,u,h,m,y){var T=2;if(h=s,typeof s=="function")Wp(s)&&(T=1);else if(typeof s=="string")T=5;else e:switch(s){case k:return Gs(u.children,m,y,a);case S:T=8,m|=8;break;case D:return s=Fn(12,u,a,m|2),s.elementType=D,s.lanes=y,s;case C:return s=Fn(13,u,a,m),s.elementType=C,s.lanes=y,s;case Ze:return s=Fn(19,u,a,m),s.elementType=Ze,s.lanes=y,s;case it:return wd(u,m,y,a);default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case M:T=10;break e;case N:T=9;break e;case F:T=11;break e;case xt:T=14;break e;case qt:T=16,h=null;break e}throw Error(t(130,s==null?s:typeof s,""))}return a=Fn(T,u,a,m),a.elementType=s,a.type=h,a.lanes=y,a}function Gs(s,a,u,h){return s=Fn(7,s,h,a),s.lanes=u,s}function wd(s,a,u,h){return s=Fn(22,s,h,a),s.elementType=it,s.lanes=u,s.stateNode={isHidden:!1},s}function qp(s,a,u){return s=Fn(6,s,null,a),s.lanes=u,s}function Gp(s,a,u){return a=Fn(4,s.children!==null?s.children:[],s.key,a),a.lanes=u,a.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},a}function KC(s,a,u,h,m){this.tag=a,this.containerInfo=s,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Al(0),this.expirationTimes=Al(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Al(0),this.identifierPrefix=h,this.onRecoverableError=m,this.mutableSourceEagerHydrationData=null}function $p(s,a,u,h,m,y,T,R,P){return s=new KC(s,a,u,R,P),a===1?(a=1,y===!0&&(a|=8)):a=0,y=Fn(3,null,null,a),s.current=y,y.stateNode=s,y.memoizedState={element:h,isDehydrated:u,cache:null,transitions:null,pendingSuspenseBoundaries:null},op(y),s}function YC(s,a,u){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:he,key:h==null?null:""+h,children:s,containerInfo:a,implementation:u}}function W_(s){if(!s)return Di;s=s._reactInternals;e:{if(Wn(s)!==s||s.tag!==1)throw Error(t(170));var a=s;do{switch(a.tag){case 3:a=a.stateNode.context;break e;case 1:if(cn(a.type)){a=a.stateNode.__reactInternalMemoizedMergedChildContext;break e}}a=a.return}while(a!==null);throw Error(t(171))}if(s.tag===1){var u=s.type;if(cn(u))return vv(s,u,a)}return a}function q_(s,a,u,h,m,y,T,R,P){return s=$p(u,h,!0,s,m,y,T,R,P),s.context=W_(null),u=s.current,h=sn(),m=Vi(u),y=Gr(h,m),y.callback=a??null,xi(u,y,m),s.current.lanes=m,ks(s,m,h),fn(s,h),s}function Td(s,a,u,h){var m=a.current,y=sn(),T=Vi(m);return u=W_(u),a.context===null?a.context=u:a.pendingContext=u,a=Gr(y,T),a.payload={element:s},h=h===void 0?null:h,h!==null&&(a.callback=h),s=xi(m,a,T),s!==null&&(Jn(s,m,T,y),Zc(s,m,T)),T}function Ad(s){if(s=s.current,!s.child)return null;switch(s.child.tag){case 5:return s.child.stateNode;default:return s.child.stateNode}}function G_(s,a){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var u=s.retryLane;s.retryLane=u!==0&&u<a?u:a}}function Qp(s,a){G_(s,a),(s=s.alternate)&&G_(s,a)}function JC(){return null}var $_=typeof reportError=="function"?reportError:function(s){console.error(s)};function Kp(s){this._internalRoot=s}Id.prototype.render=Kp.prototype.render=function(s){var a=this._internalRoot;if(a===null)throw Error(t(409));Td(s,a,null,null)},Id.prototype.unmount=Kp.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var a=s.containerInfo;Hs(function(){Td(null,s,null,null)}),a[zr]=null}};function Id(s){this._internalRoot=s}Id.prototype.unstable_scheduleHydration=function(s){if(s){var a=Cl();s={blockedOn:null,target:s,priority:a};for(var u=0;u<_n.length&&a!==0&&a<_n[u].priority;u++);_n.splice(u,0,s),u===0&&jo(s)}};function Yp(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function Sd(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11&&(s.nodeType!==8||s.nodeValue!==" react-mount-point-unstable "))}function Q_(){}function XC(s,a,u,h,m){if(m){if(typeof h=="function"){var y=h;h=function(){var W=Ad(T);y.call(W)}}var T=q_(a,h,s,0,null,!1,!1,"",Q_);return s._reactRootContainer=T,s[zr]=T.current,Ul(s.nodeType===8?s.parentNode:s),Hs(),T}for(;m=s.lastChild;)s.removeChild(m);if(typeof h=="function"){var R=h;h=function(){var W=Ad(P);R.call(W)}}var P=$p(s,0,!1,null,null,!1,!1,"",Q_);return s._reactRootContainer=P,s[zr]=P.current,Ul(s.nodeType===8?s.parentNode:s),Hs(function(){Td(a,P,u,h)}),P}function Rd(s,a,u,h,m){var y=u._reactRootContainer;if(y){var T=y;if(typeof m=="function"){var R=m;m=function(){var P=Ad(T);R.call(P)}}Td(a,T,s,m)}else T=XC(u,a,s,m,h);return Ad(T)}Sl=function(s){switch(s.tag){case 3:var a=s.stateNode;if(a.current.memoizedState.isDehydrated){var u=We(a.pendingLanes);u!==0&&(Il(a,u|1),fn(a,tt()),(Be&6)===0&&(ma=tt()+500,ki()))}break;case 13:Hs(function(){var h=qr(s,1);if(h!==null){var m=sn();Jn(h,s,1,m)}}),Qp(s,1)}},Bo=function(s){if(s.tag===13){var a=qr(s,134217728);if(a!==null){var u=sn();Jn(a,s,134217728,u)}Qp(s,134217728)}},Rl=function(s){if(s.tag===13){var a=Vi(s),u=qr(s,a);if(u!==null){var h=sn();Jn(u,s,a,h)}Qp(s,a)}},Cl=function(){return Le},bl=function(s,a){var u=Le;try{return Le=s,a()}finally{Le=u}},Pr=function(s,a,u){switch(a){case"input":if(Es(s,u),a=u.name,u.type==="radio"&&a!=null){for(u=s;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll("input[name="+JSON.stringify(""+a)+'][type="radio"]'),a=0;a<u.length;a++){var h=u[a];if(h!==s&&h.form===s.form){var m=Hc(h);if(!m)throw Error(t(90));ul(h),Es(h,m)}}}break;case"textarea":pc(s,u);break;case"select":a=u.value,a!=null&&jn(s,!!u.multiple,a,!1)}},yc=zp,vc=Hs;var ZC={usingClientEntryPoint:!1,Events:[jl,na,Hc,gi,yi,zp]},nu={findFiberByHostInstance:Ms,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},eb={bundleType:nu.bundleType,version:nu.version,rendererPackageName:nu.rendererPackageName,rendererConfig:nu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ae.ReactCurrentDispatcher,findHostInstanceByFiber:function(s){return s=Sc(s),s===null?null:s.stateNode},findFiberByHostInstance:nu.findFiberByHostInstance||JC,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Cd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Cd.isDisabled&&Cd.supportsFiber)try{Rs=Cd.inject(eb),yn=Cd}catch{}}return pn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ZC,pn.createPortal=function(s,a){var u=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Yp(a))throw Error(t(200));return YC(s,a,null,u)},pn.createRoot=function(s,a){if(!Yp(s))throw Error(t(299));var u=!1,h="",m=$_;return a!=null&&(a.unstable_strictMode===!0&&(u=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onRecoverableError!==void 0&&(m=a.onRecoverableError)),a=$p(s,1,!1,null,null,u,!1,h,m),s[zr]=a.current,Ul(s.nodeType===8?s.parentNode:s),new Kp(a)},pn.findDOMNode=function(s){if(s==null)return null;if(s.nodeType===1)return s;var a=s._reactInternals;if(a===void 0)throw typeof s.render=="function"?Error(t(188)):(s=Object.keys(s).join(","),Error(t(268,s)));return s=Sc(a),s=s===null?null:s.stateNode,s},pn.flushSync=function(s){return Hs(s)},pn.hydrate=function(s,a,u){if(!Sd(a))throw Error(t(200));return Rd(null,s,a,!0,u)},pn.hydrateRoot=function(s,a,u){if(!Yp(s))throw Error(t(405));var h=u!=null&&u.hydratedSources||null,m=!1,y="",T=$_;if(u!=null&&(u.unstable_strictMode===!0&&(m=!0),u.identifierPrefix!==void 0&&(y=u.identifierPrefix),u.onRecoverableError!==void 0&&(T=u.onRecoverableError)),a=q_(a,null,s,1,u??null,m,!1,y,T),s[zr]=a.current,Ul(s),h)for(s=0;s<h.length;s++)u=h[s],m=u._getVersion,m=m(u._source),a.mutableSourceEagerHydrationData==null?a.mutableSourceEagerHydrationData=[u,m]:a.mutableSourceEagerHydrationData.push(u,m);return new Id(a)},pn.render=function(s,a,u){if(!Sd(a))throw Error(t(200));return Rd(null,s,a,!1,u)},pn.unmountComponentAtNode=function(s){if(!Sd(s))throw Error(t(40));return s._reactRootContainer?(Hs(function(){Rd(null,null,s,!1,function(){s._reactRootContainer=null,s[zr]=null})}),!0):!1},pn.unstable_batchedUpdates=zp,pn.unstable_renderSubtreeIntoContainer=function(s,a,u,h){if(!Sd(u))throw Error(t(200));if(s==null||s._reactInternals===void 0)throw Error(t(38));return Rd(s,a,u,!1,h)},pn.version="18.3.1-next-f1338f8080-20240426",pn}var nE;function rA(){if(nE)return Zp.exports;nE=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Zp.exports=lb(),Zp.exports}var rE;function ub(){if(rE)return bd;rE=1;var n=rA();return bd.createRoot=n.createRoot,bd.hydrateRoot=n.hydrateRoot,bd}var cb=ub();const db="modulepreload",hb=function(n){return"/Calendario_5/"+n},iE={},fb=function(e,t,r){let i=Promise.resolve();if(t&&t.length>0){let p=function(g){return Promise.all(g.map(E=>Promise.resolve(E).then(w=>({status:"fulfilled",value:w}),w=>({status:"rejected",reason:w}))))};var l=p;document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),f=c?.nonce||c?.getAttribute("nonce");i=p(t.map(g=>{if(g=hb(g),g in iE)return;iE[g]=!0;const E=g.endsWith(".css"),w=E?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${g}"]${w}`))return;const A=document.createElement("link");if(A.rel=E?"stylesheet":db,E||(A.as="script"),A.crossOrigin="",A.href=g,f&&A.setAttribute("nonce",f),document.head.appendChild(A),E)return new Promise((b,V)=>{A.addEventListener("load",b),A.addEventListener("error",()=>V(new Error(`Unable to preload CSS for ${g}`)))})}))}function o(c){const f=new Event("vite:preloadError",{cancelable:!0});if(f.payload=c,window.dispatchEvent(f),!f.defaultPrevented)throw c}return i.then(c=>{for(const f of c||[])f.status==="rejected"&&o(f.reason);return e().catch(o)})},pb=()=>{};var sE={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iA=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},mb=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=n[t++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){const o=n[t++],l=n[t++],c=n[t++],f=((i&7)<<18|(o&63)<<12|(l&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(f>>10)),e[r++]=String.fromCharCode(56320+(f&1023))}else{const o=n[t++],l=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|l&63)}}return e.join("")},sA={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const o=n[i],l=i+1<n.length,c=l?n[i+1]:0,f=i+2<n.length,p=f?n[i+2]:0,g=o>>2,E=(o&3)<<4|c>>4;let w=(c&15)<<2|p>>6,A=p&63;f||(A=64,l||(w=64)),r.push(t[g],t[E],t[w],t[A])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(iA(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):mb(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const o=t[n.charAt(i++)],c=i<n.length?t[n.charAt(i)]:0;++i;const p=i<n.length?t[n.charAt(i)]:64;++i;const E=i<n.length?t[n.charAt(i)]:64;if(++i,o==null||c==null||p==null||E==null)throw new gb;const w=o<<2|c>>4;if(r.push(w),p!==64){const A=c<<4&240|p>>2;if(r.push(A),E!==64){const b=p<<6&192|E;r.push(b)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class gb extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const yb=function(n){const e=iA(n);return sA.encodeByteArray(e,!0)},dh=function(n){return yb(n).replace(/\./g,"")},oA=function(n){try{return sA.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vb=()=>aA().__FIREBASE_DEFAULTS__,_b=()=>{if(typeof process>"u"||typeof sE>"u")return;const n=sE.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},Eb=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&oA(n[1]);return e&&JSON.parse(e)},Qh=()=>{try{return pb()||vb()||_b()||Eb()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},lA=n=>Qh()?.emulatorHosts?.[n],wb=n=>{const e=lA(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},uA=()=>Qh()?.config,cA=n=>Qh()?.[`_${n}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tb{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tl(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function dA(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ab(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}},...n};return[dh(JSON.stringify(t)),dh(JSON.stringify(l)),""].join(".")}const pu={};function Ib(){const n={prod:[],emulator:[]};for(const e of Object.keys(pu))pu[e]?n.emulator.push(e):n.prod.push(e);return n}function Sb(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let oE=!1;function hA(n,e){if(typeof window>"u"||typeof document>"u"||!tl(window.location.host)||pu[n]===e||pu[n]||oE)return;pu[n]=e;function t(w){return`__firebase__banner__${w}`}const r="__firebase__banner",o=Ib().prod.length>0;function l(){const w=document.getElementById(r);w&&w.remove()}function c(w){w.style.display="flex",w.style.background="#7faaf0",w.style.position="fixed",w.style.bottom="5px",w.style.left="5px",w.style.padding=".5em",w.style.borderRadius="5px",w.style.alignItems="center"}function f(w,A){w.setAttribute("width","24"),w.setAttribute("id",A),w.setAttribute("height","24"),w.setAttribute("viewBox","0 0 24 24"),w.setAttribute("fill","none"),w.style.marginLeft="-6px"}function p(){const w=document.createElement("span");return w.style.cursor="pointer",w.style.marginLeft="16px",w.style.fontSize="24px",w.innerHTML=" &times;",w.onclick=()=>{oE=!0,l()},w}function g(w,A){w.setAttribute("id",A),w.innerText="Learn more",w.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",w.setAttribute("target","__blank"),w.style.paddingLeft="5px",w.style.textDecoration="underline"}function E(){const w=Sb(r),A=t("text"),b=document.getElementById(A)||document.createElement("span"),V=t("learnmore"),x=document.getElementById(V)||document.createElement("a"),H=t("preprendIcon"),Q=document.getElementById(H)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(w.created){const Z=w.element;c(Z),g(x,V);const ae=p();f(Q,H),Z.append(Q,b,x,ae),document.body.appendChild(Z)}o?(b.innerText="Preview backend disconnected.",Q.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(Q.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,b.innerText="Preview backend running in this workspace."),b.setAttribute("id",A)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Rb(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(kt())}function fA(){const n=Qh()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Cb(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function bb(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function Db(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function kb(){const n=kt();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function pA(){return!fA()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function mA(){return!fA()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function gA(){try{return typeof indexedDB=="object"}catch{return!1}}function Pb(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xb="FirebaseError";class oi extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=xb,Object.setPrototypeOf(this,oi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ku.prototype.create)}}class Ku{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,o=this.errors[e],l=o?Nb(o,r):"Error",c=`${this.serviceName}: ${l} (${i}).`;return new oi(i,c,r)}}function Nb(n,e){return n.replace(Ob,(t,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const Ob=/\{\$([^}]+)}/g;function Mb(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function ho(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const o=n[i],l=e[i];if(aE(o)&&aE(l)){if(!ho(o,l))return!1}else if(o!==l)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function aE(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yu(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Vb(n,e){const t=new Lb(n,e);return t.subscribe.bind(t)}class Lb{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");Fb(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=nm),i.error===void 0&&(i.error=nm),i.complete===void 0&&(i.complete=nm);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Fb(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function nm(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tn(n){return n&&n._delegate?n._delegate:n}class fo{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ub{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new Tb;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(zb(e))try{this.getOrInitializeService({instanceIdentifier:Qs})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=Qs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Qs){return this.instances.has(e)}getOptions(e=Qs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[o,l]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(o);r===c&&l.resolve(i)}return i}onInit(e,t){const r=this.normalizeInstanceIdentifier(t),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const o=this.instances.get(r);return o&&e(o,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Bb(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Qs){return this.component?this.component.multipleInstances?e:Qs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Bb(n){return n===Qs?void 0:n}function zb(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jb{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Ub(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Me;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Me||(Me={}));const Hb={debug:Me.DEBUG,verbose:Me.VERBOSE,info:Me.INFO,warn:Me.WARN,error:Me.ERROR,silent:Me.SILENT},Wb=Me.INFO,qb={[Me.DEBUG]:"log",[Me.VERBOSE]:"log",[Me.INFO]:"info",[Me.WARN]:"warn",[Me.ERROR]:"error"},Gb=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),i=qb[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Rg{constructor(e){this.name=e,this._logLevel=Wb,this._logHandler=Gb,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Me))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Hb[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Me.DEBUG,...e),this._logHandler(this,Me.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Me.VERBOSE,...e),this._logHandler(this,Me.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Me.INFO,...e),this._logHandler(this,Me.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Me.WARN,...e),this._logHandler(this,Me.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Me.ERROR,...e),this._logHandler(this,Me.ERROR,...e)}}const $b=(n,e)=>e.some(t=>n instanceof t);let lE,uE;function Qb(){return lE||(lE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Kb(){return uE||(uE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const yA=new WeakMap,xm=new WeakMap,vA=new WeakMap,rm=new WeakMap,Cg=new WeakMap;function Yb(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",o),n.removeEventListener("error",l)},o=()=>{t(Zi(n.result)),i()},l=()=>{r(n.error),i()};n.addEventListener("success",o),n.addEventListener("error",l)});return e.then(t=>{t instanceof IDBCursor&&yA.set(t,n)}).catch(()=>{}),Cg.set(e,n),e}function Jb(n){if(xm.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",l),n.removeEventListener("abort",l)},o=()=>{t(),i()},l=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",o),n.addEventListener("error",l),n.addEventListener("abort",l)});xm.set(n,e)}let Nm={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return xm.get(n);if(e==="objectStoreNames")return n.objectStoreNames||vA.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Zi(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function Xb(n){Nm=n(Nm)}function Zb(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(im(this),e,...t);return vA.set(r,e.sort?e.sort():[e]),Zi(r)}:Kb().includes(n)?function(...e){return n.apply(im(this),e),Zi(yA.get(this))}:function(...e){return Zi(n.apply(im(this),e))}}function eD(n){return typeof n=="function"?Zb(n):(n instanceof IDBTransaction&&Jb(n),$b(n,Qb())?new Proxy(n,Nm):n)}function Zi(n){if(n instanceof IDBRequest)return Yb(n);if(rm.has(n))return rm.get(n);const e=eD(n);return e!==n&&(rm.set(n,e),Cg.set(e,n)),e}const im=n=>Cg.get(n);function tD(n,e,{blocked:t,upgrade:r,blocking:i,terminated:o}={}){const l=indexedDB.open(n,e),c=Zi(l);return r&&l.addEventListener("upgradeneeded",f=>{r(Zi(l.result),f.oldVersion,f.newVersion,Zi(l.transaction),f)}),t&&l.addEventListener("blocked",f=>t(f.oldVersion,f.newVersion,f)),c.then(f=>{o&&f.addEventListener("close",()=>o()),i&&f.addEventListener("versionchange",p=>i(p.oldVersion,p.newVersion,p))}).catch(()=>{}),c}const nD=["get","getKey","getAll","getAllKeys","count"],rD=["put","add","delete","clear"],sm=new Map;function cE(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(sm.get(e))return sm.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=rD.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||nD.includes(t)))return;const o=async function(l,...c){const f=this.transaction(l,i?"readwrite":"readonly");let p=f.store;return r&&(p=p.index(c.shift())),(await Promise.all([p[t](...c),i&&f.done]))[0]};return sm.set(e,o),o}Xb(n=>({...n,get:(e,t,r)=>cE(e,t)||n.get(e,t,r),has:(e,t)=>!!cE(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iD{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(sD(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function sD(n){return n.getComponent()?.type==="VERSION"}const Om="@firebase/app",dE="0.14.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ei=new Rg("@firebase/app"),oD="@firebase/app-compat",aD="@firebase/analytics-compat",lD="@firebase/analytics",uD="@firebase/app-check-compat",cD="@firebase/app-check",dD="@firebase/auth",hD="@firebase/auth-compat",fD="@firebase/database",pD="@firebase/data-connect",mD="@firebase/database-compat",gD="@firebase/functions",yD="@firebase/functions-compat",vD="@firebase/installations",_D="@firebase/installations-compat",ED="@firebase/messaging",wD="@firebase/messaging-compat",TD="@firebase/performance",AD="@firebase/performance-compat",ID="@firebase/remote-config",SD="@firebase/remote-config-compat",RD="@firebase/storage",CD="@firebase/storage-compat",bD="@firebase/firestore",DD="@firebase/ai",kD="@firebase/firestore-compat",PD="firebase",xD="12.4.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mm="[DEFAULT]",ND={[Om]:"fire-core",[oD]:"fire-core-compat",[lD]:"fire-analytics",[aD]:"fire-analytics-compat",[cD]:"fire-app-check",[uD]:"fire-app-check-compat",[dD]:"fire-auth",[hD]:"fire-auth-compat",[fD]:"fire-rtdb",[pD]:"fire-data-connect",[mD]:"fire-rtdb-compat",[gD]:"fire-fn",[yD]:"fire-fn-compat",[vD]:"fire-iid",[_D]:"fire-iid-compat",[ED]:"fire-fcm",[wD]:"fire-fcm-compat",[TD]:"fire-perf",[AD]:"fire-perf-compat",[ID]:"fire-rc",[SD]:"fire-rc-compat",[RD]:"fire-gcs",[CD]:"fire-gcs-compat",[bD]:"fire-fst",[kD]:"fire-fst-compat",[DD]:"fire-vertex","fire-js":"fire-js",[PD]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hh=new Map,OD=new Map,Vm=new Map;function hE(n,e){try{n.container.addComponent(e)}catch(t){ei.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function La(n){const e=n.name;if(Vm.has(e))return ei.debug(`There were multiple attempts to register component ${e}.`),!1;Vm.set(e,n);for(const t of hh.values())hE(t,n);for(const t of OD.values())hE(t,n);return!0}function bg(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Ar(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MD={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},es=new Ku("app","Firebase",MD);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VD{constructor(e,t,r){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new fo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw es.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nl=xD;function _A(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r={name:Mm,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw es.create("bad-app-name",{appName:String(i)});if(t||(t=uA()),!t)throw es.create("no-options");const o=hh.get(i);if(o){if(ho(t,o.options)&&ho(r,o.config))return o;throw es.create("duplicate-app",{appName:i})}const l=new jb(i);for(const f of Vm.values())l.addComponent(f);const c=new VD(t,r,l);return hh.set(i,c),c}function EA(n=Mm){const e=hh.get(n);if(!e&&n===Mm&&uA())return _A();if(!e)throw es.create("no-app",{appName:n});return e}function ts(n,e,t){let r=ND[n]??n;t&&(r+=`-${t}`);const i=r.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const l=[`Unable to register library "${r}" with version "${e}":`];i&&l.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ei.warn(l.join(" "));return}La(new fo(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LD="firebase-heartbeat-database",FD=1,Du="firebase-heartbeat-store";let om=null;function wA(){return om||(om=tD(LD,FD,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Du)}catch(t){console.warn(t)}}}}).catch(n=>{throw es.create("idb-open",{originalErrorMessage:n.message})})),om}async function UD(n){try{const t=(await wA()).transaction(Du),r=await t.objectStore(Du).get(TA(n));return await t.done,r}catch(e){if(e instanceof oi)ei.warn(e.message);else{const t=es.create("idb-get",{originalErrorMessage:e?.message});ei.warn(t.message)}}}async function fE(n,e){try{const r=(await wA()).transaction(Du,"readwrite");await r.objectStore(Du).put(e,TA(n)),await r.done}catch(t){if(t instanceof oi)ei.warn(t.message);else{const r=es.create("idb-set",{originalErrorMessage:t?.message});ei.warn(r.message)}}}function TA(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BD=1024,zD=30;class jD{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new WD(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=pE();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats.length>zD){const i=qD(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){ei.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=pE(),{heartbeatsToSend:t,unsentEntries:r}=HD(this._heartbeatsCache.heartbeats),i=dh(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return ei.warn(e),""}}}function pE(){return new Date().toISOString().substring(0,10)}function HD(n,e=BD){const t=[];let r=n.slice();for(const i of n){const o=t.find(l=>l.agent===i.agent);if(o){if(o.dates.push(i.date),mE(t)>e){o.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),mE(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class WD{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return gA()?Pb().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await UD(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return fE(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return fE(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function mE(n){return dh(JSON.stringify({version:2,heartbeats:n})).length}function qD(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GD(n){La(new fo("platform-logger",e=>new iD(e),"PRIVATE")),La(new fo("heartbeat",e=>new jD(e),"PRIVATE")),ts(Om,dE,n),ts(Om,dE,"esm2020"),ts("fire-js","")}GD("");var $D="firebase",QD="12.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ts($D,QD,"app");var gE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ns,AA;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(k,S){function D(){}D.prototype=S.prototype,k.F=S.prototype,k.prototype=new D,k.prototype.constructor=k,k.D=function(M,N,F){for(var C=Array(arguments.length-2),Ze=2;Ze<arguments.length;Ze++)C[Ze-2]=arguments[Ze];return S.prototype[N].apply(M,C)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(k,S,D){D||(D=0);const M=Array(16);if(typeof S=="string")for(var N=0;N<16;++N)M[N]=S.charCodeAt(D++)|S.charCodeAt(D++)<<8|S.charCodeAt(D++)<<16|S.charCodeAt(D++)<<24;else for(N=0;N<16;++N)M[N]=S[D++]|S[D++]<<8|S[D++]<<16|S[D++]<<24;S=k.g[0],D=k.g[1],N=k.g[2];let F=k.g[3],C;C=S+(F^D&(N^F))+M[0]+3614090360&4294967295,S=D+(C<<7&4294967295|C>>>25),C=F+(N^S&(D^N))+M[1]+3905402710&4294967295,F=S+(C<<12&4294967295|C>>>20),C=N+(D^F&(S^D))+M[2]+606105819&4294967295,N=F+(C<<17&4294967295|C>>>15),C=D+(S^N&(F^S))+M[3]+3250441966&4294967295,D=N+(C<<22&4294967295|C>>>10),C=S+(F^D&(N^F))+M[4]+4118548399&4294967295,S=D+(C<<7&4294967295|C>>>25),C=F+(N^S&(D^N))+M[5]+1200080426&4294967295,F=S+(C<<12&4294967295|C>>>20),C=N+(D^F&(S^D))+M[6]+2821735955&4294967295,N=F+(C<<17&4294967295|C>>>15),C=D+(S^N&(F^S))+M[7]+4249261313&4294967295,D=N+(C<<22&4294967295|C>>>10),C=S+(F^D&(N^F))+M[8]+1770035416&4294967295,S=D+(C<<7&4294967295|C>>>25),C=F+(N^S&(D^N))+M[9]+2336552879&4294967295,F=S+(C<<12&4294967295|C>>>20),C=N+(D^F&(S^D))+M[10]+4294925233&4294967295,N=F+(C<<17&4294967295|C>>>15),C=D+(S^N&(F^S))+M[11]+2304563134&4294967295,D=N+(C<<22&4294967295|C>>>10),C=S+(F^D&(N^F))+M[12]+1804603682&4294967295,S=D+(C<<7&4294967295|C>>>25),C=F+(N^S&(D^N))+M[13]+4254626195&4294967295,F=S+(C<<12&4294967295|C>>>20),C=N+(D^F&(S^D))+M[14]+2792965006&4294967295,N=F+(C<<17&4294967295|C>>>15),C=D+(S^N&(F^S))+M[15]+1236535329&4294967295,D=N+(C<<22&4294967295|C>>>10),C=S+(N^F&(D^N))+M[1]+4129170786&4294967295,S=D+(C<<5&4294967295|C>>>27),C=F+(D^N&(S^D))+M[6]+3225465664&4294967295,F=S+(C<<9&4294967295|C>>>23),C=N+(S^D&(F^S))+M[11]+643717713&4294967295,N=F+(C<<14&4294967295|C>>>18),C=D+(F^S&(N^F))+M[0]+3921069994&4294967295,D=N+(C<<20&4294967295|C>>>12),C=S+(N^F&(D^N))+M[5]+3593408605&4294967295,S=D+(C<<5&4294967295|C>>>27),C=F+(D^N&(S^D))+M[10]+38016083&4294967295,F=S+(C<<9&4294967295|C>>>23),C=N+(S^D&(F^S))+M[15]+3634488961&4294967295,N=F+(C<<14&4294967295|C>>>18),C=D+(F^S&(N^F))+M[4]+3889429448&4294967295,D=N+(C<<20&4294967295|C>>>12),C=S+(N^F&(D^N))+M[9]+568446438&4294967295,S=D+(C<<5&4294967295|C>>>27),C=F+(D^N&(S^D))+M[14]+3275163606&4294967295,F=S+(C<<9&4294967295|C>>>23),C=N+(S^D&(F^S))+M[3]+4107603335&4294967295,N=F+(C<<14&4294967295|C>>>18),C=D+(F^S&(N^F))+M[8]+1163531501&4294967295,D=N+(C<<20&4294967295|C>>>12),C=S+(N^F&(D^N))+M[13]+2850285829&4294967295,S=D+(C<<5&4294967295|C>>>27),C=F+(D^N&(S^D))+M[2]+4243563512&4294967295,F=S+(C<<9&4294967295|C>>>23),C=N+(S^D&(F^S))+M[7]+1735328473&4294967295,N=F+(C<<14&4294967295|C>>>18),C=D+(F^S&(N^F))+M[12]+2368359562&4294967295,D=N+(C<<20&4294967295|C>>>12),C=S+(D^N^F)+M[5]+4294588738&4294967295,S=D+(C<<4&4294967295|C>>>28),C=F+(S^D^N)+M[8]+2272392833&4294967295,F=S+(C<<11&4294967295|C>>>21),C=N+(F^S^D)+M[11]+1839030562&4294967295,N=F+(C<<16&4294967295|C>>>16),C=D+(N^F^S)+M[14]+4259657740&4294967295,D=N+(C<<23&4294967295|C>>>9),C=S+(D^N^F)+M[1]+2763975236&4294967295,S=D+(C<<4&4294967295|C>>>28),C=F+(S^D^N)+M[4]+1272893353&4294967295,F=S+(C<<11&4294967295|C>>>21),C=N+(F^S^D)+M[7]+4139469664&4294967295,N=F+(C<<16&4294967295|C>>>16),C=D+(N^F^S)+M[10]+3200236656&4294967295,D=N+(C<<23&4294967295|C>>>9),C=S+(D^N^F)+M[13]+681279174&4294967295,S=D+(C<<4&4294967295|C>>>28),C=F+(S^D^N)+M[0]+3936430074&4294967295,F=S+(C<<11&4294967295|C>>>21),C=N+(F^S^D)+M[3]+3572445317&4294967295,N=F+(C<<16&4294967295|C>>>16),C=D+(N^F^S)+M[6]+76029189&4294967295,D=N+(C<<23&4294967295|C>>>9),C=S+(D^N^F)+M[9]+3654602809&4294967295,S=D+(C<<4&4294967295|C>>>28),C=F+(S^D^N)+M[12]+3873151461&4294967295,F=S+(C<<11&4294967295|C>>>21),C=N+(F^S^D)+M[15]+530742520&4294967295,N=F+(C<<16&4294967295|C>>>16),C=D+(N^F^S)+M[2]+3299628645&4294967295,D=N+(C<<23&4294967295|C>>>9),C=S+(N^(D|~F))+M[0]+4096336452&4294967295,S=D+(C<<6&4294967295|C>>>26),C=F+(D^(S|~N))+M[7]+1126891415&4294967295,F=S+(C<<10&4294967295|C>>>22),C=N+(S^(F|~D))+M[14]+2878612391&4294967295,N=F+(C<<15&4294967295|C>>>17),C=D+(F^(N|~S))+M[5]+4237533241&4294967295,D=N+(C<<21&4294967295|C>>>11),C=S+(N^(D|~F))+M[12]+1700485571&4294967295,S=D+(C<<6&4294967295|C>>>26),C=F+(D^(S|~N))+M[3]+2399980690&4294967295,F=S+(C<<10&4294967295|C>>>22),C=N+(S^(F|~D))+M[10]+4293915773&4294967295,N=F+(C<<15&4294967295|C>>>17),C=D+(F^(N|~S))+M[1]+2240044497&4294967295,D=N+(C<<21&4294967295|C>>>11),C=S+(N^(D|~F))+M[8]+1873313359&4294967295,S=D+(C<<6&4294967295|C>>>26),C=F+(D^(S|~N))+M[15]+4264355552&4294967295,F=S+(C<<10&4294967295|C>>>22),C=N+(S^(F|~D))+M[6]+2734768916&4294967295,N=F+(C<<15&4294967295|C>>>17),C=D+(F^(N|~S))+M[13]+1309151649&4294967295,D=N+(C<<21&4294967295|C>>>11),C=S+(N^(D|~F))+M[4]+4149444226&4294967295,S=D+(C<<6&4294967295|C>>>26),C=F+(D^(S|~N))+M[11]+3174756917&4294967295,F=S+(C<<10&4294967295|C>>>22),C=N+(S^(F|~D))+M[2]+718787259&4294967295,N=F+(C<<15&4294967295|C>>>17),C=D+(F^(N|~S))+M[9]+3951481745&4294967295,k.g[0]=k.g[0]+S&4294967295,k.g[1]=k.g[1]+(N+(C<<21&4294967295|C>>>11))&4294967295,k.g[2]=k.g[2]+N&4294967295,k.g[3]=k.g[3]+F&4294967295}r.prototype.v=function(k,S){S===void 0&&(S=k.length);const D=S-this.blockSize,M=this.C;let N=this.h,F=0;for(;F<S;){if(N==0)for(;F<=D;)i(this,k,F),F+=this.blockSize;if(typeof k=="string"){for(;F<S;)if(M[N++]=k.charCodeAt(F++),N==this.blockSize){i(this,M),N=0;break}}else for(;F<S;)if(M[N++]=k[F++],N==this.blockSize){i(this,M),N=0;break}}this.h=N,this.o+=S},r.prototype.A=function(){var k=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);k[0]=128;for(var S=1;S<k.length-8;++S)k[S]=0;S=this.o*8;for(var D=k.length-8;D<k.length;++D)k[D]=S&255,S/=256;for(this.v(k),k=Array(16),S=0,D=0;D<4;++D)for(let M=0;M<32;M+=8)k[S++]=this.g[D]>>>M&255;return k};function o(k,S){var D=c;return Object.prototype.hasOwnProperty.call(D,k)?D[k]:D[k]=S(k)}function l(k,S){this.h=S;const D=[];let M=!0;for(let N=k.length-1;N>=0;N--){const F=k[N]|0;M&&F==S||(D[N]=F,M=!1)}this.g=D}var c={};function f(k){return-128<=k&&k<128?o(k,function(S){return new l([S|0],S<0?-1:0)}):new l([k|0],k<0?-1:0)}function p(k){if(isNaN(k)||!isFinite(k))return E;if(k<0)return x(p(-k));const S=[];let D=1;for(let M=0;k>=D;M++)S[M]=k/D|0,D*=4294967296;return new l(S,0)}function g(k,S){if(k.length==0)throw Error("number format error: empty string");if(S=S||10,S<2||36<S)throw Error("radix out of range: "+S);if(k.charAt(0)=="-")return x(g(k.substring(1),S));if(k.indexOf("-")>=0)throw Error('number format error: interior "-" character');const D=p(Math.pow(S,8));let M=E;for(let F=0;F<k.length;F+=8){var N=Math.min(8,k.length-F);const C=parseInt(k.substring(F,F+N),S);N<8?(N=p(Math.pow(S,N)),M=M.j(N).add(p(C))):(M=M.j(D),M=M.add(p(C)))}return M}var E=f(0),w=f(1),A=f(16777216);n=l.prototype,n.m=function(){if(V(this))return-x(this).m();let k=0,S=1;for(let D=0;D<this.g.length;D++){const M=this.i(D);k+=(M>=0?M:4294967296+M)*S,S*=4294967296}return k},n.toString=function(k){if(k=k||10,k<2||36<k)throw Error("radix out of range: "+k);if(b(this))return"0";if(V(this))return"-"+x(this).toString(k);const S=p(Math.pow(k,6));var D=this;let M="";for(;;){const N=ae(D,S).g;D=H(D,N.j(S));let F=((D.g.length>0?D.g[0]:D.h)>>>0).toString(k);if(D=N,b(D))return F+M;for(;F.length<6;)F="0"+F;M=F+M}},n.i=function(k){return k<0?0:k<this.g.length?this.g[k]:this.h};function b(k){if(k.h!=0)return!1;for(let S=0;S<k.g.length;S++)if(k.g[S]!=0)return!1;return!0}function V(k){return k.h==-1}n.l=function(k){return k=H(this,k),V(k)?-1:b(k)?0:1};function x(k){const S=k.g.length,D=[];for(let M=0;M<S;M++)D[M]=~k.g[M];return new l(D,~k.h).add(w)}n.abs=function(){return V(this)?x(this):this},n.add=function(k){const S=Math.max(this.g.length,k.g.length),D=[];let M=0;for(let N=0;N<=S;N++){let F=M+(this.i(N)&65535)+(k.i(N)&65535),C=(F>>>16)+(this.i(N)>>>16)+(k.i(N)>>>16);M=C>>>16,F&=65535,C&=65535,D[N]=C<<16|F}return new l(D,D[D.length-1]&-2147483648?-1:0)};function H(k,S){return k.add(x(S))}n.j=function(k){if(b(this)||b(k))return E;if(V(this))return V(k)?x(this).j(x(k)):x(x(this).j(k));if(V(k))return x(this.j(x(k)));if(this.l(A)<0&&k.l(A)<0)return p(this.m()*k.m());const S=this.g.length+k.g.length,D=[];for(var M=0;M<2*S;M++)D[M]=0;for(M=0;M<this.g.length;M++)for(let N=0;N<k.g.length;N++){const F=this.i(M)>>>16,C=this.i(M)&65535,Ze=k.i(N)>>>16,xt=k.i(N)&65535;D[2*M+2*N]+=C*xt,Q(D,2*M+2*N),D[2*M+2*N+1]+=F*xt,Q(D,2*M+2*N+1),D[2*M+2*N+1]+=C*Ze,Q(D,2*M+2*N+1),D[2*M+2*N+2]+=F*Ze,Q(D,2*M+2*N+2)}for(k=0;k<S;k++)D[k]=D[2*k+1]<<16|D[2*k];for(k=S;k<2*S;k++)D[k]=0;return new l(D,0)};function Q(k,S){for(;(k[S]&65535)!=k[S];)k[S+1]+=k[S]>>>16,k[S]&=65535,S++}function Z(k,S){this.g=k,this.h=S}function ae(k,S){if(b(S))throw Error("division by zero");if(b(k))return new Z(E,E);if(V(k))return S=ae(x(k),S),new Z(x(S.g),x(S.h));if(V(S))return S=ae(k,x(S)),new Z(x(S.g),S.h);if(k.g.length>30){if(V(k)||V(S))throw Error("slowDivide_ only works with positive integers.");for(var D=w,M=S;M.l(k)<=0;)D=ve(D),M=ve(M);var N=he(D,1),F=he(M,1);for(M=he(M,2),D=he(D,2);!b(M);){var C=F.add(M);C.l(k)<=0&&(N=N.add(D),F=C),M=he(M,1),D=he(D,1)}return S=H(k,N.j(S)),new Z(N,S)}for(N=E;k.l(S)>=0;){for(D=Math.max(1,Math.floor(k.m()/S.m())),M=Math.ceil(Math.log(D)/Math.LN2),M=M<=48?1:Math.pow(2,M-48),F=p(D),C=F.j(S);V(C)||C.l(k)>0;)D-=M,F=p(D),C=F.j(S);b(F)&&(F=w),N=N.add(F),k=H(k,C)}return new Z(N,k)}n.B=function(k){return ae(this,k).h},n.and=function(k){const S=Math.max(this.g.length,k.g.length),D=[];for(let M=0;M<S;M++)D[M]=this.i(M)&k.i(M);return new l(D,this.h&k.h)},n.or=function(k){const S=Math.max(this.g.length,k.g.length),D=[];for(let M=0;M<S;M++)D[M]=this.i(M)|k.i(M);return new l(D,this.h|k.h)},n.xor=function(k){const S=Math.max(this.g.length,k.g.length),D=[];for(let M=0;M<S;M++)D[M]=this.i(M)^k.i(M);return new l(D,this.h^k.h)};function ve(k){const S=k.g.length+1,D=[];for(let M=0;M<S;M++)D[M]=k.i(M)<<1|k.i(M-1)>>>31;return new l(D,k.h)}function he(k,S){const D=S>>5;S%=32;const M=k.g.length-D,N=[];for(let F=0;F<M;F++)N[F]=S>0?k.i(F+D)>>>S|k.i(F+D+1)<<32-S:k.i(F+D);return new l(N,k.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,AA=r,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.B,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=p,l.fromString=g,ns=l}).apply(typeof gE<"u"?gE:typeof self<"u"?self:typeof window<"u"?window:{});var Dd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var IA,uu,SA,qd,Lm,RA,CA,bA;(function(){var n,e=Object.defineProperty;function t(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof Dd=="object"&&Dd];for(var v=0;v<d.length;++v){var _=d[v];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var r=t(this);function i(d,v){if(v)e:{var _=r;d=d.split(".");for(var I=0;I<d.length-1;I++){var z=d[I];if(!(z in _))break e;_=_[z]}d=d[d.length-1],I=_[d],v=v(I),v!=I&&v!=null&&e(_,d,{configurable:!0,writable:!0,value:v})}}i("Symbol.dispose",function(d){return d||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(d){return d||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(d){return d||function(v){var _=[],I;for(I in v)Object.prototype.hasOwnProperty.call(v,I)&&_.push([I,v[I]]);return _}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function c(d){var v=typeof d;return v=="object"&&d!=null||v=="function"}function f(d,v,_){return d.call.apply(d.bind,arguments)}function p(d,v,_){return p=f,p.apply(null,arguments)}function g(d,v){var _=Array.prototype.slice.call(arguments,1);return function(){var I=_.slice();return I.push.apply(I,arguments),d.apply(this,I)}}function E(d,v){function _(){}_.prototype=v.prototype,d.Z=v.prototype,d.prototype=new _,d.prototype.constructor=d,d.Ob=function(I,z,q){for(var ie=Array(arguments.length-2),be=2;be<arguments.length;be++)ie[be-2]=arguments[be];return v.prototype[z].apply(I,ie)}}var w=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?d=>d&&AsyncContext.Snapshot.wrap(d):d=>d;function A(d){const v=d.length;if(v>0){const _=Array(v);for(let I=0;I<v;I++)_[I]=d[I];return _}return[]}function b(d,v){for(let I=1;I<arguments.length;I++){const z=arguments[I];var _=typeof z;if(_=_!="object"?_:z?Array.isArray(z)?"array":_:"null",_=="array"||_=="object"&&typeof z.length=="number"){_=d.length||0;const q=z.length||0;d.length=_+q;for(let ie=0;ie<q;ie++)d[_+ie]=z[ie]}else d.push(z)}}class V{constructor(v,_){this.i=v,this.j=_,this.h=0,this.g=null}get(){let v;return this.h>0?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function x(d){l.setTimeout(()=>{throw d},0)}function H(){var d=k;let v=null;return d.g&&(v=d.g,d.g=d.g.next,d.g||(d.h=null),v.next=null),v}class Q{constructor(){this.h=this.g=null}add(v,_){const I=Z.get();I.set(v,_),this.h?this.h.next=I:this.g=I,this.h=I}}var Z=new V(()=>new ae,d=>d.reset());class ae{constructor(){this.next=this.g=this.h=null}set(v,_){this.h=v,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let ve,he=!1,k=new Q,S=()=>{const d=Promise.resolve(void 0);ve=()=>{d.then(D)}};function D(){for(var d;d=H();){try{d.h.call(d.g)}catch(_){x(_)}var v=Z;v.j(d),v.h<100&&(v.h++,d.next=v.g,v.g=d)}he=!1}function M(){this.u=this.u,this.C=this.C}M.prototype.u=!1,M.prototype.dispose=function(){this.u||(this.u=!0,this.N())},M.prototype[Symbol.dispose]=function(){this.dispose()},M.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function N(d,v){this.type=d,this.g=this.target=v,this.defaultPrevented=!1}N.prototype.h=function(){this.defaultPrevented=!0};var F=(function(){if(!l.addEventListener||!Object.defineProperty)return!1;var d=!1,v=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const _=()=>{};l.addEventListener("test",_,v),l.removeEventListener("test",_,v)}catch{}return d})();function C(d){return/^[\s\xa0]*$/.test(d)}function Ze(d,v){N.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d&&this.init(d,v)}E(Ze,N),Ze.prototype.init=function(d,v){const _=this.type=d.type,I=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;this.target=d.target||d.srcElement,this.g=v,v=d.relatedTarget,v||(_=="mouseover"?v=d.fromElement:_=="mouseout"&&(v=d.toElement)),this.relatedTarget=v,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=d.pointerType,this.state=d.state,this.i=d,d.defaultPrevented&&Ze.Z.h.call(this)},Ze.prototype.h=function(){Ze.Z.h.call(this);const d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var xt="closure_listenable_"+(Math.random()*1e6|0),qt=0;function it(d,v,_,I,z){this.listener=d,this.proxy=null,this.src=v,this.type=_,this.capture=!!I,this.ha=z,this.key=++qt,this.da=this.fa=!1}function le(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function _e(d,v,_){for(const I in d)v.call(_,d[I],I,d)}function ce(d,v){for(const _ in d)v.call(void 0,d[_],_,d)}function L(d){const v={};for(const _ in d)v[_]=d[_];return v}const Y="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function De(d,v){let _,I;for(let z=1;z<arguments.length;z++){I=arguments[z];for(_ in I)d[_]=I[_];for(let q=0;q<Y.length;q++)_=Y[q],Object.prototype.hasOwnProperty.call(I,_)&&(d[_]=I[_])}}function ke(d){this.src=d,this.g={},this.h=0}ke.prototype.add=function(d,v,_,I,z){const q=d.toString();d=this.g[q],d||(d=this.g[q]=[],this.h++);const ie=Oe(d,v,I,z);return ie>-1?(v=d[ie],_||(v.fa=!1)):(v=new it(v,this.src,q,!!I,z),v.fa=_,d.push(v)),v};function Ne(d,v){const _=v.type;if(_ in d.g){var I=d.g[_],z=Array.prototype.indexOf.call(I,v,void 0),q;(q=z>=0)&&Array.prototype.splice.call(I,z,1),q&&(le(v),d.g[_].length==0&&(delete d.g[_],d.h--))}}function Oe(d,v,_,I){for(let z=0;z<d.length;++z){const q=d[z];if(!q.da&&q.listener==v&&q.capture==!!_&&q.ha==I)return z}return-1}var Ge="closure_lm_"+(Math.random()*1e6|0),Ue={};function Je(d,v,_,I,z){if(Array.isArray(v)){for(let q=0;q<v.length;q++)Je(d,v[q],_,I,z);return null}return _=cl(_),d&&d[xt]?d.J(v,_,c(I)?!!I.capture:!1,z):nn(d,v,_,!1,I,z)}function nn(d,v,_,I,z,q){if(!v)throw Error("Invalid event type");const ie=c(z)?!!z.capture:!!z;let be=Po(d);if(be||(d[Ge]=be=new ke(d)),_=be.add(v,_,I,ie,q),_.proxy)return _;if(I=Do(),_.proxy=I,I.src=d,I.listener=_,d.addEventListener)F||(z=ie),z===void 0&&(z=!1),d.addEventListener(v.toString(),I,z);else if(d.attachEvent)d.attachEvent(ko(v.toString()),I);else if(d.addListener&&d.removeListener)d.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return _}function Do(){function d(_){return v.call(d.src,d.listener,_)}const v=fc;return d}function ul(d,v,_,I,z){if(Array.isArray(v))for(var q=0;q<v.length;q++)ul(d,v[q],_,I,z);else I=c(I)?!!I.capture:!!I,_=cl(_),d&&d[xt]?(d=d.i,q=String(v).toString(),q in d.g&&(v=d.g[q],_=Oe(v,_,I,z),_>-1&&(le(v[_]),Array.prototype.splice.call(v,_,1),v.length==0&&(delete d.g[q],d.h--)))):d&&(d=Po(d))&&(v=d.g[v.toString()],d=-1,v&&(d=Oe(v,_,I,z)),(_=d>-1?v[d]:null)&&ci(_))}function ci(d){if(typeof d!="number"&&d&&!d.da){var v=d.src;if(v&&v[xt])Ne(v.i,d);else{var _=d.type,I=d.proxy;v.removeEventListener?v.removeEventListener(_,I,d.capture):v.detachEvent?v.detachEvent(ko(_),I):v.addListener&&v.removeListener&&v.removeListener(I),(_=Po(v))?(Ne(_,d),_.h==0&&(_.src=null,v[Ge]=null)):le(d)}}}function ko(d){return d in Ue?Ue[d]:Ue[d]="on"+d}function fc(d,v){if(d.da)d=!0;else{v=new Ze(v,this);const _=d.listener,I=d.ha||d.src;d.fa&&ci(d),d=_.call(I,v)}return d}function Po(d){return d=d[Ge],d instanceof ke?d:null}var Es="__closure_events_fn_"+(Math.random()*1e9>>>0);function cl(d){return typeof d=="function"?d:(d[Es]||(d[Es]=function(v){return d.handleEvent(v)}),d[Es])}function Tt(){M.call(this),this.i=new ke(this),this.M=this,this.G=null}E(Tt,M),Tt.prototype[xt]=!0,Tt.prototype.removeEventListener=function(d,v,_,I){ul(this,d,v,_,I)};function yt(d,v){var _,I=d.G;if(I)for(_=[];I;I=I.G)_.push(I);if(d=d.M,I=v.type||v,typeof v=="string")v=new N(v,d);else if(v instanceof N)v.target=v.target||d;else{var z=v;v=new N(I,d),De(v,z)}z=!0;let q,ie;if(_)for(ie=_.length-1;ie>=0;ie--)q=v.g=_[ie],z=jn(q,I,!0,v)&&z;if(q=v.g=d,z=jn(q,I,!0,v)&&z,z=jn(q,I,!1,v)&&z,_)for(ie=0;ie<_.length;ie++)q=v.g=_[ie],z=jn(q,I,!1,v)&&z}Tt.prototype.N=function(){if(Tt.Z.N.call(this),this.i){var d=this.i;for(const v in d.g){const _=d.g[v];for(let I=0;I<_.length;I++)le(_[I]);delete d.g[v],d.h--}}this.G=null},Tt.prototype.J=function(d,v,_,I){return this.i.add(String(d),v,!1,_,I)},Tt.prototype.K=function(d,v,_,I){return this.i.add(String(d),v,!0,_,I)};function jn(d,v,_,I){if(v=d.i.g[String(v)],!v)return!0;v=v.concat();let z=!0;for(let q=0;q<v.length;++q){const ie=v[q];if(ie&&!ie.da&&ie.capture==_){const be=ie.listener,vt=ie.ha||ie.src;ie.fa&&Ne(d.i,ie),z=be.call(vt,I)!==!1&&z}}return z&&!I.defaultPrevented}function dl(d,v){if(typeof d!="function")if(d&&typeof d.handleEvent=="function")d=p(d.handleEvent,d);else throw Error("Invalid listener argument");return Number(v)>2147483647?-1:l.setTimeout(d,v||0)}function hl(d){d.g=dl(()=>{d.g=null,d.i&&(d.i=!1,hl(d))},d.l);const v=d.h;d.h=null,d.m.apply(null,v)}class pc extends M{constructor(v,_){super(),this.m=v,this.l=_,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:hl(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function di(d){M.call(this),this.h=d,this.g={}}E(di,M);var fl=[];function xo(d){_e(d.g,function(v,_){this.g.hasOwnProperty(_)&&ci(v)},d),d.g={}}di.prototype.N=function(){di.Z.N.call(this),xo(this)},di.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var hi=l.JSON.stringify,mc=l.JSON.parse,ws=class{stringify(d){return l.JSON.stringify(d,void 0)}parse(d){return l.JSON.parse(d,void 0)}};function fi(){}function gc(){}var pi={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function No(){N.call(this,"d")}E(No,N);function pl(){N.call(this,"c")}E(pl,N);var Hn={},Oo=null;function mi(){return Oo=Oo||new Tt}Hn.Ia="serverreachability";function Mo(d){N.call(this,Hn.Ia,d)}E(Mo,N);function Pr(d){const v=mi();yt(v,new Mo(v))}Hn.STAT_EVENT="statevent";function xr(d,v){N.call(this,Hn.STAT_EVENT,d),this.stat=v}E(xr,N);function ft(d){const v=mi();yt(v,new xr(v,d))}Hn.Ja="timingevent";function ml(d,v){N.call(this,Hn.Ja,d),this.size=v}E(ml,N);function gi(d,v){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){d()},v)}function yi(){this.g=!0}yi.prototype.ua=function(){this.g=!1};function yc(d,v,_,I,z,q){d.info(function(){if(d.g)if(q){var ie="",be=q.split("&");for(let $e=0;$e<be.length;$e++){var vt=be[$e].split("=");if(vt.length>1){const At=vt[0];vt=vt[1];const Tn=At.split("_");ie=Tn.length>=2&&Tn[1]=="type"?ie+(At+"="+vt+"&"):ie+(At+"=redacted&")}}}else ie=null;else ie=q;return"XMLHTTP REQ ("+I+") [attempt "+z+"]: "+v+`
`+_+`
`+ie})}function vc(d,v,_,I,z,q,ie){d.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+z+"]: "+v+`
`+_+`
`+q+" "+ie})}function rr(d,v,_,I){d.info(function(){return"XMLHTTP TEXT ("+v+"): "+Ts(d,_)+(I?" "+I:"")})}function _c(d,v){d.info(function(){return"TIMEOUT: "+v})}yi.prototype.info=function(){};function Ts(d,v){if(!d.g)return v;if(!v)return null;try{const q=JSON.parse(v);if(q){for(d=0;d<q.length;d++)if(Array.isArray(q[d])){var _=q[d];if(!(_.length<2)){var I=_[1];if(Array.isArray(I)&&!(I.length<1)){var z=I[0];if(z!="noop"&&z!="stop"&&z!="close")for(let ie=1;ie<I.length;ie++)I[ie]=""}}}}return hi(q)}catch{return v}}var vi={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},_i={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Ec;function Nr(){}E(Nr,fi),Nr.prototype.g=function(){return new XMLHttpRequest},Ec=new Nr;function ir(d){return encodeURIComponent(String(d))}function Vo(d){var v=1;d=d.split(":");const _=[];for(;v>0&&d.length;)_.push(d.shift()),v--;return d.length&&_.push(d.join(":")),_}function Pn(d,v,_,I){this.j=d,this.i=v,this.l=_,this.S=I||1,this.V=new di(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new wc}function wc(){this.i=null,this.g="",this.h=!1}var Tc={},gl={};function Wn(d,v,_){d.M=1,d.A=Mr(xn(v)),d.u=_,d.R=!0,yl(d,null)}function yl(d,v){d.F=Date.now(),As(d),d.B=xn(d.A);var _=d.B,I=d.S;Array.isArray(I)||(I=[String(I)]),Cl(_.i,"t",I),d.C=0,_=d.j.L,d.h=new wc,d.g=xc(d.j,_?v:null,!d.u),d.P>0&&(d.O=new pc(p(d.Y,d,d.g),d.P)),v=d.V,_=d.g,I=d.ba;var z="readystatechange";Array.isArray(z)||(z&&(fl[0]=z.toString()),z=fl);for(let q=0;q<z.length;q++){const ie=Je(_,z[q],I||v.handleEvent,!1,v.h||v);if(!ie)break;v.g[ie.key]=ie}v=d.J?L(d.J):{},d.u?(d.v||(d.v="POST"),v["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.B,d.v,d.u,v)):(d.v="GET",d.g.ea(d.B,d.v,null,v)),Pr(),yc(d.i,d.v,d.B,d.l,d.S,d.u)}Pn.prototype.ba=function(d){d=d.target;const v=this.O;v&&dr(d)==3?v.j():this.Y(d)},Pn.prototype.Y=function(d){try{if(d==this.g)e:{const be=dr(this.g),vt=this.g.ya(),$e=this.g.ca();if(!(be<3)&&(be!=3||this.g&&(this.h.h||this.g.la()||kc(this.g)))){this.K||be!=4||vt==7||(vt==8||$e<=0?Pr(3):Pr(2)),Lo(this);var v=this.g.ca();this.X=v;var _=Ac(this);if(this.o=v==200,vc(this.i,this.v,this.B,this.l,this.S,be,v),this.o){if(this.U&&!this.L){t:{if(this.g){var I,z=this.g;if((I=z.g?z.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!C(I)){var q=I;break t}}q=null}if(d=q)rr(this.i,this.l,d,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,tt(this,d);else{this.o=!1,this.m=3,ft(12),Or(this),Is(this);break e}}if(this.R){d=!0;let At;for(;!this.K&&this.C<_.length;)if(At=Sc(this,_),At==gl){be==4&&(this.m=4,ft(14),d=!1),rr(this.i,this.l,null,"[Incomplete Response]");break}else if(At==Tc){this.m=4,ft(15),rr(this.i,this.l,_,"[Invalid Chunk]"),d=!1;break}else rr(this.i,this.l,At,null),tt(this,At);if(Ic(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),be!=4||_.length!=0||this.h.h||(this.m=1,ft(16),d=!1),this.o=this.o&&d,!d)rr(this.i,this.l,_,"[Invalid Chunked Response]"),Or(this),Is(this);else if(_.length>0&&!this.W){this.W=!0;var ie=this.j;ie.g==this&&ie.aa&&!ie.P&&(ie.j.info("Great, no buffering proxy detected. Bytes received: "+_.length),Ns(ie),ie.P=!0,ft(11))}}else rr(this.i,this.l,_,null),tt(this,_);be==4&&Or(this),this.o&&!this.K&&(be==4?$o(this.j,this):(this.o=!1,As(this)))}else Dl(this.g),v==400&&_.indexOf("Unknown SID")>0?(this.m=3,ft(12)):(this.m=0,ft(13)),Or(this),Is(this)}}}catch{}finally{}};function Ac(d){if(!Ic(d))return d.g.la();const v=kc(d.g);if(v==="")return"";let _="";const I=v.length,z=dr(d.g)==4;if(!d.h.i){if(typeof TextDecoder>"u")return Or(d),Is(d),"";d.h.i=new l.TextDecoder}for(let q=0;q<I;q++)d.h.h=!0,_+=d.h.i.decode(v[q],{stream:!(z&&q==I-1)});return v.length=0,d.h.g+=_,d.C=0,d.h.g}function Ic(d){return d.g?d.v=="GET"&&d.M!=2&&d.j.Aa:!1}function Sc(d,v){var _=d.C,I=v.indexOf(`
`,_);return I==-1?gl:(_=Number(v.substring(_,I)),isNaN(_)?Tc:(I+=1,I+_>v.length?gl:(v=v.slice(I,I+_),d.C=I+_,v)))}Pn.prototype.cancel=function(){this.K=!0,Or(this)};function As(d){d.T=Date.now()+d.H,vl(d,d.H)}function vl(d,v){if(d.D!=null)throw Error("WatchDog timer not null");d.D=gi(p(d.aa,d),v)}function Lo(d){d.D&&(l.clearTimeout(d.D),d.D=null)}Pn.prototype.aa=function(){this.D=null;const d=Date.now();d-this.T>=0?(_c(this.i,this.B),this.M!=2&&(Pr(),ft(17)),Or(this),this.m=2,Is(this)):vl(this,this.T-d)};function Is(d){d.j.I==0||d.K||$o(d.j,d)}function Or(d){Lo(d);var v=d.O;v&&typeof v.dispose=="function"&&v.dispose(),d.O=null,xo(d.V),d.g&&(v=d.g,d.g=null,v.abort(),v.dispose())}function tt(d,v){try{var _=d.j;if(_.I!=0&&(_.g==d||El(_.h,d))){if(!d.L&&El(_.h,d)&&_.I==3){try{var I=_.Ba.g.parse(v)}catch{I=null}if(Array.isArray(I)&&I.length==3){var z=I;if(z[0]==0){e:if(!_.v){if(_.g)if(_.g.F+3e3<d.F)Go(_),En(_);else break e;pr(_),ft(18)}}else _.xa=z[1],0<_.xa-_.K&&z[2]<37500&&_.F&&_.A==0&&!_.C&&(_.C=gi(p(_.Va,_),6e3));Ss(_.h)<=1&&_.ta&&(_.ta=void 0)}else wn(_,11)}else if((d.L||_.g==d)&&Go(_),!C(v))for(z=_.Ba.g.parse(v),v=0;v<z.length;v++){let $e=z[v];const At=$e[0];if(!(At<=_.K))if(_.K=At,$e=$e[1],_.I==2)if($e[0]=="c"){_.M=$e[1],_.ba=$e[2];const Tn=$e[3];Tn!=null&&(_.ka=Tn,_.j.info("VER="+_.ka));const Br=$e[4];Br!=null&&(_.za=Br,_.j.info("SVER="+_.za));const mr=$e[5];mr!=null&&typeof mr=="number"&&mr>0&&(I=1.5*mr,_.O=I,_.j.info("backChannelRequestTimeoutMs_="+I)),I=_;const gr=d.g;if(gr){const Yo=gr.g?gr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Yo){var q=I.h;q.g||Yo.indexOf("spdy")==-1&&Yo.indexOf("quic")==-1&&Yo.indexOf("h2")==-1||(q.j=q.l,q.g=new Set,q.h&&(Uo(q,q.h),q.h=null))}if(I.G){const xl=gr.g?gr.g.getResponseHeader("X-HTTP-Session-Id"):null;xl&&(I.wa=xl,We(I.J,I.G,xl))}}_.I=3,_.l&&_.l.ra(),_.aa&&(_.T=Date.now()-d.F,_.j.info("Handshake RTT: "+_.T+"ms")),I=_;var ie=d;if(I.na=Pl(I,I.L?I.ba:null,I.W),ie.L){Rs(I.h,ie);var be=ie,vt=I.O;vt&&(be.H=vt),be.D&&(Lo(be),As(be)),I.g=ie}else Gt(I);_.i.length>0&&Ur(_)}else $e[0]!="stop"&&$e[0]!="close"||wn(_,7);else _.I==3&&($e[0]=="stop"||$e[0]=="close"?$e[0]=="stop"?wn(_,7):Wo(_):$e[0]!="noop"&&_.l&&_.l.qa($e),_.A=0)}}Pr(4)}catch{}}var bf=class{constructor(d,v){this.g=d,this.map=v}};function Fo(d){this.l=d||10,l.PerformanceNavigationTiming?(d=l.performance.getEntriesByType("navigation"),d=d.length>0&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function _l(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function Ss(d){return d.h?1:d.g?d.g.size:0}function El(d,v){return d.h?d.h==v:d.g?d.g.has(v):!1}function Uo(d,v){d.g?d.g.add(v):d.h=v}function Rs(d,v){d.h&&d.h==v?d.h=null:d.g&&d.g.has(v)&&d.g.delete(v)}Fo.prototype.cancel=function(){if(this.i=yn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function yn(d){if(d.h!=null)return d.i.concat(d.h.G);if(d.g!=null&&d.g.size!==0){let v=d.i;for(const _ of d.g.values())v=v.concat(_.G);return v}return A(d.i)}var Rc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function vn(d,v){if(d){d=d.split("&");for(let _=0;_<d.length;_++){const I=d[_].indexOf("=");let z,q=null;I>=0?(z=d[_].substring(0,I),q=d[_].substring(I+1)):z=d[_],v(z,q?decodeURIComponent(q.replace(/\+/g," ")):"")}}}function sr(d){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let v;d instanceof sr?(this.l=d.l,Cs(this,d.j),this.o=d.o,this.g=d.g,or(this,d.u),this.h=d.h,Ei(this,bl(d.i)),this.m=d.m):d&&(v=String(d).match(Rc))?(this.l=!1,Cs(this,v[1]||"",!0),this.o=bs(v[2]||""),this.g=bs(v[3]||"",!0),or(this,v[4]),this.h=bs(v[5]||"",!0),Ei(this,v[6]||"",!0),this.m=bs(v[7]||"")):(this.l=!1,this.i=new Le(null,this.l))}sr.prototype.toString=function(){const d=[];var v=this.j;v&&d.push(Ds(v,Tl,!0),":");var _=this.g;return(_||v=="file")&&(d.push("//"),(v=this.o)&&d.push(Ds(v,Tl,!0),"@"),d.push(ir(_).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.u,_!=null&&d.push(":",String(_))),(_=this.h)&&(this.g&&_.charAt(0)!="/"&&d.push("/"),d.push(Ds(_,_.charAt(0)=="/"?ks:Al,!0))),(_=this.i.toString())&&d.push("?",_),(_=this.m)&&d.push("#",Ds(_,Il)),d.join("")},sr.prototype.resolve=function(d){const v=xn(this);let _=!!d.j;_?Cs(v,d.j):_=!!d.o,_?v.o=d.o:_=!!d.g,_?v.g=d.g:_=d.u!=null;var I=d.h;if(_)or(v,d.u);else if(_=!!d.h){if(I.charAt(0)!="/")if(this.g&&!this.h)I="/"+I;else{var z=v.h.lastIndexOf("/");z!=-1&&(I=v.h.slice(0,z+1)+I)}if(z=I,z==".."||z==".")I="";else if(z.indexOf("./")!=-1||z.indexOf("/.")!=-1){I=z.lastIndexOf("/",0)==0,z=z.split("/");const q=[];for(let ie=0;ie<z.length;){const be=z[ie++];be=="."?I&&ie==z.length&&q.push(""):be==".."?((q.length>1||q.length==1&&q[0]!="")&&q.pop(),I&&ie==z.length&&q.push("")):(q.push(be),I=!0)}I=q.join("/")}else I=z}return _?v.h=I:_=d.i.toString()!=="",_?Ei(v,bl(d.i)):_=!!d.m,_&&(v.m=d.m),v};function xn(d){return new sr(d)}function Cs(d,v,_){d.j=_?bs(v,!0):v,d.j&&(d.j=d.j.replace(/:$/,""))}function or(d,v){if(v){if(v=Number(v),isNaN(v)||v<0)throw Error("Bad port number "+v);d.u=v}else d.u=null}function Ei(d,v,_){v instanceof Le?(d.i=v,zo(d.i,d.l)):(_||(v=Ds(v,Df)),d.i=new Le(v,d.l))}function We(d,v,_){d.i.set(v,_)}function Mr(d){return We(d,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),d}function bs(d,v){return d?v?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function Ds(d,v,_){return typeof d=="string"?(d=encodeURI(d).replace(v,wl),_&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function wl(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var Tl=/[#\/\?@]/g,Al=/[#\?:]/g,ks=/[#\?]/g,Df=/[#\?@]/g,Il=/#/g;function Le(d,v){this.h=this.g=null,this.i=d||null,this.j=!!v}function ar(d){d.g||(d.g=new Map,d.h=0,d.i&&vn(d.i,function(v,_){d.add(decodeURIComponent(v.replace(/\+/g," ")),_)}))}n=Le.prototype,n.add=function(d,v){ar(this),this.i=null,d=lr(this,d);let _=this.g.get(d);return _||this.g.set(d,_=[]),_.push(v),this.h+=1,this};function Sl(d,v){ar(d),v=lr(d,v),d.g.has(v)&&(d.i=null,d.h-=d.g.get(v).length,d.g.delete(v))}function Bo(d,v){return ar(d),v=lr(d,v),d.g.has(v)}n.forEach=function(d,v){ar(this),this.g.forEach(function(_,I){_.forEach(function(z){d.call(v,z,I,this)},this)},this)};function Rl(d,v){ar(d);let _=[];if(typeof v=="string")Bo(d,v)&&(_=_.concat(d.g.get(lr(d,v))));else for(d=Array.from(d.g.values()),v=0;v<d.length;v++)_=_.concat(d[v]);return _}n.set=function(d,v){return ar(this),this.i=null,d=lr(this,d),Bo(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[v]),this.h+=1,this},n.get=function(d,v){return d?(d=Rl(this,d),d.length>0?String(d[0]):v):v};function Cl(d,v,_){Sl(d,v),_.length>0&&(d.i=null,d.g.set(lr(d,v),A(_)),d.h+=_.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],v=Array.from(this.g.keys());for(let I=0;I<v.length;I++){var _=v[I];const z=ir(_);_=Rl(this,_);for(let q=0;q<_.length;q++){let ie=z;_[q]!==""&&(ie+="="+ir(_[q])),d.push(ie)}}return this.i=d.join("&")};function bl(d){const v=new Le;return v.i=d.i,d.g&&(v.g=new Map(d.g),v.h=d.h),v}function lr(d,v){return v=String(v),d.j&&(v=v.toLowerCase()),v}function zo(d,v){v&&!d.j&&(ar(d),d.i=null,d.g.forEach(function(_,I){const z=I.toLowerCase();I!=z&&(Sl(this,I),Cl(this,z,_))},d)),d.j=v}function ur(d,v){const _=new yi;if(l.Image){const I=new Image;I.onload=g(Ut,_,"TestLoadImage: loaded",!0,v,I),I.onerror=g(Ut,_,"TestLoadImage: error",!1,v,I),I.onabort=g(Ut,_,"TestLoadImage: abort",!1,v,I),I.ontimeout=g(Ut,_,"TestLoadImage: timeout",!1,v,I),l.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=d}else v(!1)}function cr(d,v){const _=new yi,I=new AbortController,z=setTimeout(()=>{I.abort(),Ut(_,"TestPingServer: timeout",!1,v)},1e4);fetch(d,{signal:I.signal}).then(q=>{clearTimeout(z),q.ok?Ut(_,"TestPingServer: ok",!0,v):Ut(_,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout(z),Ut(_,"TestPingServer: error",!1,v)})}function Ut(d,v,_,I,z){try{z&&(z.onload=null,z.onerror=null,z.onabort=null,z.ontimeout=null),I(_)}catch{}}function Ps(){this.g=new ws}function Vr(d){this.i=d.Sb||null,this.h=d.ab||!1}E(Vr,fi),Vr.prototype.g=function(){return new _n(this.i,this.h)};function _n(d,v){Tt.call(this),this.H=d,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}E(_n,Tt),n=_n.prototype,n.open=function(d,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=d,this.D=v,this.readyState=1,qn(this)},n.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const v={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};d&&(v.body=d),(this.H||l).fetch(new Request(this.D,v)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,wi(this)),this.readyState=0},n.Pa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,qn(this)),this.g&&(this.readyState=3,qn(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Cc(this)}else d.text().then(this.Oa.bind(this),this.ga.bind(this))};function Cc(d){d.j.read().then(d.Ma.bind(d)).catch(d.ga.bind(d))}n.Ma=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var v=d.value?d.value:new Uint8Array(0);(v=this.B.decode(v,{stream:!d.done}))&&(this.response=this.responseText+=v)}d.done?wi(this):qn(this),this.readyState==3&&Cc(this)}},n.Oa=function(d){this.g&&(this.response=this.responseText=d,wi(this))},n.Na=function(d){this.g&&(this.response=d,wi(this))},n.ga=function(){this.g&&wi(this)};function wi(d){d.readyState=4,d.l=null,d.j=null,d.B=null,qn(d)}n.setRequestHeader=function(d,v){this.A.append(d,v)},n.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],v=this.h.entries();for(var _=v.next();!_.done;)_=_.value,d.push(_[0]+": "+_[1]),_=v.next();return d.join(`\r
`)};function qn(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(_n.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function bc(d){let v="";return _e(d,function(_,I){v+=I,v+=":",v+=_,v+=`\r
`}),v}function jo(d,v,_){e:{for(I in _){var I=!1;break e}I=!0}I||(_=bc(_),typeof d=="string"?_!=null&&ir(_):We(d,v,_))}function Xe(d){Tt.call(this),this.headers=new Map,this.L=d||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}E(Xe,Tt);var Dc=/^https?$/i,kf=["POST","PUT"];n=Xe.prototype,n.Fa=function(d){this.H=d},n.ea=function(d,v,_,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);v=v?v.toUpperCase():"GET",this.D=d,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Ec.g(),this.g.onreadystatechange=w(p(this.Ca,this));try{this.B=!0,this.g.open(v,String(d),!0),this.B=!1}catch(q){Ti(this,q);return}if(d=_||"",_=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var z in I)_.set(z,I[z]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(const q of I.keys())_.set(q,I.get(q));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(_.keys()).find(q=>q.toLowerCase()=="content-type"),z=l.FormData&&d instanceof l.FormData,!(Array.prototype.indexOf.call(kf,v,void 0)>=0)||I||z||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[q,ie]of _)this.g.setRequestHeader(q,ie);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(d),this.v=!1}catch(q){Ti(this,q)}};function Ti(d,v){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=v,d.o=5,Ai(d),Fr(d)}function Ai(d){d.A||(d.A=!0,yt(d,"complete"),yt(d,"error"))}n.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=d||7,yt(this,"complete"),yt(this,"abort"),Fr(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Fr(this,!0)),Xe.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?Lr(this):this.Xa())},n.Xa=function(){Lr(this)};function Lr(d){if(d.h&&typeof o<"u"){if(d.v&&dr(d)==4)setTimeout(d.Ca.bind(d),0);else if(yt(d,"readystatechange"),dr(d)==4){d.h=!1;try{const q=d.ca();e:switch(q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break e;default:v=!1}var _;if(!(_=v)){var I;if(I=q===0){let ie=String(d.D).match(Rc)[1]||null;!ie&&l.self&&l.self.location&&(ie=l.self.location.protocol.slice(0,-1)),I=!Dc.test(ie?ie.toLowerCase():"")}_=I}if(_)yt(d,"complete"),yt(d,"success");else{d.o=6;try{var z=dr(d)>2?d.g.statusText:""}catch{z=""}d.l=z+" ["+d.ca()+"]",Ai(d)}}finally{Fr(d)}}}}function Fr(d,v){if(d.g){d.m&&(clearTimeout(d.m),d.m=null);const _=d.g;d.g=null,v||yt(d,"ready");try{_.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function dr(d){return d.g?d.g.readyState:0}n.ca=function(){try{return dr(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(d){if(this.g){var v=this.g.responseText;return d&&v.indexOf(d)==0&&(v=v.substring(d.length)),mc(v)}};function kc(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.F){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function Dl(d){const v={};d=(d.g&&dr(d)>=2&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<d.length;I++){if(C(d[I]))continue;var _=Vo(d[I]);const z=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const q=v[z]||[];v[z]=q,q.push(_)}ce(v,function(I){return I.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function hr(d,v,_){return _&&_.internalChannelParams&&_.internalChannelParams[d]||v}function Ho(d){this.za=0,this.i=[],this.j=new yi,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=hr("failFast",!1,d),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=hr("baseRetryDelayMs",5e3,d),this.Za=hr("retryDelaySeedMs",1e4,d),this.Ta=hr("forwardChannelMaxRetries",2,d),this.va=hr("forwardChannelRequestTimeoutMs",2e4,d),this.ma=d&&d.xmlHttpFactory||void 0,this.Ua=d&&d.Rb||void 0,this.Aa=d&&d.useFetchStreams||!1,this.O=void 0,this.L=d&&d.supportsCrossDomainXhr||!1,this.M="",this.h=new Fo(d&&d.concurrentRequestLimit),this.Ba=new Ps,this.S=d&&d.fastHandshake||!1,this.R=d&&d.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=d&&d.Pb||!1,d&&d.ua&&this.j.ua(),d&&d.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&d&&d.detectBufferingProxy||!1,this.ia=void 0,d&&d.longPollingTimeout&&d.longPollingTimeout>0&&(this.ia=d.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=Ho.prototype,n.ka=8,n.I=1,n.connect=function(d,v,_,I){ft(0),this.W=d,this.H=v||{},_&&I!==void 0&&(this.H.OSID=_,this.H.OAID=I),this.F=this.X,this.J=Pl(this,null,this.W),Ur(this)};function Wo(d){if(qo(d),d.I==3){var v=d.V++,_=xn(d.J);if(We(_,"SID",d.M),We(_,"RID",v),We(_,"TYPE","terminate"),fr(d,_),v=new Pn(d,d.j,v),v.M=2,v.A=Mr(xn(_)),_=!1,l.navigator&&l.navigator.sendBeacon)try{_=l.navigator.sendBeacon(v.A.toString(),"")}catch{}!_&&l.Image&&(new Image().src=v.A,_=!0),_||(v.g=xc(v.j,null),v.g.ea(v.A)),v.F=Date.now(),As(v)}Os(d)}function En(d){d.g&&(Ns(d),d.g.cancel(),d.g=null)}function qo(d){En(d),d.v&&(l.clearTimeout(d.v),d.v=null),Go(d),d.h.cancel(),d.m&&(typeof d.m=="number"&&l.clearTimeout(d.m),d.m=null)}function Ur(d){if(!_l(d.h)&&!d.m){d.m=!0;var v=d.Ea;ve||S(),he||(ve(),he=!0),k.add(v,d),d.D=0}}function Pc(d,v){return Ss(d.h)>=d.h.j-(d.m?1:0)?!1:d.m?(d.i=v.G.concat(d.i),!0):d.I==1||d.I==2||d.D>=(d.Sa?0:d.Ta)?!1:(d.m=gi(p(d.Ea,d,v),Qo(d,d.D)),d.D++,!0)}n.Ea=function(d){if(this.m)if(this.m=null,this.I==1){if(!d){this.V=Math.floor(Math.random()*1e5),d=this.V++;const z=new Pn(this,this.j,d);let q=this.o;if(this.U&&(q?(q=L(q),De(q,this.U)):q=this.U),this.u!==null||this.R||(z.J=q,q=null),this.S)e:{for(var v=0,_=0;_<this.i.length;_++){t:{var I=this.i[_];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break t}I=void 0}if(I===void 0)break;if(v+=I,v>4096){v=_;break e}if(v===4096||_===this.i.length-1){v=_+1;break e}}v=1e3}else v=1e3;v=kl(this,z,v),_=xn(this.J),We(_,"RID",d),We(_,"CVER",22),this.G&&We(_,"X-HTTP-Session-Id",this.G),fr(this,_),q&&(this.R?v="headers="+ir(bc(q))+"&"+v:this.u&&jo(_,this.u,q)),Uo(this.h,z),this.Ra&&We(_,"TYPE","init"),this.S?(We(_,"$req",v),We(_,"SID","null"),z.U=!0,Wn(z,_,null)):Wn(z,_,v),this.I=2}}else this.I==3&&(d?xs(this,d):this.i.length==0||_l(this.h)||xs(this))};function xs(d,v){var _;v?_=v.l:_=d.V++;const I=xn(d.J);We(I,"SID",d.M),We(I,"RID",_),We(I,"AID",d.K),fr(d,I),d.u&&d.o&&jo(I,d.u,d.o),_=new Pn(d,d.j,_,d.D+1),d.u===null&&(_.J=d.o),v&&(d.i=v.G.concat(d.i)),v=kl(d,_,1e3),_.H=Math.round(d.va*.5)+Math.round(d.va*.5*Math.random()),Uo(d.h,_),Wn(_,I,v)}function fr(d,v){d.H&&_e(d.H,function(_,I){We(v,I,_)}),d.l&&_e({},function(_,I){We(v,I,_)})}function kl(d,v,_){_=Math.min(d.i.length,_);const I=d.l?p(d.l.Ka,d.l,d):null;e:{var z=d.i;let be=-1;for(;;){const vt=["count="+_];be==-1?_>0?(be=z[0].g,vt.push("ofs="+be)):be=0:vt.push("ofs="+be);let $e=!0;for(let At=0;At<_;At++){var q=z[At].g;const Tn=z[At].map;if(q-=be,q<0)be=Math.max(0,z[At].g-100),$e=!1;else try{q="req"+q+"_"||"";try{var ie=Tn instanceof Map?Tn:Object.entries(Tn);for(const[Br,mr]of ie){let gr=mr;c(mr)&&(gr=hi(mr)),vt.push(q+Br+"="+encodeURIComponent(gr))}}catch(Br){throw vt.push(q+"type="+encodeURIComponent("_badmap")),Br}}catch{I&&I(Tn)}}if($e){ie=vt.join("&");break e}}ie=void 0}return d=d.i.splice(0,_),v.G=d,ie}function Gt(d){if(!d.g&&!d.v){d.Y=1;var v=d.Da;ve||S(),he||(ve(),he=!0),k.add(v,d),d.A=0}}function pr(d){return d.g||d.v||d.A>=3?!1:(d.Y++,d.v=gi(p(d.Da,d),Qo(d,d.A)),d.A++,!0)}n.Da=function(){if(this.v=null,Ii(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var d=4*this.T;this.j.info("BP detection timer enabled: "+d),this.B=gi(p(this.Wa,this),d)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,ft(10),En(this),Ii(this))};function Ns(d){d.B!=null&&(l.clearTimeout(d.B),d.B=null)}function Ii(d){d.g=new Pn(d,d.j,"rpc",d.Y),d.u===null&&(d.g.J=d.o),d.g.P=0;var v=xn(d.na);We(v,"RID","rpc"),We(v,"SID",d.M),We(v,"AID",d.K),We(v,"CI",d.F?"0":"1"),!d.F&&d.ia&&We(v,"TO",d.ia),We(v,"TYPE","xmlhttp"),fr(d,v),d.u&&d.o&&jo(v,d.u,d.o),d.O&&(d.g.H=d.O);var _=d.g;d=d.ba,_.M=1,_.A=Mr(xn(v)),_.u=null,_.R=!0,yl(_,d)}n.Va=function(){this.C!=null&&(this.C=null,En(this),pr(this),ft(19))};function Go(d){d.C!=null&&(l.clearTimeout(d.C),d.C=null)}function $o(d,v){var _=null;if(d.g==v){Go(d),Ns(d),d.g=null;var I=2}else if(El(d.h,v))_=v.G,Rs(d.h,v),I=1;else return;if(d.I!=0){if(v.o)if(I==1){_=v.u?v.u.length:0,v=Date.now()-v.F;var z=d.D;I=mi(),yt(I,new ml(I,_)),Ur(d)}else Gt(d);else if(z=v.m,z==3||z==0&&v.X>0||!(I==1&&Pc(d,v)||I==2&&pr(d)))switch(_&&_.length>0&&(v=d.h,v.i=v.i.concat(_)),z){case 1:wn(d,5);break;case 4:wn(d,10);break;case 3:wn(d,6);break;default:wn(d,2)}}}function Qo(d,v){let _=d.Qa+Math.floor(Math.random()*d.Za);return d.isActive()||(_*=2),_*v}function wn(d,v){if(d.j.info("Error code "+v),v==2){var _=p(d.bb,d),I=d.Ua;const z=!I;I=new sr(I||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||Cs(I,"https"),Mr(I),z?ur(I.toString(),_):cr(I.toString(),_)}else ft(2);d.I=0,d.l&&d.l.pa(v),Os(d),qo(d)}n.bb=function(d){d?(this.j.info("Successfully pinged google.com"),ft(2)):(this.j.info("Failed to ping google.com"),ft(1))};function Os(d){if(d.I=0,d.ja=[],d.l){const v=yn(d.h);(v.length!=0||d.i.length!=0)&&(b(d.ja,v),b(d.ja,d.i),d.h.i.length=0,A(d.i),d.i.length=0),d.l.oa()}}function Pl(d,v,_){var I=_ instanceof sr?xn(_):new sr(_);if(I.g!="")v&&(I.g=v+"."+I.g),or(I,I.u);else{var z=l.location;I=z.protocol,v=v?v+"."+z.hostname:z.hostname,z=+z.port;const q=new sr(null);I&&Cs(q,I),v&&(q.g=v),z&&or(q,z),_&&(q.h=_),I=q}return _=d.G,v=d.wa,_&&v&&We(I,_,v),We(I,"VER",d.ka),fr(d,I),I}function xc(d,v,_){if(v&&!d.L)throw Error("Can't create secondary domain capable XhrIo object.");return v=d.Aa&&!d.ma?new Xe(new Vr({ab:_})):new Xe(d.ma),v.Fa(d.L),v}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Nc(){}n=Nc.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function Ko(){}Ko.prototype.g=function(d,v){return new Bt(d,v)};function Bt(d,v){Tt.call(this),this.g=new Ho(v),this.l=d,this.h=v&&v.messageUrlParams||null,d=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(d?d["X-WebChannel-Content-Type"]=v.messageContentType:d={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.sa&&(d?d["X-WebChannel-Client-Profile"]=v.sa:d={"X-WebChannel-Client-Profile":v.sa}),this.g.U=d,(d=v&&v.Qb)&&!C(d)&&(this.g.u=d),this.A=v&&v.supportsCrossDomainXhr||!1,this.v=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!C(v)&&(this.g.G=v,d=this.h,d!==null&&v in d&&(d=this.h,v in d&&delete d[v])),this.j=new Si(this)}E(Bt,Tt),Bt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Bt.prototype.close=function(){Wo(this.g)},Bt.prototype.o=function(d){var v=this.g;if(typeof d=="string"){var _={};_.__data__=d,d=_}else this.v&&(_={},_.__data__=hi(d),d=_);v.i.push(new bf(v.Ya++,d)),v.I==3&&Ur(v)},Bt.prototype.N=function(){this.g.l=null,delete this.j,Wo(this.g),delete this.g,Bt.Z.N.call(this)};function Oc(d){No.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var v=d.__sm__;if(v){e:{for(const _ in v){d=_;break e}d=void 0}(this.i=d)&&(d=this.i,v=v!==null&&d in v?v[d]:void 0),this.data=v}else this.data=d}E(Oc,No);function Mc(){pl.call(this),this.status=1}E(Mc,pl);function Si(d){this.g=d}E(Si,Nc),Si.prototype.ra=function(){yt(this.g,"a")},Si.prototype.qa=function(d){yt(this.g,new Oc(d))},Si.prototype.pa=function(d){yt(this.g,new Mc)},Si.prototype.oa=function(){yt(this.g,"b")},Ko.prototype.createWebChannel=Ko.prototype.g,Bt.prototype.send=Bt.prototype.o,Bt.prototype.open=Bt.prototype.m,Bt.prototype.close=Bt.prototype.close,bA=function(){return new Ko},CA=function(){return mi()},RA=Hn,Lm={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},vi.NO_ERROR=0,vi.TIMEOUT=8,vi.HTTP_ERROR=6,qd=vi,_i.COMPLETE="complete",SA=_i,gc.EventType=pi,pi.OPEN="a",pi.CLOSE="b",pi.ERROR="c",pi.MESSAGE="d",Tt.prototype.listen=Tt.prototype.J,uu=gc,Xe.prototype.listenOnce=Xe.prototype.K,Xe.prototype.getLastError=Xe.prototype.Ha,Xe.prototype.getLastErrorCode=Xe.prototype.ya,Xe.prototype.getStatus=Xe.prototype.ca,Xe.prototype.getResponseJson=Xe.prototype.La,Xe.prototype.getResponseText=Xe.prototype.la,Xe.prototype.send=Xe.prototype.ea,Xe.prototype.setWithCredentials=Xe.prototype.Fa,IA=Xe}).apply(typeof Dd<"u"?Dd:typeof self<"u"?self:typeof window<"u"?window:{});const yE="@firebase/firestore",vE="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ht{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ht.UNAUTHENTICATED=new Ht(null),Ht.GOOGLE_CREDENTIALS=new Ht("google-credentials-uid"),Ht.FIRST_PARTY=new Ht("first-party-uid"),Ht.MOCK_USER=new Ht("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let rl="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const po=new Rg("@firebase/firestore");function Aa(){return po.logLevel}function te(n,...e){if(po.logLevel<=Me.DEBUG){const t=e.map(Dg);po.debug(`Firestore (${rl}): ${n}`,...t)}}function on(n,...e){if(po.logLevel<=Me.ERROR){const t=e.map(Dg);po.error(`Firestore (${rl}): ${n}`,...t)}}function as(n,...e){if(po.logLevel<=Me.WARN){const t=e.map(Dg);po.warn(`Firestore (${rl}): ${n}`,...t)}}function Dg(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pe(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,DA(n,r,t)}function DA(n,e,t){let r=`FIRESTORE (${rl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw on(r),new Error(r)}function ye(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||DA(e,i,r)}function Ce(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class se extends oi{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rs{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kA{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class PA{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Ht.UNAUTHENTICATED)))}shutdown(){}}class KD{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class YD{constructor(e){this.t=e,this.currentUser=Ht.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ye(this.o===void 0,42304);let r=this.i;const i=f=>this.i!==r?(r=this.i,t(f)):Promise.resolve();let o=new rs;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new rs,e.enqueueRetryable((()=>i(this.currentUser)))};const l=()=>{const f=o;e.enqueueRetryable((async()=>{await f.promise,await i(this.currentUser)}))},c=f=>{te("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=f,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit((f=>c(f))),setTimeout((()=>{if(!this.auth){const f=this.t.getImmediate({optional:!0});f?c(f):(te("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new rs)}}),0),l()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(te("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ye(typeof r.accessToken=="string",31837,{l:r}),new kA(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ye(e===null||typeof e=="string",2055,{h:e}),new Ht(e)}}class JD{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=Ht.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class XD{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new JD(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Ht.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class _E{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class ZD{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Ar(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){ye(this.o===void 0,3512);const r=o=>{o.error!=null&&te("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const l=o.token!==this.m;return this.m=o.token,te("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable((()=>r(o)))};const i=o=>{te("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((o=>i(o))),setTimeout((()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?i(o):te("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new _E(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(ye(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new _E(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e1(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kh{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=e1(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%62))}return r}}function Re(n,e){return n<e?-1:n>e?1:0}function Fm(n,e){const t=Math.min(n.length,e.length);for(let r=0;r<t;r++){const i=n.charAt(r),o=e.charAt(r);if(i!==o)return am(i)===am(o)?Re(i,o):am(i)?1:-1}return Re(n.length,e.length)}const t1=55296,n1=57343;function am(n){const e=n.charCodeAt(0);return e>=t1&&e<=n1}function Fa(n,e,t){return n.length===e.length&&n.every(((r,i)=>t(r,e[i])))}function xA(n){return n+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EE="__name__";class wr{constructor(e,t,r){t===void 0?t=0:t>e.length&&pe(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&pe(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return wr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof wr?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const o=wr.compareSegments(e.get(i),t.get(i));if(o!==0)return o}return Re(e.length,t.length)}static compareSegments(e,t){const r=wr.isNumericId(e),i=wr.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?wr.extractNumericId(e).compare(wr.extractNumericId(t)):Fm(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ns.fromString(e.substring(4,e.length-2))}}class qe extends wr{construct(e,t,r){return new qe(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new se(K.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((i=>i.length>0)))}return new qe(t)}static emptyPath(){return new qe([])}}const r1=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class at extends wr{construct(e,t,r){return new at(e,t,r)}static isValidIdentifier(e){return r1.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),at.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===EE}static keyField(){return new at([EE])}static fromServerFormat(e){const t=[];let r="",i=0;const o=()=>{if(r.length===0)throw new se(K.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;i<e.length;){const c=e[i];if(c==="\\"){if(i+1===e.length)throw new se(K.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const f=e[i+1];if(f!=="\\"&&f!=="."&&f!=="`")throw new se(K.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=f,i+=2}else c==="`"?(l=!l,i++):c!=="."||l?(r+=c,i++):(o(),i++)}if(o(),l)throw new se(K.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new at(t)}static emptyPath(){return new at([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oe{constructor(e){this.path=e}static fromPath(e){return new oe(qe.fromString(e))}static fromName(e){return new oe(qe.fromString(e).popFirst(5))}static empty(){return new oe(qe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&qe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return qe.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new oe(new qe(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NA(n,e,t){if(!t)throw new se(K.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function OA(n,e,t,r){if(e===!0&&r===!0)throw new se(K.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function wE(n){if(!oe.isDocumentKey(n))throw new se(K.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function TE(n){if(oe.isDocumentKey(n))throw new se(K.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function MA(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Yh(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":pe(12329,{type:typeof n})}function Rr(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new se(K.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Yh(n);throw new se(K.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rt(n,e){const t={typeString:n};return e&&(t.value=e),t}function Ju(n,e){if(!MA(n))throw new se(K.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}const l=n[r];if(i&&typeof l!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&l!==o.value){t=`Expected '${r}' field to equal '${o.value}'`;break}}if(t)throw new se(K.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AE=-62135596800,IE=1e6;class ze{static now(){return ze.fromMillis(Date.now())}static fromDate(e){return ze.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*IE);return new ze(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new se(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new se(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<AE)throw new se(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new se(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/IE}_compareTo(e){return this.seconds===e.seconds?Re(this.nanoseconds,e.nanoseconds):Re(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ze._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Ju(e,ze._jsonSchema))return new ze(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-AE;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ze._jsonSchemaVersion="firestore/timestamp/1.0",ze._jsonSchema={type:Rt("string",ze._jsonSchemaVersion),seconds:Rt("number"),nanoseconds:Rt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ee{static fromTimestamp(e){return new Ee(e)}static min(){return new Ee(new ze(0,0))}static max(){return new Ee(new ze(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ku=-1;class fh{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function Um(n){return n.fields.find((e=>e.kind===2))}function Ks(n){return n.fields.filter((e=>e.kind!==2))}fh.UNKNOWN_ID=-1;class Gd{constructor(e,t){this.fieldPath=e,this.kind=t}}class Pu{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Pu(0,kn.min())}}function i1(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Ee.fromTimestamp(r===1e9?new ze(t+1,0):new ze(t,r));return new kn(i,oe.empty(),e)}function VA(n){return new kn(n.readTime,n.key,ku)}class kn{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new kn(Ee.min(),oe.empty(),ku)}static max(){return new kn(Ee.max(),oe.empty(),ku)}}function kg(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=oe.comparator(n.documentKey,e.documentKey),t!==0?t:Re(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LA="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class FA{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function To(n){if(n.code!==K.FAILED_PRECONDITION||n.message!==LA)throw n;te("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&pe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new U(((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof U?t:U.resolve(t)}catch(t){return U.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):U.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):U.reject(t)}static resolve(e){return new U(((t,r)=>{t(e)}))}static reject(e){return new U(((t,r)=>{r(e)}))}static waitFor(e){return new U(((t,r)=>{let i=0,o=0,l=!1;e.forEach((c=>{++i,c.next((()=>{++o,l&&o===i&&t()}),(f=>r(f)))})),l=!0,o===i&&t()}))}static or(e){let t=U.resolve(!1);for(const r of e)t=t.next((i=>i?U.resolve(i):r()));return t}static forEach(e,t){const r=[];return e.forEach(((i,o)=>{r.push(t.call(this,i,o))})),this.waitFor(r)}static mapArray(e,t){return new U(((r,i)=>{const o=e.length,l=new Array(o);let c=0;for(let f=0;f<o;f++){const p=f;t(e[p]).next((g=>{l[p]=g,++c,c===o&&r(l)}),(g=>i(g)))}}))}static doWhile(e,t){return new U(((r,i)=>{const o=()=>{e()===!0?t().next((()=>{o()}),i):r()};o()}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rn="SimpleDb";class Jh{static open(e,t,r,i){try{return new Jh(t,e.transaction(i,r))}catch(o){throw new mu(t,o)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new rs,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new mu(e,t.error)):this.S.resolve()},this.transaction.onerror=r=>{const i=Pg(r.target.error);this.S.reject(new mu(e,i))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(te(Rn,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new o1(t)}}class is{static delete(e){return te(Rn,"Removing database:",e),Zs(aA().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!gA())return!1;if(is.F())return!0;const e=kt(),t=is.M(e),r=0<t&&t<10,i=UA(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static F(){return typeof process<"u"&&process.__PRIVATE_env?.__PRIVATE_USE_MOCK_PERSISTENCE==="YES"}static O(e,t){return e.store(t)}static M(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,t,r){this.name=e,this.version=t,this.N=r,this.B=null,is.M(kt())===12.2&&on("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(te(Rn,"Opening database:",this.name),this.db=await new Promise(((t,r)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=o=>{const l=o.target.result;t(l)},i.onblocked=()=>{r(new mu(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=o=>{const l=o.target.error;l.name==="VersionError"?r(new se(K.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):l.name==="InvalidStateError"?r(new se(K.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+l)):r(new mu(e,l))},i.onupgradeneeded=o=>{te(Rn,'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);const l=o.target.result;this.N.k(l,i.transaction,o.oldVersion,this.version).next((()=>{te(Rn,"Database upgrade to version "+this.version+" complete")}))}}))),this.q&&(this.db.onversionchange=t=>this.q(t)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,r,i){const o=t==="readonly";let l=0;for(;;){++l;try{this.db=await this.L(e);const c=Jh.open(this.db,e,o?"readonly":"readwrite",r),f=i(c).next((p=>(c.C(),p))).catch((p=>(c.abort(p),U.reject(p)))).toPromise();return f.catch((()=>{})),await c.D,f}catch(c){const f=c,p=f.name!=="FirebaseError"&&l<3;if(te(Rn,"Transaction failed with error:",f.message,"Retrying:",p),this.close(),!p)return Promise.reject(f)}}}close(){this.db&&this.db.close(),this.db=void 0}}function UA(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class s1{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return Zs(this.U.delete())}}class mu extends se{constructor(e,t){super(K.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function gs(n){return n.name==="IndexedDbTransactionError"}class o1{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(te(Rn,"PUT",this.store.name,e,t),r=this.store.put(t,e)):(te(Rn,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Zs(r)}add(e){return te(Rn,"ADD",this.store.name,e,e),Zs(this.store.add(e))}get(e){return Zs(this.store.get(e)).next((t=>(t===void 0&&(t=null),te(Rn,"GET",this.store.name,e,t),t)))}delete(e){return te(Rn,"DELETE",this.store.name,e),Zs(this.store.delete(e))}count(){return te(Rn,"COUNT",this.store.name),Zs(this.store.count())}J(e,t){const r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){const o=i.getAll(r.range);return new U(((l,c)=>{o.onerror=f=>{c(f.target.error)},o.onsuccess=f=>{l(f.target.result)}}))}{const o=this.cursor(r),l=[];return this.H(o,((c,f)=>{l.push(f)})).next((()=>l))}}Y(e,t){const r=this.store.getAll(e,t===null?void 0:t);return new U(((i,o)=>{r.onerror=l=>{o(l.target.error)},r.onsuccess=l=>{i(l.target.result)}}))}Z(e,t){te(Rn,"DELETE ALL",this.store.name);const r=this.options(e,t);r.X=!1;const i=this.cursor(r);return this.H(i,((o,l,c)=>c.delete()))}ee(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.H(i,t)}te(e){const t=this.cursor({});return new U(((r,i)=>{t.onerror=o=>{const l=Pg(o.target.error);i(l)},t.onsuccess=o=>{const l=o.target.result;l?e(l.primaryKey,l.value).next((c=>{c?l.continue():r()})):r()}}))}H(e,t){const r=[];return new U(((i,o)=>{e.onerror=l=>{o(l.target.error)},e.onsuccess=l=>{const c=l.target.result;if(!c)return void i();const f=new s1(c),p=t(c.primaryKey,c.value,f);if(p instanceof U){const g=p.catch((E=>(f.done(),U.reject(E))));r.push(g)}f.isDone?i():f.G===null?c.continue():c.continue(f.G)}})).next((()=>U.waitFor(r)))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Zs(n){return new U(((e,t)=>{n.onsuccess=r=>{const i=r.target.result;e(i)},n.onerror=r=>{const i=Pg(r.target.error);t(i)}}))}let SE=!1;function Pg(n){const e=is.M(kt());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new se("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return SE||(SE=!0,setTimeout((()=>{throw r}),0)),r}}return n}const gu="IndexBackfiller";class a1{constructor(e,t){this.asyncQueue=e,this.ne=t,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){te(gu,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{const t=await this.ne.ie();te(gu,`Documents written: ${t}`)}catch(t){gs(t)?te(gu,"Ignoring IndexedDB error during index backfill: ",t):await To(t)}await this.re(6e4)}))}}class l1{constructor(e,t){this.localStore=e,this.persistence=t}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.se(t,e)))}se(e,t){const r=new Set;let i=t,o=!0;return U.doWhile((()=>o===!0&&i>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((l=>{if(l!==null&&!r.has(l))return te(gu,`Processing collection: ${l}`),this.oe(e,l,i).next((c=>{i-=c,r.add(l)}));o=!1})))).next((()=>t-i))}oe(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next((o=>{const l=o.changes;return this.localStore.indexManager.updateIndexEntries(e,l).next((()=>this._e(i,o))).next((c=>(te(gu,`Updating offset: ${c}`),this.localStore.indexManager.updateCollectionGroup(e,t,c)))).next((()=>l.size))}))))}_e(e,t){let r=e;return t.changes.forEach(((i,o)=>{const l=VA(o);kg(l,r)>0&&(r=l)})),new kn(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Un{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>t.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Un.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oo=-1;function Xh(n){return n==null}function xu(n){return n===0&&1/n==-1/0}function u1(n){return typeof n=="number"&&Number.isInteger(n)&&!xu(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ph="";function en(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=RE(e)),e=c1(n.get(t),e);return RE(e)}function c1(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const o=n.charAt(i);switch(o){case"\0":t+="";break;case ph:t+="";break;default:t+=o}}return t}function RE(n){return n+ph+""}function Ir(n){const e=n.length;if(ye(e>=2,64408,{path:n}),e===2)return ye(n.charAt(0)===ph&&n.charAt(1)==="",56145,{path:n}),qe.emptyPath();const t=e-2,r=[];let i="";for(let o=0;o<e;){const l=n.indexOf(ph,o);switch((l<0||l>t)&&pe(50515,{path:n}),n.charAt(l+1)){case"":const c=n.substring(o,l);let f;i.length===0?f=c:(i+=c,f=i,i=""),r.push(f);break;case"":i+=n.substring(o,l),i+="\0";break;case"":i+=n.substring(o,l+1);break;default:pe(61167,{path:n})}o=l+2}return new qe(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ys="remoteDocuments",Xu="owner",ya="owner",Nu="mutationQueues",d1="userId",Xn="mutations",CE="batchId",io="userMutationsIndex",bE=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $d(n,e){return[n,en(e)]}function BA(n,e,t){return[n,en(e),t]}const h1={},Ua="documentMutations",mh="remoteDocumentsV14",f1=["prefixPath","collectionGroup","readTime","documentId"],Qd="documentKeyIndex",p1=["prefixPath","collectionGroup","documentId"],zA="collectionGroupIndex",m1=["collectionGroup","readTime","prefixPath","documentId"],Ou="remoteDocumentGlobal",Bm="remoteDocumentGlobalKey",Ba="targets",jA="queryTargetsIndex",g1=["canonicalId","targetId"],za="targetDocuments",y1=["targetId","path"],xg="documentTargetsIndex",v1=["path","targetId"],gh="targetGlobalKey",ao="targetGlobal",Mu="collectionParents",_1=["collectionId","parent"],ja="clientMetadata",E1="clientId",Zh="bundles",w1="bundleId",ef="namedQueries",T1="name",Ng="indexConfiguration",A1="indexId",zm="collectionGroupIndex",I1="collectionGroup",yu="indexState",S1=["indexId","uid"],HA="sequenceNumberIndex",R1=["uid","sequenceNumber"],vu="indexEntries",C1=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],WA="documentKeyIndex",b1=["indexId","uid","orderedDocumentKey"],tf="documentOverlays",D1=["userId","collectionPath","documentId"],jm="collectionPathOverlayIndex",k1=["userId","collectionPath","largestBatchId"],qA="collectionGroupOverlayIndex",P1=["userId","collectionGroup","largestBatchId"],Og="globals",x1="name",GA=[Nu,Xn,Ua,Ys,Ba,Xu,ao,za,ja,Ou,Mu,Zh,ef],N1=[...GA,tf],$A=[Nu,Xn,Ua,mh,Ba,Xu,ao,za,ja,Ou,Mu,Zh,ef,tf],QA=$A,Mg=[...QA,Ng,yu,vu],O1=Mg,KA=[...Mg,Og],M1=KA;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hm extends FA{constructor(e,t){super(),this.le=e,this.currentSequenceNumber=t}}function Pt(n,e){const t=Ce(n);return is.O(t.le,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DE(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function ys(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function YA(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lt{constructor(e,t){this.comparator=e,this.root=t||Wt.EMPTY}insert(e,t){return new lt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Wt.BLACK,null,null))}remove(e){return new lt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Wt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new kd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new kd(this.root,e,this.comparator,!1)}getReverseIterator(){return new kd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new kd(this.root,e,this.comparator,!0)}}class kd{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Wt{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??Wt.RED,this.left=i??Wt.EMPTY,this.right=o??Wt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new Wt(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Wt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return Wt.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Wt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Wt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw pe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw pe(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw pe(27949);return e+(this.isRed()?0:1)}}Wt.EMPTY=null,Wt.RED=!0,Wt.BLACK=!1;Wt.EMPTY=new class{constructor(){this.size=0}get key(){throw pe(57766)}get value(){throw pe(16141)}get color(){throw pe(16727)}get left(){throw pe(29726)}get right(){throw pe(36894)}copy(e,t,r,i,o){return this}insert(e,t,r){return new Wt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ye{constructor(e){this.comparator=e,this.data=new lt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new kE(this.data.getIterator())}getIteratorFrom(e){return new kE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof Ye)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Ye(this.comparator);return t.data=e,t}}class kE{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function va(n){return n.hasNext()?n.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mn{constructor(e){this.fields=e,e.sort(at.comparator)}static empty(){return new mn([])}unionWith(e){let t=new Ye(at.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new mn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Fa(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JA extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new JA("Invalid base64 string: "+o):o}})(e);return new wt(t)}static fromUint8Array(e){const t=(function(i){let o="";for(let l=0;l<i.length;++l)o+=String.fromCharCode(i[l]);return o})(e);return new wt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Re(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}wt.EMPTY_BYTE_STRING=new wt("");const V1=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ti(n){if(ye(!!n,39018),typeof n=="string"){let e=0;const t=V1.exec(n);if(ye(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ot(n.seconds),nanos:ot(n.nanos)}}function ot(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function ni(n){return typeof n=="string"?wt.fromBase64String(n):wt.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XA="server_timestamp",ZA="__type__",eI="__previous_value__",tI="__local_write_time__";function Vg(n){return(n?.mapValue?.fields||{})[ZA]?.stringValue===XA}function nf(n){const e=n.mapValue.fields[eI];return Vg(e)?nf(e):e}function Vu(n){const e=ti(n.mapValue.fields[tI].timestampValue);return new ze(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L1{constructor(e,t,r,i,o,l,c,f,p,g){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=l,this.autoDetectLongPolling=c,this.longPollingOptions=f,this.useFetchStreams=p,this.isUsingEmulator=g}}const yh="(default)";class ls{constructor(e,t){this.projectId=e,this.database=t||yh}static empty(){return new ls("","")}get isDefaultDatabase(){return this.database===yh}isEqual(e){return e instanceof ls&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lg="__type__",nI="__max__",Ki={mapValue:{fields:{__type__:{stringValue:nI}}}},Fg="__vector__",Ha="value",Kd={nullValue:"NULL_VALUE"};function us(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Vg(n)?4:rI(n)?9007199254740991:rf(n)?10:11:pe(28295,{value:n})}function Dr(n,e){if(n===e)return!0;const t=us(n);if(t!==us(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Vu(n).isEqual(Vu(e));case 3:return(function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;const l=ti(i.timestampValue),c=ti(o.timestampValue);return l.seconds===c.seconds&&l.nanos===c.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(i,o){return ni(i.bytesValue).isEqual(ni(o.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(i,o){return ot(i.geoPointValue.latitude)===ot(o.geoPointValue.latitude)&&ot(i.geoPointValue.longitude)===ot(o.geoPointValue.longitude)})(n,e);case 2:return(function(i,o){if("integerValue"in i&&"integerValue"in o)return ot(i.integerValue)===ot(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){const l=ot(i.doubleValue),c=ot(o.doubleValue);return l===c?xu(l)===xu(c):isNaN(l)&&isNaN(c)}return!1})(n,e);case 9:return Fa(n.arrayValue.values||[],e.arrayValue.values||[],Dr);case 10:case 11:return(function(i,o){const l=i.mapValue.fields||{},c=o.mapValue.fields||{};if(DE(l)!==DE(c))return!1;for(const f in l)if(l.hasOwnProperty(f)&&(c[f]===void 0||!Dr(l[f],c[f])))return!1;return!0})(n,e);default:return pe(52216,{left:n})}}function Lu(n,e){return(n.values||[]).find((t=>Dr(t,e)))!==void 0}function cs(n,e){if(n===e)return 0;const t=us(n),r=us(e);if(t!==r)return Re(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Re(n.booleanValue,e.booleanValue);case 2:return(function(o,l){const c=ot(o.integerValue||o.doubleValue),f=ot(l.integerValue||l.doubleValue);return c<f?-1:c>f?1:c===f?0:isNaN(c)?isNaN(f)?0:-1:1})(n,e);case 3:return PE(n.timestampValue,e.timestampValue);case 4:return PE(Vu(n),Vu(e));case 5:return Fm(n.stringValue,e.stringValue);case 6:return(function(o,l){const c=ni(o),f=ni(l);return c.compareTo(f)})(n.bytesValue,e.bytesValue);case 7:return(function(o,l){const c=o.split("/"),f=l.split("/");for(let p=0;p<c.length&&p<f.length;p++){const g=Re(c[p],f[p]);if(g!==0)return g}return Re(c.length,f.length)})(n.referenceValue,e.referenceValue);case 8:return(function(o,l){const c=Re(ot(o.latitude),ot(l.latitude));return c!==0?c:Re(ot(o.longitude),ot(l.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return xE(n.arrayValue,e.arrayValue);case 10:return(function(o,l){const c=o.fields||{},f=l.fields||{},p=c[Ha]?.arrayValue,g=f[Ha]?.arrayValue,E=Re(p?.values?.length||0,g?.values?.length||0);return E!==0?E:xE(p,g)})(n.mapValue,e.mapValue);case 11:return(function(o,l){if(o===Ki.mapValue&&l===Ki.mapValue)return 0;if(o===Ki.mapValue)return 1;if(l===Ki.mapValue)return-1;const c=o.fields||{},f=Object.keys(c),p=l.fields||{},g=Object.keys(p);f.sort(),g.sort();for(let E=0;E<f.length&&E<g.length;++E){const w=Fm(f[E],g[E]);if(w!==0)return w;const A=cs(c[f[E]],p[g[E]]);if(A!==0)return A}return Re(f.length,g.length)})(n.mapValue,e.mapValue);default:throw pe(23264,{he:t})}}function PE(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Re(n,e);const t=ti(n),r=ti(e),i=Re(t.seconds,r.seconds);return i!==0?i:Re(t.nanos,r.nanos)}function xE(n,e){const t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){const o=cs(t[i],r[i]);if(o)return o}return Re(t.length,r.length)}function Wa(n){return Wm(n)}function Wm(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const r=ti(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return ni(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return oe.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",i=!0;for(const o of t.values||[])i?i=!1:r+=",",r+=Wm(o);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){const r=Object.keys(t.fields||{}).sort();let i="{",o=!0;for(const l of r)o?o=!1:i+=",",i+=`${l}:${Wm(t.fields[l])}`;return i+"}"})(n.mapValue):pe(61005,{value:n})}function Yd(n){switch(us(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=nf(n);return e?16+Yd(e):16;case 5:return 2*n.stringValue.length;case 6:return ni(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((i,o)=>i+Yd(o)),0)})(n.arrayValue);case 10:case 11:return(function(r){let i=0;return ys(r.fields,((o,l)=>{i+=o.length+Yd(l)})),i})(n.mapValue);default:throw pe(13486,{value:n})}}function Fu(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function qm(n){return!!n&&"integerValue"in n}function Uu(n){return!!n&&"arrayValue"in n}function NE(n){return!!n&&"nullValue"in n}function OE(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Jd(n){return!!n&&"mapValue"in n}function rf(n){return(n?.mapValue?.fields||{})[Lg]?.stringValue===Fg}function _u(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return ys(n.mapValue.fields,((t,r)=>e.mapValue.fields[t]=_u(r))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=_u(n.arrayValue.values[t]);return e}return{...n}}function rI(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===nI}const iI={mapValue:{fields:{[Lg]:{stringValue:Fg},[Ha]:{arrayValue:{}}}}};function F1(n){return"nullValue"in n?Kd:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Fu(ls.empty(),oe.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?rf(n)?iI:{mapValue:{}}:pe(35942,{value:n})}function U1(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Fu(ls.empty(),oe.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?iI:"mapValue"in n?rf(n)?{mapValue:{}}:Ki:pe(61959,{value:n})}function ME(n,e){const t=cs(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function VE(n,e){const t=cs(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{constructor(e){this.value=e}static empty(){return new Zt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Jd(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=_u(t)}setAll(e){let t=at.emptyPath(),r={},i=[];e.forEach(((l,c)=>{if(!t.isImmediateParentOf(c)){const f=this.getFieldsMap(t);this.applyChanges(f,r,i),r={},i=[],t=c.popLast()}l?r[c.lastSegment()]=_u(l):i.push(c.lastSegment())}));const o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){const t=this.field(e.popLast());Jd(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Dr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Jd(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){ys(t,((i,o)=>e[i]=o));for(const i of r)delete e[i]}clone(){return new Zt(_u(this.value))}}function sI(n){const e=[];return ys(n.fields,((t,r)=>{const i=new at([t]);if(Jd(r)){const o=sI(r.mapValue).fields;if(o.length===0)e.push(i);else for(const l of o)e.push(i.child(l))}else e.push(i)})),new mn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mt{constructor(e,t,r,i,o,l,c){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=l,this.documentState=c}static newInvalidDocument(e){return new mt(e,0,Ee.min(),Ee.min(),Ee.min(),Zt.empty(),0)}static newFoundDocument(e,t,r,i){return new mt(e,1,t,Ee.min(),r,i,0)}static newNoDocument(e,t){return new mt(e,2,t,Ee.min(),Ee.min(),Zt.empty(),0)}static newUnknownDocument(e,t){return new mt(e,3,t,Ee.min(),Ee.min(),Zt.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ee.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Zt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Zt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ee.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof mt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new mt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qa{constructor(e,t){this.position=e,this.inclusive=t}}function LE(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const o=e[i],l=n.position[i];if(o.field.isKeyField()?r=oe.comparator(oe.fromName(l.referenceValue),t.key):r=cs(l,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function FE(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Dr(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bu{constructor(e,t="asc"){this.field=e,this.dir=t}}function B1(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oI{}class Ve extends oI{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new z1(e,t,r):t==="array-contains"?new W1(e,r):t==="in"?new hI(e,r):t==="not-in"?new q1(e,r):t==="array-contains-any"?new G1(e,r):new Ve(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new j1(e,r):new H1(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(cs(t,this.value)):t!==null&&us(this.value)===us(t)&&this.matchesComparison(cs(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return pe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ke extends oI{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Ke(e,t)}matches(e){return Ga(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Ga(n){return n.op==="and"}function Gm(n){return n.op==="or"}function Ug(n){return aI(n)&&Ga(n)}function aI(n){for(const e of n.filters)if(e instanceof Ke)return!1;return!0}function $m(n){if(n instanceof Ve)return n.field.canonicalString()+n.op.toString()+Wa(n.value);if(Ug(n))return n.filters.map((e=>$m(e))).join(",");{const e=n.filters.map((t=>$m(t))).join(",");return`${n.op}(${e})`}}function lI(n,e){return n instanceof Ve?(function(r,i){return i instanceof Ve&&r.op===i.op&&r.field.isEqual(i.field)&&Dr(r.value,i.value)})(n,e):n instanceof Ke?(function(r,i){return i instanceof Ke&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce(((o,l,c)=>o&&lI(l,i.filters[c])),!0):!1})(n,e):void pe(19439)}function uI(n,e){const t=n.filters.concat(e);return Ke.create(t,n.op)}function cI(n){return n instanceof Ve?(function(t){return`${t.field.canonicalString()} ${t.op} ${Wa(t.value)}`})(n):n instanceof Ke?(function(t){return t.op.toString()+" {"+t.getFilters().map(cI).join(" ,")+"}"})(n):"Filter"}class z1 extends Ve{constructor(e,t,r){super(e,t,r),this.key=oe.fromName(r.referenceValue)}matches(e){const t=oe.comparator(e.key,this.key);return this.matchesComparison(t)}}class j1 extends Ve{constructor(e,t){super(e,"in",t),this.keys=dI("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class H1 extends Ve{constructor(e,t){super(e,"not-in",t),this.keys=dI("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function dI(n,e){return(e.arrayValue?.values||[]).map((t=>oe.fromName(t.referenceValue)))}class W1 extends Ve{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Uu(t)&&Lu(t.arrayValue,this.value)}}class hI extends Ve{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Lu(this.value.arrayValue,t)}}class q1 extends Ve{constructor(e,t){super(e,"not-in",t)}matches(e){if(Lu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Lu(this.value.arrayValue,t)}}class G1 extends Ve{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Uu(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>Lu(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $1{constructor(e,t=null,r=[],i=[],o=null,l=null,c=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=l,this.endAt=c,this.Te=null}}function Qm(n,e=null,t=[],r=[],i=null,o=null,l=null){return new $1(n,e,t,r,i,o,l)}function mo(n){const e=Ce(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>$m(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(o){return o.field.canonicalString()+o.dir})(r))).join(","),Xh(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>Wa(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>Wa(r))).join(",")),e.Te=t}return e.Te}function Zu(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!B1(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!lI(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!FE(n.startAt,e.startAt)&&FE(n.endAt,e.endAt)}function vh(n){return oe.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function _h(n,e){return n.filters.filter((t=>t instanceof Ve&&t.field.isEqual(e)))}function UE(n,e,t){let r=Kd,i=!0;for(const o of _h(n,e)){let l=Kd,c=!0;switch(o.op){case"<":case"<=":l=F1(o.value);break;case"==":case"in":case">=":l=o.value;break;case">":l=o.value,c=!1;break;case"!=":case"not-in":l=Kd}ME({value:r,inclusive:i},{value:l,inclusive:c})<0&&(r=l,i=c)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){const l=t.position[o];ME({value:r,inclusive:i},{value:l,inclusive:t.inclusive})<0&&(r=l,i=t.inclusive);break}}return{value:r,inclusive:i}}function BE(n,e,t){let r=Ki,i=!0;for(const o of _h(n,e)){let l=Ki,c=!0;switch(o.op){case">=":case">":l=U1(o.value),c=!1;break;case"==":case"in":case"<=":l=o.value;break;case"<":l=o.value,c=!1;break;case"!=":case"not-in":l=Ki}VE({value:r,inclusive:i},{value:l,inclusive:c})>0&&(r=l,i=c)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){const l=t.position[o];VE({value:r,inclusive:i},{value:l,inclusive:t.inclusive})>0&&(r=l,i=t.inclusive);break}}return{value:r,inclusive:i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class il{constructor(e,t=null,r=[],i=[],o=null,l="F",c=null,f=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=l,this.startAt=c,this.endAt=f,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function Q1(n,e,t,r,i,o,l,c){return new il(n,e,t,r,i,o,l,c)}function sf(n){return new il(n)}function zE(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function fI(n){return n.collectionGroup!==null}function Eu(n){const e=Ce(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const o of e.explicitOrderBy)e.Ie.push(o),t.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let c=new Ye(at.comparator);return l.filters.forEach((f=>{f.getFlattenedFilters().forEach((p=>{p.isInequality()&&(c=c.add(p.field))}))})),c})(e).forEach((o=>{t.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new Bu(o,r))})),t.has(at.keyField().canonicalString())||e.Ie.push(new Bu(at.keyField(),r))}return e.Ie}function zn(n){const e=Ce(n);return e.Ee||(e.Ee=K1(e,Eu(n))),e.Ee}function K1(n,e){if(n.limitType==="F")return Qm(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((i=>{const o=i.dir==="desc"?"asc":"desc";return new Bu(i.field,o)}));const t=n.endAt?new qa(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new qa(n.startAt.position,n.startAt.inclusive):null;return Qm(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function Km(n,e){const t=n.filters.concat([e]);return new il(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Ym(n,e,t){return new il(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function of(n,e){return Zu(zn(n),zn(e))&&n.limitType===e.limitType}function pI(n){return`${mo(zn(n))}|lt:${n.limitType}`}function Ia(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((i=>cI(i))).join(", ")}]`),Xh(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((i=>(function(l){return`${l.field.canonicalString()} (${l.dir})`})(i))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((i=>Wa(i))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((i=>Wa(i))).join(",")),`Target(${r})`})(zn(n))}; limitType=${n.limitType})`}function ec(n,e){return e.isFoundDocument()&&(function(r,i){const o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):oe.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)})(n,e)&&(function(r,i){for(const o of Eu(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0})(n,e)&&(function(r,i){for(const o of r.filters)if(!o.matches(i))return!1;return!0})(n,e)&&(function(r,i){return!(r.startAt&&!(function(l,c,f){const p=LE(l,c,f);return l.inclusive?p<=0:p<0})(r.startAt,Eu(r),i)||r.endAt&&!(function(l,c,f){const p=LE(l,c,f);return l.inclusive?p>=0:p>0})(r.endAt,Eu(r),i))})(n,e)}function Y1(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function mI(n){return(e,t)=>{let r=!1;for(const i of Eu(n)){const o=J1(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function J1(n,e,t){const r=n.field.isKeyField()?oe.comparator(e.key,t.key):(function(o,l,c){const f=l.data.field(o),p=c.data.field(o);return f!==null&&p!==null?cs(f,p):pe(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return pe(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ai{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ys(this.inner,((t,r)=>{for(const[i,o]of r)e(i,o)}))}isEmpty(){return YA(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X1=new lt(oe.comparator);function bn(){return X1}const gI=new lt(oe.comparator);function cu(...n){let e=gI;for(const t of n)e=e.insert(t.key,t);return e}function yI(n){let e=gI;return n.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function Sr(){return wu()}function vI(){return wu()}function wu(){return new ai((n=>n.toString()),((n,e)=>n.isEqual(e)))}const Z1=new lt(oe.comparator),ek=new Ye(oe.comparator);function Pe(...n){let e=ek;for(const t of n)e=e.add(t);return e}const tk=new Ye(Re);function nk(){return tk}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bg(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:xu(e)?"-0":e}}function _I(n){return{integerValue:""+n}}function rk(n,e){return u1(e)?_I(e):Bg(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class af{constructor(){this._=void 0}}function ik(n,e,t){return n instanceof zu?(function(i,o){const l={fields:{[ZA]:{stringValue:XA},[tI]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&Vg(o)&&(o=nf(o)),o&&(l.fields[eI]=o),{mapValue:l}})(t,e):n instanceof $a?wI(n,e):n instanceof Qa?TI(n,e):(function(i,o){const l=EI(i,o),c=jE(l)+jE(i.Ae);return qm(l)&&qm(i.Ae)?_I(c):Bg(i.serializer,c)})(n,e)}function sk(n,e,t){return n instanceof $a?wI(n,e):n instanceof Qa?TI(n,e):t}function EI(n,e){return n instanceof ju?(function(r){return qm(r)||(function(o){return!!o&&"doubleValue"in o})(r)})(e)?e:{integerValue:0}:null}class zu extends af{}class $a extends af{constructor(e){super(),this.elements=e}}function wI(n,e){const t=AI(e);for(const r of n.elements)t.some((i=>Dr(i,r)))||t.push(r);return{arrayValue:{values:t}}}class Qa extends af{constructor(e){super(),this.elements=e}}function TI(n,e){let t=AI(e);for(const r of n.elements)t=t.filter((i=>!Dr(i,r)));return{arrayValue:{values:t}}}class ju extends af{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function jE(n){return ot(n.integerValue||n.doubleValue)}function AI(n){return Uu(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ok{constructor(e,t){this.field=e,this.transform=t}}function ak(n,e){return n.field.isEqual(e.field)&&(function(r,i){return r instanceof $a&&i instanceof $a||r instanceof Qa&&i instanceof Qa?Fa(r.elements,i.elements,Dr):r instanceof ju&&i instanceof ju?Dr(r.Ae,i.Ae):r instanceof zu&&i instanceof zu})(n.transform,e.transform)}class lk{constructor(e,t){this.version=e,this.transformResults=t}}class an{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new an}static exists(e){return new an(void 0,e)}static updateTime(e){return new an(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Xd(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class lf{}function II(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new uf(n.key,an.none()):new sl(n.key,n.data,an.none());{const t=n.data,r=Zt.empty();let i=new Ye(at.comparator);for(let o of e.fields)if(!i.has(o)){let l=t.field(o);l===null&&o.length>1&&(o=o.popLast(),l=t.field(o)),l===null?r.delete(o):r.set(o,l),i=i.add(o)}return new li(n.key,r,new mn(i.toArray()),an.none())}}function uk(n,e,t){n instanceof sl?(function(i,o,l){const c=i.value.clone(),f=WE(i.fieldTransforms,o,l.transformResults);c.setAll(f),o.convertToFoundDocument(l.version,c).setHasCommittedMutations()})(n,e,t):n instanceof li?(function(i,o,l){if(!Xd(i.precondition,o))return void o.convertToUnknownDocument(l.version);const c=WE(i.fieldTransforms,o,l.transformResults),f=o.data;f.setAll(SI(i)),f.setAll(c),o.convertToFoundDocument(l.version,f).setHasCommittedMutations()})(n,e,t):(function(i,o,l){o.convertToNoDocument(l.version).setHasCommittedMutations()})(0,e,t)}function Tu(n,e,t,r){return n instanceof sl?(function(o,l,c,f){if(!Xd(o.precondition,l))return c;const p=o.value.clone(),g=qE(o.fieldTransforms,f,l);return p.setAll(g),l.convertToFoundDocument(l.version,p).setHasLocalMutations(),null})(n,e,t,r):n instanceof li?(function(o,l,c,f){if(!Xd(o.precondition,l))return c;const p=qE(o.fieldTransforms,f,l),g=l.data;return g.setAll(SI(o)),g.setAll(p),l.convertToFoundDocument(l.version,g).setHasLocalMutations(),c===null?null:c.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map((E=>E.field)))})(n,e,t,r):(function(o,l,c){return Xd(o.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):c})(n,e,t)}function ck(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),o=EI(r.transform,i||null);o!=null&&(t===null&&(t=Zt.empty()),t.set(r.field,o))}return t||null}function HE(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Fa(r,i,((o,l)=>ak(o,l)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class sl extends lf{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class li extends lf{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function SI(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}})),e}function WE(n,e,t){const r=new Map;ye(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let i=0;i<t.length;i++){const o=n[i],l=o.transform,c=e.data.field(o.field);r.set(o.field,sk(l,c,t[i]))}return r}function qE(n,e,t){const r=new Map;for(const i of n){const o=i.transform,l=t.data.field(i.field);r.set(i.field,ik(o,l,e))}return r}class uf extends lf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class RI extends lf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zg{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(e.key)&&uk(o,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Tu(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Tu(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=vI();return this.mutations.forEach((i=>{const o=e.get(i.key),l=o.overlayedDocument;let c=this.applyToLocalView(l,o.mutatedFields);c=t.has(i.key)?null:c;const f=II(l,c);f!==null&&r.set(i.key,f),l.isValidDocument()||l.convertToNoDocument(Ee.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Pe())}isEqual(e){return this.batchId===e.batchId&&Fa(this.mutations,e.mutations,((t,r)=>HE(t,r)))&&Fa(this.baseMutations,e.baseMutations,((t,r)=>HE(t,r)))}}class jg{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){ye(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=(function(){return Z1})();const o=e.mutations;for(let l=0;l<o.length;l++)i=i.insert(o[l].key,r[l].version);return new jg(e,t,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hg{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dk{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var St,Fe;function hk(n){switch(n){case K.OK:return pe(64938);case K.CANCELLED:case K.UNKNOWN:case K.DEADLINE_EXCEEDED:case K.RESOURCE_EXHAUSTED:case K.INTERNAL:case K.UNAVAILABLE:case K.UNAUTHENTICATED:return!1;case K.INVALID_ARGUMENT:case K.NOT_FOUND:case K.ALREADY_EXISTS:case K.PERMISSION_DENIED:case K.FAILED_PRECONDITION:case K.ABORTED:case K.OUT_OF_RANGE:case K.UNIMPLEMENTED:case K.DATA_LOSS:return!0;default:return pe(15467,{code:n})}}function CI(n){if(n===void 0)return on("GRPC error has no .code"),K.UNKNOWN;switch(n){case St.OK:return K.OK;case St.CANCELLED:return K.CANCELLED;case St.UNKNOWN:return K.UNKNOWN;case St.DEADLINE_EXCEEDED:return K.DEADLINE_EXCEEDED;case St.RESOURCE_EXHAUSTED:return K.RESOURCE_EXHAUSTED;case St.INTERNAL:return K.INTERNAL;case St.UNAVAILABLE:return K.UNAVAILABLE;case St.UNAUTHENTICATED:return K.UNAUTHENTICATED;case St.INVALID_ARGUMENT:return K.INVALID_ARGUMENT;case St.NOT_FOUND:return K.NOT_FOUND;case St.ALREADY_EXISTS:return K.ALREADY_EXISTS;case St.PERMISSION_DENIED:return K.PERMISSION_DENIED;case St.FAILED_PRECONDITION:return K.FAILED_PRECONDITION;case St.ABORTED:return K.ABORTED;case St.OUT_OF_RANGE:return K.OUT_OF_RANGE;case St.UNIMPLEMENTED:return K.UNIMPLEMENTED;case St.DATA_LOSS:return K.DATA_LOSS;default:return pe(39323,{code:n})}}(Fe=St||(St={}))[Fe.OK=0]="OK",Fe[Fe.CANCELLED=1]="CANCELLED",Fe[Fe.UNKNOWN=2]="UNKNOWN",Fe[Fe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Fe[Fe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Fe[Fe.NOT_FOUND=5]="NOT_FOUND",Fe[Fe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Fe[Fe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Fe[Fe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Fe[Fe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Fe[Fe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Fe[Fe.ABORTED=10]="ABORTED",Fe[Fe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Fe[Fe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Fe[Fe.INTERNAL=13]="INTERNAL",Fe[Fe.UNAVAILABLE=14]="UNAVAILABLE",Fe[Fe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fk(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pk=new ns([4294967295,4294967295],0);function GE(n){const e=fk().encode(n),t=new AA;return t.update(e),new Uint8Array(t.digest())}function $E(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new ns([t,r],0),new ns([i,o],0)]}class Wg{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new du(`Invalid padding: ${t}`);if(r<0)throw new du(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new du(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new du(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=ns.fromNumber(this.ge)}ye(e,t,r){let i=e.add(t.multiply(ns.fromNumber(r)));return i.compare(pk)===1&&(i=new ns([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=GE(e),[r,i]=$E(t);for(let o=0;o<this.hashCount;o++){const l=this.ye(r,i,o);if(!this.we(l))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),l=new Wg(o,i,t);return r.forEach((c=>l.insert(c))),l}insert(e){if(this.ge===0)return;const t=GE(e),[r,i]=$E(t);for(let o=0;o<this.hashCount;o++){const l=this.ye(r,i,o);this.Se(l)}}Se(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class du extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cf{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,tc.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new cf(Ee.min(),i,new lt(Re),bn(),Pe())}}class tc{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new tc(r,t,Pe(),Pe(),Pe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zd{constructor(e,t,r,i){this.be=e,this.removedTargetIds=t,this.key=r,this.De=i}}class bI{constructor(e,t){this.targetId=e,this.Ce=t}}class DI{constructor(e,t,r=wt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class QE{constructor(){this.ve=0,this.Fe=KE(),this.Me=wt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Pe(),t=Pe(),r=Pe();return this.Fe.forEach(((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:pe(38017,{changeType:o})}})),new tc(this.Me,this.xe,e,t,r)}qe(){this.Oe=!1,this.Fe=KE()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,ye(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class mk{constructor(e){this.Ge=e,this.ze=new Map,this.je=bn(),this.Je=Pd(),this.He=Pd(),this.Ye=new lt(Re)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:pe(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((r,i)=>{this.rt(i)&&t(i)}))}st(e){const t=e.targetId,r=e.Ce.count,i=this.ot(t);if(i){const o=i.target;if(vh(o))if(r===0){const l=new oe(o.path);this.et(t,l,mt.newNoDocument(l,Ee.min()))}else ye(r===1,20013,{expectedCount:r});else{const l=this._t(t);if(l!==r){const c=this.ut(e),f=c?this.ct(c,e,l):1;if(f!==0){this.it(t);const p=f===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,p)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t;let l,c;try{l=ni(r).toUint8Array()}catch(f){if(f instanceof JA)return as("Decoding the base64 bloom filter in existence filter failed ("+f.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw f}try{c=new Wg(l,i,o)}catch(f){return as(f instanceof du?"BloomFilter error: ":"Applying bloom filter failed: ",f),null}return c.ge===0?null:c}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){const r=this.Ge.getRemoteKeysForTarget(t);let i=0;return r.forEach((o=>{const l=this.Ge.ht(),c=`projects/${l.projectId}/databases/${l.database}/documents/${o.path.canonicalString()}`;e.mightContain(c)||(this.et(t,o,null),i++)})),i}Tt(e){const t=new Map;this.ze.forEach(((o,l)=>{const c=this.ot(l);if(c){if(o.current&&vh(c.target)){const f=new oe(c.target.path);this.It(f).has(l)||this.Et(l,f)||this.et(l,f,mt.newNoDocument(f,e))}o.Be&&(t.set(l,o.ke()),o.qe())}}));let r=Pe();this.He.forEach(((o,l)=>{let c=!0;l.forEachWhile((f=>{const p=this.ot(f);return!p||p.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)})),c&&(r=r.add(o))})),this.je.forEach(((o,l)=>l.setReadTime(e)));const i=new cf(e,t,this.Ye,this.je,r);return this.je=bn(),this.Je=Pd(),this.He=Pd(),this.Ye=new lt(Re),i}Xe(e,t){if(!this.rt(e))return;const r=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,r),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,t)?i.Qe(t,1):i.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new QE,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Ye(Re),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Ye(Re),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||te("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new QE),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Pd(){return new lt(oe.comparator)}function KE(){return new lt(oe.comparator)}const gk={asc:"ASCENDING",desc:"DESCENDING"},yk={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},vk={and:"AND",or:"OR"};class _k{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Jm(n,e){return n.useProto3Json||Xh(e)?e:{value:e}}function Ka(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function kI(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function Ek(n,e){return Ka(n,e.toTimestamp())}function ln(n){return ye(!!n,49232),Ee.fromTimestamp((function(t){const r=ti(t);return new ze(r.seconds,r.nanos)})(n))}function qg(n,e){return Xm(n,e).canonicalString()}function Xm(n,e){const t=(function(i){return new qe(["projects",i.projectId,"databases",i.database])})(n).child("documents");return e===void 0?t:t.child(e)}function PI(n){const e=qe.fromString(n);return ye(BI(e),10190,{key:e.toString()}),e}function Eh(n,e){return qg(n.databaseId,e.path)}function lo(n,e){const t=PI(e);if(t.get(1)!==n.databaseId.projectId)throw new se(K.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new se(K.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new oe(OI(t))}function xI(n,e){return qg(n.databaseId,e)}function NI(n){const e=PI(n);return e.length===4?qe.emptyPath():OI(e)}function Zm(n){return new qe(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function OI(n){return ye(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function YE(n,e,t){return{name:Eh(n,e),fields:t.value.mapValue.fields}}function wk(n,e,t){const r=lo(n,e.name),i=ln(e.updateTime),o=e.createTime?ln(e.createTime):Ee.min(),l=new Zt({mapValue:{fields:e.fields}}),c=mt.newFoundDocument(r,i,o,l);return t&&c.setHasCommittedMutations(),t?c.setHasCommittedMutations():c}function Tk(n,e){let t;if("targetChange"in e){e.targetChange;const r=(function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:pe(39313,{state:p})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=(function(p,g){return p.useProto3Json?(ye(g===void 0||typeof g=="string",58123),wt.fromBase64String(g||"")):(ye(g===void 0||g instanceof Buffer||g instanceof Uint8Array,16193),wt.fromUint8Array(g||new Uint8Array))})(n,e.targetChange.resumeToken),l=e.targetChange.cause,c=l&&(function(p){const g=p.code===void 0?K.UNKNOWN:CI(p.code);return new se(g,p.message||"")})(l);t=new DI(r,i,o,c||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=lo(n,r.document.name),o=ln(r.document.updateTime),l=r.document.createTime?ln(r.document.createTime):Ee.min(),c=new Zt({mapValue:{fields:r.document.fields}}),f=mt.newFoundDocument(i,o,l,c),p=r.targetIds||[],g=r.removedTargetIds||[];t=new Zd(p,g,f.key,f)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=lo(n,r.document),o=r.readTime?ln(r.readTime):Ee.min(),l=mt.newNoDocument(i,o),c=r.removedTargetIds||[];t=new Zd([],c,l.key,l)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=lo(n,r.document),o=r.removedTargetIds||[];t=new Zd([],o,i,null)}else{if(!("filter"in e))return pe(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:o}=r,l=new dk(i,o),c=r.targetId;t=new bI(c,l)}}return t}function wh(n,e){let t;if(e instanceof sl)t={update:YE(n,e.key,e.value)};else if(e instanceof uf)t={delete:Eh(n,e.key)};else if(e instanceof li)t={update:YE(n,e.key,e.data),updateMask:bk(e.fieldMask)};else{if(!(e instanceof RI))return pe(16599,{Vt:e.type});t={verify:Eh(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(o,l){const c=l.transform;if(c instanceof zu)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof $a)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Qa)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof ju)return{fieldPath:l.field.canonicalString(),increment:c.Ae};throw pe(20930,{transform:l.transform})})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(i,o){return o.updateTime!==void 0?{updateTime:Ek(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:pe(27497)})(n,e.precondition)),t}function eg(n,e){const t=e.currentDocument?(function(o){return o.updateTime!==void 0?an.updateTime(ln(o.updateTime)):o.exists!==void 0?an.exists(o.exists):an.none()})(e.currentDocument):an.none(),r=e.updateTransforms?e.updateTransforms.map((i=>(function(l,c){let f=null;if("setToServerValue"in c)ye(c.setToServerValue==="REQUEST_TIME",16630,{proto:c}),f=new zu;else if("appendMissingElements"in c){const g=c.appendMissingElements.values||[];f=new $a(g)}else if("removeAllFromArray"in c){const g=c.removeAllFromArray.values||[];f=new Qa(g)}else"increment"in c?f=new ju(l,c.increment):pe(16584,{proto:c});const p=at.fromServerFormat(c.fieldPath);return new ok(p,f)})(n,i))):[];if(e.update){e.update.name;const i=lo(n,e.update.name),o=new Zt({mapValue:{fields:e.update.fields}});if(e.updateMask){const l=(function(f){const p=f.fieldPaths||[];return new mn(p.map((g=>at.fromServerFormat(g))))})(e.updateMask);return new li(i,o,l,t,r)}return new sl(i,o,t,r)}if(e.delete){const i=lo(n,e.delete);return new uf(i,t)}if(e.verify){const i=lo(n,e.verify);return new RI(i,t)}return pe(1463,{proto:e})}function Ak(n,e){return n&&n.length>0?(ye(e!==void 0,14353),n.map((t=>(function(i,o){let l=i.updateTime?ln(i.updateTime):ln(o);return l.isEqual(Ee.min())&&(l=ln(o)),new lk(l,i.transformResults||[])})(t,e)))):[]}function MI(n,e){return{documents:[xI(n,e.path)]}}function VI(n,e){const t={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=xI(n,i);const o=(function(p){if(p.length!==0)return UI(Ke.create(p,"and"))})(e.filters);o&&(t.structuredQuery.where=o);const l=(function(p){if(p.length!==0)return p.map((g=>(function(w){return{field:Sa(w.field),direction:Sk(w.dir)}})(g)))})(e.orderBy);l&&(t.structuredQuery.orderBy=l);const c=Jm(n,e.limit);return c!==null&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt=(function(p){return{before:p.inclusive,values:p.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(p){return{before:!p.inclusive,values:p.position}})(e.endAt)),{ft:t,parent:i}}function LI(n){let e=NI(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){ye(r===1,65062);const g=t.from[0];g.allDescendants?i=g.collectionId:e=e.child(g.collectionId)}let o=[];t.where&&(o=(function(E){const w=FI(E);return w instanceof Ke&&Ug(w)?w.getFilters():[w]})(t.where));let l=[];t.orderBy&&(l=(function(E){return E.map((w=>(function(b){return new Bu(Ra(b.field),(function(x){switch(x){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(b.direction))})(w)))})(t.orderBy));let c=null;t.limit&&(c=(function(E){let w;return w=typeof E=="object"?E.value:E,Xh(w)?null:w})(t.limit));let f=null;t.startAt&&(f=(function(E){const w=!!E.before,A=E.values||[];return new qa(A,w)})(t.startAt));let p=null;return t.endAt&&(p=(function(E){const w=!E.before,A=E.values||[];return new qa(A,w)})(t.endAt)),Q1(e,i,l,o,c,"F",f,p)}function Ik(n,e){const t=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return pe(28987,{purpose:i})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function FI(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Ra(t.unaryFilter.field);return Ve.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Ra(t.unaryFilter.field);return Ve.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Ra(t.unaryFilter.field);return Ve.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=Ra(t.unaryFilter.field);return Ve.create(l,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return pe(61313);default:return pe(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Ve.create(Ra(t.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return pe(58110);default:return pe(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Ke.create(t.compositeFilter.filters.map((r=>FI(r))),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return pe(1026)}})(t.compositeFilter.op))})(n):pe(30097,{filter:n})}function Sk(n){return gk[n]}function Rk(n){return yk[n]}function Ck(n){return vk[n]}function Sa(n){return{fieldPath:n.canonicalString()}}function Ra(n){return at.fromServerFormat(n.fieldPath)}function UI(n){return n instanceof Ve?(function(t){if(t.op==="=="){if(OE(t.value))return{unaryFilter:{field:Sa(t.field),op:"IS_NAN"}};if(NE(t.value))return{unaryFilter:{field:Sa(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(OE(t.value))return{unaryFilter:{field:Sa(t.field),op:"IS_NOT_NAN"}};if(NE(t.value))return{unaryFilter:{field:Sa(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Sa(t.field),op:Rk(t.op),value:t.value}}})(n):n instanceof Ke?(function(t){const r=t.getFilters().map((i=>UI(i)));return r.length===1?r[0]:{compositeFilter:{op:Ck(t.op),filters:r}}})(n):pe(54877,{filter:n})}function bk(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function BI(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yr{constructor(e,t,r,i,o=Ee.min(),l=Ee.min(),c=wt.EMPTY_BYTE_STRING,f=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=c,this.expectedCount=f}withSequenceNumber(e){return new Yr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Yr(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Yr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Yr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zI{constructor(e){this.yt=e}}function Dk(n,e){let t;if(e.document)t=wk(n.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=oe.fromSegments(e.noDocument.path),i=yo(e.noDocument.readTime);t=mt.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return pe(56709);{const r=oe.fromSegments(e.unknownDocument.path),i=yo(e.unknownDocument.version);t=mt.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime((function(i){const o=new ze(i[0],i[1]);return Ee.fromTimestamp(o)})(e.readTime)),t}function JE(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Th(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=(function(o,l){return{name:Eh(o,l.key),fields:l.data.value.mapValue.fields,updateTime:Ka(o,l.version.toTimestamp()),createTime:Ka(o,l.createTime.toTimestamp())}})(n.yt,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:go(e.version)};else{if(!e.isUnknownDocument())return pe(57904,{document:e});r.unknownDocument={path:t.path.toArray(),version:go(e.version)}}return r}function Th(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function go(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function yo(n){const e=new ze(n.seconds,n.nanoseconds);return Ee.fromTimestamp(e)}function eo(n,e){const t=(e.baseMutations||[]).map((o=>eg(n.yt,o)));for(let o=0;o<e.mutations.length-1;++o){const l=e.mutations[o];if(o+1<e.mutations.length&&e.mutations[o+1].transform!==void 0){const c=e.mutations[o+1];l.updateTransforms=c.transform.fieldTransforms,e.mutations.splice(o+1,1),++o}}const r=e.mutations.map((o=>eg(n.yt,o))),i=ze.fromMillis(e.localWriteTimeMs);return new zg(e.batchId,i,t,r)}function hu(n){const e=yo(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?yo(n.lastLimboFreeSnapshotVersion):Ee.min();let r;return r=(function(o){return o.documents!==void 0})(n.query)?(function(o){const l=o.documents.length;return ye(l===1,1966,{count:l}),zn(sf(NI(o.documents[0])))})(n.query):(function(o){return zn(LI(o))})(n.query),new Yr(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,wt.fromBase64String(n.resumeToken))}function jI(n,e){const t=go(e.snapshotVersion),r=go(e.lastLimboFreeSnapshotVersion);let i;i=vh(e.target)?MI(n.yt,e.target):VI(n.yt,e.target).ft;const o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:mo(e.target),readTime:t,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function HI(n){const e=LI({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Ym(e,e.limit,"L"):e}function lm(n,e){return new Hg(e.largestBatchId,eg(n.yt,e.overlayMutation))}function XE(n,e){const t=e.path.lastSegment();return[n,en(e.path.popLast()),t]}function ZE(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:go(r.readTime),documentKey:en(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kk{getBundleMetadata(e,t){return ew(e).get(t).next((r=>{if(r)return(function(o){return{id:o.bundleId,createTime:yo(o.createTime),version:o.version}})(r)}))}saveBundleMetadata(e,t){return ew(e).put((function(i){return{bundleId:i.id,createTime:go(ln(i.createTime)),version:i.version}})(t))}getNamedQuery(e,t){return tw(e).get(t).next((r=>{if(r)return(function(o){return{name:o.name,query:HI(o.bundledQuery),readTime:yo(o.readTime)}})(r)}))}saveNamedQuery(e,t){return tw(e).put((function(i){return{name:i.name,readTime:go(ln(i.readTime)),bundledQuery:i.bundledQuery}})(t))}}function ew(n){return Pt(n,Zh)}function tw(n){return Pt(n,ef)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class df{constructor(e,t){this.serializer=e,this.userId=t}static wt(e,t){const r=t.uid||"";return new df(e,r)}getOverlay(e,t){return iu(e).get(XE(this.userId,t)).next((r=>r?lm(this.serializer,r):null))}getOverlays(e,t){const r=Sr();return U.forEach(t,(i=>this.getOverlay(e,i).next((o=>{o!==null&&r.set(i,o)})))).next((()=>r))}saveOverlays(e,t,r){const i=[];return r.forEach(((o,l)=>{const c=new Hg(t,l);i.push(this.St(e,c))})),U.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach((l=>i.add(en(l.getCollectionPath()))));const o=[];return i.forEach((l=>{const c=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,r+1],!1,!0);o.push(iu(e).Z(jm,c))})),U.waitFor(o)}getOverlaysForCollection(e,t,r){const i=Sr(),o=en(t),l=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,Number.POSITIVE_INFINITY],!0);return iu(e).J(jm,l).next((c=>{for(const f of c){const p=lm(this.serializer,f);i.set(p.getKey(),p)}return i}))}getOverlaysForCollectionGroup(e,t,r,i){const o=Sr();let l;const c=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return iu(e).ee({index:qA,range:c},((f,p,g)=>{const E=lm(this.serializer,p);o.size()<i||E.largestBatchId===l?(o.set(E.getKey(),E),l=E.largestBatchId):g.done()})).next((()=>o))}St(e,t){return iu(e).put((function(i,o,l){const[c,f,p]=XE(o,l.mutation.key);return{userId:o,collectionPath:f,documentId:p,collectionGroup:l.mutation.key.getCollectionGroup(),largestBatchId:l.largestBatchId,overlayMutation:wh(i.yt,l.mutation)}})(this.serializer,this.userId,t))}}function iu(n){return Pt(n,tf)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pk{bt(e){return Pt(e,Og)}getSessionToken(e){return this.bt(e).get("sessionToken").next((t=>{const r=t?.value;return r?wt.fromUint8Array(r):wt.EMPTY_BYTE_STRING}))}setSessionToken(e,t){return this.bt(e).put({name:"sessionToken",value:t.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class to{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(ot(e.integerValue));else if("doubleValue"in e){const r=ot(e.doubleValue);isNaN(r)?this.Ft(t,13):(this.Ft(t,15),xu(r)?t.Mt(0):t.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(t,20),typeof r=="string"&&(r=ti(r)),t.xt(`${r.seconds||""}`),t.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(ni(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.Ft(t,45),t.Mt(r.latitude||0),t.Mt(r.longitude||0)}else"mapValue"in e?rI(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):rf(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):pe(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){const r=e.fields||{};this.Ft(t,55);for(const i of Object.keys(r))this.Ot(i,t),this.Ct(r[i],t)}kt(e,t){const r=e.fields||{};this.Ft(t,53);const i=Ha,o=r[i].arrayValue?.values?.length||0;this.Ft(t,15),t.Mt(ot(o)),this.Ot(i,t),this.Ct(r[i],t)}Qt(e,t){const r=e.values||[];this.Ft(t,50);for(const i of r)this.Ct(i,t)}Lt(e,t){this.Ft(t,37),oe.fromName(e).path.forEach((r=>{this.Ft(t,60),this.Ut(r,t)}))}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}to.Kt=new to;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _a=255;function xk(n){if(n===0)return 8;let e=0;return n>>4||(e+=4,n<<=4),n>>6||(e+=2,n<<=2),n>>7||(e+=1),e}function nw(n){const e=64-(function(r){let i=0;for(let o=0;o<8;++o){const l=xk(255&r[o]);if(i+=l,l!==8)break}return i})(n);return Math.ceil(e/8)}class Nk{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Gt(r.value),r=t.next();this.zt()}jt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Jt(r.value),r=t.next();this.Ht()}Yt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Gt(r);else if(r<2048)this.Gt(960|r>>>6),this.Gt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Gt(480|r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r);else{const i=t.codePointAt(0);this.Gt(240|i>>>18),this.Gt(128|63&i>>>12),this.Gt(128|63&i>>>6),this.Gt(128|63&i)}}this.zt()}Zt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Jt(r);else if(r<2048)this.Jt(960|r>>>6),this.Jt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Jt(480|r>>>12),this.Jt(128|63&r>>>6),this.Jt(128|63&r);else{const i=t.codePointAt(0);this.Jt(240|i>>>18),this.Jt(128|63&i>>>12),this.Jt(128|63&i>>>6),this.Jt(128|63&i)}}this.Ht()}Xt(e){const t=this.en(e),r=nw(t);this.tn(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}nn(e){const t=this.en(e),r=nw(t);this.tn(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}rn(){this.sn(_a),this.sn(255)}_n(){this.an(_a),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const t=(function(o){const l=new DataView(new ArrayBuffer(8));return l.setFloat64(0,o,!1),new Uint8Array(l.buffer)})(e),r=!!(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Gt(e){const t=255&e;t===0?(this.sn(0),this.sn(255)):t===_a?(this.sn(_a),this.sn(0)):this.sn(t)}Jt(e){const t=255&e;t===0?(this.an(0),this.an(255)):t===_a?(this.an(_a),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class Ok{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class Mk{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class su{constructor(){this.cn=new Nk,this.ln=new Ok(this.cn),this.hn=new Mk(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class no{constructor(e,t,r,i){this.Tn=e,this.In=t,this.En=r,this.dn=i}An(){const e=this.dn.length,t=e===0||this.dn[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.dn,0),t!==e?r.set([0],this.dn.length):++r[r.length-1],new no(this.Tn,this.In,this.En,r)}Rn(e,t,r){return{indexId:this.Tn,uid:e,arrayValue:eh(this.En),directionalValue:eh(this.dn),orderedDocumentKey:eh(t),documentKey:r.path.toArray()}}Vn(e,t,r){const i=this.Rn(e,t,r);return[i.indexId,i.uid,i.arrayValue,i.directionalValue,i.orderedDocumentKey,i.documentKey]}}function Bi(n,e){let t=n.Tn-e.Tn;return t!==0?t:(t=rw(n.En,e.En),t!==0?t:(t=rw(n.dn,e.dn),t!==0?t:oe.comparator(n.In,e.In)))}function rw(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(r!==0)return r}return n.length-e.length}function eh(n){return mA()?(function(t){let r="";for(let i=0;i<t.length;i++)r+=String.fromCharCode(t[i]);return r})(n):n}function iw(n){return typeof n!="string"?n:(function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(n)}class sw{constructor(e){this.mn=new Ye(((t,r)=>at.comparator(t.field,r.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const t of e.filters){const r=t;r.isInequality()?this.mn=this.mn.add(r):this.gn.push(r)}}get pn(){return this.mn.size>1}yn(e){if(ye(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const t=Um(e);if(t!==void 0&&!this.wn(t))return!1;const r=Ks(e);let i=new Set,o=0,l=0;for(;o<r.length&&this.wn(r[o]);++o)i=i.add(r[o].fieldPath.canonicalString());if(o===r.length)return!0;if(this.mn.size>0){const c=this.mn.getIterator().getNext();if(!i.has(c.field.canonicalString())){const f=r[o];if(!this.Sn(c,f)||!this.bn(this.fn[l++],f))return!1}++o}for(;o<r.length;++o){const c=r[o];if(l>=this.fn.length||!this.bn(this.fn[l++],c))return!1}return!0}Dn(){if(this.pn)return null;let e=new Ye(at.comparator);const t=[];for(const r of this.gn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new Gd(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new Gd(r.field,0))}for(const r of this.fn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new Gd(r.field,r.dir==="asc"?0:1)));return new fh(fh.UNKNOWN_ID,this.collectionId,t,Pu.empty())}wn(e){for(const t of this.gn)if(this.Sn(t,e))return!0;return!1}Sn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}bn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WI(n){if(ye(n instanceof Ve||n instanceof Ke,20012),n instanceof Ve){if(n instanceof hI){const t=n.value.arrayValue?.values?.map((r=>Ve.create(n.field,"==",r)))||[];return Ke.create(t,"or")}return n}const e=n.filters.map((t=>WI(t)));return Ke.create(e,n.op)}function Vk(n){if(n.getFilters().length===0)return[];const e=rg(WI(n));return ye(qI(e),7391),tg(e)||ng(e)?[e]:e.getFilters()}function tg(n){return n instanceof Ve}function ng(n){return n instanceof Ke&&Ug(n)}function qI(n){return tg(n)||ng(n)||(function(t){if(t instanceof Ke&&Gm(t)){for(const r of t.getFilters())if(!tg(r)&&!ng(r))return!1;return!0}return!1})(n)}function rg(n){if(ye(n instanceof Ve||n instanceof Ke,34018),n instanceof Ve)return n;if(n.filters.length===1)return rg(n.filters[0]);const e=n.filters.map((r=>rg(r)));let t=Ke.create(e,n.op);return t=Ah(t),qI(t)?t:(ye(t instanceof Ke,64498),ye(Ga(t),40251),ye(t.filters.length>1,57927),t.filters.reduce(((r,i)=>Gg(r,i))))}function Gg(n,e){let t;return ye(n instanceof Ve||n instanceof Ke,38388),ye(e instanceof Ve||e instanceof Ke,25473),t=n instanceof Ve?e instanceof Ve?(function(i,o){return Ke.create([i,o],"and")})(n,e):ow(n,e):e instanceof Ve?ow(e,n):(function(i,o){if(ye(i.filters.length>0&&o.filters.length>0,48005),Ga(i)&&Ga(o))return uI(i,o.getFilters());const l=Gm(i)?i:o,c=Gm(i)?o:i,f=l.filters.map((p=>Gg(p,c)));return Ke.create(f,"or")})(n,e),Ah(t)}function ow(n,e){if(Ga(e))return uI(e,n.getFilters());{const t=e.filters.map((r=>Gg(n,r)));return Ke.create(t,"or")}}function Ah(n){if(ye(n instanceof Ve||n instanceof Ke,11850),n instanceof Ve)return n;const e=n.getFilters();if(e.length===1)return Ah(e[0]);if(aI(n))return n;const t=e.map((i=>Ah(i))),r=[];return t.forEach((i=>{i instanceof Ve?r.push(i):i instanceof Ke&&(i.op===n.op?r.push(...i.filters):r.push(i))})),r.length===1?r[0]:Ke.create(r,n.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lk{constructor(){this.Cn=new $g}addToCollectionParentIndex(e,t){return this.Cn.add(t),U.resolve()}getCollectionParents(e,t){return U.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return U.resolve()}deleteFieldIndex(e,t){return U.resolve()}deleteAllFieldIndexes(e){return U.resolve()}createTargetIndexes(e,t){return U.resolve()}getDocumentsMatchingTarget(e,t){return U.resolve(null)}getIndexType(e,t){return U.resolve(0)}getFieldIndexes(e,t){return U.resolve([])}getNextCollectionGroupToUpdate(e){return U.resolve(null)}getMinOffset(e,t){return U.resolve(kn.min())}getMinOffsetFromCollectionGroup(e,t){return U.resolve(kn.min())}updateCollectionGroup(e,t,r){return U.resolve()}updateIndexEntries(e,t){return U.resolve()}}class $g{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Ye(qe.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Ye(qe.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aw="IndexedDbIndexManager",xd=new Uint8Array(0);class Fk{constructor(e,t){this.databaseId=t,this.vn=new $g,this.Fn=new ai((r=>mo(r)),((r,i)=>Zu(r,i))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.vn.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((()=>{this.vn.add(t)}));const o={collectionId:r,parent:en(i)};return lw(e).put(o)}return U.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[xA(t),""],!1,!0);return lw(e).J(i).next((o=>{for(const l of o){if(l.collectionId!==t)break;r.push(Ir(l.parent))}return r}))}addFieldIndex(e,t){const r=ou(e),i=(function(c){return{indexId:c.indexId,collectionGroup:c.collectionGroup,fields:c.fields.map((f=>[f.fieldPath.canonicalString(),f.kind]))}})(t);delete i.indexId;const o=r.add(i);if(t.indexState){const l=wa(e);return o.next((c=>{l.put(ZE(c,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return o.next()}deleteFieldIndex(e,t){const r=ou(e),i=wa(e),o=Ea(e);return r.delete(t.indexId).next((()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=ou(e),r=Ea(e),i=wa(e);return t.Z().next((()=>r.Z())).next((()=>i.Z()))}createTargetIndexes(e,t){return U.forEach(this.Mn(t),(r=>this.getIndexType(e,r).next((i=>{if(i===0||i===1){const o=new sw(r).Dn();if(o!=null)return this.addFieldIndex(e,o)}}))))}getDocumentsMatchingTarget(e,t){const r=Ea(e);let i=!0;const o=new Map;return U.forEach(this.Mn(t),(l=>this.xn(e,l).next((c=>{i&&(i=!!c),o.set(l,c)})))).next((()=>{if(i){let l=Pe();const c=[];return U.forEach(o,((f,p)=>{te(aw,`Using index ${(function(Z){return`id=${Z.indexId}|cg=${Z.collectionGroup}|f=${Z.fields.map((ae=>`${ae.fieldPath}:${ae.kind}`)).join(",")}`})(f)} to execute ${mo(t)}`);const g=(function(Z,ae){const ve=Um(ae);if(ve===void 0)return null;for(const he of _h(Z,ve.fieldPath))switch(he.op){case"array-contains-any":return he.value.arrayValue.values||[];case"array-contains":return[he.value]}return null})(p,f),E=(function(Z,ae){const ve=new Map;for(const he of Ks(ae))for(const k of _h(Z,he.fieldPath))switch(k.op){case"==":case"in":ve.set(he.fieldPath.canonicalString(),k.value);break;case"not-in":case"!=":return ve.set(he.fieldPath.canonicalString(),k.value),Array.from(ve.values())}return null})(p,f),w=(function(Z,ae){const ve=[];let he=!0;for(const k of Ks(ae)){const S=k.kind===0?UE(Z,k.fieldPath,Z.startAt):BE(Z,k.fieldPath,Z.startAt);ve.push(S.value),he&&(he=S.inclusive)}return new qa(ve,he)})(p,f),A=(function(Z,ae){const ve=[];let he=!0;for(const k of Ks(ae)){const S=k.kind===0?BE(Z,k.fieldPath,Z.endAt):UE(Z,k.fieldPath,Z.endAt);ve.push(S.value),he&&(he=S.inclusive)}return new qa(ve,he)})(p,f),b=this.On(f,p,w),V=this.On(f,p,A),x=this.Nn(f,p,E),H=this.Bn(f.indexId,g,b,w.inclusive,V,A.inclusive,x);return U.forEach(H,(Q=>r.Y(Q,t.limit).next((Z=>{Z.forEach((ae=>{const ve=oe.fromSegments(ae.documentKey);l.has(ve)||(l=l.add(ve),c.push(ve))}))}))))})).next((()=>c))}return U.resolve(null)}))}Mn(e){let t=this.Fn.get(e);return t||(e.filters.length===0?t=[e]:t=Vk(Ke.create(e.filters,"and")).map((r=>Qm(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt))),this.Fn.set(e,t),t)}Bn(e,t,r,i,o,l,c){const f=(t!=null?t.length:1)*Math.max(r.length,o.length),p=f/(t!=null?t.length:1),g=[];for(let E=0;E<f;++E){const w=t?this.Ln(t[E/p]):xd,A=this.kn(e,w,r[E%p],i),b=this.qn(e,w,o[E%p],l),V=c.map((x=>this.kn(e,w,x,!0)));g.push(...this.createRange(A,b,V))}return g}kn(e,t,r,i){const o=new no(e,oe.empty(),t,r);return i?o:o.An()}qn(e,t,r,i){const o=new no(e,oe.empty(),t,r);return i?o.An():o}xn(e,t){const r=new sw(t),i=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next((o=>{let l=null;for(const c of o)r.yn(c)&&(!l||c.fields.length>l.fields.length)&&(l=c);return l}))}getIndexType(e,t){let r=2;const i=this.Mn(t);return U.forEach(i,(o=>this.xn(e,o).next((l=>{l?r!==0&&l.fields.length<(function(f){let p=new Ye(at.comparator),g=!1;for(const E of f.filters)for(const w of E.getFlattenedFilters())w.field.isKeyField()||(w.op==="array-contains"||w.op==="array-contains-any"?g=!0:p=p.add(w.field));for(const E of f.orderBy)E.field.isKeyField()||(p=p.add(E.field));return p.size+(g?1:0)})(o)&&(r=1):r=0})))).next((()=>(function(l){return l.limit!==null})(t)&&i.length>1&&r===2?1:r))}Qn(e,t){const r=new su;for(const i of Ks(e)){const o=t.data.field(i.fieldPath);if(o==null)return null;const l=r.Pn(i.kind);to.Kt.Dt(o,l)}return r.un()}Ln(e){const t=new su;return to.Kt.Dt(e,t.Pn(0)),t.un()}$n(e,t){const r=new su;return to.Kt.Dt(Fu(this.databaseId,t),r.Pn((function(o){const l=Ks(o);return l.length===0?0:l[l.length-1].kind})(e))),r.un()}Nn(e,t,r){if(r===null)return[];let i=[];i.push(new su);let o=0;for(const l of Ks(e)){const c=r[o++];for(const f of i)if(this.Un(t,l.fieldPath)&&Uu(c))i=this.Kn(i,l,c);else{const p=f.Pn(l.kind);to.Kt.Dt(c,p)}}return this.Wn(i)}On(e,t,r){return this.Nn(e,t,r.position)}Wn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].un();return t}Kn(e,t,r){const i=[...e],o=[];for(const l of r.arrayValue.values||[])for(const c of i){const f=new su;f.seed(c.un()),to.Kt.Dt(l,f.Pn(t.kind)),o.push(f)}return o}Un(e,t){return!!e.filters.find((r=>r instanceof Ve&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in")))}getFieldIndexes(e,t){const r=ou(e),i=wa(e);return(t?r.J(zm,IDBKeyRange.bound(t,t)):r.J()).next((o=>{const l=[];return U.forEach(o,(c=>i.get([c.indexId,this.uid]).next((f=>{l.push((function(g,E){const w=E?new Pu(E.sequenceNumber,new kn(yo(E.readTime),new oe(Ir(E.documentKey)),E.largestBatchId)):Pu.empty(),A=g.fields.map((([b,V])=>new Gd(at.fromServerFormat(b),V)));return new fh(g.indexId,g.collectionGroup,A,w)})(c,f))})))).next((()=>l))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((t=>t.length===0?null:(t.sort(((r,i)=>{const o=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return o!==0?o:Re(r.collectionGroup,i.collectionGroup)})),t[0].collectionGroup)))}updateCollectionGroup(e,t,r){const i=ou(e),o=wa(e);return this.Gn(e).next((l=>i.J(zm,IDBKeyRange.bound(t,t)).next((c=>U.forEach(c,(f=>o.put(ZE(f.indexId,this.uid,l,r))))))))}updateIndexEntries(e,t){const r=new Map;return U.forEach(t,((i,o)=>{const l=r.get(i.collectionGroup);return(l?U.resolve(l):this.getFieldIndexes(e,i.collectionGroup)).next((c=>(r.set(i.collectionGroup,c),U.forEach(c,(f=>this.zn(e,i,f).next((p=>{const g=this.jn(o,f);return p.isEqual(g)?U.resolve():this.Jn(e,o,f,p,g)})))))))}))}Hn(e,t,r,i){return Ea(e).put(i.Rn(this.uid,this.$n(r,t.key),t.key))}Yn(e,t,r,i){return Ea(e).delete(i.Vn(this.uid,this.$n(r,t.key),t.key))}zn(e,t,r){const i=Ea(e);let o=new Ye(Bi);return i.ee({index:WA,range:IDBKeyRange.only([r.indexId,this.uid,eh(this.$n(r,t))])},((l,c)=>{o=o.add(new no(r.indexId,t,iw(c.arrayValue),iw(c.directionalValue)))})).next((()=>o))}jn(e,t){let r=new Ye(Bi);const i=this.Qn(t,e);if(i==null)return r;const o=Um(t);if(o!=null){const l=e.data.field(o.fieldPath);if(Uu(l))for(const c of l.arrayValue.values||[])r=r.add(new no(t.indexId,e.key,this.Ln(c),i))}else r=r.add(new no(t.indexId,e.key,xd,i));return r}Jn(e,t,r,i,o){te(aw,"Updating index entries for document '%s'",t.key);const l=[];return(function(f,p,g,E,w){const A=f.getIterator(),b=p.getIterator();let V=va(A),x=va(b);for(;V||x;){let H=!1,Q=!1;if(V&&x){const Z=g(V,x);Z<0?Q=!0:Z>0&&(H=!0)}else V!=null?Q=!0:H=!0;H?(E(x),x=va(b)):Q?(w(V),V=va(A)):(V=va(A),x=va(b))}})(i,o,Bi,(c=>{l.push(this.Hn(e,t,r,c))}),(c=>{l.push(this.Yn(e,t,r,c))})),U.waitFor(l)}Gn(e){let t=1;return wa(e).ee({index:HA,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((r,i,o)=>{o.done(),t=i.sequenceNumber+1})).next((()=>t))}createRange(e,t,r){r=r.sort(((l,c)=>Bi(l,c))).filter(((l,c,f)=>!c||Bi(l,f[c-1])!==0));const i=[];i.push(e);for(const l of r){const c=Bi(l,e),f=Bi(l,t);if(c===0)i[0]=e.An();else if(c>0&&f<0)i.push(l),i.push(l.An());else if(f>0)break}i.push(t);const o=[];for(let l=0;l<i.length;l+=2){if(this.Zn(i[l],i[l+1]))return[];const c=i[l].Vn(this.uid,xd,oe.empty()),f=i[l+1].Vn(this.uid,xd,oe.empty());o.push(IDBKeyRange.bound(c,f))}return o}Zn(e,t){return Bi(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(uw)}getMinOffset(e,t){return U.mapArray(this.Mn(t),(r=>this.xn(e,r).next((i=>i||pe(44426))))).next(uw)}}function lw(n){return Pt(n,Mu)}function Ea(n){return Pt(n,vu)}function ou(n){return Pt(n,Ng)}function wa(n){return Pt(n,yu)}function uw(n){ye(n.length!==0,28825);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;kg(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new kn(e.readTime,e.documentKey,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cw={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},GI=41943040;class Xt{static withCacheSize(e){return new Xt(e,Xt.DEFAULT_COLLECTION_PERCENTILE,Xt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $I(n,e,t){const r=n.store(Xn),i=n.store(Ua),o=[],l=IDBKeyRange.only(t.batchId);let c=0;const f=r.ee({range:l},((g,E,w)=>(c++,w.delete())));o.push(f.next((()=>{ye(c===1,47070,{batchId:t.batchId})})));const p=[];for(const g of t.mutations){const E=BA(e,g.key.path,t.batchId);o.push(i.delete(E)),p.push(g.key)}return U.waitFor(o).next((()=>p))}function Ih(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw pe(14731);e=n.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Xt.DEFAULT_COLLECTION_PERCENTILE=10,Xt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Xt.DEFAULT=new Xt(GI,Xt.DEFAULT_COLLECTION_PERCENTILE,Xt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Xt.DISABLED=new Xt(-1,0,0);class hf{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Xn={}}static wt(e,t,r,i){ye(e.uid!=="",64387);const o=e.isAuthenticated()?e.uid:"";return new hf(o,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return zi(e).ee({index:io,range:r},((i,o,l)=>{t=!1,l.done()})).next((()=>t))}addMutationBatch(e,t,r,i){const o=Ca(e),l=zi(e);return l.add({}).next((c=>{ye(typeof c=="number",49019);const f=new zg(c,t,r,i),p=(function(A,b,V){const x=V.baseMutations.map((Q=>wh(A.yt,Q))),H=V.mutations.map((Q=>wh(A.yt,Q)));return{userId:b,batchId:V.batchId,localWriteTimeMs:V.localWriteTime.toMillis(),baseMutations:x,mutations:H}})(this.serializer,this.userId,f),g=[];let E=new Ye(((w,A)=>Re(w.canonicalString(),A.canonicalString())));for(const w of i){const A=BA(this.userId,w.key.path,c);E=E.add(w.key.path.popLast()),g.push(l.put(p)),g.push(o.put(A,h1))}return E.forEach((w=>{g.push(this.indexManager.addToCollectionParentIndex(e,w))})),e.addOnCommittedListener((()=>{this.Xn[c]=f.keys()})),U.waitFor(g).next((()=>f))}))}lookupMutationBatch(e,t){return zi(e).get(t).next((r=>r?(ye(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:t}),eo(this.serializer,r)):null))}er(e,t){return this.Xn[t]?U.resolve(this.Xn[t]):this.lookupMutationBatch(e,t).next((r=>{if(r){const i=r.keys();return this.Xn[t]=i,i}return null}))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let o=null;return zi(e).ee({index:io,range:i},((l,c,f)=>{c.userId===this.userId&&(ye(c.batchId>=r,47524,{tr:r}),o=eo(this.serializer,c)),f.done()})).next((()=>o))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=oo;return zi(e).ee({index:io,range:t,reverse:!0},((i,o,l)=>{r=o.batchId,l.done()})).next((()=>r))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,oo],[this.userId,Number.POSITIVE_INFINITY]);return zi(e).J(io,t).next((r=>r.map((i=>eo(this.serializer,i)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=$d(this.userId,t.path),i=IDBKeyRange.lowerBound(r),o=[];return Ca(e).ee({range:i},((l,c,f)=>{const[p,g,E]=l,w=Ir(g);if(p===this.userId&&t.path.isEqual(w))return zi(e).get(E).next((A=>{if(!A)throw pe(61480,{nr:l,batchId:E});ye(A.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:A.userId,batchId:E}),o.push(eo(this.serializer,A))}));f.done()})).next((()=>o))}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Ye(Re);const i=[];return t.forEach((o=>{const l=$d(this.userId,o.path),c=IDBKeyRange.lowerBound(l),f=Ca(e).ee({range:c},((p,g,E)=>{const[w,A,b]=p,V=Ir(A);w===this.userId&&o.path.isEqual(V)?r=r.add(b):E.done()}));i.push(f)})),U.waitFor(i).next((()=>this.rr(e,r)))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,o=$d(this.userId,r),l=IDBKeyRange.lowerBound(o);let c=new Ye(Re);return Ca(e).ee({range:l},((f,p,g)=>{const[E,w,A]=f,b=Ir(w);E===this.userId&&r.isPrefixOf(b)?b.length===i&&(c=c.add(A)):g.done()})).next((()=>this.rr(e,c)))}rr(e,t){const r=[],i=[];return t.forEach((o=>{i.push(zi(e).get(o).next((l=>{if(l===null)throw pe(35274,{batchId:o});ye(l.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:l.userId,batchId:o}),r.push(eo(this.serializer,l))})))})),U.waitFor(i).next((()=>r))}removeMutationBatch(e,t){return $I(e.le,this.userId,t).next((r=>(e.addOnCommittedListener((()=>{this.ir(t.batchId)})),U.forEach(r,(i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return U.resolve();const r=IDBKeyRange.lowerBound((function(l){return[l]})(this.userId)),i=[];return Ca(e).ee({range:r},((o,l,c)=>{if(o[0]===this.userId){const f=Ir(o[1]);i.push(f)}else c.done()})).next((()=>{ye(i.length===0,56720,{sr:i.map((o=>o.canonicalString()))})}))}))}containsKey(e,t){return QI(e,this.userId,t)}_r(e){return KI(e).get(this.userId).next((t=>t||{userId:this.userId,lastAcknowledgedBatchId:oo,lastStreamToken:""}))}}function QI(n,e,t){const r=$d(e,t.path),i=r[1],o=IDBKeyRange.lowerBound(r);let l=!1;return Ca(n).ee({range:o,X:!0},((c,f,p)=>{const[g,E,w]=c;g===e&&E===i&&(l=!0),p.done()})).next((()=>l))}function zi(n){return Pt(n,Xn)}function Ca(n){return Pt(n,Ua)}function KI(n){return Pt(n,Nu)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vo{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new vo(0)}static cr(){return new vo(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uk{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.lr(e).next((t=>{const r=new vo(t.highestTargetId);return t.highestTargetId=r.next(),this.hr(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.lr(e).next((t=>Ee.fromTimestamp(new ze(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.lr(e).next((t=>t.highestListenSequenceNumber))}setTargetsMetadata(e,t,r){return this.lr(e).next((i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.hr(e,i))))}addTargetData(e,t){return this.Pr(e,t).next((()=>this.lr(e).next((r=>(r.targetCount+=1,this.Tr(t,r),this.hr(e,r))))))}updateTargetData(e,t){return this.Pr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>Ta(e).delete(t.targetId))).next((()=>this.lr(e))).next((r=>(ye(r.targetCount>0,8065),r.targetCount-=1,this.hr(e,r))))}removeTargets(e,t,r){let i=0;const o=[];return Ta(e).ee(((l,c)=>{const f=hu(c);f.sequenceNumber<=t&&r.get(f.targetId)===null&&(i++,o.push(this.removeTargetData(e,f)))})).next((()=>U.waitFor(o))).next((()=>i))}forEachTarget(e,t){return Ta(e).ee(((r,i)=>{const o=hu(i);t(o)}))}lr(e){return dw(e).get(gh).next((t=>(ye(t!==null,2888),t)))}hr(e,t){return dw(e).put(gh,t)}Pr(e,t){return Ta(e).put(jI(this.serializer,t))}Tr(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.lr(e).next((t=>t.targetCount))}getTargetData(e,t){const r=mo(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let o=null;return Ta(e).ee({range:i,index:jA},((l,c,f)=>{const p=hu(c);Zu(t,p.target)&&(o=p,f.done())})).next((()=>o))}addMatchingKeys(e,t,r){const i=[],o=Wi(e);return t.forEach((l=>{const c=en(l.path);i.push(o.put({targetId:r,path:c})),i.push(this.referenceDelegate.addReference(e,r,l))})),U.waitFor(i)}removeMatchingKeys(e,t,r){const i=Wi(e);return U.forEach(t,(o=>{const l=en(o.path);return U.waitFor([i.delete([r,l]),this.referenceDelegate.removeReference(e,r,o)])}))}removeMatchingKeysForTargetId(e,t){const r=Wi(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Wi(e);let o=Pe();return i.ee({range:r,X:!0},((l,c,f)=>{const p=Ir(l[1]),g=new oe(p);o=o.add(g)})).next((()=>o))}containsKey(e,t){const r=en(t.path),i=IDBKeyRange.bound([r],[xA(r)],!1,!0);let o=0;return Wi(e).ee({index:xg,X:!0,range:i},(([l,c],f,p)=>{l!==0&&(o++,p.done())})).next((()=>o>0))}At(e,t){return Ta(e).get(t).next((r=>r?hu(r):null))}}function Ta(n){return Pt(n,Ba)}function dw(n){return Pt(n,ao)}function Wi(n){return Pt(n,za)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hw="LruGarbageCollector",Bk=1048576;function fw([n,e],[t,r]){const i=Re(n,t);return i===0?Re(e,r):i}class zk{constructor(e){this.Ir=e,this.buffer=new Ye(fw),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();fw(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class YI{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){te(hw,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){gs(t)?te(hw,"Ignoring IndexedDB error during garbage collection: ",t):await To(t)}await this.Vr(3e5)}))}}class jk{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((r=>Math.floor(t/100*r)))}nthSequenceNumber(e,t){if(t===0)return U.resolve(Un.ce);const r=new zk(t);return this.mr.forEachTarget(e,(i=>r.Ar(i.sequenceNumber))).next((()=>this.mr.pr(e,(i=>r.Ar(i))))).next((()=>r.maxValue))}removeTargets(e,t,r){return this.mr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(te("LruGarbageCollector","Garbage collection skipped; disabled"),U.resolve(cw)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(te("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),cw):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let r,i,o,l,c,f,p;const g=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((E=>(E>this.params.maximumSequenceNumbersToCollect?(te("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),i=this.params.maximumSequenceNumbersToCollect):i=E,l=Date.now(),this.nthSequenceNumber(e,i)))).next((E=>(r=E,c=Date.now(),this.removeTargets(e,r,t)))).next((E=>(o=E,f=Date.now(),this.removeOrphanedDocuments(e,r)))).next((E=>(p=Date.now(),Aa()<=Me.DEBUG&&te("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${l-g}ms
	Determined least recently used ${i} in `+(c-l)+`ms
	Removed ${o} targets in `+(f-c)+`ms
	Removed ${E} documents in `+(p-f)+`ms
Total Duration: ${p-g}ms`),U.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:E}))))}}function JI(n,e){return new jk(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hk{constructor(e,t){this.db=e,this.garbageCollector=JI(this,t)}gr(e){const t=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next((r=>t.next((i=>r+i))))}wr(e){let t=0;return this.pr(e,(r=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}pr(e,t){return this.Sr(e,((r,i)=>t(i)))}addReference(e,t,r){return Nd(e,r)}removeReference(e,t,r){return Nd(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Nd(e,t)}br(e,t){return(function(i,o){let l=!1;return KI(i).te((c=>QI(i,c,o).next((f=>(f&&(l=!0),U.resolve(!f)))))).next((()=>l))})(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let o=0;return this.Sr(e,((l,c)=>{if(c<=t){const f=this.br(e,l).next((p=>{if(!p)return o++,r.getEntry(e,l).next((()=>(r.removeEntry(l,Ee.min()),Wi(e).delete((function(E){return[0,en(E.path)]})(l)))))}));i.push(f)}})).next((()=>U.waitFor(i))).next((()=>r.apply(e))).next((()=>o))}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Nd(e,t)}Sr(e,t){const r=Wi(e);let i,o=Un.ce;return r.ee({index:xg},(([l,c],{path:f,sequenceNumber:p})=>{l===0?(o!==Un.ce&&t(new oe(Ir(i)),o),o=p,i=f):o=Un.ce})).next((()=>{o!==Un.ce&&t(new oe(Ir(i)),o)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Nd(n,e){return Wi(n).put((function(r,i){return{targetId:0,path:en(r.path),sequenceNumber:i}})(e,n.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XI{constructor(){this.changes=new ai((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,mt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?U.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wk{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return $s(e).put(r)}removeEntry(e,t,r){return $s(e).delete((function(o,l){const c=o.path.toArray();return[c.slice(0,c.length-2),c[c.length-2],Th(l),c[c.length-1]]})(t,r))}updateMetadata(e,t){return this.getMetadata(e).next((r=>(r.byteSize+=t,this.Dr(e,r))))}getEntry(e,t){let r=mt.newInvalidDocument(t);return $s(e).ee({index:Qd,range:IDBKeyRange.only(au(t))},((i,o)=>{r=this.Cr(t,o)})).next((()=>r))}vr(e,t){let r={size:0,document:mt.newInvalidDocument(t)};return $s(e).ee({index:Qd,range:IDBKeyRange.only(au(t))},((i,o)=>{r={document:this.Cr(t,o),size:Ih(o)}})).next((()=>r))}getEntries(e,t){let r=bn();return this.Fr(e,t,((i,o)=>{const l=this.Cr(i,o);r=r.insert(i,l)})).next((()=>r))}Mr(e,t){let r=bn(),i=new lt(oe.comparator);return this.Fr(e,t,((o,l)=>{const c=this.Cr(o,l);r=r.insert(o,c),i=i.insert(o,Ih(l))})).next((()=>({documents:r,Or:i})))}Fr(e,t,r){if(t.isEmpty())return U.resolve();let i=new Ye(gw);t.forEach((f=>i=i.add(f)));const o=IDBKeyRange.bound(au(i.first()),au(i.last())),l=i.getIterator();let c=l.getNext();return $s(e).ee({index:Qd,range:o},((f,p,g)=>{const E=oe.fromSegments([...p.prefixPath,p.collectionGroup,p.documentId]);for(;c&&gw(c,E)<0;)r(c,null),c=l.getNext();c&&c.isEqual(E)&&(r(c,p),c=l.hasNext()?l.getNext():null),c?g.j(au(c)):g.done()})).next((()=>{for(;c;)r(c,null),c=l.hasNext()?l.getNext():null}))}getDocumentsMatchingQuery(e,t,r,i,o){const l=t.path,c=[l.popLast().toArray(),l.lastSegment(),Th(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],f=[l.popLast().toArray(),l.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return $s(e).J(IDBKeyRange.bound(c,f,!0)).next((p=>{o?.incrementDocumentReadCount(p.length);let g=bn();for(const E of p){const w=this.Cr(oe.fromSegments(E.prefixPath.concat(E.collectionGroup,E.documentId)),E);w.isFoundDocument()&&(ec(t,w)||i.has(w.key))&&(g=g.insert(w.key,w))}return g}))}getAllFromCollectionGroup(e,t,r,i){let o=bn();const l=mw(t,r),c=mw(t,kn.max());return $s(e).ee({index:zA,range:IDBKeyRange.bound(l,c,!0)},((f,p,g)=>{const E=this.Cr(oe.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);o=o.insert(E.key,E),o.size===i&&g.done()})).next((()=>o))}newChangeBuffer(e){return new qk(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((t=>t.byteSize))}getMetadata(e){return pw(e).get(Bm).next((t=>(ye(!!t,20021),t)))}Dr(e,t){return pw(e).put(Bm,t)}Cr(e,t){if(t){const r=Dk(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(Ee.min())))return r}return mt.newInvalidDocument(e)}}function ZI(n){return new Wk(n)}class qk extends XI{constructor(e,t){super(),this.Nr=e,this.trackRemovals=t,this.Br=new ai((r=>r.toString()),((r,i)=>r.isEqual(i)))}applyChanges(e){const t=[];let r=0,i=new Ye(((o,l)=>Re(o.canonicalString(),l.canonicalString())));return this.changes.forEach(((o,l)=>{const c=this.Br.get(o);if(t.push(this.Nr.removeEntry(e,o,c.readTime)),l.isValidDocument()){const f=JE(this.Nr.serializer,l);i=i.add(o.path.popLast());const p=Ih(f);r+=p-c.size,t.push(this.Nr.addEntry(e,o,f))}else if(r-=c.size,this.trackRemovals){const f=JE(this.Nr.serializer,l.convertToNoDocument(Ee.min()));t.push(this.Nr.addEntry(e,o,f))}})),i.forEach((o=>{t.push(this.Nr.indexManager.addToCollectionParentIndex(e,o))})),t.push(this.Nr.updateMetadata(e,r)),U.waitFor(t)}getFromCache(e,t){return this.Nr.vr(e,t).next((r=>(this.Br.set(t,{size:r.size,readTime:r.document.readTime}),r.document)))}getAllFromCache(e,t){return this.Nr.Mr(e,t).next((({documents:r,Or:i})=>(i.forEach(((o,l)=>{this.Br.set(o,{size:l,readTime:r.get(o).readTime})})),r)))}}function pw(n){return Pt(n,Ou)}function $s(n){return Pt(n,mh)}function au(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function mw(n,e){const t=e.documentKey.path.toArray();return[n,Th(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function gw(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let o=0;o<t.length-2&&o<r.length-2;++o)if(i=Re(t[o],r[o]),i)return i;return i=Re(t.length,r.length),i||(i=Re(t[t.length-2],r[r.length-2]),i||Re(t[t.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gk{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eS{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((i=>(r=i,this.remoteDocumentCache.getEntry(e,t)))).next((i=>(r!==null&&Tu(r.mutation,i,mn.empty(),ze.now()),i)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,Pe()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=Pe()){const i=Sr();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,r).next((o=>{let l=cu();return o.forEach(((c,f)=>{l=l.insert(c,f.overlayedDocument)})),l}))))}getOverlayedDocuments(e,t){const r=Sr();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,Pe())))}populateOverlays(e,t,r){const i=[];return r.forEach((o=>{t.has(o)||i.push(o)})),this.documentOverlayCache.getOverlays(e,i).next((o=>{o.forEach(((l,c)=>{t.set(l,c)}))}))}computeViews(e,t,r,i){let o=bn();const l=wu(),c=(function(){return wu()})();return t.forEach(((f,p)=>{const g=r.get(p.key);i.has(p.key)&&(g===void 0||g.mutation instanceof li)?o=o.insert(p.key,p):g!==void 0?(l.set(p.key,g.mutation.getFieldMask()),Tu(g.mutation,p,g.mutation.getFieldMask(),ze.now())):l.set(p.key,mn.empty())})),this.recalculateAndSaveOverlays(e,o).next((f=>(f.forEach(((p,g)=>l.set(p,g))),t.forEach(((p,g)=>c.set(p,new Gk(g,l.get(p)??null)))),c)))}recalculateAndSaveOverlays(e,t){const r=wu();let i=new lt(((l,c)=>l-c)),o=Pe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((l=>{for(const c of l)c.keys().forEach((f=>{const p=t.get(f);if(p===null)return;let g=r.get(f)||mn.empty();g=c.applyToLocalView(p,g),r.set(f,g);const E=(i.get(c.batchId)||Pe()).add(f);i=i.insert(c.batchId,E)}))})).next((()=>{const l=[],c=i.getReverseIterator();for(;c.hasNext();){const f=c.getNext(),p=f.key,g=f.value,E=vI();g.forEach((w=>{if(!o.has(w)){const A=II(t.get(w),r.get(w));A!==null&&E.set(w,A),o=o.add(w)}})),l.push(this.documentOverlayCache.saveOverlays(e,p,E))}return U.waitFor(l)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,i){return(function(l){return oe.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):fI(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next((o=>{const l=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):U.resolve(Sr());let c=ku,f=o;return l.next((p=>U.forEach(p,((g,E)=>(c<E.largestBatchId&&(c=E.largestBatchId),o.get(g)?U.resolve():this.remoteDocumentCache.getEntry(e,g).next((w=>{f=f.insert(g,w)}))))).next((()=>this.populateOverlays(e,p,o))).next((()=>this.computeViews(e,f,p,Pe()))).next((g=>({batchId:c,changes:yI(g)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new oe(t)).next((r=>{let i=cu();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const o=t.collectionGroup;let l=cu();return this.indexManager.getCollectionParents(e,o).next((c=>U.forEach(c,(f=>{const p=(function(E,w){return new il(w,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(t,f.child(o));return this.getDocumentsMatchingCollectionQuery(e,p,r,i).next((g=>{g.forEach(((E,w)=>{l=l.insert(E,w)}))}))})).next((()=>l))))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((l=>(o=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i)))).next((l=>{o.forEach(((f,p)=>{const g=p.getKey();l.get(g)===null&&(l=l.insert(g,mt.newInvalidDocument(g)))}));let c=cu();return l.forEach(((f,p)=>{const g=o.get(f);g!==void 0&&Tu(g.mutation,p,mn.empty(),ze.now()),ec(t,p)&&(c=c.insert(f,p))})),c}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $k{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return U.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(i){return{id:i.id,version:i.version,createTime:ln(i.createTime)}})(t)),U.resolve()}getNamedQuery(e,t){return U.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(i){return{name:i.name,query:HI(i.bundledQuery),readTime:ln(i.readTime)}})(t)),U.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qk{constructor(){this.overlays=new lt(oe.comparator),this.qr=new Map}getOverlay(e,t){return U.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Sr();return U.forEach(t,(i=>this.getOverlay(e,i).next((o=>{o!==null&&r.set(i,o)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((i,o)=>{this.St(e,t,o)})),U.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.qr.get(r);return i!==void 0&&(i.forEach((o=>this.overlays=this.overlays.remove(o))),this.qr.delete(r)),U.resolve()}getOverlaysForCollection(e,t,r){const i=Sr(),o=t.length+1,l=new oe(t.child("")),c=this.overlays.getIteratorFrom(l);for(;c.hasNext();){const f=c.getNext().value,p=f.getKey();if(!t.isPrefixOf(p.path))break;p.path.length===o&&f.largestBatchId>r&&i.set(f.getKey(),f)}return U.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new lt(((p,g)=>p-g));const l=this.overlays.getIterator();for(;l.hasNext();){const p=l.getNext().value;if(p.getKey().getCollectionGroup()===t&&p.largestBatchId>r){let g=o.get(p.largestBatchId);g===null&&(g=Sr(),o=o.insert(p.largestBatchId,g)),g.set(p.getKey(),p)}}const c=Sr(),f=o.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach(((p,g)=>c.set(p,g))),!(c.size()>=i)););return U.resolve(c)}St(e,t,r){const i=this.overlays.get(r.key);if(i!==null){const l=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new Hg(t,r));let o=this.qr.get(t);o===void 0&&(o=Pe(),this.qr.set(t,o)),this.qr.set(t,o.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kk{constructor(){this.sessionToken=wt.EMPTY_BYTE_STRING}getSessionToken(e){return U.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,U.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qg{constructor(){this.Qr=new Ye(Vt.$r),this.Ur=new Ye(Vt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const r=new Vt(e,t);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Gr(new Vt(e,t))}zr(e,t){e.forEach((r=>this.removeReference(r,t)))}jr(e){const t=new oe(new qe([])),r=new Vt(t,e),i=new Vt(t,e+1),o=[];return this.Ur.forEachInRange([r,i],(l=>{this.Gr(l),o.push(l.key)})),o}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new oe(new qe([])),r=new Vt(t,e),i=new Vt(t,e+1);let o=Pe();return this.Ur.forEachInRange([r,i],(l=>{o=o.add(l.key)})),o}containsKey(e){const t=new Vt(e,0),r=this.Qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class Vt{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return oe.comparator(e.key,t.key)||Re(e.Yr,t.Yr)}static Kr(e,t){return Re(e.Yr,t.Yr)||oe.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yk{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Ye(Vt.$r)}checkEmpty(e){return U.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){const o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new zg(o,t,r,i);this.mutationQueue.push(l);for(const c of i)this.Zr=this.Zr.add(new Vt(c.key,o)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return U.resolve(l)}lookupMutationBatch(e,t){return U.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=this.ei(r),o=i<0?0:i;return U.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return U.resolve(this.mutationQueue.length===0?oo:this.tr-1)}getAllMutationBatches(e){return U.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Vt(t,0),i=new Vt(t,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([r,i],(l=>{const c=this.Xr(l.Yr);o.push(c)})),U.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Ye(Re);return t.forEach((i=>{const o=new Vt(i,0),l=new Vt(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,l],(c=>{r=r.add(c.Yr)}))})),U.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let o=r;oe.isDocumentKey(o)||(o=o.child(""));const l=new Vt(new oe(o),0);let c=new Ye(Re);return this.Zr.forEachWhile((f=>{const p=f.key.path;return!!r.isPrefixOf(p)&&(p.length===i&&(c=c.add(f.Yr)),!0)}),l),U.resolve(this.ti(c))}ti(e){const t=[];return e.forEach((r=>{const i=this.Xr(r);i!==null&&t.push(i)})),t}removeMutationBatch(e,t){ye(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return U.forEach(t.mutations,(i=>{const o=new Vt(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,t){const r=new Vt(t,0),i=this.Zr.firstAfterOrEqual(r);return U.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,U.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jk{constructor(e){this.ri=e,this.docs=(function(){return new lt(oe.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),o=i?i.size:0,l=this.ri(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:l}),this.size+=l-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return U.resolve(r?r.document.mutableCopy():mt.newInvalidDocument(t))}getEntries(e,t){let r=bn();return t.forEach((i=>{const o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():mt.newInvalidDocument(i))})),U.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=bn();const l=t.path,c=new oe(l.child("__id-9223372036854775808__")),f=this.docs.getIteratorFrom(c);for(;f.hasNext();){const{key:p,value:{document:g}}=f.getNext();if(!l.isPrefixOf(p.path))break;p.path.length>l.length+1||kg(VA(g),r)<=0||(i.has(g.key)||ec(t,g))&&(o=o.insert(g.key,g.mutableCopy()))}return U.resolve(o)}getAllFromCollectionGroup(e,t,r,i){pe(9500)}ii(e,t){return U.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new Xk(this)}getSize(e){return U.resolve(this.size)}}class Xk extends XI{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((r,i)=>{i.isValidDocument()?t.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)})),U.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zk{constructor(e){this.persistence=e,this.si=new ai((t=>mo(t)),Zu),this.lastRemoteSnapshotVersion=Ee.min(),this.highestTargetId=0,this.oi=0,this._i=new Qg,this.targetCount=0,this.ai=vo.ur()}forEachTarget(e,t){return this.si.forEach(((r,i)=>t(i))),U.resolve()}getLastRemoteSnapshotVersion(e){return U.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return U.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),U.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.oi&&(this.oi=t),U.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new vo(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,U.resolve()}updateTargetData(e,t){return this.Pr(t),U.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,U.resolve()}removeTargets(e,t,r){let i=0;const o=[];return this.si.forEach(((l,c)=>{c.sequenceNumber<=t&&r.get(c.targetId)===null&&(this.si.delete(l),o.push(this.removeMatchingKeysForTargetId(e,c.targetId)),i++)})),U.waitFor(o).next((()=>i))}getTargetCount(e){return U.resolve(this.targetCount)}getTargetData(e,t){const r=this.si.get(t)||null;return U.resolve(r)}addMatchingKeys(e,t,r){return this._i.Wr(t,r),U.resolve()}removeMatchingKeys(e,t,r){this._i.zr(t,r);const i=this.persistence.referenceDelegate,o=[];return i&&t.forEach((l=>{o.push(i.markPotentiallyOrphaned(e,l))})),U.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),U.resolve()}getMatchingKeysForTargetId(e,t){const r=this._i.Hr(t);return U.resolve(r)}containsKey(e,t){return U.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kg{constructor(e,t){this.ui={},this.overlays={},this.ci=new Un(0),this.li=!1,this.li=!0,this.hi=new Kk,this.referenceDelegate=e(this),this.Pi=new Zk(this),this.indexManager=new Lk,this.remoteDocumentCache=(function(i){return new Jk(i)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new zI(t),this.Ii=new $k(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Qk,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ui[e.toKey()];return r||(r=new Yk(t,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,r){te("MemoryPersistence","Starting transaction:",e);const i=new eP(this.ci.next());return this.referenceDelegate.Ei(),r(i).next((o=>this.referenceDelegate.di(i).next((()=>o)))).toPromise().then((o=>(i.raiseOnCommittedEvent(),o)))}Ai(e,t){return U.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,t))))}}class eP extends FA{constructor(e){super(),this.currentSequenceNumber=e}}class ff{constructor(e){this.persistence=e,this.Ri=new Qg,this.Vi=null}static mi(e){return new ff(e)}get fi(){if(this.Vi)return this.Vi;throw pe(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.fi.delete(r.toString()),U.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.fi.add(r.toString()),U.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),U.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((i=>this.fi.add(i.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((i=>{i.forEach((o=>this.fi.add(o.toString())))})).next((()=>r.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return U.forEach(this.fi,(r=>{const i=oe.fromPath(r);return this.gi(e,i).next((o=>{o||t.removeEntry(i,Ee.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((r=>{r?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return U.or([()=>U.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class Sh{constructor(e,t){this.persistence=e,this.pi=new ai((r=>en(r.path)),((r,i)=>r.isEqual(i))),this.garbageCollector=JI(this,t)}static mi(e,t){return new Sh(e,t)}Ei(){}di(e){return U.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>t.next((i=>r+i))))}wr(e){let t=0;return this.pr(e,(r=>{t++})).next((()=>t))}pr(e,t){return U.forEach(this.pi,((r,i)=>this.br(e,r,i).next((o=>o?U.resolve():t(i)))))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ii(e,(l=>this.br(e,l,t).next((c=>{c||(r++,o.removeEntry(l,Ee.min()))})))).next((()=>o.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),U.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),U.resolve()}removeReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),U.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),U.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Yd(e.data.value)),t}br(e,t,r){return U.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const i=this.pi.get(t);return U.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tP{constructor(e){this.serializer=e}k(e,t,r,i){const o=new Jh("createOrUpgrade",t);r<1&&i>=1&&((function(f){f.createObjectStore(Xu)})(e),(function(f){f.createObjectStore(Nu,{keyPath:d1}),f.createObjectStore(Xn,{keyPath:CE,autoIncrement:!0}).createIndex(io,bE,{unique:!0}),f.createObjectStore(Ua)})(e),yw(e),(function(f){f.createObjectStore(Ys)})(e));let l=U.resolve();return r<3&&i>=3&&(r!==0&&((function(f){f.deleteObjectStore(za),f.deleteObjectStore(Ba),f.deleteObjectStore(ao)})(e),yw(e)),l=l.next((()=>(function(f){const p=f.store(ao),g={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ee.min().toTimestamp(),targetCount:0};return p.put(gh,g)})(o)))),r<4&&i>=4&&(r!==0&&(l=l.next((()=>(function(f,p){return p.store(Xn).J().next((E=>{f.deleteObjectStore(Xn),f.createObjectStore(Xn,{keyPath:CE,autoIncrement:!0}).createIndex(io,bE,{unique:!0});const w=p.store(Xn),A=E.map((b=>w.put(b)));return U.waitFor(A)}))})(e,o)))),l=l.next((()=>{(function(f){f.createObjectStore(ja,{keyPath:E1})})(e)}))),r<5&&i>=5&&(l=l.next((()=>this.yi(o)))),r<6&&i>=6&&(l=l.next((()=>((function(f){f.createObjectStore(Ou)})(e),this.wi(o))))),r<7&&i>=7&&(l=l.next((()=>this.Si(o)))),r<8&&i>=8&&(l=l.next((()=>this.bi(e,o)))),r<9&&i>=9&&(l=l.next((()=>{(function(f){f.objectStoreNames.contains("remoteDocumentChanges")&&f.deleteObjectStore("remoteDocumentChanges")})(e)}))),r<10&&i>=10&&(l=l.next((()=>this.Di(o)))),r<11&&i>=11&&(l=l.next((()=>{(function(f){f.createObjectStore(Zh,{keyPath:w1})})(e),(function(f){f.createObjectStore(ef,{keyPath:T1})})(e)}))),r<12&&i>=12&&(l=l.next((()=>{(function(f){const p=f.createObjectStore(tf,{keyPath:D1});p.createIndex(jm,k1,{unique:!1}),p.createIndex(qA,P1,{unique:!1})})(e)}))),r<13&&i>=13&&(l=l.next((()=>(function(f){const p=f.createObjectStore(mh,{keyPath:f1});p.createIndex(Qd,p1),p.createIndex(zA,m1)})(e))).next((()=>this.Ci(e,o))).next((()=>e.deleteObjectStore(Ys)))),r<14&&i>=14&&(l=l.next((()=>this.Fi(e,o)))),r<15&&i>=15&&(l=l.next((()=>(function(f){f.createObjectStore(Ng,{keyPath:A1,autoIncrement:!0}).createIndex(zm,I1,{unique:!1}),f.createObjectStore(yu,{keyPath:S1}).createIndex(HA,R1,{unique:!1}),f.createObjectStore(vu,{keyPath:C1}).createIndex(WA,b1,{unique:!1})})(e)))),r<16&&i>=16&&(l=l.next((()=>{t.objectStore(yu).clear()})).next((()=>{t.objectStore(vu).clear()}))),r<17&&i>=17&&(l=l.next((()=>{(function(f){f.createObjectStore(Og,{keyPath:x1})})(e)}))),r<18&&i>=18&&mA()&&(l=l.next((()=>{t.objectStore(yu).clear()})).next((()=>{t.objectStore(vu).clear()}))),l}wi(e){let t=0;return e.store(Ys).ee(((r,i)=>{t+=Ih(i)})).next((()=>{const r={byteSize:t};return e.store(Ou).put(Bm,r)}))}yi(e){const t=e.store(Nu),r=e.store(Xn);return t.J().next((i=>U.forEach(i,(o=>{const l=IDBKeyRange.bound([o.userId,oo],[o.userId,o.lastAcknowledgedBatchId]);return r.J(io,l).next((c=>U.forEach(c,(f=>{ye(f.userId===o.userId,18650,"Cannot process batch from unexpected user",{batchId:f.batchId});const p=eo(this.serializer,f);return $I(e,o.userId,p).next((()=>{}))}))))}))))}Si(e){const t=e.store(za),r=e.store(Ys);return e.store(ao).get(gh).next((i=>{const o=[];return r.ee(((l,c)=>{const f=new qe(l),p=(function(E){return[0,en(E)]})(f);o.push(t.get(p).next((g=>g?U.resolve():(E=>t.put({targetId:0,path:en(E),sequenceNumber:i.highestListenSequenceNumber}))(f))))})).next((()=>U.waitFor(o)))}))}bi(e,t){e.createObjectStore(Mu,{keyPath:_1});const r=t.store(Mu),i=new $g,o=l=>{if(i.add(l)){const c=l.lastSegment(),f=l.popLast();return r.put({collectionId:c,parent:en(f)})}};return t.store(Ys).ee({X:!0},((l,c)=>{const f=new qe(l);return o(f.popLast())})).next((()=>t.store(Ua).ee({X:!0},(([l,c,f],p)=>{const g=Ir(c);return o(g.popLast())}))))}Di(e){const t=e.store(Ba);return t.ee(((r,i)=>{const o=hu(i),l=jI(this.serializer,o);return t.put(l)}))}Ci(e,t){const r=t.store(Ys),i=[];return r.ee(((o,l)=>{const c=t.store(mh),f=(function(E){return E.document?new oe(qe.fromString(E.document.name).popFirst(5)):E.noDocument?oe.fromSegments(E.noDocument.path):E.unknownDocument?oe.fromSegments(E.unknownDocument.path):pe(36783)})(l).path.toArray(),p={prefixPath:f.slice(0,f.length-2),collectionGroup:f[f.length-2],documentId:f[f.length-1],readTime:l.readTime||[0,0],unknownDocument:l.unknownDocument,noDocument:l.noDocument,document:l.document,hasCommittedMutations:!!l.hasCommittedMutations};i.push(c.put(p))})).next((()=>U.waitFor(i)))}Fi(e,t){const r=t.store(Xn),i=ZI(this.serializer),o=new Kg(ff.mi,this.serializer.yt);return r.J().next((l=>{const c=new Map;return l.forEach((f=>{let p=c.get(f.userId)??Pe();eo(this.serializer,f).keys().forEach((g=>p=p.add(g))),c.set(f.userId,p)})),U.forEach(c,((f,p)=>{const g=new Ht(p),E=df.wt(this.serializer,g),w=o.getIndexManager(g),A=hf.wt(g,this.serializer,w,o.referenceDelegate);return new eS(i,A,E,w).recalculateAndSaveOverlaysForDocumentKeys(new Hm(t,Un.ce),f).next()}))}))}}function yw(n){n.createObjectStore(za,{keyPath:y1}).createIndex(xg,v1,{unique:!0}),n.createObjectStore(Ba,{keyPath:"targetId"}).createIndex(jA,g1,{unique:!0}),n.createObjectStore(ao)}const ji="IndexedDbPersistence",um=18e5,cm=5e3,dm="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",nP="main";class Yg{constructor(e,t,r,i,o,l,c,f,p,g,E=18){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Mi=o,this.window=l,this.document=c,this.xi=p,this.Oi=g,this.Ni=E,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=w=>Promise.resolve(),!Yg.v())throw new se(K.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Hk(this,i),this.$i=t+nP,this.serializer=new zI(f),this.Ui=new is(this.$i,this.Ni,new tP(this.serializer)),this.hi=new Pk,this.Pi=new Uk(this.referenceDelegate,this.serializer),this.remoteDocumentCache=ZI(this.serializer),this.Ii=new kk,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,g===!1&&on(ji,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new se(K.FAILED_PRECONDITION,dm);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Pi.getHighestSequenceNumber(e)))})).then((e=>{this.ci=new Un(e,this.xi)})).then((()=>{this.li=!0})).catch((e=>(this.Ui&&this.Ui.close(),Promise.reject(e))))}Ji(e){return this.Qi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$((async t=>{t.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget((async()=>{this.started&&await this.Wi()})))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>Od(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.Hi(e).next((t=>{t||(this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))))}))})).next((()=>this.Yi(e))).next((t=>this.isPrimary&&!t?this.Zi(e).next((()=>!1)):!!t&&this.Xi(e).next((()=>!0)))))).catch((e=>{if(gs(e))return te(ji,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return te(ji,"Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable((()=>this.Qi(e))),this.isPrimary=e}))}Hi(e){return lu(e).get(ya).next((t=>U.resolve(this.es(t))))}ts(e){return Od(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,um)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(t=>{const r=Pt(t,ja);return r.J().next((i=>{const o=this.ss(i,um),l=i.filter((c=>o.indexOf(c)===-1));return U.forEach(l,(c=>r.delete(c.clientId))).next((()=>l))}))})).catch((()=>[]));if(this.Ki)for(const t of e)this.Ki.removeItem(this._s(t.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Wi().then((()=>this.ns())).then((()=>this.ji()))))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?U.resolve(!0):lu(e).get(ya).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,cm)&&!this.us(t.ownerId)){if(this.es(t)&&this.networkEnabled)return!0;if(!this.es(t)){if(!t.allowTabSynchronization)throw new se(K.FAILED_PRECONDITION,dm);return!1}}return!(!this.networkEnabled||!this.inForeground)||Od(e).J().next((r=>this.ss(r,cm).find((i=>{if(this.clientId!==i.clientId){const o=!this.networkEnabled&&i.networkEnabled,l=!this.inForeground&&i.inForeground,c=this.networkEnabled===i.networkEnabled;if(o||l&&c)return!0}return!1}))===void 0))})).next((t=>(this.isPrimary!==t&&te(ji,`Client ${t?"is":"is not"} eligible for a primary lease.`),t)))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[Xu,ja],(e=>{const t=new Hm(e,Un.ce);return this.Zi(t).next((()=>this.ts(t)))})),this.Ui.close(),this.Ps()}ss(e,t){return e.filter((r=>this.rs(r.updateTimeMs,t)&&!this.us(r.clientId)))}Ts(){return this.runTransaction("getActiveClients","readonly",(e=>Od(e).J().next((t=>this.ss(t,um).map((r=>r.clientId))))))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,t){return hf.wt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Fk(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return df.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,t,r){te(ji,"Starting transaction:",e);const i=t==="readonly"?"readonly":"readwrite",o=(function(f){return f===18?M1:f===17?KA:f===16?O1:f===15?Mg:f===14?QA:f===13?$A:f===12?N1:f===11?GA:void pe(60245)})(this.Ni);let l;return this.Ui.runTransaction(e,i,o,(c=>(l=new Hm(c,this.ci?this.ci.next():Un.ce),t==="readwrite-primary"?this.Hi(l).next((f=>!!f||this.Yi(l))).next((f=>{if(!f)throw on(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))),new se(K.FAILED_PRECONDITION,LA);return r(l)})).next((f=>this.Xi(l).next((()=>f)))):this.Is(l).next((()=>r(l)))))).then((c=>(l.raiseOnCommittedEvent(),c)))}Is(e){return lu(e).get(ya).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,cm)&&!this.us(t.ownerId)&&!this.es(t)&&!(this.Oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new se(K.FAILED_PRECONDITION,dm)}))}Xi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return lu(e).put(ya,t)}static v(){return is.v()}Zi(e){const t=lu(e);return t.get(ya).next((r=>this.es(r)?(te(ji,"Releasing primary lease."),t.delete(ya)):U.resolve()))}rs(e,t){const r=Date.now();return!(e<r-t)&&(!(e>r)||(on(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi())))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){typeof this.window?.addEventListener=="function"&&(this.Bi=()=>{this.cs();const e=/(?:Version|Mobile)\/1[456]/;pA()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){try{const t=this.Ki?.getItem(this._s(e))!==null;return te(ji,`Client '${e}' ${t?"is":"is not"} zombied in LocalStorage`),t}catch(t){return on(ji,"Failed to get zombied client id.",t),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){on("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function lu(n){return Pt(n,Xu)}function Od(n){return Pt(n,ja)}function rP(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jg{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Es=r,this.ds=i}static As(e,t){let r=Pe(),i=Pe();for(const o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new Jg(e,t.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iP{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tS{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return pA()?8:UA(kt())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,i){const o={result:null};return this.ys(e,t).next((l=>{o.result=l})).next((()=>{if(!o.result)return this.ws(e,t,i,r).next((l=>{o.result=l}))})).next((()=>{if(o.result)return;const l=new iP;return this.Ss(e,t,l).next((c=>{if(o.result=c,this.Vs)return this.bs(e,t,l,c.size)}))})).next((()=>o.result))}bs(e,t,r,i){return r.documentReadCount<this.fs?(Aa()<=Me.DEBUG&&te("QueryEngine","SDK will not create cache indexes for query:",Ia(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),U.resolve()):(Aa()<=Me.DEBUG&&te("QueryEngine","Query:",Ia(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(Aa()<=Me.DEBUG&&te("QueryEngine","The SDK decides to create cache indexes for query:",Ia(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,zn(t))):U.resolve())}ys(e,t){if(zE(t))return U.resolve(null);let r=zn(t);return this.indexManager.getIndexType(e,r).next((i=>i===0?null:(t.limit!==null&&i===1&&(t=Ym(t,null,"F"),r=zn(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((o=>{const l=Pe(...o);return this.ps.getDocuments(e,l).next((c=>this.indexManager.getMinOffset(e,r).next((f=>{const p=this.Ds(t,c);return this.Cs(t,p,l,f.readTime)?this.ys(e,Ym(t,null,"F")):this.vs(e,p,t,f)}))))})))))}ws(e,t,r,i){return zE(t)||i.isEqual(Ee.min())?U.resolve(null):this.ps.getDocuments(e,r).next((o=>{const l=this.Ds(t,o);return this.Cs(t,l,r,i)?U.resolve(null):(Aa()<=Me.DEBUG&&te("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Ia(t)),this.vs(e,l,t,i1(i,ku)).next((c=>c)))}))}Ds(e,t){let r=new Ye(mI(e));return t.forEach(((i,o)=>{ec(e,o)&&(r=r.add(o))})),r}Cs(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Ss(e,t,r){return Aa()<=Me.DEBUG&&te("QueryEngine","Using full collection scan to execute query:",Ia(t)),this.ps.getDocumentsMatchingQuery(e,t,kn.min(),r)}vs(e,t,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next((o=>(t.forEach((l=>{o=o.insert(l.key,l)})),o)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xg="LocalStore",sP=3e8;class oP{constructor(e,t,r,i){this.persistence=e,this.Fs=t,this.serializer=i,this.Ms=new lt(Re),this.xs=new ai((o=>mo(o)),Zu),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new eS(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function nS(n,e,t,r){return new oP(n,e,t,r)}async function rS(n,e){const t=Ce(n);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next((o=>(i=o,t.Bs(e),t.mutationQueue.getAllMutationBatches(r)))).next((o=>{const l=[],c=[];let f=Pe();for(const p of i){l.push(p.batchId);for(const g of p.mutations)f=f.add(g.key)}for(const p of o){c.push(p.batchId);for(const g of p.mutations)f=f.add(g.key)}return t.localDocuments.getDocuments(r,f).next((p=>({Ls:p,removedBatchIds:l,addedBatchIds:c})))}))}))}function aP(n,e){const t=Ce(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const i=e.batch.keys(),o=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(c,f,p,g){const E=p.batch,w=E.keys();let A=U.resolve();return w.forEach((b=>{A=A.next((()=>g.getEntry(f,b))).next((V=>{const x=p.docVersions.get(b);ye(x!==null,48541),V.version.compareTo(x)<0&&(E.applyToRemoteDocument(V,p),V.isValidDocument()&&(V.setReadTime(p.commitVersion),g.addEntry(V)))}))})),A.next((()=>c.mutationQueue.removeMutationBatch(f,E)))})(t,r,e,o).next((()=>o.apply(r))).next((()=>t.mutationQueue.performConsistencyCheck(r))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(c){let f=Pe();for(let p=0;p<c.mutationResults.length;++p)c.mutationResults[p].transformResults.length>0&&(f=f.add(c.batch.mutations[p].key));return f})(e)))).next((()=>t.localDocuments.getDocuments(r,i)))}))}function iS(n){const e=Ce(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function lP(n,e){const t=Ce(n),r=e.snapshotVersion;let i=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(o=>{const l=t.Ns.newChangeBuffer({trackRemovals:!0});i=t.Ms;const c=[];e.targetChanges.forEach(((g,E)=>{const w=i.get(E);if(!w)return;c.push(t.Pi.removeMatchingKeys(o,g.removedDocuments,E).next((()=>t.Pi.addMatchingKeys(o,g.addedDocuments,E))));let A=w.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(E)!==null?A=A.withResumeToken(wt.EMPTY_BYTE_STRING,Ee.min()).withLastLimboFreeSnapshotVersion(Ee.min()):g.resumeToken.approximateByteSize()>0&&(A=A.withResumeToken(g.resumeToken,r)),i=i.insert(E,A),(function(V,x,H){return V.resumeToken.approximateByteSize()===0||x.snapshotVersion.toMicroseconds()-V.snapshotVersion.toMicroseconds()>=sP?!0:H.addedDocuments.size+H.modifiedDocuments.size+H.removedDocuments.size>0})(w,A,g)&&c.push(t.Pi.updateTargetData(o,A))}));let f=bn(),p=Pe();if(e.documentUpdates.forEach((g=>{e.resolvedLimboDocuments.has(g)&&c.push(t.persistence.referenceDelegate.updateLimboDocument(o,g))})),c.push(uP(o,l,e.documentUpdates).next((g=>{f=g.ks,p=g.qs}))),!r.isEqual(Ee.min())){const g=t.Pi.getLastRemoteSnapshotVersion(o).next((E=>t.Pi.setTargetsMetadata(o,o.currentSequenceNumber,r)));c.push(g)}return U.waitFor(c).next((()=>l.apply(o))).next((()=>t.localDocuments.getLocalViewOfDocuments(o,f,p))).next((()=>f))})).then((o=>(t.Ms=i,o)))}function uP(n,e,t){let r=Pe(),i=Pe();return t.forEach((o=>r=r.add(o))),e.getEntries(n,r).next((o=>{let l=bn();return t.forEach(((c,f)=>{const p=o.get(c);f.isFoundDocument()!==p.isFoundDocument()&&(i=i.add(c)),f.isNoDocument()&&f.version.isEqual(Ee.min())?(e.removeEntry(c,f.readTime),l=l.insert(c,f)):!p.isValidDocument()||f.version.compareTo(p.version)>0||f.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(f),l=l.insert(c,f)):te(Xg,"Ignoring outdated watch update for ",c,". Current version:",p.version," Watch version:",f.version)})),{ks:l,qs:i}}))}function cP(n,e){const t=Ce(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=oo),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function dP(n,e){const t=Ce(n);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let i;return t.Pi.getTargetData(r,e).next((o=>o?(i=o,U.resolve(i)):t.Pi.allocateTargetId(r).next((l=>(i=new Yr(e,l,"TargetPurposeListen",r.currentSequenceNumber),t.Pi.addTargetData(r,i).next((()=>i)))))))})).then((r=>{const i=t.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(r.targetId,r),t.xs.set(e,r.targetId)),r}))}async function ig(n,e,t){const r=Ce(n),i=r.Ms.get(e),o=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",o,(l=>r.persistence.referenceDelegate.removeTarget(l,i)))}catch(l){if(!gs(l))throw l;te(Xg,`Failed to update sequence numbers for target ${e}: ${l}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function vw(n,e,t){const r=Ce(n);let i=Ee.min(),o=Pe();return r.persistence.runTransaction("Execute query","readwrite",(l=>(function(f,p,g){const E=Ce(f),w=E.xs.get(g);return w!==void 0?U.resolve(E.Ms.get(w)):E.Pi.getTargetData(p,g)})(r,l,zn(e)).next((c=>{if(c)return i=c.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(l,c.targetId).next((f=>{o=f}))})).next((()=>r.Fs.getDocumentsMatchingQuery(l,e,t?i:Ee.min(),t?o:Pe()))).next((c=>(hP(r,Y1(e),c),{documents:c,Qs:o})))))}function hP(n,e,t){let r=n.Os.get(e)||Ee.min();t.forEach(((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)})),n.Os.set(e,r)}class _w{constructor(){this.activeTargetIds=nk()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class sS{constructor(){this.Mo=new _w,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,r){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new _w,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fP{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ew="ConnectivityMonitor";class ww{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){te(Ew,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){te(Ew,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Md=null;function sg(){return Md===null?Md=(function(){return 268435456+Math.round(2147483648*Math.random())})():Md++,"0x"+Md.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hm="RestConnection",pP={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class mP{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===yh?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,t,r,i,o){const l=sg(),c=this.zo(e,t.toUriEncodedString());te(hm,`Sending RPC '${e}' ${l}:`,c,r);const f={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(f,i,o);const{host:p}=new URL(c),g=tl(p);return this.Jo(e,c,f,r,g).then((E=>(te(hm,`Received RPC '${e}' ${l}: `,E),E)),(E=>{throw as(hm,`RPC '${e}' ${l} failed with error: `,E,"url: ",c,"request:",r),E}))}Ho(e,t,r,i,o,l){return this.Go(e,t,r,i,o)}jo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+rl})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((i,o)=>e[o]=i)),r&&r.headers.forEach(((i,o)=>e[o]=i))}zo(e,t){const r=pP[e];return`${this.Uo}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gP{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jt="WebChannelConnection";class yP extends mP{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,i,o){const l=sg();return new Promise(((c,f)=>{const p=new IA;p.setWithCredentials(!0),p.listenOnce(SA.COMPLETE,(()=>{try{switch(p.getLastErrorCode()){case qd.NO_ERROR:const E=p.getResponseJson();te(Jt,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(E)),c(E);break;case qd.TIMEOUT:te(Jt,`RPC '${e}' ${l} timed out`),f(new se(K.DEADLINE_EXCEEDED,"Request time out"));break;case qd.HTTP_ERROR:const w=p.getStatus();if(te(Jt,`RPC '${e}' ${l} failed with status:`,w,"response text:",p.getResponseText()),w>0){let A=p.getResponseJson();Array.isArray(A)&&(A=A[0]);const b=A?.error;if(b&&b.status&&b.message){const V=(function(H){const Q=H.toLowerCase().replace(/_/g,"-");return Object.values(K).indexOf(Q)>=0?Q:K.UNKNOWN})(b.status);f(new se(V,b.message))}else f(new se(K.UNKNOWN,"Server responded with status "+p.getStatus()))}else f(new se(K.UNAVAILABLE,"Connection failed."));break;default:pe(9055,{l_:e,streamId:l,h_:p.getLastErrorCode(),P_:p.getLastError()})}}finally{te(Jt,`RPC '${e}' ${l} completed.`)}}));const g=JSON.stringify(i);te(Jt,`RPC '${e}' ${l} sending request:`,i),p.send(t,"POST",g,r,15)}))}T_(e,t,r){const i=sg(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=bA(),c=CA(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(f.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(f.useFetchStreams=!0),this.jo(f.initMessageHeaders,t,r),f.encodeInitMessageHeaders=!0;const g=o.join("");te(Jt,`Creating RPC '${e}' stream ${i}: ${g}`,f);const E=l.createWebChannel(g,f);this.I_(E);let w=!1,A=!1;const b=new gP({Yo:x=>{A?te(Jt,`Not sending because RPC '${e}' stream ${i} is closed:`,x):(w||(te(Jt,`Opening RPC '${e}' stream ${i} transport.`),E.open(),w=!0),te(Jt,`RPC '${e}' stream ${i} sending:`,x),E.send(x))},Zo:()=>E.close()}),V=(x,H,Q)=>{x.listen(H,(Z=>{try{Q(Z)}catch(ae){setTimeout((()=>{throw ae}),0)}}))};return V(E,uu.EventType.OPEN,(()=>{A||(te(Jt,`RPC '${e}' stream ${i} transport opened.`),b.o_())})),V(E,uu.EventType.CLOSE,(()=>{A||(A=!0,te(Jt,`RPC '${e}' stream ${i} transport closed`),b.a_(),this.E_(E))})),V(E,uu.EventType.ERROR,(x=>{A||(A=!0,as(Jt,`RPC '${e}' stream ${i} transport errored. Name:`,x.name,"Message:",x.message),b.a_(new se(K.UNAVAILABLE,"The operation could not be completed")))})),V(E,uu.EventType.MESSAGE,(x=>{if(!A){const H=x.data[0];ye(!!H,16349);const Q=H,Z=Q?.error||Q[0]?.error;if(Z){te(Jt,`RPC '${e}' stream ${i} received error:`,Z);const ae=Z.status;let ve=(function(S){const D=St[S];if(D!==void 0)return CI(D)})(ae),he=Z.message;ve===void 0&&(ve=K.INTERNAL,he="Unknown error status: "+ae+" with message "+Z.message),A=!0,b.a_(new se(ve,he)),E.close()}else te(Jt,`RPC '${e}' stream ${i} received:`,H),b.u_(H)}})),V(c,RA.STAT_EVENT,(x=>{x.stat===Lm.PROXY?te(Jt,`RPC '${e}' stream ${i} detected buffering proxy`):x.stat===Lm.NOPROXY&&te(Jt,`RPC '${e}' stream ${i} detected no buffering proxy`)})),setTimeout((()=>{b.__()}),0),b}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vP(){return typeof window<"u"?window:null}function th(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pf(n){return new _k(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oS{constructor(e,t,r=1e3,i=1.5,o=6e4){this.Mi=e,this.timerId=t,this.d_=r,this.A_=i,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,t-r);i>0&&te("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tw="PersistentStream";class aS{constructor(e,t,r,i,o,l,c,f){this.Mi=e,this.S_=r,this.b_=i,this.connection=o,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=c,this.listener=f,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new oS(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===K.RESOURCE_EXHAUSTED?(on(t.toString()),on("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===K.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,i])=>{this.D_===t&&this.G_(r,i)}),(r=>{e((()=>{const i=new se(K.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)}))}))}G_(e,t){const r=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((i=>{r((()=>this.z_(i)))})),this.stream.onMessage((i=>{r((()=>++this.F_==1?this.J_(i):this.onNext(i)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return te(Tw,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(te(Tw,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class _P extends aS{constructor(e,t,r,i,o,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,l),this.serializer=o}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=Tk(this.serializer,e),r=(function(o){if(!("targetChange"in o))return Ee.min();const l=o.targetChange;return l.targetIds&&l.targetIds.length?Ee.min():l.readTime?ln(l.readTime):Ee.min()})(e);return this.listener.H_(t,r)}Y_(e){const t={};t.database=Zm(this.serializer),t.addTarget=(function(o,l){let c;const f=l.target;if(c=vh(f)?{documents:MI(o,f)}:{query:VI(o,f).ft},c.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){c.resumeToken=kI(o,l.resumeToken);const p=Jm(o,l.expectedCount);p!==null&&(c.expectedCount=p)}else if(l.snapshotVersion.compareTo(Ee.min())>0){c.readTime=Ka(o,l.snapshotVersion.toTimestamp());const p=Jm(o,l.expectedCount);p!==null&&(c.expectedCount=p)}return c})(this.serializer,e);const r=Ik(this.serializer,e);r&&(t.labels=r),this.q_(t)}Z_(e){const t={};t.database=Zm(this.serializer),t.removeTarget=e,this.q_(t)}}class EP extends aS{constructor(e,t,r,i,o,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,l),this.serializer=o}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return ye(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ye(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ye(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=Ak(e.writeResults,e.commitTime),r=ln(e.commitTime);return this.listener.na(r,t)}ra(){const e={};e.database=Zm(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((r=>wh(this.serializer,r)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wP{}class TP extends wP{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new se(K.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,l])=>this.connection.Go(e,Xm(t,r),i,o,l))).catch((o=>{throw o.name==="FirebaseError"?(o.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new se(K.UNKNOWN,o.toString())}))}Ho(e,t,r,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,c])=>this.connection.Ho(e,Xm(t,r),i,l,c,o))).catch((l=>{throw l.name==="FirebaseError"?(l.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new se(K.UNKNOWN,l.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class AP{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(on(t),this.aa=!1):te("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _o="RemoteStore";class IP{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo((l=>{r.enqueueAndForget((async()=>{Ao(this)&&(te(_o,"Restarting streams for network reachability change."),await(async function(f){const p=Ce(f);p.Ea.add(4),await nc(p),p.Ra.set("Unknown"),p.Ea.delete(4),await mf(p)})(this))}))})),this.Ra=new AP(r,i)}}async function mf(n){if(Ao(n))for(const e of n.da)await e(!0)}async function nc(n){for(const e of n.da)await e(!1)}function lS(n,e){const t=Ce(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),ny(t)?ty(t):ol(t).O_()&&ey(t,e))}function Zg(n,e){const t=Ce(n),r=ol(t);t.Ia.delete(e),r.O_()&&uS(t,e),t.Ia.size===0&&(r.O_()?r.L_():Ao(t)&&t.Ra.set("Unknown"))}function ey(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ee.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}ol(n).Y_(e)}function uS(n,e){n.Va.Ue(e),ol(n).Z_(e)}function ty(n){n.Va=new mk({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),ol(n).start(),n.Ra.ua()}function ny(n){return Ao(n)&&!ol(n).x_()&&n.Ia.size>0}function Ao(n){return Ce(n).Ea.size===0}function cS(n){n.Va=void 0}async function SP(n){n.Ra.set("Online")}async function RP(n){n.Ia.forEach(((e,t)=>{ey(n,e)}))}async function CP(n,e){cS(n),ny(n)?(n.Ra.ha(e),ty(n)):n.Ra.set("Unknown")}async function bP(n,e,t){if(n.Ra.set("Online"),e instanceof DI&&e.state===2&&e.cause)try{await(async function(i,o){const l=o.cause;for(const c of o.targetIds)i.Ia.has(c)&&(await i.remoteSyncer.rejectListen(c,l),i.Ia.delete(c),i.Va.removeTarget(c))})(n,e)}catch(r){te(_o,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Rh(n,r)}else if(e instanceof Zd?n.Va.Ze(e):e instanceof bI?n.Va.st(e):n.Va.tt(e),!t.isEqual(Ee.min()))try{const r=await iS(n.localStore);t.compareTo(r)>=0&&await(function(o,l){const c=o.Va.Tt(l);return c.targetChanges.forEach(((f,p)=>{if(f.resumeToken.approximateByteSize()>0){const g=o.Ia.get(p);g&&o.Ia.set(p,g.withResumeToken(f.resumeToken,l))}})),c.targetMismatches.forEach(((f,p)=>{const g=o.Ia.get(f);if(!g)return;o.Ia.set(f,g.withResumeToken(wt.EMPTY_BYTE_STRING,g.snapshotVersion)),uS(o,f);const E=new Yr(g.target,f,p,g.sequenceNumber);ey(o,E)})),o.remoteSyncer.applyRemoteEvent(c)})(n,t)}catch(r){te(_o,"Failed to raise snapshot:",r),await Rh(n,r)}}async function Rh(n,e,t){if(!gs(e))throw e;n.Ea.add(1),await nc(n),n.Ra.set("Offline"),t||(t=()=>iS(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{te(_o,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await mf(n)}))}function dS(n,e){return e().catch((t=>Rh(n,t,e)))}async function rc(n){const e=Ce(n),t=ds(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:oo;for(;DP(e);)try{const i=await cP(e.localStore,r);if(i===null){e.Ta.length===0&&t.L_();break}r=i.batchId,kP(e,i)}catch(i){await Rh(e,i)}hS(e)&&fS(e)}function DP(n){return Ao(n)&&n.Ta.length<10}function kP(n,e){n.Ta.push(e);const t=ds(n);t.O_()&&t.X_&&t.ea(e.mutations)}function hS(n){return Ao(n)&&!ds(n).x_()&&n.Ta.length>0}function fS(n){ds(n).start()}async function PP(n){ds(n).ra()}async function xP(n){const e=ds(n);for(const t of n.Ta)e.ea(t.mutations)}async function NP(n,e,t){const r=n.Ta.shift(),i=jg.from(r,e,t);await dS(n,(()=>n.remoteSyncer.applySuccessfulWrite(i))),await rc(n)}async function OP(n,e){e&&ds(n).X_&&await(async function(r,i){if((function(l){return hk(l)&&l!==K.ABORTED})(i.code)){const o=r.Ta.shift();ds(r).B_(),await dS(r,(()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i))),await rc(r)}})(n,e),hS(n)&&fS(n)}async function Aw(n,e){const t=Ce(n);t.asyncQueue.verifyOperationInProgress(),te(_o,"RemoteStore received new credentials");const r=Ao(t);t.Ea.add(3),await nc(t),r&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await mf(t)}async function MP(n,e){const t=Ce(n);e?(t.Ea.delete(2),await mf(t)):e||(t.Ea.add(2),await nc(t),t.Ra.set("Unknown"))}function ol(n){return n.ma||(n.ma=(function(t,r,i){const o=Ce(t);return o.sa(),new _P(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(n.datastore,n.asyncQueue,{Xo:SP.bind(null,n),t_:RP.bind(null,n),r_:CP.bind(null,n),H_:bP.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),ny(n)?ty(n):n.Ra.set("Unknown")):(await n.ma.stop(),cS(n))}))),n.ma}function ds(n){return n.fa||(n.fa=(function(t,r,i){const o=Ce(t);return o.sa(),new EP(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:PP.bind(null,n),r_:OP.bind(null,n),ta:xP.bind(null,n),na:NP.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await rc(n)):(await n.fa.stop(),n.Ta.length>0&&(te(_o,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ry{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new rs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((l=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){const l=Date.now()+r,c=new ry(e,t,l,i,o);return c.start(r),c}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new se(K.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function iy(n,e){if(on("AsyncQueue",`${e}: ${n}`),gs(n))return new se(K.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pa{static emptySet(e){return new Pa(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||oe.comparator(t.key,r.key):(t,r)=>oe.comparator(t.key,r.key),this.keyedMap=cu(),this.sortedSet=new lt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Pa)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Pa;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iw{constructor(){this.ga=new lt(oe.comparator)}track(e){const t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):pe(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,r)=>{e.push(r)})),e}}class Ya{constructor(e,t,r,i,o,l,c,f,p){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=l,this.syncStateChanged=c,this.excludesMetadataChanges=f,this.hasCachedResults=p}static fromInitialDocuments(e,t,r,i,o){const l=[];return t.forEach((c=>{l.push({type:0,doc:c})})),new Ya(e,t,Pa.emptySet(t),l,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&of(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VP{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class LP{constructor(){this.queries=Sw(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const i=Ce(t),o=i.queries;i.queries=Sw(),o.forEach(((l,c)=>{for(const f of c.Sa)f.onError(r)}))})(this,new se(K.ABORTED,"Firestore shutting down"))}}function Sw(){return new ai((n=>pI(n)),of)}async function FP(n,e){const t=Ce(n);let r=3;const i=e.query;let o=t.queries.get(i);o?!o.ba()&&e.Da()&&(r=2):(o=new VP,r=e.Da()?0:1);try{switch(r){case 0:o.wa=await t.onListen(i,!0);break;case 1:o.wa=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(l){const c=iy(l,`Initialization of query '${Ia(e.query)}' failed`);return void e.onError(c)}t.queries.set(i,o),o.Sa.push(e),e.va(t.onlineState),o.wa&&e.Fa(o.wa)&&sy(t)}async function UP(n,e){const t=Ce(n),r=e.query;let i=3;const o=t.queries.get(r);if(o){const l=o.Sa.indexOf(e);l>=0&&(o.Sa.splice(l,1),o.Sa.length===0?i=e.Da()?0:1:!o.ba()&&e.Da()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function BP(n,e){const t=Ce(n);let r=!1;for(const i of e){const o=i.query,l=t.queries.get(o);if(l){for(const c of l.Sa)c.Fa(i)&&(r=!0);l.wa=i}}r&&sy(t)}function zP(n,e,t){const r=Ce(n),i=r.queries.get(e);if(i)for(const o of i.Sa)o.onError(t);r.queries.delete(e)}function sy(n){n.Ca.forEach((e=>{e.next()}))}var og,Rw;(Rw=og||(og={})).Ma="default",Rw.Cache="cache";class jP{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Ya(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const r=t!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Ya.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==og.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pS{constructor(e){this.key=e}}class mS{constructor(e){this.key=e}}class HP{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Pe(),this.mutatedKeys=Pe(),this.eu=mI(e),this.tu=new Pa(this.eu)}get nu(){return this.Ya}ru(e,t){const r=t?t.iu:new Iw,i=t?t.tu:this.tu;let o=t?t.mutatedKeys:this.mutatedKeys,l=i,c=!1;const f=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,p=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(((g,E)=>{const w=i.get(g),A=ec(this.query,E)?E:null,b=!!w&&this.mutatedKeys.has(w.key),V=!!A&&(A.hasLocalMutations||this.mutatedKeys.has(A.key)&&A.hasCommittedMutations);let x=!1;w&&A?w.data.isEqual(A.data)?b!==V&&(r.track({type:3,doc:A}),x=!0):this.su(w,A)||(r.track({type:2,doc:A}),x=!0,(f&&this.eu(A,f)>0||p&&this.eu(A,p)<0)&&(c=!0)):!w&&A?(r.track({type:0,doc:A}),x=!0):w&&!A&&(r.track({type:1,doc:w}),x=!0,(f||p)&&(c=!0)),x&&(A?(l=l.add(A),o=V?o.add(g):o.delete(g)):(l=l.delete(g),o=o.delete(g)))})),this.query.limit!==null)for(;l.size>this.query.limit;){const g=this.query.limitType==="F"?l.last():l.first();l=l.delete(g.key),o=o.delete(g.key),r.track({type:1,doc:g})}return{tu:l,iu:r,Cs:c,mutatedKeys:o}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const l=e.iu.ya();l.sort(((g,E)=>(function(A,b){const V=x=>{switch(x){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return pe(20277,{Rt:x})}};return V(A)-V(b)})(g.type,E.type)||this.eu(g.doc,E.doc))),this.ou(r),i=i??!1;const c=t&&!i?this._u():[],f=this.Xa.size===0&&this.current&&!i?1:0,p=f!==this.Za;return this.Za=f,l.length!==0||p?{snapshot:new Ya(this.query,e.tu,o,l,e.mutatedKeys,f===0,p,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:c}:{au:c}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Iw,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Pe(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const t=[];return e.forEach((r=>{this.Xa.has(r)||t.push(new mS(r))})),this.Xa.forEach((r=>{e.has(r)||t.push(new pS(r))})),t}cu(e){this.Ya=e.Qs,this.Xa=Pe();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Ya.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const oy="SyncEngine";class WP{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class qP{constructor(e){this.key=e,this.hu=!1}}class GP{constructor(e,t,r,i,o,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=l,this.Pu={},this.Tu=new ai((c=>pI(c)),of),this.Iu=new Map,this.Eu=new Set,this.du=new lt(oe.comparator),this.Au=new Map,this.Ru=new Qg,this.Vu={},this.mu=new Map,this.fu=vo.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function $P(n,e,t=!0){const r=wS(n);let i;const o=r.Tu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.lu()):i=await gS(r,e,t,!0),i}async function QP(n,e){const t=wS(n);await gS(t,e,!0,!1)}async function gS(n,e,t,r){const i=await dP(n.localStore,zn(e)),o=i.targetId,l=n.sharedClientState.addLocalQueryTarget(o,t);let c;return r&&(c=await KP(n,e,o,l==="current",i.resumeToken)),n.isPrimaryClient&&t&&lS(n.remoteStore,i),c}async function KP(n,e,t,r,i){n.pu=(E,w,A)=>(async function(V,x,H,Q){let Z=x.view.ru(H);Z.Cs&&(Z=await vw(V.localStore,x.query,!1).then((({documents:k})=>x.view.ru(k,Z))));const ae=Q&&Q.targetChanges.get(x.targetId),ve=Q&&Q.targetMismatches.get(x.targetId)!=null,he=x.view.applyChanges(Z,V.isPrimaryClient,ae,ve);return bw(V,x.targetId,he.au),he.snapshot})(n,E,w,A);const o=await vw(n.localStore,e,!0),l=new HP(e,o.Qs),c=l.ru(o.documents),f=tc.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),p=l.applyChanges(c,n.isPrimaryClient,f);bw(n,t,p.au);const g=new WP(e,t,l);return n.Tu.set(e,g),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),p.snapshot}async function YP(n,e,t){const r=Ce(n),i=r.Tu.get(e),o=r.Iu.get(i.targetId);if(o.length>1)return r.Iu.set(i.targetId,o.filter((l=>!of(l,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await ig(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),t&&Zg(r.remoteStore,i.targetId),ag(r,i.targetId)})).catch(To)):(ag(r,i.targetId),await ig(r.localStore,i.targetId,!0))}async function JP(n,e){const t=Ce(n),r=t.Tu.get(e),i=t.Iu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Zg(t.remoteStore,r.targetId))}async function XP(n,e,t){const r=TS(n);try{const i=await(function(l,c){const f=Ce(l),p=ze.now(),g=c.reduce(((A,b)=>A.add(b.key)),Pe());let E,w;return f.persistence.runTransaction("Locally write mutations","readwrite",(A=>{let b=bn(),V=Pe();return f.Ns.getEntries(A,g).next((x=>{b=x,b.forEach(((H,Q)=>{Q.isValidDocument()||(V=V.add(H))}))})).next((()=>f.localDocuments.getOverlayedDocuments(A,b))).next((x=>{E=x;const H=[];for(const Q of c){const Z=ck(Q,E.get(Q.key).overlayedDocument);Z!=null&&H.push(new li(Q.key,Z,sI(Z.value.mapValue),an.exists(!0)))}return f.mutationQueue.addMutationBatch(A,p,H,c)})).next((x=>{w=x;const H=x.applyToLocalDocumentSet(E,V);return f.documentOverlayCache.saveOverlays(A,x.batchId,H)}))})).then((()=>({batchId:w.batchId,changes:yI(E)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(l,c,f){let p=l.Vu[l.currentUser.toKey()];p||(p=new lt(Re)),p=p.insert(c,f),l.Vu[l.currentUser.toKey()]=p})(r,i.batchId,t),await ic(r,i.changes),await rc(r.remoteStore)}catch(i){const o=iy(i,"Failed to persist write");t.reject(o)}}async function yS(n,e){const t=Ce(n);try{const r=await lP(t.localStore,e);e.targetChanges.forEach(((i,o)=>{const l=t.Au.get(o);l&&(ye(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?l.hu=!0:i.modifiedDocuments.size>0?ye(l.hu,14607):i.removedDocuments.size>0&&(ye(l.hu,42227),l.hu=!1))})),await ic(t,r,e)}catch(r){await To(r)}}function Cw(n,e,t){const r=Ce(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const i=[];r.Tu.forEach(((o,l)=>{const c=l.view.va(e);c.snapshot&&i.push(c.snapshot)})),(function(l,c){const f=Ce(l);f.onlineState=c;let p=!1;f.queries.forEach(((g,E)=>{for(const w of E.Sa)w.va(c)&&(p=!0)})),p&&sy(f)})(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function ZP(n,e,t){const r=Ce(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Au.get(e),o=i&&i.key;if(o){let l=new lt(oe.comparator);l=l.insert(o,mt.newNoDocument(o,Ee.min()));const c=Pe().add(o),f=new cf(Ee.min(),new Map,new lt(Re),l,c);await yS(r,f),r.du=r.du.remove(o),r.Au.delete(e),ay(r)}else await ig(r.localStore,e,!1).then((()=>ag(r,e,t))).catch(To)}async function ex(n,e){const t=Ce(n),r=e.batch.batchId;try{const i=await aP(t.localStore,e);_S(t,r,null),vS(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await ic(t,i)}catch(i){await To(i)}}async function tx(n,e,t){const r=Ce(n);try{const i=await(function(l,c){const f=Ce(l);return f.persistence.runTransaction("Reject batch","readwrite-primary",(p=>{let g;return f.mutationQueue.lookupMutationBatch(p,c).next((E=>(ye(E!==null,37113),g=E.keys(),f.mutationQueue.removeMutationBatch(p,E)))).next((()=>f.mutationQueue.performConsistencyCheck(p))).next((()=>f.documentOverlayCache.removeOverlaysForBatchId(p,g,c))).next((()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,g))).next((()=>f.localDocuments.getDocuments(p,g)))}))})(r.localStore,e);_S(r,e,t),vS(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await ic(r,i)}catch(i){await To(i)}}function vS(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function _S(n,e,t){const r=Ce(n);let i=r.Vu[r.currentUser.toKey()];if(i){const o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function ag(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((r=>{n.Ru.containsKey(r)||ES(n,r)}))}function ES(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(Zg(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),ay(n))}function bw(n,e,t){for(const r of t)r instanceof pS?(n.Ru.addReference(r.key,e),nx(n,r)):r instanceof mS?(te(oy,"Document no longer in limbo: "+r.key),n.Ru.removeReference(r.key,e),n.Ru.containsKey(r.key)||ES(n,r.key)):pe(19791,{wu:r})}function nx(n,e){const t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Eu.has(r)||(te(oy,"New document in limbo: "+t),n.Eu.add(r),ay(n))}function ay(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new oe(qe.fromString(e)),r=n.fu.next();n.Au.set(r,new qP(t)),n.du=n.du.insert(t,r),lS(n.remoteStore,new Yr(zn(sf(t.path)),r,"TargetPurposeLimboResolution",Un.ce))}}async function ic(n,e,t){const r=Ce(n),i=[],o=[],l=[];r.Tu.isEmpty()||(r.Tu.forEach(((c,f)=>{l.push(r.pu(f,e,t).then((p=>{if((p||t)&&r.isPrimaryClient){const g=p?!p.fromCache:t?.targetChanges.get(f.targetId)?.current;r.sharedClientState.updateQueryState(f.targetId,g?"current":"not-current")}if(p){i.push(p);const g=Jg.As(f.targetId,p);o.push(g)}})))})),await Promise.all(l),r.Pu.H_(i),await(async function(f,p){const g=Ce(f);try{await g.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>U.forEach(p,(w=>U.forEach(w.Es,(A=>g.persistence.referenceDelegate.addReference(E,w.targetId,A))).next((()=>U.forEach(w.ds,(A=>g.persistence.referenceDelegate.removeReference(E,w.targetId,A)))))))))}catch(E){if(!gs(E))throw E;te(Xg,"Failed to update sequence numbers: "+E)}for(const E of p){const w=E.targetId;if(!E.fromCache){const A=g.Ms.get(w),b=A.snapshotVersion,V=A.withLastLimboFreeSnapshotVersion(b);g.Ms=g.Ms.insert(w,V)}}})(r.localStore,o))}async function rx(n,e){const t=Ce(n);if(!t.currentUser.isEqual(e)){te(oy,"User change. New user:",e.toKey());const r=await rS(t.localStore,e);t.currentUser=e,(function(o,l){o.mu.forEach((c=>{c.forEach((f=>{f.reject(new se(K.CANCELLED,l))}))})),o.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await ic(t,r.Ls)}}function ix(n,e){const t=Ce(n),r=t.Au.get(e);if(r&&r.hu)return Pe().add(r.key);{let i=Pe();const o=t.Iu.get(e);if(!o)return i;for(const l of o){const c=t.Tu.get(l);i=i.unionWith(c.view.nu)}return i}}function wS(n){const e=Ce(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=yS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=ix.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=ZP.bind(null,e),e.Pu.H_=BP.bind(null,e.eventManager),e.Pu.yu=zP.bind(null,e.eventManager),e}function TS(n){const e=Ce(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=ex.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=tx.bind(null,e),e}class Hu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=pf(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return nS(this.persistence,new tS,e.initialUser,this.serializer)}Cu(e){return new Kg(ff.mi,this.serializer)}Du(e){return new sS}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Hu.provider={build:()=>new Hu};class sx extends Hu{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){ye(this.persistence.referenceDelegate instanceof Sh,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new YI(r,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Xt.withCacheSize(this.cacheSizeBytes):Xt.DEFAULT;return new Kg((r=>Sh.mi(r,t)),this.serializer)}}class ox extends Hu{constructor(e,t,r){super(),this.xu=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await TS(this.xu.syncEngine),await rc(this.xu.remoteStore),await this.persistence.Ji((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(e){return nS(this.persistence,new tS,e.initialUser,this.serializer)}Fu(e,t){const r=this.persistence.referenceDelegate.garbageCollector;return new YI(r,e.asyncQueue,t)}Mu(e,t){const r=new l1(t,this.persistence);return new a1(e.asyncQueue,r)}Cu(e){const t=rP(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Xt.withCacheSize(this.cacheSizeBytes):Xt.DEFAULT;return new Yg(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,vP(),th(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new sS}}class Ch{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Cw(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=rx.bind(null,this.syncEngine),await MP(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new LP})()}createDatastore(e){const t=pf(e.databaseInfo.databaseId),r=(function(o){return new yP(o)})(e.databaseInfo);return(function(o,l,c,f){return new TP(o,l,c,f)})(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,i,o,l,c){return new IP(r,i,o,l,c)})(this.localStore,this.datastore,e.asyncQueue,(t=>Cw(this.syncEngine,t,0)),(function(){return ww.v()?new ww:new fP})())}createSyncEngine(e,t){return(function(i,o,l,c,f,p,g){const E=new GP(i,o,l,c,f,p);return g&&(E.gu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const r=Ce(t);te(_o,"RemoteStore shutting down."),r.Ea.add(5),await nc(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Ch.provider={build:()=>new Ch};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ax{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):on("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hs="FirestoreClient";class lx{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Ht.UNAUTHENTICATED,this.clientId=Kh.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,(async l=>{te(hs,"Received user=",l.uid),await this.authCredentialListener(l),this.user=l})),this.appCheckCredentials.start(r,(l=>(te(hs,"Received new app check token=",l),this.appCheckCredentialListener(l,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new rs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=iy(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function fm(n,e){n.asyncQueue.verifyOperationInProgress(),te(hs,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener((async i=>{r.isEqual(i)||(await rS(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function Dw(n,e){n.asyncQueue.verifyOperationInProgress();const t=await ux(n);te(hs,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((r=>Aw(e.remoteStore,r))),n.setAppCheckTokenChangeListener(((r,i)=>Aw(e.remoteStore,i))),n._onlineComponents=e}async function ux(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){te(hs,"Using user provided OfflineComponentProvider");try{await fm(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(i){return i.name==="FirebaseError"?i.code===K.FAILED_PRECONDITION||i.code===K.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(t))throw t;as("Error using user provided cache. Falling back to memory cache: "+t),await fm(n,new Hu)}}else te(hs,"Using default OfflineComponentProvider"),await fm(n,new sx(void 0));return n._offlineComponents}async function AS(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(te(hs,"Using user provided OnlineComponentProvider"),await Dw(n,n._uninitializedComponentsProvider._online)):(te(hs,"Using default OnlineComponentProvider"),await Dw(n,new Ch))),n._onlineComponents}function cx(n){return AS(n).then((e=>e.syncEngine))}async function kw(n){const e=await AS(n),t=e.eventManager;return t.onListen=$P.bind(null,e.syncEngine),t.onUnlisten=YP.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=QP.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=JP.bind(null,e.syncEngine),t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IS(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pw=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SS="firestore.googleapis.com",xw=!0;class Nw{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new se(K.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=SS,this.ssl=xw}else this.host=e.host,this.ssl=e.ssl??xw;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=GI;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Bk)throw new se(K.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}OA("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=IS(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new se(K.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new se(K.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new se(K.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class gf{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Nw({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new se(K.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new se(K.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Nw(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new PA;switch(r.type){case"firstParty":return new XD(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new se(K.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=Pw.get(t);r&&(te("ComponentProvider","Removing Datastore"),Pw.delete(t),r.terminate())})(this),Promise.resolve()}}function RS(n,e,t,r={}){n=Rr(n,gf);const i=tl(e),o=n._getSettings(),l={...o,emulatorOptions:n._getEmulatorOptions()},c=`${e}:${t}`;i&&(dA(`https://${c}`),hA("Firestore",!0)),o.host!==SS&&o.host!==c&&as("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const f={...o,host:c,ssl:i,emulatorOptions:r};if(!ho(f,l)&&(n._setSettings(f),r.mockUserToken)){let p,g;if(typeof r.mockUserToken=="string")p=r.mockUserToken,g=Ht.MOCK_USER;else{p=Ab(r.mockUserToken,n._app?.options.projectId);const E=r.mockUserToken.sub||r.mockUserToken.user_id;if(!E)throw new se(K.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new Ht(E)}n._authCredentials=new KD(new kA(p,g))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vs{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new vs(this.firestore,e,this._query)}}class Et{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Zr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Et(this.firestore,e,this._key)}toJSON(){return{type:Et._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(Ju(t,Et._jsonSchema))return new Et(e,r||null,new oe(qe.fromString(t.referencePath)))}}Et._jsonSchemaVersion="firestore/documentReference/1.0",Et._jsonSchema={type:Rt("string",Et._jsonSchemaVersion),referencePath:Rt("string")};class Zr extends vs{constructor(e,t,r){super(e,t,sf(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Et(this.firestore,null,new oe(e))}withConverter(e){return new Zr(this.firestore,e,this._path)}}function lg(n,e,...t){if(n=tn(n),NA("collection","path",e),n instanceof gf){const r=qe.fromString(e,...t);return TE(r),new Zr(n,null,r)}{if(!(n instanceof Et||n instanceof Zr))throw new se(K.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(qe.fromString(e,...t));return TE(r),new Zr(n.firestore,null,r)}}function bh(n,e,...t){if(n=tn(n),arguments.length===1&&(e=Kh.newId()),NA("doc","path",e),n instanceof gf){const r=qe.fromString(e,...t);return wE(r),new Et(n,null,new oe(r))}{if(!(n instanceof Et||n instanceof Zr))throw new se(K.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(qe.fromString(e,...t));return wE(r),new Et(n.firestore,n instanceof Zr?n.converter:null,new oe(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ow="AsyncQueue";class Mw{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new oS(this,"async_queue_retry"),this._c=()=>{const r=th();r&&te(Ow,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const t=th();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=th();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new rs;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!gs(e))throw e;te(Ow,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,on("INTERNAL UNHANDLED ERROR: ",Vw(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const i=ry.createAndSchedule(this,e,t,r,(o=>this.hc(o)));return this.tc.push(i),i}uc(){this.nc&&pe(47125,{Pc:Vw(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function Vw(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lw(n){return(function(t,r){if(typeof t!="object"||t===null)return!1;const i=t;for(const o of r)if(o in i&&typeof i[o]=="function")return!0;return!1})(n,["next","error","complete"])}class fs extends gf{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new Mw,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Mw(e),this._firestoreClient=void 0,await e}}}function CS(n,e){const t=typeof n=="object"?n:EA(),r=typeof n=="string"?n:yh,i=bg(t,"firestore").getImmediate({identifier:r});if(!i._initialized){const o=wb("firestore");o&&RS(i,...o)}return i}function ly(n){if(n._terminated)throw new se(K.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||bS(n),n._firestoreClient}function bS(n){const e=n._freezeSettings(),t=(function(i,o,l,c){return new L1(i,o,l,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,IS(c.experimentalLongPollingOptions),c.useFetchStreams,c.isUsingEmulator)})(n._databaseId,n._app?.options.appId||"",n._persistenceKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new lx(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(i){const o=i?._online.build();return{_offline:i?._offline.build(o),_online:o}})(n._componentsProvider))}function dx(n,e){as("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings();return hx(n,Ch.provider,{build:r=>new ox(r,t.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}function hx(n,e,t){if((n=Rr(n,fs))._firestoreClient||n._terminated)throw new se(K.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new se(K.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},bS(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Cn(wt.fromBase64String(e))}catch(t){throw new se(K.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Cn(wt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Cn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Ju(e,Cn._jsonSchema))return Cn.fromBase64String(e.bytes)}}Cn._jsonSchemaVersion="firestore/bytes/1.0",Cn._jsonSchema={type:Rt("string",Cn._jsonSchemaVersion),bytes:Rt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sc{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new se(K.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new at(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yf{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class er{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new se(K.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new se(K.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Re(this._lat,e._lat)||Re(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:er._jsonSchemaVersion}}static fromJSON(e){if(Ju(e,er._jsonSchema))return new er(e.latitude,e.longitude)}}er._jsonSchemaVersion="firestore/geoPoint/1.0",er._jsonSchema={type:Rt("string",er._jsonSchemaVersion),latitude:Rt("number"),longitude:Rt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tr{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:tr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Ju(e,tr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new tr(e.vectorValues);throw new se(K.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}tr._jsonSchemaVersion="firestore/vectorValue/1.0",tr._jsonSchema={type:Rt("string",tr._jsonSchemaVersion),vectorValues:Rt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fx=/^__.*__$/;class px{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new li(e,this.data,this.fieldMask,t,this.fieldTransforms):new sl(e,this.data,t,this.fieldTransforms)}}class DS{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new li(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function kS(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw pe(40011,{Ac:n})}}class uy{constructor(e,t,r,i,o,l){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new uy({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.gc(e),r}yc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Dh(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(kS(this.Ac)&&fx.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class mx{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||pf(e)}Cc(e,t,r,i=!1){return new uy({Ac:e,methodName:t,Dc:r,path:at.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function cy(n){const e=n._freezeSettings(),t=pf(n._databaseId);return new mx(n._databaseId,!!e.ignoreUndefinedProperties,t)}function gx(n,e,t,r,i,o={}){const l=n.Cc(o.merge||o.mergeFields?2:0,e,t,i);dy("Data must be an object, but it was:",l,r);const c=PS(r,l);let f,p;if(o.merge)f=new mn(l.fieldMask),p=l.fieldTransforms;else if(o.mergeFields){const g=[];for(const E of o.mergeFields){const w=ug(e,E,t);if(!l.contains(w))throw new se(K.INVALID_ARGUMENT,`Field '${w}' is specified in your field mask but missing from your input data.`);NS(g,w)||g.push(w)}f=new mn(g),p=l.fieldTransforms.filter((E=>f.covers(E.field)))}else f=null,p=l.fieldTransforms;return new px(new Zt(c),f,p)}class vf extends yf{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof vf}}function yx(n,e,t,r){const i=n.Cc(1,e,t);dy("Data must be an object, but it was:",i,r);const o=[],l=Zt.empty();ys(r,((f,p)=>{const g=hy(e,f,t);p=tn(p);const E=i.yc(g);if(p instanceof vf)o.push(g);else{const w=oc(p,E);w!=null&&(o.push(g),l.set(g,w))}}));const c=new mn(o);return new DS(l,c,i.fieldTransforms)}function vx(n,e,t,r,i,o){const l=n.Cc(1,e,t),c=[ug(e,r,t)],f=[i];if(o.length%2!=0)throw new se(K.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let w=0;w<o.length;w+=2)c.push(ug(e,o[w])),f.push(o[w+1]);const p=[],g=Zt.empty();for(let w=c.length-1;w>=0;--w)if(!NS(p,c[w])){const A=c[w];let b=f[w];b=tn(b);const V=l.yc(A);if(b instanceof vf)p.push(A);else{const x=oc(b,V);x!=null&&(p.push(A),g.set(A,x))}}const E=new mn(p);return new DS(g,E,l.fieldTransforms)}function _x(n,e,t,r=!1){return oc(t,n.Cc(r?4:3,e))}function oc(n,e){if(xS(n=tn(n)))return dy("Unsupported field value:",e,n),PS(n,e);if(n instanceof yf)return(function(r,i){if(!kS(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,i){const o=[];let l=0;for(const c of r){let f=oc(c,i.wc(l));f==null&&(f={nullValue:"NULL_VALUE"}),o.push(f),l++}return{arrayValue:{values:o}}})(n,e)}return(function(r,i){if((r=tn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return rk(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=ze.fromDate(r);return{timestampValue:Ka(i.serializer,o)}}if(r instanceof ze){const o=new ze(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Ka(i.serializer,o)}}if(r instanceof er)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Cn)return{bytesValue:kI(i.serializer,r._byteString)};if(r instanceof Et){const o=i.databaseId,l=r.firestore._databaseId;if(!l.isEqual(o))throw i.Sc(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:qg(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof tr)return(function(l,c){return{mapValue:{fields:{[Lg]:{stringValue:Fg},[Ha]:{arrayValue:{values:l.toArray().map((p=>{if(typeof p!="number")throw c.Sc("VectorValues must only contain numeric values.");return Bg(c.serializer,p)}))}}}}}})(r,i);throw i.Sc(`Unsupported field value: ${Yh(r)}`)})(n,e)}function PS(n,e){const t={};return YA(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ys(n,((r,i)=>{const o=oc(i,e.mc(r));o!=null&&(t[r]=o)})),{mapValue:{fields:t}}}function xS(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof ze||n instanceof er||n instanceof Cn||n instanceof Et||n instanceof yf||n instanceof tr)}function dy(n,e,t){if(!xS(t)||!MA(t)){const r=Yh(t);throw r==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+r)}}function ug(n,e,t){if((e=tn(e))instanceof sc)return e._internalPath;if(typeof e=="string")return hy(n,e);throw Dh("Field path arguments must be of type string or ",n,!1,void 0,t)}const Ex=new RegExp("[~\\*/\\[\\]]");function hy(n,e,t){if(e.search(Ex)>=0)throw Dh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new sc(...e.split("."))._internalPath}catch{throw Dh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Dh(n,e,t,r,i){const o=r&&!r.isEmpty(),l=i!==void 0;let c=`Function ${e}() called with invalid data`;t&&(c+=" (via `toFirestore()`)"),c+=". ";let f="";return(o||l)&&(f+=" (found",o&&(f+=` in field ${r}`),l&&(f+=` in document ${i}`),f+=")"),new se(K.INVALID_ARGUMENT,c+n+f)}function NS(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OS{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Et(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new wx(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(fy("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class wx extends OS{data(){return super.data()}}function fy(n,e){return typeof e=="string"?hy(n,e):e instanceof sc?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tx(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new se(K.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class py{}class my extends py{}function MS(n,e,...t){let r=[];e instanceof py&&r.push(e),r=r.concat(t),(function(o){const l=o.filter((f=>f instanceof Ef)).length,c=o.filter((f=>f instanceof _f)).length;if(l>1||l>0&&c>0)throw new se(K.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const i of r)n=i._apply(n);return n}class _f extends my{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new _f(e,t,r)}_apply(e){const t=this._parse(e);return LS(e._query,t),new vs(e.firestore,e.converter,Km(e._query,t))}_parse(e){const t=cy(e.firestore);return(function(o,l,c,f,p,g,E){let w;if(p.isKeyField()){if(g==="array-contains"||g==="array-contains-any")throw new se(K.INVALID_ARGUMENT,`Invalid Query. You can't perform '${g}' queries on documentId().`);if(g==="in"||g==="not-in"){Uw(E,g);const b=[];for(const V of E)b.push(Fw(f,o,V));w={arrayValue:{values:b}}}else w=Fw(f,o,E)}else g!=="in"&&g!=="not-in"&&g!=="array-contains-any"||Uw(E,g),w=_x(c,l,E,g==="in"||g==="not-in");return Ve.create(p,g,w)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}class Ef extends py{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Ef(e,t)}_parse(e){const t=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return t.length===1?t[0]:Ke.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(i,o){let l=i;const c=o.getFlattenedFilters();for(const f of c)LS(l,f),l=Km(l,f)})(e._query,t),new vs(e.firestore,e.converter,Km(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class wf extends my{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new wf(e,t)}_apply(e){const t=(function(i,o,l){if(i.startAt!==null)throw new se(K.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new se(K.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Bu(o,l)})(e._query,this._field,this._direction);return new vs(e.firestore,e.converter,(function(i,o){const l=i.explicitOrderBy.concat([o]);return new il(i.path,i.collectionGroup,l,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)})(e._query,t))}}function VS(n,e="asc"){const t=e,r=fy("orderBy",n);return wf._create(r,t)}function Fw(n,e,t){if(typeof(t=tn(t))=="string"){if(t==="")throw new se(K.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!fI(e)&&t.indexOf("/")!==-1)throw new se(K.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(qe.fromString(t));if(!oe.isDocumentKey(r))throw new se(K.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Fu(n,new oe(r))}if(t instanceof Et)return Fu(n,t._key);throw new se(K.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Yh(t)}.`)}function Uw(n,e){if(!Array.isArray(n)||n.length===0)throw new se(K.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function LS(n,e){const t=(function(i,o){for(const l of i)for(const c of l.getFlattenedFilters())if(o.indexOf(c.op)>=0)return c.op;return null})(n.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new se(K.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new se(K.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class FS{convertValue(e,t="none"){switch(us(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ot(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ni(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw pe(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return ys(e,((i,o)=>{r[i]=this.convertValue(o,t)})),r}convertVectorValue(e){const t=e.fields?.[Ha].arrayValue?.values?.map((r=>ot(r.doubleValue)));return new tr(t)}convertGeoPoint(e){return new er(ot(e.latitude),ot(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=nf(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Vu(e));default:return null}}convertTimestamp(e){const t=ti(e);return new ze(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=qe.fromString(e);ye(BI(r),9688,{name:e});const i=new ls(r.get(1),r.get(3)),o=new oe(r.popFirst(5));return i.isEqual(t)||on(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ax(n,e,t){let r;return r=n?n.toFirestore(e):e,r}class Da{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ss extends OS{constructor(e,t,r,i,o,l){super(e,t,r,i,l),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Au(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(fy("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new se(K.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=ss._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}ss._jsonSchemaVersion="firestore/documentSnapshot/1.0",ss._jsonSchema={type:Rt("string",ss._jsonSchemaVersion),bundleSource:Rt("string","DocumentSnapshot"),bundleName:Rt("string"),bundle:Rt("string")};class Au extends ss{data(e={}){return super.data(e)}}class uo{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Da(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new Au(this._firestore,this._userDataWriter,r.key,r,new Da(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new se(K.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(i,o){if(i._snapshot.oldDocs.isEmpty()){let l=0;return i._snapshot.docChanges.map((c=>{const f=new Au(i._firestore,i._userDataWriter,c.doc.key,c.doc,new Da(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);return c.doc,{type:"added",doc:f,oldIndex:-1,newIndex:l++}}))}{let l=i._snapshot.oldDocs;return i._snapshot.docChanges.filter((c=>o||c.type!==3)).map((c=>{const f=new Au(i._firestore,i._userDataWriter,c.doc.key,c.doc,new Da(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);let p=-1,g=-1;return c.type!==0&&(p=l.indexOf(c.doc.key),l=l.delete(c.doc.key)),c.type!==1&&(l=l.add(c.doc),g=l.indexOf(c.doc.key)),{type:Ix(c.type),doc:f,oldIndex:p,newIndex:g}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new se(K.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=uo._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Kh.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],i=[];return this.docs.forEach((o=>{o._document!==null&&(t.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function Ix(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return pe(61501,{type:n})}}uo._jsonSchemaVersion="firestore/querySnapshot/1.0",uo._jsonSchema={type:Rt("string",uo._jsonSchemaVersion),bundleSource:Rt("string","QuerySnapshot"),bundleName:Rt("string"),bundle:Rt("string")};class US extends FS{constructor(e){super(),this.firestore=e}convertBytes(e){return new Cn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Et(this.firestore,null,t)}}function BS(n,e,t,...r){n=Rr(n,Et);const i=Rr(n.firestore,fs),o=cy(i);let l;return l=typeof(e=tn(e))=="string"||e instanceof sc?vx(o,"updateDoc",n._key,e,t,r):yx(o,"updateDoc",n._key,e),Tf(i,[l.toMutation(n._key,an.exists(!0))])}function zS(n){return Tf(Rr(n.firestore,fs),[new uf(n._key,an.none())])}function jS(n,e){const t=Rr(n.firestore,fs),r=bh(n),i=Ax(n.converter,e);return Tf(t,[gx(cy(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,an.exists(!1))]).then((()=>r))}function HS(n,...e){n=tn(n);let t={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||Lw(e[r])||(t=e[r++]);const i={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(Lw(e[r])){const f=e[r];e[r]=f.next?.bind(f),e[r+1]=f.error?.bind(f),e[r+2]=f.complete?.bind(f)}let o,l,c;if(n instanceof Et)l=Rr(n.firestore,fs),c=sf(n._key.path),o={next:f=>{e[r]&&e[r](Sx(l,n,f))},error:e[r+1],complete:e[r+2]};else{const f=Rr(n,vs);l=Rr(f.firestore,fs),c=f._query;const p=new US(l);o={next:g=>{e[r]&&e[r](new uo(l,p,f,g))},error:e[r+1],complete:e[r+2]},Tx(n._query)}return(function(p,g,E,w){const A=new ax(w),b=new jP(g,A,E);return p.asyncQueue.enqueueAndForget((async()=>FP(await kw(p),b))),()=>{A.Nu(),p.asyncQueue.enqueueAndForget((async()=>UP(await kw(p),b)))}})(ly(l),c,i,o)}function Tf(n,e){return(function(r,i){const o=new rs;return r.asyncQueue.enqueueAndForget((async()=>XP(await cx(r),i,o))),o.promise})(ly(n),e)}function Sx(n,e,t){const r=t.docs.get(e._key),i=new US(n);return new ss(n,i,e._key,r,new Da(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(i){rl=i})(nl),La(new fo("firestore",((r,{instanceIdentifier:i,options:o})=>{const l=r.getProvider("app").getImmediate(),c=new fs(new YD(r.getProvider("auth-internal")),new ZD(l,r.getProvider("app-check-internal")),(function(p,g){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new se(K.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ls(p.options.projectId,g)})(l,i),l);return o={useFetchStreams:t,...o},c._setSettings(o),c}),"PUBLIC").setMultipleInstances(!0)),ts(yE,vE,e),ts(yE,vE,"esm2020")})();const Rx=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:FS,Bytes:Cn,CollectionReference:Zr,DocumentReference:Et,DocumentSnapshot:ss,FieldPath:sc,FieldValue:yf,Firestore:fs,FirestoreError:se,GeoPoint:er,Query:vs,QueryCompositeFilterConstraint:Ef,QueryConstraint:my,QueryDocumentSnapshot:Au,QueryFieldFilterConstraint:_f,QueryOrderByConstraint:wf,QuerySnapshot:uo,SnapshotMetadata:Da,Timestamp:ze,VectorValue:tr,_AutoId:Kh,_ByteString:wt,_DatabaseId:ls,_DocumentKey:oe,_EmptyAuthCredentialsProvider:PA,_FieldPath:at,_cast:Rr,_logWarn:as,_validateIsNotUsedTogether:OA,addDoc:jS,collection:lg,connectFirestoreEmulator:RS,deleteDoc:zS,doc:bh,enableIndexedDbPersistence:dx,ensureFirestoreConfigured:ly,executeWrite:Tf,getFirestore:CS,onSnapshot:HS,orderBy:VS,query:MS,updateDoc:BS},Symbol.toStringTag,{value:"Module"}));function WS(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Cx=WS,qS=new Ku("auth","Firebase",WS());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kh=new Rg("@firebase/auth");function bx(n,...e){kh.logLevel<=Me.WARN&&kh.warn(`Auth (${nl}): ${n}`,...e)}function nh(n,...e){kh.logLevel<=Me.ERROR&&kh.error(`Auth (${nl}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ri(n,...e){throw gy(n,...e)}function Cr(n,...e){return gy(n,...e)}function GS(n,e,t){const r={...Cx(),[e]:t};return new Ku("auth","Firebase",r).create(e,{appName:n.name})}function co(n){return GS(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function gy(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return qS.create(n,...e)}function Se(n,e,...t){if(!n)throw gy(e,...t)}function Jr(n){const e="INTERNAL ASSERTION FAILED: "+n;throw nh(e),new Error(e)}function ii(n,e){n||Jr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cg(){return typeof self<"u"&&self.location?.href||""}function Dx(){return Bw()==="http:"||Bw()==="https:"}function Bw(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kx(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Dx()||bb()||"connection"in navigator)?navigator.onLine:!0}function Px(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ac{constructor(e,t){this.shortDelay=e,this.longDelay=t,ii(t>e,"Short delay should be less than long delay!"),this.isMobile=Rb()||Db()}get(){return kx()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yy(n,e){ii(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $S{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Jr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Jr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Jr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xx={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nx=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Ox=new ac(3e4,6e4);function vy(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function al(n,e,t,r,i={}){return QS(n,i,async()=>{let o={},l={};r&&(e==="GET"?l=r:o={body:JSON.stringify(r)});const c=Yu({key:n.config.apiKey,...l}).slice(1),f=await n._getAdditionalHeaders();f["Content-Type"]="application/json",n.languageCode&&(f["X-Firebase-Locale"]=n.languageCode);const p={method:e,headers:f,...o};return Cb()||(p.referrerPolicy="no-referrer"),n.emulatorConfig&&tl(n.emulatorConfig.host)&&(p.credentials="include"),$S.fetch()(await KS(n,n.config.apiHost,t,c),p)})}async function QS(n,e,t){n._canInitEmulator=!1;const r={...xx,...e};try{const i=new Vx(n),o=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const l=await o.json();if("needConfirmation"in l)throw Vd(n,"account-exists-with-different-credential",l);if(o.ok&&!("errorMessage"in l))return l;{const c=o.ok?l.errorMessage:l.error.message,[f,p]=c.split(" : ");if(f==="FEDERATED_USER_ID_ALREADY_LINKED")throw Vd(n,"credential-already-in-use",l);if(f==="EMAIL_EXISTS")throw Vd(n,"email-already-in-use",l);if(f==="USER_DISABLED")throw Vd(n,"user-disabled",l);const g=r[f]||f.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw GS(n,g,p);ri(n,g)}}catch(i){if(i instanceof oi)throw i;ri(n,"network-request-failed",{message:String(i)})}}async function Mx(n,e,t,r,i={}){const o=await al(n,e,t,r,i);return"mfaPendingCredential"in o&&ri(n,"multi-factor-auth-required",{_serverResponse:o}),o}async function KS(n,e,t,r){const i=`${e}${t}?${r}`,o=n,l=o.config.emulator?yy(n.config,i):`${n.config.apiScheme}://${i}`;return Nx.includes(t)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(l).toString():l}class Vx{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Cr(this.auth,"network-request-failed")),Ox.get())})}}function Vd(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=Cr(n,e,r);return i.customData._tokenResponse=t,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lx(n,e){return al(n,"POST","/v1/accounts:delete",e)}async function Ph(n,e){return al(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iu(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Fx(n,e=!1){const t=tn(n),r=await t.getIdToken(e),i=_y(r);Se(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const o=typeof i.firebase=="object"?i.firebase:void 0,l=o?.sign_in_provider;return{claims:i,token:r,authTime:Iu(pm(i.auth_time)),issuedAtTime:Iu(pm(i.iat)),expirationTime:Iu(pm(i.exp)),signInProvider:l||null,signInSecondFactor:o?.sign_in_second_factor||null}}function pm(n){return Number(n)*1e3}function _y(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return nh("JWT malformed, contained fewer than 3 sections"),null;try{const i=oA(t);return i?JSON.parse(i):(nh("Failed to decode base64 JWT payload"),null)}catch(i){return nh("Caught error parsing JWT payload as JSON",i?.toString()),null}}function zw(n){const e=_y(n);return Se(e,"internal-error"),Se(typeof e.exp<"u","internal-error"),Se(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wu(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof oi&&Ux(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function Ux({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bx{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dg{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Iu(this.lastLoginAt),this.creationTime=Iu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xh(n){const e=n.auth,t=await n.getIdToken(),r=await Wu(n,Ph(e,{idToken:t}));Se(r?.users.length,e,"internal-error");const i=r.users[0];n._notifyReloadListener(i);const o=i.providerUserInfo?.length?YS(i.providerUserInfo):[],l=jx(n.providerData,o),c=n.isAnonymous,f=!(n.email&&i.passwordHash)&&!l?.length,p=c?f:!1,g={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:l,metadata:new dg(i.createdAt,i.lastLoginAt),isAnonymous:p};Object.assign(n,g)}async function zx(n){const e=tn(n);await xh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function jx(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function YS(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hx(n,e){const t=await QS(n,{},async()=>{const r=Yu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=n.config,l=await KS(n,i,"/v1/token",`key=${o}`),c=await n._getAdditionalHeaders();c["Content-Type"]="application/x-www-form-urlencoded";const f={method:"POST",headers:c,body:r};return n.emulatorConfig&&tl(n.emulatorConfig.host)&&(f.credentials="include"),$S.fetch()(l,f)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function Wx(n,e){return al(n,"POST","/v2/accounts:revokeToken",vy(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xa{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Se(e.idToken,"internal-error"),Se(typeof e.idToken<"u","internal-error"),Se(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):zw(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Se(e.length!==0,"internal-error");const t=zw(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Se(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:i,expiresIn:o}=await Hx(e,t);this.updateTokensAndExpiration(r,i,Number(o))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:o}=t,l=new xa;return r&&(Se(typeof r=="string","internal-error",{appName:e}),l.refreshToken=r),i&&(Se(typeof i=="string","internal-error",{appName:e}),l.accessToken=i),o&&(Se(typeof o=="number","internal-error",{appName:e}),l.expirationTime=o),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new xa,this.toJSON())}_performRefresh(){return Jr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hi(n,e){Se(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Zn{constructor({uid:e,auth:t,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new Bx(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new dg(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await Wu(this,this.stsTokenManager.getToken(this.auth,e));return Se(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return Fx(this,e)}reload(){return zx(this)}_assign(e){this!==e&&(Se(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Zn({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Se(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await xh(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ar(this.auth.app))return Promise.reject(co(this.auth));const e=await this.getIdToken();return await Wu(this,Lx(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const r=t.displayName??void 0,i=t.email??void 0,o=t.phoneNumber??void 0,l=t.photoURL??void 0,c=t.tenantId??void 0,f=t._redirectEventId??void 0,p=t.createdAt??void 0,g=t.lastLoginAt??void 0,{uid:E,emailVerified:w,isAnonymous:A,providerData:b,stsTokenManager:V}=t;Se(E&&V,e,"internal-error");const x=xa.fromJSON(this.name,V);Se(typeof E=="string",e,"internal-error"),Hi(r,e.name),Hi(i,e.name),Se(typeof w=="boolean",e,"internal-error"),Se(typeof A=="boolean",e,"internal-error"),Hi(o,e.name),Hi(l,e.name),Hi(c,e.name),Hi(f,e.name),Hi(p,e.name),Hi(g,e.name);const H=new Zn({uid:E,auth:e,email:i,emailVerified:w,displayName:r,isAnonymous:A,photoURL:l,phoneNumber:o,tenantId:c,stsTokenManager:x,createdAt:p,lastLoginAt:g});return b&&Array.isArray(b)&&(H.providerData=b.map(Q=>({...Q}))),f&&(H._redirectEventId=f),H}static async _fromIdTokenResponse(e,t,r=!1){const i=new xa;i.updateFromServerResponse(t);const o=new Zn({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await xh(o),o}static async _fromGetAccountInfoResponse(e,t,r){const i=t.users[0];Se(i.localId!==void 0,"internal-error");const o=i.providerUserInfo!==void 0?YS(i.providerUserInfo):[],l=!(i.email&&i.passwordHash)&&!o?.length,c=new xa;c.updateFromIdToken(r);const f=new Zn({uid:i.localId,auth:e,stsTokenManager:c,isAnonymous:l}),p={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new dg(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(f,p),f}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jw=new Map;function Xr(n){ii(n instanceof Function,"Expected a class definition");let e=jw.get(n);return e?(ii(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,jw.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JS{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}JS.type="NONE";const Hw=JS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rh(n,e,t){return`firebase:${n}:${e}:${t}`}class Na{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:o}=this.auth;this.fullUserKey=rh(this.userKey,i.apiKey,o),this.fullPersistenceKey=rh("persistence",i.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Ph(this.auth,{idToken:e}).catch(()=>{});return t?Zn._fromGetAccountInfoResponse(this.auth,t,e):null}return Zn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new Na(Xr(Hw),e,r);const i=(await Promise.all(t.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let o=i[0]||Xr(Hw);const l=rh(r,e.config.apiKey,e.name);let c=null;for(const p of t)try{const g=await p._get(l);if(g){let E;if(typeof g=="string"){const w=await Ph(e,{idToken:g}).catch(()=>{});if(!w)break;E=await Zn._fromGetAccountInfoResponse(e,w,g)}else E=Zn._fromJSON(e,g);p!==o&&(c=E),o=p;break}}catch{}const f=i.filter(p=>p._shouldAllowMigration);return!o._shouldAllowMigration||!f.length?new Na(o,e,r):(o=f[0],c&&await o._set(l,c.toJSON()),await Promise.all(t.map(async p=>{if(p!==o)try{await p._remove(l)}catch{}})),new Na(o,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ww(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(t0(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(XS(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(r0(e))return"Blackberry";if(i0(e))return"Webos";if(ZS(e))return"Safari";if((e.includes("chrome/")||e0(e))&&!e.includes("edge/"))return"Chrome";if(n0(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function XS(n=kt()){return/firefox\//i.test(n)}function ZS(n=kt()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function e0(n=kt()){return/crios\//i.test(n)}function t0(n=kt()){return/iemobile/i.test(n)}function n0(n=kt()){return/android/i.test(n)}function r0(n=kt()){return/blackberry/i.test(n)}function i0(n=kt()){return/webos/i.test(n)}function Ey(n=kt()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function qx(n=kt()){return Ey(n)&&!!window.navigator?.standalone}function Gx(){return kb()&&document.documentMode===10}function s0(n=kt()){return Ey(n)||n0(n)||i0(n)||r0(n)||/windows phone/i.test(n)||t0(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o0(n,e=[]){let t;switch(n){case"Browser":t=Ww(kt());break;case"Worker":t=`${Ww(kt())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${nl}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $x{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=o=>new Promise((l,c)=>{try{const f=e(o);l(f)}catch(f){c(f)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qx(n,e={}){return al(n,"GET","/v2/passwordPolicy",vy(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kx=6;class Yx{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??Kx,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jx{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new qw(this),this.idTokenSubscription=new qw(this),this.beforeStateQueue=new $x(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=qS,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Xr(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Na.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Ph(this,{idToken:e}),r=await Zn._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Ar(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let r=t,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=this.redirectUser?._redirectEventId,l=r?._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===l)&&c?.user&&(r=c.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Se(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await xh(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Px()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ar(this.app))return Promise.reject(co(this));const t=e?tn(e):null;return t&&Se(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Se(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ar(this.app)?Promise.reject(co(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ar(this.app)?Promise.reject(co(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Xr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Qx(this),t=new Yx(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Ku("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await Wx(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Xr(e)||this._popupRedirectResolver;Se(t,this,"argument-error"),this.redirectPersistenceManager=await Na.create(this,[Xr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const o=typeof t=="function"?t:t.next.bind(t);let l=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(Se(c,this,"internal-error"),c.then(()=>{l||o(this.currentUser)}),typeof t=="function"){const f=e.addObserver(t,r,i);return()=>{l=!0,f()}}else{const f=e.addObserver(t);return()=>{l=!0,f()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Se(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=o0(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(Ar(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&bx(`Error while retrieving App Check token: ${e.error}`),e?.token}}function wy(n){return tn(n)}class qw{constructor(e){this.auth=e,this.observer=null,this.addObserver=Vb(t=>this.observer=t)}get next(){return Se(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ty={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Xx(n){Ty=n}function Zx(n){return Ty.loadJS(n)}function eN(){return Ty.gapiScript}function tN(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nN(n,e){const t=bg(n,"auth");if(t.isInitialized()){const i=t.getImmediate(),o=t.getOptions();if(ho(o,e??{}))return i;ri(i,"already-initialized")}return t.initialize({options:e})}function rN(n,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(Xr);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function iN(n,e,t){const r=wy(n);Se(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,o=a0(e),{host:l,port:c}=sN(e),f=c===null?"":`:${c}`,p={url:`${o}//${l}${f}/`},g=Object.freeze({host:l,port:c,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){Se(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Se(ho(p,r.config.emulator)&&ho(g,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=p,r.emulatorConfig=g,r.settings.appVerificationDisabledForTesting=!0,tl(l)?(dA(`${o}//${l}${f}`),hA("Auth",!0)):oN()}function a0(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function sN(n){const e=a0(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const o=i[1];return{host:o,port:Gw(r.substr(o.length+1))}}else{const[o,l]=r.split(":");return{host:o,port:Gw(l)}}}function Gw(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function oN(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l0{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Jr("not implemented")}_getIdTokenResponse(e){return Jr("not implemented")}_linkToIdToken(e,t){return Jr("not implemented")}_getReauthenticationResolver(e){return Jr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Oa(n,e){return Mx(n,"POST","/v1/accounts:signInWithIdp",vy(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aN="http://localhost";class Eo extends l0{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Eo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ri("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...o}=t;if(!r||!i)return null;const l=new Eo(r,i);return l.idToken=o.idToken||void 0,l.accessToken=o.accessToken||void 0,l.secret=o.secret,l.nonce=o.nonce,l.pendingToken=o.pendingToken||null,l}_getIdTokenResponse(e){const t=this.buildRequest();return Oa(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Oa(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Oa(e,t)}buildRequest(){const e={requestUri:aN,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Yu(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u0{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lc extends u0{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qi extends lc{constructor(){super("facebook.com")}static credential(e){return Eo._fromParams({providerId:qi.PROVIDER_ID,signInMethod:qi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return qi.credentialFromTaggedObject(e)}static credentialFromError(e){return qi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return qi.credential(e.oauthAccessToken)}catch{return null}}}qi.FACEBOOK_SIGN_IN_METHOD="facebook.com";qi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gi extends lc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Eo._fromParams({providerId:Gi.PROVIDER_ID,signInMethod:Gi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Gi.credentialFromTaggedObject(e)}static credentialFromError(e){return Gi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return Gi.credential(t,r)}catch{return null}}}Gi.GOOGLE_SIGN_IN_METHOD="google.com";Gi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $i extends lc{constructor(){super("github.com")}static credential(e){return Eo._fromParams({providerId:$i.PROVIDER_ID,signInMethod:$i.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return $i.credentialFromTaggedObject(e)}static credentialFromError(e){return $i.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return $i.credential(e.oauthAccessToken)}catch{return null}}}$i.GITHUB_SIGN_IN_METHOD="github.com";$i.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qi extends lc{constructor(){super("twitter.com")}static credential(e,t){return Eo._fromParams({providerId:Qi.PROVIDER_ID,signInMethod:Qi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Qi.credentialFromTaggedObject(e)}static credentialFromError(e){return Qi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return Qi.credential(t,r)}catch{return null}}}Qi.TWITTER_SIGN_IN_METHOD="twitter.com";Qi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ja{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){const o=await Zn._fromIdTokenResponse(e,r,i),l=$w(r);return new Ja({user:o,providerId:l,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const i=$w(r);return new Ja({user:e,providerId:i,_tokenResponse:r,operationType:t})}}function $w(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nh extends oi{constructor(e,t,r,i){super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Nh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new Nh(e,t,r,i)}}function c0(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Nh._fromErrorAndOperation(n,o,e,r):o})}async function lN(n,e,t=!1){const r=await Wu(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Ja._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uN(n,e,t=!1){const{auth:r}=n;if(Ar(r.app))return Promise.reject(co(r));const i="reauthenticate";try{const o=await Wu(n,c0(r,i,e,n),t);Se(o.idToken,r,"internal-error");const l=_y(o.idToken);Se(l,r,"internal-error");const{sub:c}=l;return Se(n.uid===c,r,"user-mismatch"),Ja._forOperation(n,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&ri(r,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cN(n,e,t=!1){if(Ar(n.app))return Promise.reject(co(n));const r="signIn",i=await c0(n,r,e),o=await Ja._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(o.user),o}function dN(n,e,t,r){return tn(n).onIdTokenChanged(e,t,r)}function hN(n,e,t){return tn(n).beforeAuthStateChanged(e,t)}const Oh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d0{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Oh,"1"),this.storage.removeItem(Oh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fN=1e3,pN=10;class h0 extends d0{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=s0(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),i=this.localCache[t];r!==i&&e(t,i,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((l,c,f)=>{this.notifyListeners(l,f)});return}const r=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const l=this.storage.getItem(r);!t&&this.localCache[r]===l||this.notifyListeners(r,l)},o=this.storage.getItem(r);Gx()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,pN):i()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},fN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}h0.type="LOCAL";const mN=h0;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f0 extends d0{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}f0.type="SESSION";const p0=f0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gN(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Af{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const r=new Af(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:i,data:o}=t.data,l=this.handlersMap[i];if(!l?.size)return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const c=Array.from(l).map(async p=>p(t.origin,o)),f=await gN(c);t.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:f})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Af.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ay(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yN{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,l;return new Promise((c,f)=>{const p=Ay("",20);i.port1.start();const g=setTimeout(()=>{f(new Error("unsupported_event"))},r);l={messageChannel:i,onMessage(E){const w=E;if(w.data.eventId===p)switch(w.data.status){case"ack":clearTimeout(g),o=setTimeout(()=>{f(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),c(w.data.response);break;default:clearTimeout(g),clearTimeout(o),f(new Error("invalid_response"));break}}},this.handlers.add(l),i.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:p,data:t},[i.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function br(){return window}function vN(n){br().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m0(){return typeof br().WorkerGlobalScope<"u"&&typeof br().importScripts=="function"}async function _N(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function EN(){return navigator?.serviceWorker?.controller||null}function wN(){return m0()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g0="firebaseLocalStorageDb",TN=1,Mh="firebaseLocalStorage",y0="fbase_key";class uc{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function If(n,e){return n.transaction([Mh],e?"readwrite":"readonly").objectStore(Mh)}function AN(){const n=indexedDB.deleteDatabase(g0);return new uc(n).toPromise()}function hg(){const n=indexedDB.open(g0,TN);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(Mh,{keyPath:y0})}catch(i){t(i)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(Mh)?e(r):(r.close(),await AN(),e(await hg()))})})}async function Qw(n,e,t){const r=If(n,!0).put({[y0]:e,value:t});return new uc(r).toPromise()}async function IN(n,e){const t=If(n,!1).get(e),r=await new uc(t).toPromise();return r===void 0?null:r.value}function Kw(n,e){const t=If(n,!0).delete(e);return new uc(t).toPromise()}const SN=800,RN=3;class v0{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await hg(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>RN)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return m0()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Af._getInstance(wN()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await _N(),!this.activeServiceWorker)return;this.sender=new yN(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||EN()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await hg();return await Qw(e,Oh,"1"),await Kw(e,Oh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>Qw(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>IN(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Kw(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const o=If(i,!1).getAll();return new uc(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:o}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(o)&&(this.notifyListeners(i,o),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),SN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}v0.type="LOCAL";const CN=v0;new ac(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bN(n,e){return e?Xr(e):(Se(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iy extends l0{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Oa(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Oa(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Oa(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function DN(n){return cN(n.auth,new Iy(n),n.bypassAuthState)}function kN(n){const{auth:e,user:t}=n;return Se(t,e,"internal-error"),uN(t,new Iy(n),n.bypassAuthState)}async function PN(n){const{auth:e,user:t}=n;return Se(t,e,"internal-error"),lN(t,new Iy(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _0{constructor(e,t,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:i,tenantId:o,error:l,type:c}=e;if(l){this.reject(l);return}const f={auth:this.auth,requestUri:t,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(f))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return DN;case"linkViaPopup":case"linkViaRedirect":return PN;case"reauthViaPopup":case"reauthViaRedirect":return kN;default:ri(this.auth,"internal-error")}}resolve(e){ii(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ii(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xN=new ac(2e3,1e4);class ka extends _0{constructor(e,t,r,i,o){super(e,t,i,o),this.provider=r,this.authWindow=null,this.pollId=null,ka.currentPopupAction&&ka.currentPopupAction.cancel(),ka.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Se(e,this.auth,"internal-error"),e}async onExecution(){ii(this.filter.length===1,"Popup operations only handle one event");const e=Ay();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Cr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Cr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ka.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Cr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,xN.get())};e()}}ka.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NN="pendingRedirect",ih=new Map;class ON extends _0{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=ih.get(this.auth._key());if(!e){try{const r=await MN(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}ih.set(this.auth._key(),e)}return this.bypassAuthState||ih.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function MN(n,e){const t=FN(e),r=LN(n);if(!await r._isAvailable())return!1;const i=await r._get(t)==="true";return await r._remove(t),i}function VN(n,e){ih.set(n._key(),e)}function LN(n){return Xr(n._redirectPersistence)}function FN(n){return rh(NN,n.config.apiKey,n.name)}async function UN(n,e,t=!1){if(Ar(n.app))return Promise.reject(co(n));const r=wy(n),i=bN(r,e),l=await new ON(r,i,t).execute();return l&&!t&&(delete l.user._redirectEventId,await r._persistUserIfCurrent(l.user),await r._setRedirectUser(null,e)),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BN=600*1e3;class zN{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!jN(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!E0(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";t.onError(Cr(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=BN&&this.cachedEventUids.clear(),this.cachedEventUids.has(Yw(e))}saveEventToCache(e){this.cachedEventUids.add(Yw(e)),this.lastProcessedEventTime=Date.now()}}function Yw(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function E0({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function jN(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return E0(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HN(n,e={}){return al(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WN=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,qN=/^https?/;async function GN(n){if(n.config.emulator)return;const{authorizedDomains:e}=await HN(n);for(const t of e)try{if($N(t))return}catch{}ri(n,"unauthorized-domain")}function $N(n){const e=cg(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const l=new URL(n);return l.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&l.hostname===r}if(!qN.test(t))return!1;if(WN.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QN=new ac(3e4,6e4);function Jw(){const n=br().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function KN(n){return new Promise((e,t)=>{function r(){Jw(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Jw(),t(Cr(n,"network-request-failed"))},timeout:QN.get()})}if(br().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(br().gapi?.load)r();else{const i=tN("iframefcb");return br()[i]=()=>{gapi.load?r():t(Cr(n,"network-request-failed"))},Zx(`${eN()}?onload=${i}`).catch(o=>t(o))}}).catch(e=>{throw sh=null,e})}let sh=null;function YN(n){return sh=sh||KN(n),sh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JN=new ac(5e3,15e3),XN="__/auth/iframe",ZN="emulator/auth/iframe",eO={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},tO=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function nO(n){const e=n.config;Se(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?yy(e,ZN):`https://${n.config.authDomain}/${XN}`,r={apiKey:e.apiKey,appName:n.name,v:nl},i=tO.get(n.config.apiHost);i&&(r.eid=i);const o=n._getFrameworks();return o.length&&(r.fw=o.join(",")),`${t}?${Yu(r).slice(1)}`}async function rO(n){const e=await YN(n),t=br().gapi;return Se(t,n,"internal-error"),e.open({where:document.body,url:nO(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:eO,dontclear:!0},r=>new Promise(async(i,o)=>{await r.restyle({setHideOnLeave:!1});const l=Cr(n,"network-request-failed"),c=br().setTimeout(()=>{o(l)},JN.get());function f(){br().clearTimeout(c),i(r)}r.ping(f).then(f,()=>{o(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iO={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},sO=500,oO=600,aO="_blank",lO="http://localhost";class Xw{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function uO(n,e,t,r=sO,i=oO){const o=Math.max((window.screen.availHeight-i)/2,0).toString(),l=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const f={...iO,width:r.toString(),height:i.toString(),top:o,left:l},p=kt().toLowerCase();t&&(c=e0(p)?aO:t),XS(p)&&(e=e||lO,f.scrollbars="yes");const g=Object.entries(f).reduce((w,[A,b])=>`${w}${A}=${b},`,"");if(qx(p)&&c!=="_self")return cO(e||"",c),new Xw(null);const E=window.open(e||"",c,g);Se(E,n,"popup-blocked");try{E.focus()}catch{}return new Xw(E)}function cO(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dO="__/auth/handler",hO="emulator/auth/handler",fO=encodeURIComponent("fac");async function Zw(n,e,t,r,i,o){Se(n.config.authDomain,n,"auth-domain-config-required"),Se(n.config.apiKey,n,"invalid-api-key");const l={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:nl,eventId:i};if(e instanceof u0){e.setDefaultLanguage(n.languageCode),l.providerId=e.providerId||"",Mb(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[g,E]of Object.entries({}))l[g]=E}if(e instanceof lc){const g=e.getScopes().filter(E=>E!=="");g.length>0&&(l.scopes=g.join(","))}n.tenantId&&(l.tid=n.tenantId);const c=l;for(const g of Object.keys(c))c[g]===void 0&&delete c[g];const f=await n._getAppCheckToken(),p=f?`#${fO}=${encodeURIComponent(f)}`:"";return`${pO(n)}?${Yu(c).slice(1)}${p}`}function pO({config:n}){return n.emulator?yy(n,hO):`https://${n.authDomain}/${dO}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mm="webStorageSupport";class mO{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=p0,this._completeRedirectFn=UN,this._overrideRedirectResult=VN}async _openPopup(e,t,r,i){ii(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const o=await Zw(e,t,r,cg(),i);return uO(e,o,Ay())}async _openRedirect(e,t,r,i){await this._originValidation(e);const o=await Zw(e,t,r,cg(),i);return vN(o),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:o}=this.eventManagers[t];return i?Promise.resolve(i):(ii(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await rO(e),r=new zN(e);return t.register("authEvent",i=>(Se(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(mm,{type:mm},i=>{const o=i?.[0]?.[mm];o!==void 0&&t(!!o),ri(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=GN(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return s0()||ZS()||Ey()}}const gO=mO;var eT="@firebase/auth",tT="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yO{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Se(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vO(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function _O(n){La(new fo("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:l,authDomain:c}=r.options;Se(l&&!l.includes(":"),"invalid-api-key",{appName:r.name});const f={apiKey:l,authDomain:c,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:o0(n)},p=new Jx(r,i,o,f);return rN(p,t),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),La(new fo("auth-internal",e=>{const t=wy(e.getProvider("auth").getImmediate());return(r=>new yO(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),ts(eT,tT,vO(n)),ts(eT,tT,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EO=300,wO=cA("authIdTokenMaxAge")||EO;let nT=null;const TO=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>wO)return;const i=t?.token;nT!==i&&(nT=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function AO(n=EA()){const e=bg(n,"auth");if(e.isInitialized())return e.getImmediate();const t=nN(n,{popupRedirectResolver:gO,persistence:[CN,mN,p0]}),r=cA("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(r,location.origin);if(location.origin===o.origin){const l=TO(o.toString());hN(t,l,()=>l(t.currentUser)),dN(t,c=>l(c))}}const i=lA("auth");return i&&iN(t,`http://${i}`),t}function IO(){return document.getElementsByTagName("head")?.[0]??document}Xx({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const o=Cr("internal-error");o.customData=i,t(o)},r.type="text/javascript",r.charset="UTF-8",IO().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});_O("Browser");const fg={apiKey:"AIzaSyCOkbtTUgsNI-oTvcXsI59Y4wjh96uS2fg",authDomain:"calendario-sync-9e37f.firebaseapp.com",projectId:"calendario-sync-9e37f",storageBucket:"calendario-sync-9e37f.firebasestorage.app",messagingSenderId:"459599516875",appId:"1:459599516875:web:e68f83fbeb30c53755f74e"},w0=_A(fg),fu=CS(w0);AO(w0);const T0=async()=>{try{await fb(async()=>{const{enableIndexedDbPersistence:n}=await Promise.resolve().then(()=>Rx);return{enableIndexedDbPersistence:n}},void 0).then(({enableIndexedDbPersistence:n})=>{n(fu)}),console.log("Persistencia offline habilitada")}catch(n){n.code==="failed-precondition"?console.warn("Persistencia offline no disponible - múltiples pestañas abiertas"):n.code==="unimplemented"?console.warn("Persistencia offline no disponible - navegador no compatible"):console.error("Error al habilitar persistencia offline:",n)}},SO=async()=>{try{return console.log("Probando conexión a Firebase..."),console.log("Configuración Firebase:",{projectId:fg.projectId,authDomain:fg.authDomain}),!0}catch(n){return console.error("Error de conexión a Firebase:",n),!1}},RO=[{id:"user1",name:"Usuario 1",color:"#3B82F6"},{id:"user2",name:"Usuario 2",color:"#EF4444"},{id:"user3",name:"Usuario 3",color:"#10B981"},{id:"user4",name:"Usuario 4",color:"#F59E0B"},{id:"user5",name:"Usuario 5",color:"#8B5CF6"}],A0=Dt.createContext(void 0),CO={users:RO,events:[],currentUser:null,isLoading:!0,isOffline:!1};function bO(n,e){switch(e.type){case"SET_LOADING":return{...n,isLoading:e.payload};case"SET_OFFLINE":return{...n,isOffline:e.payload};case"SELECT_USER":return localStorage.setItem("currentUser",JSON.stringify(e.payload)),{...n,currentUser:e.payload};case"SET_EVENTS":return{...n,events:e.payload};case"ADD_EVENT":return{...n,events:[...n.events,e.payload]};case"UPDATE_EVENT":return{...n,events:n.events.map(t=>t.id===e.payload.id?e.payload:t)};case"DELETE_EVENT":return{...n,events:n.events.filter(t=>t.id!==e.payload)};default:return n}}function DO({children:n}){const[e,t]=Dt.useReducer(bO,CO);Dt.useEffect(()=>{localStorage.removeItem("currentUser");const c=()=>t({type:"SET_OFFLINE",payload:!1}),f=()=>t({type:"SET_OFFLINE",payload:!0});window.addEventListener("online",c),window.addEventListener("offline",f);const p=MS(lg(fu,"events"),VS("start","asc")),g=HS(p,E=>{const w=E.docs.map(A=>{const b=A.data();return{id:A.id,title:b.title,start:b.start?.toDate?.()?.toISOString()||b.start,end:b.end?.toDate?.()?.toISOString()||b.end,description:b.description,category:b.category,userId:b.userId,userName:b.userName,userColor:b.userColor,createdAt:b.createdAt?.toDate?.()||new Date,updatedAt:b.updatedAt?.toDate?.()||new Date}});t({type:"SET_EVENTS",payload:w}),t({type:"SET_LOADING",payload:!1})},E=>{console.error("Error listening to events:",E),t({type:"SET_LOADING",payload:!1})});return()=>{g(),window.removeEventListener("online",c),window.removeEventListener("offline",f)}},[]);const r=c=>{t({type:"SELECT_USER",payload:c})},i=async c=>{if(!e.currentUser)return;const f={...c,userId:e.currentUser.id,userName:e.currentUser.name,userColor:e.currentUser.color,createdAt:ze.now(),updatedAt:ze.now()};try{await jS(lg(fu,"events"),f)}catch(p){throw console.error("Error creating event:",p),p}},o=async(c,f)=>{try{await BS(bh(fu,"events",c),{...f,updatedAt:ze.now()})}catch(p){throw console.error("Error updating event:",p),p}},l=async c=>{try{await zS(bh(fu,"events",c))}catch(f){throw console.error("Error deleting event:",f),f}};return re.jsx(A0.Provider,{value:{state:e,selectUser:r,createEvent:i,updateEvent:o,deleteEvent:l},children:n})}function I0(){const n=Dt.useContext(A0);if(n===void 0)throw new Error("useApp must be used within an AppProvider");return n}const kO=({onUserSelect:n})=>{const e=[{id:"user1",name:"Usuario 1",color:"#3B82F6"},{id:"user2",name:"Usuario 2",color:"#EF4444"},{id:"user3",name:"Usuario 3",color:"#10B981"},{id:"user4",name:"Usuario 4",color:"#F59E0B"},{id:"user5",name:"Usuario 5",color:"#8B5CF6"}];return re.jsxs("div",{className:"user-selector",children:[re.jsxs("div",{className:"user-selector-header",children:[re.jsx("h2",{children:"Selecciona tu perfil"}),re.jsx("p",{children:"Elige tu usuario para acceder al calendario"})]}),re.jsx("div",{className:"user-grid",children:e.map(t=>re.jsxs("div",{className:"user-card",onClick:()=>n(t),children:[re.jsx("div",{className:"user-avatar",style:{backgroundColor:t.color},children:t.name.charAt(0)}),re.jsx("span",{className:"user-name",children:t.name})]},t.id))}),re.jsx("style",{children:`
        .user-selector {
          min-height: 100vh;
          padding: 1rem;
          display: flex;
          flex-direction: column;
          align-items: center;
          justify-content: center;
          background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }

        .user-selector-header {
          text-align: center;
          margin-bottom: 1.5rem;
        }

        .user-selector-header h2 {
          color: white;
          font-size: 2rem;
          margin: 0 0 0.5rem 0;
          font-weight: 700;
        }

        .user-selector-header p {
          color: rgba(255, 255, 255, 0.8);
          margin: 0;
          font-size: 1rem;
        }

        .user-grid {
          display: grid;
          grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
          gap: 1rem;
          width: 100%;
          max-width: 600px;
        }

        .user-card {
          background: white;
          border-radius: 12px;
          padding: 1.5rem;
          text-align: center;
          cursor: pointer;
          transition: all 0.3s ease;
          box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .user-card:hover {
          transform: translateY(-4px);
          box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
        }

        .user-avatar {
          width: 50px;
          height: 50px;
          border-radius: 50%;
          display: flex;
          align-items: center;
          justify-content: center;
          margin: 0 auto 0.75rem auto;
          color: white;
          font-size: 1.25rem;
          font-weight: bold;
        }

        .user-name {
          font-size: 1rem;
          font-weight: 600;
          color: #374151;
        }

        @media (max-width: 768px) {
          .user-selector {
            padding: 0.5rem;
          }

          .user-selector-header h2 {
            font-size: 1.5rem;
          }

          .user-grid {
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 0.75rem;
          }

          .user-card {
            padding: 1rem;
          }

          .user-avatar {
            width: 40px;
            height: 40px;
            font-size: 1rem;
          }
        }
      `})]})};var pg=rA(),Sf,Ae,S0,R0,Xa,ro,rT,C0,b0,Vh={},D0=[],PO=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function Yi(n,e){for(var t in e)n[t]=e[t];return n}function k0(n){var e=n.parentNode;e&&e.removeChild(n)}function G(n,e,t){var r,i,o,l={};for(o in e)o=="key"?r=e[o]:o=="ref"?i=e[o]:l[o]=e[o];if(arguments.length>2&&(l.children=arguments.length>3?Sf.call(arguments,2):t),typeof n=="function"&&n.defaultProps!=null)for(o in n.defaultProps)l[o]===void 0&&(l[o]=n.defaultProps[o]);return oh(n,l,r,i,null)}function oh(n,e,t,r,i){var o={type:n,props:e,key:t,ref:r,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:i??++S0};return i==null&&Ae.vnode!=null&&Ae.vnode(o),o}function si(){return{current:null}}function gt(n){return n.children}function xO(n,e,t,r,i){var o;for(o in t)o==="children"||o==="key"||o in e||Lh(n,o,null,t[o],r);for(o in e)i&&typeof e[o]!="function"||o==="children"||o==="key"||o==="value"||o==="checked"||t[o]===e[o]||Lh(n,o,e[o],t[o],r)}function iT(n,e,t){e[0]==="-"?n.setProperty(e,t??""):n[e]=t==null?"":typeof t!="number"||PO.test(e)?t:t+"px"}function Lh(n,e,t,r,i){var o;e:if(e==="style")if(typeof t=="string")n.style.cssText=t;else{if(typeof r=="string"&&(n.style.cssText=r=""),r)for(e in r)t&&e in t||iT(n.style,e,"");if(t)for(e in t)r&&t[e]===r[e]||iT(n.style,e,t[e])}else if(e[0]==="o"&&e[1]==="n")o=e!==(e=e.replace(/Capture$/,"")),e=e.toLowerCase()in n?e.toLowerCase().slice(2):e.slice(2),n.l||(n.l={}),n.l[e+o]=t,t?r||n.addEventListener(e,o?oT:sT,o):n.removeEventListener(e,o?oT:sT,o);else if(e!=="dangerouslySetInnerHTML"){if(i)e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!=="width"&&e!=="height"&&e!=="href"&&e!=="list"&&e!=="form"&&e!=="tabIndex"&&e!=="download"&&e in n)try{n[e]=t??"";break e}catch{}typeof t=="function"||(t==null||t===!1&&e.indexOf("-")==-1?n.removeAttribute(e):n.setAttribute(e,t))}}function sT(n){Xa=!0;try{return this.l[n.type+!1](Ae.event?Ae.event(n):n)}finally{Xa=!1}}function oT(n){Xa=!0;try{return this.l[n.type+!0](Ae.event?Ae.event(n):n)}finally{Xa=!1}}function Dn(n,e){this.props=n,this.context=e}function qu(n,e){if(e==null)return n.__?qu(n.__,n.__.__k.indexOf(n)+1):null;for(var t;e<n.__k.length;e++)if((t=n.__k[e])!=null&&t.__e!=null)return t.__e;return typeof n.type=="function"?qu(n):null}function P0(n){var e,t;if((n=n.__)!=null&&n.__c!=null){for(n.__e=n.__c.base=null,e=0;e<n.__k.length;e++)if((t=n.__k[e])!=null&&t.__e!=null){n.__e=n.__c.base=t.__e;break}return P0(n)}}function NO(n){Xa?setTimeout(n):C0(n)}function mg(n){(!n.__d&&(n.__d=!0)&&ro.push(n)&&!Fh.__r++||rT!==Ae.debounceRendering)&&((rT=Ae.debounceRendering)||NO)(Fh)}function Fh(){var n,e,t,r,i,o,l,c;for(ro.sort(function(f,p){return f.__v.__b-p.__v.__b});n=ro.shift();)n.__d&&(e=ro.length,r=void 0,i=void 0,l=(o=(t=n).__v).__e,(c=t.__P)&&(r=[],(i=Yi({},o)).__v=o.__v+1,Sy(c,o,i,t.__n,c.ownerSVGElement!==void 0,o.__h!=null?[l]:null,r,l??qu(o),o.__h),V0(r,o),o.__e!=l&&P0(o)),ro.length>e&&ro.sort(function(f,p){return f.__v.__b-p.__v.__b}));Fh.__r=0}function x0(n,e,t,r,i,o,l,c,f,p){var g,E,w,A,b,V,x,H=r&&r.__k||D0,Q=H.length;for(t.__k=[],g=0;g<e.length;g++)if((A=t.__k[g]=(A=e[g])==null||typeof A=="boolean"?null:typeof A=="string"||typeof A=="number"||typeof A=="bigint"?oh(null,A,null,null,A):Array.isArray(A)?oh(gt,{children:A},null,null,null):A.__b>0?oh(A.type,A.props,A.key,A.ref?A.ref:null,A.__v):A)!=null){if(A.__=t,A.__b=t.__b+1,(w=H[g])===null||w&&A.key==w.key&&A.type===w.type)H[g]=void 0;else for(E=0;E<Q;E++){if((w=H[E])&&A.key==w.key&&A.type===w.type){H[E]=void 0;break}w=null}Sy(n,A,w=w||Vh,i,o,l,c,f,p),b=A.__e,(E=A.ref)&&w.ref!=E&&(x||(x=[]),w.ref&&x.push(w.ref,null,A),x.push(E,A.__c||b,A)),b!=null?(V==null&&(V=b),typeof A.type=="function"&&A.__k===w.__k?A.__d=f=N0(A,f,n):f=O0(n,A,w,H,b,f),typeof t.type=="function"&&(t.__d=f)):f&&w.__e==f&&f.parentNode!=n&&(f=qu(w))}for(t.__e=V,g=Q;g--;)H[g]!=null&&(typeof t.type=="function"&&H[g].__e!=null&&H[g].__e==t.__d&&(t.__d=M0(r).nextSibling),F0(H[g],H[g]));if(x)for(g=0;g<x.length;g++)L0(x[g],x[++g],x[++g])}function N0(n,e,t){for(var r,i=n.__k,o=0;i&&o<i.length;o++)(r=i[o])&&(r.__=n,e=typeof r.type=="function"?N0(r,e,t):O0(t,r,r,i,r.__e,e));return e}function Uh(n,e){return e=e||[],n==null||typeof n=="boolean"||(Array.isArray(n)?n.some(function(t){Uh(t,e)}):e.push(n)),e}function O0(n,e,t,r,i,o){var l,c,f;if(e.__d!==void 0)l=e.__d,e.__d=void 0;else if(t==null||i!=o||i.parentNode==null)e:if(o==null||o.parentNode!==n)n.appendChild(i),l=null;else{for(c=o,f=0;(c=c.nextSibling)&&f<r.length;f+=1)if(c==i)break e;n.insertBefore(i,o),l=o}return l!==void 0?l:i.nextSibling}function M0(n){var e,t,r;if(n.type==null||typeof n.type=="string")return n.__e;if(n.__k){for(e=n.__k.length-1;e>=0;e--)if((t=n.__k[e])&&(r=M0(t)))return r}return null}function Sy(n,e,t,r,i,o,l,c,f){var p,g,E,w,A,b,V,x,H,Q,Z,ae,ve,he,k,S=e.type;if(e.constructor!==void 0)return null;t.__h!=null&&(f=t.__h,c=e.__e=t.__e,e.__h=null,o=[c]),(p=Ae.__b)&&p(e);try{e:if(typeof S=="function"){if(x=e.props,H=(p=S.contextType)&&r[p.__c],Q=p?H?H.props.value:p.__:r,t.__c?V=(g=e.__c=t.__c).__=g.__E:("prototype"in S&&S.prototype.render?e.__c=g=new S(x,Q):(e.__c=g=new Dn(x,Q),g.constructor=S,g.render=MO),H&&H.sub(g),g.props=x,g.state||(g.state={}),g.context=Q,g.__n=r,E=g.__d=!0,g.__h=[],g._sb=[]),g.__s==null&&(g.__s=g.state),S.getDerivedStateFromProps!=null&&(g.__s==g.state&&(g.__s=Yi({},g.__s)),Yi(g.__s,S.getDerivedStateFromProps(x,g.__s))),w=g.props,A=g.state,g.__v=e,E)S.getDerivedStateFromProps==null&&g.componentWillMount!=null&&g.componentWillMount(),g.componentDidMount!=null&&g.__h.push(g.componentDidMount);else{if(S.getDerivedStateFromProps==null&&x!==w&&g.componentWillReceiveProps!=null&&g.componentWillReceiveProps(x,Q),!g.__e&&g.shouldComponentUpdate!=null&&g.shouldComponentUpdate(x,g.__s,Q)===!1||e.__v===t.__v){for(e.__v!==t.__v&&(g.props=x,g.state=g.__s,g.__d=!1),e.__e=t.__e,e.__k=t.__k,e.__k.forEach(function(D){D&&(D.__=e)}),Z=0;Z<g._sb.length;Z++)g.__h.push(g._sb[Z]);g._sb=[],g.__h.length&&l.push(g);break e}g.componentWillUpdate!=null&&g.componentWillUpdate(x,g.__s,Q),g.componentDidUpdate!=null&&g.__h.push(function(){g.componentDidUpdate(w,A,b)})}if(g.context=Q,g.props=x,g.__P=n,ae=Ae.__r,ve=0,"prototype"in S&&S.prototype.render){for(g.state=g.__s,g.__d=!1,ae&&ae(e),p=g.render(g.props,g.state,g.context),he=0;he<g._sb.length;he++)g.__h.push(g._sb[he]);g._sb=[]}else do g.__d=!1,ae&&ae(e),p=g.render(g.props,g.state,g.context),g.state=g.__s;while(g.__d&&++ve<25);g.state=g.__s,g.getChildContext!=null&&(r=Yi(Yi({},r),g.getChildContext())),E||g.getSnapshotBeforeUpdate==null||(b=g.getSnapshotBeforeUpdate(w,A)),k=p!=null&&p.type===gt&&p.key==null?p.props.children:p,x0(n,Array.isArray(k)?k:[k],e,t,r,i,o,l,c,f),g.base=e.__e,e.__h=null,g.__h.length&&l.push(g),V&&(g.__E=g.__=null),g.__e=!1}else o==null&&e.__v===t.__v?(e.__k=t.__k,e.__e=t.__e):e.__e=OO(t.__e,e,t,r,i,o,l,f);(p=Ae.diffed)&&p(e)}catch(D){e.__v=null,(f||o!=null)&&(e.__e=c,e.__h=!!f,o[o.indexOf(c)]=null),Ae.__e(D,e,t)}}function V0(n,e){Ae.__c&&Ae.__c(e,n),n.some(function(t){try{n=t.__h,t.__h=[],n.some(function(r){r.call(t)})}catch(r){Ae.__e(r,t.__v)}})}function OO(n,e,t,r,i,o,l,c){var f,p,g,E=t.props,w=e.props,A=e.type,b=0;if(A==="svg"&&(i=!0),o!=null){for(;b<o.length;b++)if((f=o[b])&&"setAttribute"in f==!!A&&(A?f.localName===A:f.nodeType===3)){n=f,o[b]=null;break}}if(n==null){if(A===null)return document.createTextNode(w);n=i?document.createElementNS("http://www.w3.org/2000/svg",A):document.createElement(A,w.is&&w),o=null,c=!1}if(A===null)E===w||c&&n.data===w||(n.data=w);else{if(o=o&&Sf.call(n.childNodes),p=(E=t.props||Vh).dangerouslySetInnerHTML,g=w.dangerouslySetInnerHTML,!c){if(o!=null)for(E={},b=0;b<n.attributes.length;b++)E[n.attributes[b].name]=n.attributes[b].value;(g||p)&&(g&&(p&&g.__html==p.__html||g.__html===n.innerHTML)||(n.innerHTML=g&&g.__html||""))}if(xO(n,w,E,i,c),g)e.__k=[];else if(b=e.props.children,x0(n,Array.isArray(b)?b:[b],e,t,r,i&&A!=="foreignObject",o,l,o?o[0]:t.__k&&qu(t,0),c),o!=null)for(b=o.length;b--;)o[b]!=null&&k0(o[b]);c||("value"in w&&(b=w.value)!==void 0&&(b!==n.value||A==="progress"&&!b||A==="option"&&b!==E.value)&&Lh(n,"value",b,E.value,!1),"checked"in w&&(b=w.checked)!==void 0&&b!==n.checked&&Lh(n,"checked",b,E.checked,!1))}return n}function L0(n,e,t){try{typeof n=="function"?n(e):n.current=e}catch(r){Ae.__e(r,t)}}function F0(n,e,t){var r,i;if(Ae.unmount&&Ae.unmount(n),(r=n.ref)&&(r.current&&r.current!==n.__e||L0(r,null,e)),(r=n.__c)!=null){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(o){Ae.__e(o,e)}r.base=r.__P=null,n.__c=void 0}if(r=n.__k)for(i=0;i<r.length;i++)r[i]&&F0(r[i],e,t||typeof n.type!="function");t||n.__e==null||k0(n.__e),n.__=n.__e=n.__d=void 0}function MO(n,e,t){return this.constructor(n,t)}function Gu(n,e,t){var r,i,o;Ae.__&&Ae.__(n,e),i=(r=!1)?null:e.__k,o=[],Sy(e,n=e.__k=G(gt,null,[n]),i||Vh,Vh,e.ownerSVGElement!==void 0,i?null:e.firstChild?Sf.call(e.childNodes):null,o,i?i.__e:e.firstChild,r),V0(o,n)}function VO(n,e){var t={__c:e="__cC"+b0++,__:n,Consumer:function(r,i){return r.children(i)},Provider:function(r){var i,o;return this.getChildContext||(i=[],(o={})[e]=this,this.getChildContext=function(){return o},this.shouldComponentUpdate=function(l){this.props.value!==l.value&&i.some(function(c){c.__e=!0,mg(c)})},this.sub=function(l){i.push(l);var c=l.componentWillUnmount;l.componentWillUnmount=function(){i.splice(i.indexOf(l),1),c&&c.call(l)}}),r.children}};return t.Provider.__=t.Consumer.contextType=t}Sf=D0.slice,Ae={__e:function(n,e,t,r){for(var i,o,l;e=e.__;)if((i=e.__c)&&!i.__)try{if((o=i.constructor)&&o.getDerivedStateFromError!=null&&(i.setState(o.getDerivedStateFromError(n)),l=i.__d),i.componentDidCatch!=null&&(i.componentDidCatch(n,r||{}),l=i.__d),l)return i.__E=i}catch(c){n=c}throw n}},S0=0,R0=function(n){return n!=null&&n.constructor===void 0},Xa=!1,Dn.prototype.setState=function(n,e){var t;t=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=Yi({},this.state),typeof n=="function"&&(n=n(Yi({},t),this.props)),n&&Yi(t,n),n!=null&&this.__v&&(e&&this._sb.push(e),mg(this))},Dn.prototype.forceUpdate=function(n){this.__v&&(this.__e=!0,n&&this.__h.push(n),mg(this))},Dn.prototype.render=gt,ro=[],C0=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Fh.__r=0,b0=0;var Tr,gm,aT,U0=[],ym=[],lT=Ae.__b,uT=Ae.__r,cT=Ae.diffed,dT=Ae.__c,hT=Ae.unmount;function LO(){for(var n;n=U0.shift();)if(n.__P&&n.__H)try{n.__H.__h.forEach(ah),n.__H.__h.forEach(gg),n.__H.__h=[]}catch(e){n.__H.__h=[],Ae.__e(e,n.__v)}}Ae.__b=function(n){Tr=null,lT&&lT(n)},Ae.__r=function(n){uT&&uT(n);var e=(Tr=n.__c).__H;e&&(gm===Tr?(e.__h=[],Tr.__h=[],e.__.forEach(function(t){t.__N&&(t.__=t.__N),t.__V=ym,t.__N=t.i=void 0})):(e.__h.forEach(ah),e.__h.forEach(gg),e.__h=[])),gm=Tr},Ae.diffed=function(n){cT&&cT(n);var e=n.__c;e&&e.__H&&(e.__H.__h.length&&(U0.push(e)!==1&&aT===Ae.requestAnimationFrame||((aT=Ae.requestAnimationFrame)||FO)(LO)),e.__H.__.forEach(function(t){t.i&&(t.__H=t.i),t.__V!==ym&&(t.__=t.__V),t.i=void 0,t.__V=ym})),gm=Tr=null},Ae.__c=function(n,e){e.some(function(t){try{t.__h.forEach(ah),t.__h=t.__h.filter(function(r){return!r.__||gg(r)})}catch(r){e.some(function(i){i.__h&&(i.__h=[])}),e=[],Ae.__e(r,t.__v)}}),dT&&dT(n,e)},Ae.unmount=function(n){hT&&hT(n);var e,t=n.__c;t&&t.__H&&(t.__H.__.forEach(function(r){try{ah(r)}catch(i){e=i}}),t.__H=void 0,e&&Ae.__e(e,t.__v))};var fT=typeof requestAnimationFrame=="function";function FO(n){var e,t=function(){clearTimeout(r),fT&&cancelAnimationFrame(e),setTimeout(n)},r=setTimeout(t,100);fT&&(e=requestAnimationFrame(t))}function ah(n){var e=Tr,t=n.__c;typeof t=="function"&&(n.__c=void 0,t()),Tr=e}function gg(n){var e=Tr;n.__c=n.__(),Tr=e}function UO(n,e){for(var t in e)n[t]=e[t];return n}function pT(n,e){for(var t in n)if(t!=="__source"&&!(t in e))return!0;for(var r in e)if(r!=="__source"&&n[r]!==e[r])return!0;return!1}function mT(n){this.props=n}(mT.prototype=new Dn).isPureReactComponent=!0,mT.prototype.shouldComponentUpdate=function(n,e){return pT(this.props,n)||pT(this.state,e)};var gT=Ae.__b;Ae.__b=function(n){n.type&&n.type.__f&&n.ref&&(n.props.ref=n.ref,n.ref=null),gT&&gT(n)};var BO=Ae.__e;Ae.__e=function(n,e,t,r){if(n.then){for(var i,o=e;o=o.__;)if((i=o.__c)&&i.__c)return e.__e==null&&(e.__e=t.__e,e.__k=t.__k),i.__c(n,e)}BO(n,e,t,r)};var yT=Ae.unmount;function B0(n,e,t){return n&&(n.__c&&n.__c.__H&&(n.__c.__H.__.forEach(function(r){typeof r.__c=="function"&&r.__c()}),n.__c.__H=null),(n=UO({},n)).__c!=null&&(n.__c.__P===t&&(n.__c.__P=e),n.__c=null),n.__k=n.__k&&n.__k.map(function(r){return B0(r,e,t)})),n}function z0(n,e,t){return n&&(n.__v=null,n.__k=n.__k&&n.__k.map(function(r){return z0(r,e,t)}),n.__c&&n.__c.__P===e&&(n.__e&&t.insertBefore(n.__e,n.__d),n.__c.__e=!0,n.__c.__P=t)),n}function vm(){this.__u=0,this.t=null,this.__b=null}function j0(n){var e=n.__.__c;return e&&e.__a&&e.__a(n)}function Ld(){this.u=null,this.o=null}Ae.unmount=function(n){var e=n.__c;e&&e.__R&&e.__R(),e&&n.__h===!0&&(n.type=null),yT&&yT(n)},(vm.prototype=new Dn).__c=function(n,e){var t=e.__c,r=this;r.t==null&&(r.t=[]),r.t.push(t);var i=j0(r.__v),o=!1,l=function(){o||(o=!0,t.__R=null,i?i(c):c())};t.__R=l;var c=function(){if(!--r.__u){if(r.state.__a){var p=r.state.__a;r.__v.__k[0]=z0(p,p.__c.__P,p.__c.__O)}var g;for(r.setState({__a:r.__b=null});g=r.t.pop();)g.forceUpdate()}},f=e.__h===!0;r.__u++||f||r.setState({__a:r.__b=r.__v.__k[0]}),n.then(l,l)},vm.prototype.componentWillUnmount=function(){this.t=[]},vm.prototype.render=function(n,e){if(this.__b){if(this.__v.__k){var t=document.createElement("div"),r=this.__v.__k[0].__c;this.__v.__k[0]=B0(this.__b,t,r.__O=r.__P)}this.__b=null}var i=e.__a&&G(gt,null,n.fallback);return i&&(i.__h=null),[G(gt,null,e.__a?null:n.children),i]};var vT=function(n,e,t){if(++t[1]===t[0]&&n.o.delete(e),n.props.revealOrder&&(n.props.revealOrder[0]!=="t"||!n.o.size))for(t=n.u;t;){for(;t.length>3;)t.pop()();if(t[1]<t[0])break;n.u=t=t[2]}};function zO(n){return this.getChildContext=function(){return n.context},n.children}function jO(n){var e=this,t=n.i;e.componentWillUnmount=function(){Gu(null,e.l),e.l=null,e.i=null},e.i&&e.i!==t&&e.componentWillUnmount(),n.__v?(e.l||(e.i=t,e.l={nodeType:1,parentNode:t,childNodes:[],appendChild:function(r){this.childNodes.push(r),e.i.appendChild(r)},insertBefore:function(r,i){this.childNodes.push(r),e.i.appendChild(r)},removeChild:function(r){this.childNodes.splice(this.childNodes.indexOf(r)>>>1,1),e.i.removeChild(r)}}),Gu(G(zO,{context:e.context},n.__v),e.l)):e.l&&e.componentWillUnmount()}function HO(n,e){var t=G(jO,{__v:n,i:e});return t.containerInfo=e,t}(Ld.prototype=new Dn).__a=function(n){var e=this,t=j0(e.__v),r=e.o.get(n);return r[0]++,function(i){var o=function(){e.props.revealOrder?(r.push(i),vT(e,n,r)):i()};t?t(o):o()}},Ld.prototype.render=function(n){this.u=null,this.o=new Map;var e=Uh(n.children);n.revealOrder&&n.revealOrder[0]==="b"&&e.reverse();for(var t=e.length;t--;)this.o.set(e[t],this.u=[1,0,this.u]);return n.children},Ld.prototype.componentDidUpdate=Ld.prototype.componentDidMount=function(){var n=this;this.o.forEach(function(e,t){vT(n,t,e)})};var WO=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,qO=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,GO=typeof document<"u",$O=function(n){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/i:/fil|che|ra/i).test(n)};Dn.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(n){Object.defineProperty(Dn.prototype,n,{configurable:!0,get:function(){return this["UNSAFE_"+n]},set:function(e){Object.defineProperty(this,n,{configurable:!0,writable:!0,value:e})}})});var _T=Ae.event;function QO(){}function KO(){return this.cancelBubble}function YO(){return this.defaultPrevented}Ae.event=function(n){return _T&&(n=_T(n)),n.persist=QO,n.isPropagationStopped=KO,n.isDefaultPrevented=YO,n.nativeEvent=n};var ET={configurable:!0,get:function(){return this.class}},wT=Ae.vnode;Ae.vnode=function(n){var e=n.type,t=n.props,r=t;if(typeof e=="string"){var i=e.indexOf("-")===-1;for(var o in r={},t){var l=t[o];GO&&o==="children"&&e==="noscript"||o==="value"&&"defaultValue"in t&&l==null||(o==="defaultValue"&&"value"in t&&t.value==null?o="value":o==="download"&&l===!0?l="":/ondoubleclick/i.test(o)?o="ondblclick":/^onchange(textarea|input)/i.test(o+e)&&!$O(t.type)?o="oninput":/^onfocus$/i.test(o)?o="onfocusin":/^onblur$/i.test(o)?o="onfocusout":/^on(Ani|Tra|Tou|BeforeInp|Compo)/.test(o)?o=o.toLowerCase():i&&qO.test(o)?o=o.replace(/[A-Z0-9]/g,"-$&").toLowerCase():l===null&&(l=void 0),/^oninput$/i.test(o)&&(o=o.toLowerCase(),r[o]&&(o="oninputCapture")),r[o]=l)}e=="select"&&r.multiple&&Array.isArray(r.value)&&(r.value=Uh(t.children).forEach(function(c){c.props.selected=r.value.indexOf(c.props.value)!=-1})),e=="select"&&r.defaultValue!=null&&(r.value=Uh(t.children).forEach(function(c){c.props.selected=r.multiple?r.defaultValue.indexOf(c.props.value)!=-1:r.defaultValue==c.props.value})),n.props=r,t.class!=t.className&&(ET.enumerable="className"in t,t.className!=null&&(r.class=t.className),Object.defineProperty(r,"className",ET))}n.$$typeof=WO,wT&&wT(n)};var TT=Ae.__r;Ae.__r=function(n){TT&&TT(n),n.__c};const H0=[],yg=new Map;function W0(n){H0.push(n),yg.forEach(e=>{G0(e,n)})}function JO(n){n.isConnected&&n.getRootNode&&q0(n.getRootNode())}function q0(n){let e=yg.get(n);if(!e||!e.isConnected){if(e=n.querySelector("style[data-fullcalendar]"),!e){e=document.createElement("style"),e.setAttribute("data-fullcalendar","");const t=ZO();t&&(e.nonce=t);const r=n===document?document.head:n,i=n===document?r.querySelector("script,link[rel=stylesheet],link[as=style],style"):r.firstChild;r.insertBefore(e,i)}yg.set(n,e),XO(e)}}function XO(n){for(const e of H0)G0(n,e)}function G0(n,e){const{sheet:t}=n,r=t.cssRules.length;e.split("}").forEach((i,o)=>{i=i.trim(),i&&t.insertRule(i+"}",r+o)})}let _m;function ZO(){return _m===void 0&&(_m=eM()),_m}function eM(){const n=document.querySelector('meta[name="csp-nonce"]');if(n&&n.hasAttribute("content"))return n.getAttribute("content");const e=document.querySelector("script[nonce]");return e&&e.nonce||""}typeof document<"u"&&q0(document);var tM=':root{--fc-small-font-size:.85em;--fc-page-bg-color:#fff;--fc-neutral-bg-color:hsla(0,0%,82%,.3);--fc-neutral-text-color:grey;--fc-border-color:#ddd;--fc-button-text-color:#fff;--fc-button-bg-color:#2c3e50;--fc-button-border-color:#2c3e50;--fc-button-hover-bg-color:#1e2b37;--fc-button-hover-border-color:#1a252f;--fc-button-active-bg-color:#1a252f;--fc-button-active-border-color:#151e27;--fc-event-bg-color:#3788d8;--fc-event-border-color:#3788d8;--fc-event-text-color:#fff;--fc-event-selected-overlay-color:rgba(0,0,0,.25);--fc-more-link-bg-color:#d0d0d0;--fc-more-link-text-color:inherit;--fc-event-resizer-thickness:8px;--fc-event-resizer-dot-total-width:8px;--fc-event-resizer-dot-border-width:1px;--fc-non-business-color:hsla(0,0%,84%,.3);--fc-bg-event-color:#8fdf82;--fc-bg-event-opacity:0.3;--fc-highlight-color:rgba(188,232,241,.3);--fc-today-bg-color:rgba(255,220,40,.15);--fc-now-indicator-color:red}.fc-not-allowed,.fc-not-allowed .fc-event{cursor:not-allowed}.fc{display:flex;flex-direction:column;font-size:1em}.fc,.fc *,.fc :after,.fc :before{box-sizing:border-box}.fc table{border-collapse:collapse;border-spacing:0;font-size:1em}.fc th{text-align:center}.fc td,.fc th{padding:0;vertical-align:top}.fc a[data-navlink]{cursor:pointer}.fc a[data-navlink]:hover{text-decoration:underline}.fc-direction-ltr{direction:ltr;text-align:left}.fc-direction-rtl{direction:rtl;text-align:right}.fc-theme-standard td,.fc-theme-standard th{border:1px solid var(--fc-border-color)}.fc-liquid-hack td,.fc-liquid-hack th{position:relative}@font-face{font-family:fcicons;font-style:normal;font-weight:400;src:url("data:application/x-font-ttf;charset=utf-8;base64,AAEAAAALAIAAAwAwT1MvMg8SBfAAAAC8AAAAYGNtYXAXVtKNAAABHAAAAFRnYXNwAAAAEAAAAXAAAAAIZ2x5ZgYydxIAAAF4AAAFNGhlYWQUJ7cIAAAGrAAAADZoaGVhB20DzAAABuQAAAAkaG10eCIABhQAAAcIAAAALGxvY2ED4AU6AAAHNAAAABhtYXhwAA8AjAAAB0wAAAAgbmFtZXsr690AAAdsAAABhnBvc3QAAwAAAAAI9AAAACAAAwPAAZAABQAAApkCzAAAAI8CmQLMAAAB6wAzAQkAAAAAAAAAAAAAAAAAAAABEAAAAAAAAAAAAAAAAAAAAABAAADpBgPA/8AAQAPAAEAAAAABAAAAAAAAAAAAAAAgAAAAAAADAAAAAwAAABwAAQADAAAAHAADAAEAAAAcAAQAOAAAAAoACAACAAIAAQAg6Qb//f//AAAAAAAg6QD//f//AAH/4xcEAAMAAQAAAAAAAAAAAAAAAQAB//8ADwABAAAAAAAAAAAAAgAANzkBAAAAAAEAAAAAAAAAAAACAAA3OQEAAAAAAQAAAAAAAAAAAAIAADc5AQAAAAABAWIAjQKeAskAEwAAJSc3NjQnJiIHAQYUFwEWMjc2NCcCnuLiDQ0MJAz/AA0NAQAMJAwNDcni4gwjDQwM/wANIwz/AA0NDCMNAAAAAQFiAI0CngLJABMAACUBNjQnASYiBwYUHwEHBhQXFjI3AZ4BAA0N/wAMJAwNDeLiDQ0MJAyNAQAMIw0BAAwMDSMM4uINIwwNDQAAAAIA4gC3Ax4CngATACcAACUnNzY0JyYiDwEGFB8BFjI3NjQnISc3NjQnJiIPAQYUHwEWMjc2NCcB87e3DQ0MIw3VDQ3VDSMMDQ0BK7e3DQ0MJAzVDQ3VDCQMDQ3zuLcMJAwNDdUNIwzWDAwNIwy4twwkDA0N1Q0jDNYMDA0jDAAAAgDiALcDHgKeABMAJwAAJTc2NC8BJiIHBhQfAQcGFBcWMjchNzY0LwEmIgcGFB8BBwYUFxYyNwJJ1Q0N1Q0jDA0Nt7cNDQwjDf7V1Q0N1QwkDA0Nt7cNDQwkDLfWDCMN1Q0NDCQMt7gMIw0MDNYMIw3VDQ0MJAy3uAwjDQwMAAADAFUAAAOrA1UAMwBoAHcAABMiBgcOAQcOAQcOARURFBYXHgEXHgEXHgEzITI2Nz4BNz4BNz4BNRE0JicuAScuAScuASMFITIWFx4BFx4BFx4BFREUBgcOAQcOAQcOASMhIiYnLgEnLgEnLgE1ETQ2Nz4BNz4BNz4BMxMhMjY1NCYjISIGFRQWM9UNGAwLFQkJDgUFBQUFBQ4JCRULDBgNAlYNGAwLFQkJDgUFBQUFBQ4JCRULDBgN/aoCVgQIBAQHAwMFAQIBAQIBBQMDBwQECAT9qgQIBAQHAwMFAQIBAQIBBQMDBwQECASAAVYRGRkR/qoRGRkRA1UFBAUOCQkVDAsZDf2rDRkLDBUJCA4FBQUFBQUOCQgVDAsZDQJVDRkLDBUJCQ4FBAVVAgECBQMCBwQECAX9qwQJAwQHAwMFAQICAgIBBQMDBwQDCQQCVQUIBAQHAgMFAgEC/oAZEhEZGRESGQAAAAADAFUAAAOrA1UAMwBoAIkAABMiBgcOAQcOAQcOARURFBYXHgEXHgEXHgEzITI2Nz4BNz4BNz4BNRE0JicuAScuAScuASMFITIWFx4BFx4BFx4BFREUBgcOAQcOAQcOASMhIiYnLgEnLgEnLgE1ETQ2Nz4BNz4BNz4BMxMzFRQWMzI2PQEzMjY1NCYrATU0JiMiBh0BIyIGFRQWM9UNGAwLFQkJDgUFBQUFBQ4JCRULDBgNAlYNGAwLFQkJDgUFBQUFBQ4JCRULDBgN/aoCVgQIBAQHAwMFAQIBAQIBBQMDBwQECAT9qgQIBAQHAwMFAQIBAQIBBQMDBwQECASAgBkSEhmAERkZEYAZEhIZgBEZGREDVQUEBQ4JCRUMCxkN/asNGQsMFQkIDgUFBQUFBQ4JCBUMCxkNAlUNGQsMFQkJDgUEBVUCAQIFAwIHBAQIBf2rBAkDBAcDAwUBAgICAgEFAwMHBAMJBAJVBQgEBAcCAwUCAQL+gIASGRkSgBkSERmAEhkZEoAZERIZAAABAOIAjQMeAskAIAAAExcHBhQXFjI/ARcWMjc2NC8BNzY0JyYiDwEnJiIHBhQX4uLiDQ0MJAzi4gwkDA0N4uINDQwkDOLiDCQMDQ0CjeLiDSMMDQ3h4Q0NDCMN4uIMIw0MDOLiDAwNIwwAAAABAAAAAQAAa5n0y18PPPUACwQAAAAAANivOVsAAAAA2K85WwAAAAADqwNVAAAACAACAAAAAAAAAAEAAAPA/8AAAAQAAAAAAAOrAAEAAAAAAAAAAAAAAAAAAAALBAAAAAAAAAAAAAAAAgAAAAQAAWIEAAFiBAAA4gQAAOIEAABVBAAAVQQAAOIAAAAAAAoAFAAeAEQAagCqAOoBngJkApoAAQAAAAsAigADAAAAAAACAAAAAAAAAAAAAAAAAAAAAAAAAA4ArgABAAAAAAABAAcAAAABAAAAAAACAAcAYAABAAAAAAADAAcANgABAAAAAAAEAAcAdQABAAAAAAAFAAsAFQABAAAAAAAGAAcASwABAAAAAAAKABoAigADAAEECQABAA4ABwADAAEECQACAA4AZwADAAEECQADAA4APQADAAEECQAEAA4AfAADAAEECQAFABYAIAADAAEECQAGAA4AUgADAAEECQAKADQApGZjaWNvbnMAZgBjAGkAYwBvAG4Ac1ZlcnNpb24gMS4wAFYAZQByAHMAaQBvAG4AIAAxAC4AMGZjaWNvbnMAZgBjAGkAYwBvAG4Ac2ZjaWNvbnMAZgBjAGkAYwBvAG4Ac1JlZ3VsYXIAUgBlAGcAdQBsAGEAcmZjaWNvbnMAZgBjAGkAYwBvAG4Ac0ZvbnQgZ2VuZXJhdGVkIGJ5IEljb01vb24uAEYAbwBuAHQAIABnAGUAbgBlAHIAYQB0AGUAZAAgAGIAeQAgAEkAYwBvAE0AbwBvAG4ALgAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA=") format("truetype")}.fc-icon{speak:none;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;display:inline-block;font-family:fcicons!important;font-style:normal;font-variant:normal;font-weight:400;height:1em;line-height:1;text-align:center;text-transform:none;-webkit-user-select:none;-moz-user-select:none;user-select:none;width:1em}.fc-icon-chevron-left:before{content:"\\e900"}.fc-icon-chevron-right:before{content:"\\e901"}.fc-icon-chevrons-left:before{content:"\\e902"}.fc-icon-chevrons-right:before{content:"\\e903"}.fc-icon-minus-square:before{content:"\\e904"}.fc-icon-plus-square:before{content:"\\e905"}.fc-icon-x:before{content:"\\e906"}.fc .fc-button{border-radius:0;font-family:inherit;font-size:inherit;line-height:inherit;margin:0;overflow:visible;text-transform:none}.fc .fc-button:focus{outline:1px dotted;outline:5px auto -webkit-focus-ring-color}.fc .fc-button{-webkit-appearance:button}.fc .fc-button:not(:disabled){cursor:pointer}.fc .fc-button{background-color:transparent;border:1px solid transparent;border-radius:.25em;display:inline-block;font-size:1em;font-weight:400;line-height:1.5;padding:.4em .65em;text-align:center;-webkit-user-select:none;-moz-user-select:none;user-select:none;vertical-align:middle}.fc .fc-button:hover{text-decoration:none}.fc .fc-button:focus{box-shadow:0 0 0 .2rem rgba(44,62,80,.25);outline:0}.fc .fc-button:disabled{opacity:.65}.fc .fc-button-primary{background-color:var(--fc-button-bg-color);border-color:var(--fc-button-border-color);color:var(--fc-button-text-color)}.fc .fc-button-primary:hover{background-color:var(--fc-button-hover-bg-color);border-color:var(--fc-button-hover-border-color);color:var(--fc-button-text-color)}.fc .fc-button-primary:disabled{background-color:var(--fc-button-bg-color);border-color:var(--fc-button-border-color);color:var(--fc-button-text-color)}.fc .fc-button-primary:focus{box-shadow:0 0 0 .2rem rgba(76,91,106,.5)}.fc .fc-button-primary:not(:disabled).fc-button-active,.fc .fc-button-primary:not(:disabled):active{background-color:var(--fc-button-active-bg-color);border-color:var(--fc-button-active-border-color);color:var(--fc-button-text-color)}.fc .fc-button-primary:not(:disabled).fc-button-active:focus,.fc .fc-button-primary:not(:disabled):active:focus{box-shadow:0 0 0 .2rem rgba(76,91,106,.5)}.fc .fc-button .fc-icon{font-size:1.5em;vertical-align:middle}.fc .fc-button-group{display:inline-flex;position:relative;vertical-align:middle}.fc .fc-button-group>.fc-button{flex:1 1 auto;position:relative}.fc .fc-button-group>.fc-button.fc-button-active,.fc .fc-button-group>.fc-button:active,.fc .fc-button-group>.fc-button:focus,.fc .fc-button-group>.fc-button:hover{z-index:1}.fc-direction-ltr .fc-button-group>.fc-button:not(:first-child){border-bottom-left-radius:0;border-top-left-radius:0;margin-left:-1px}.fc-direction-ltr .fc-button-group>.fc-button:not(:last-child){border-bottom-right-radius:0;border-top-right-radius:0}.fc-direction-rtl .fc-button-group>.fc-button:not(:first-child){border-bottom-right-radius:0;border-top-right-radius:0;margin-right:-1px}.fc-direction-rtl .fc-button-group>.fc-button:not(:last-child){border-bottom-left-radius:0;border-top-left-radius:0}.fc .fc-toolbar{align-items:center;display:flex;justify-content:space-between}.fc .fc-toolbar.fc-header-toolbar{margin-bottom:1.5em}.fc .fc-toolbar.fc-footer-toolbar{margin-top:1.5em}.fc .fc-toolbar-title{font-size:1.75em;margin:0}.fc-direction-ltr .fc-toolbar>*>:not(:first-child){margin-left:.75em}.fc-direction-rtl .fc-toolbar>*>:not(:first-child){margin-right:.75em}.fc-direction-rtl .fc-toolbar-ltr{flex-direction:row-reverse}.fc .fc-scroller{-webkit-overflow-scrolling:touch;position:relative}.fc .fc-scroller-liquid{height:100%}.fc .fc-scroller-liquid-absolute{bottom:0;left:0;position:absolute;right:0;top:0}.fc .fc-scroller-harness{direction:ltr;overflow:hidden;position:relative}.fc .fc-scroller-harness-liquid{height:100%}.fc-direction-rtl .fc-scroller-harness>.fc-scroller{direction:rtl}.fc-theme-standard .fc-scrollgrid{border:1px solid var(--fc-border-color)}.fc .fc-scrollgrid,.fc .fc-scrollgrid table{table-layout:fixed;width:100%}.fc .fc-scrollgrid table{border-left-style:hidden;border-right-style:hidden;border-top-style:hidden}.fc .fc-scrollgrid{border-bottom-width:0;border-collapse:separate;border-right-width:0}.fc .fc-scrollgrid-liquid{height:100%}.fc .fc-scrollgrid-section,.fc .fc-scrollgrid-section table,.fc .fc-scrollgrid-section>td{height:1px}.fc .fc-scrollgrid-section-liquid>td{height:100%}.fc .fc-scrollgrid-section>*{border-left-width:0;border-top-width:0}.fc .fc-scrollgrid-section-footer>*,.fc .fc-scrollgrid-section-header>*{border-bottom-width:0}.fc .fc-scrollgrid-section-body table,.fc .fc-scrollgrid-section-footer table{border-bottom-style:hidden}.fc .fc-scrollgrid-section-sticky>*{background:var(--fc-page-bg-color);position:sticky;z-index:3}.fc .fc-scrollgrid-section-header.fc-scrollgrid-section-sticky>*{top:0}.fc .fc-scrollgrid-section-footer.fc-scrollgrid-section-sticky>*{bottom:0}.fc .fc-scrollgrid-sticky-shim{height:1px;margin-bottom:-1px}.fc-sticky{position:sticky}.fc .fc-view-harness{flex-grow:1;position:relative}.fc .fc-view-harness-active>.fc-view{bottom:0;left:0;position:absolute;right:0;top:0}.fc .fc-col-header-cell-cushion{display:inline-block;padding:2px 4px}.fc .fc-bg-event,.fc .fc-highlight,.fc .fc-non-business{bottom:0;left:0;position:absolute;right:0;top:0}.fc .fc-non-business{background:var(--fc-non-business-color)}.fc .fc-bg-event{background:var(--fc-bg-event-color);opacity:var(--fc-bg-event-opacity)}.fc .fc-bg-event .fc-event-title{font-size:var(--fc-small-font-size);font-style:italic;margin:.5em}.fc .fc-highlight{background:var(--fc-highlight-color)}.fc .fc-cell-shaded,.fc .fc-day-disabled{background:var(--fc-neutral-bg-color)}a.fc-event,a.fc-event:hover{text-decoration:none}.fc-event.fc-event-draggable,.fc-event[href]{cursor:pointer}.fc-event .fc-event-main{position:relative;z-index:2}.fc-event-dragging:not(.fc-event-selected){opacity:.75}.fc-event-dragging.fc-event-selected{box-shadow:0 2px 7px rgba(0,0,0,.3)}.fc-event .fc-event-resizer{display:none;position:absolute;z-index:4}.fc-event-selected .fc-event-resizer,.fc-event:hover .fc-event-resizer{display:block}.fc-event-selected .fc-event-resizer{background:var(--fc-page-bg-color);border-color:inherit;border-radius:calc(var(--fc-event-resizer-dot-total-width)/2);border-style:solid;border-width:var(--fc-event-resizer-dot-border-width);height:var(--fc-event-resizer-dot-total-width);width:var(--fc-event-resizer-dot-total-width)}.fc-event-selected .fc-event-resizer:before{bottom:-20px;content:"";left:-20px;position:absolute;right:-20px;top:-20px}.fc-event-selected,.fc-event:focus{box-shadow:0 2px 5px rgba(0,0,0,.2)}.fc-event-selected:before,.fc-event:focus:before{bottom:0;content:"";left:0;position:absolute;right:0;top:0;z-index:3}.fc-event-selected:after,.fc-event:focus:after{background:var(--fc-event-selected-overlay-color);bottom:-1px;content:"";left:-1px;position:absolute;right:-1px;top:-1px;z-index:1}.fc-h-event{background-color:var(--fc-event-bg-color);border:1px solid var(--fc-event-border-color);display:block}.fc-h-event .fc-event-main{color:var(--fc-event-text-color)}.fc-h-event .fc-event-main-frame{display:flex}.fc-h-event .fc-event-time{max-width:100%;overflow:hidden}.fc-h-event .fc-event-title-container{flex-grow:1;flex-shrink:1;min-width:0}.fc-h-event .fc-event-title{display:inline-block;left:0;max-width:100%;overflow:hidden;right:0;vertical-align:top}.fc-h-event.fc-event-selected:before{bottom:-10px;top:-10px}.fc-direction-ltr .fc-daygrid-block-event:not(.fc-event-start),.fc-direction-rtl .fc-daygrid-block-event:not(.fc-event-end){border-bottom-left-radius:0;border-left-width:0;border-top-left-radius:0}.fc-direction-ltr .fc-daygrid-block-event:not(.fc-event-end),.fc-direction-rtl .fc-daygrid-block-event:not(.fc-event-start){border-bottom-right-radius:0;border-right-width:0;border-top-right-radius:0}.fc-h-event:not(.fc-event-selected) .fc-event-resizer{bottom:0;top:0;width:var(--fc-event-resizer-thickness)}.fc-direction-ltr .fc-h-event:not(.fc-event-selected) .fc-event-resizer-start,.fc-direction-rtl .fc-h-event:not(.fc-event-selected) .fc-event-resizer-end{cursor:w-resize;left:calc(var(--fc-event-resizer-thickness)*-.5)}.fc-direction-ltr .fc-h-event:not(.fc-event-selected) .fc-event-resizer-end,.fc-direction-rtl .fc-h-event:not(.fc-event-selected) .fc-event-resizer-start{cursor:e-resize;right:calc(var(--fc-event-resizer-thickness)*-.5)}.fc-h-event.fc-event-selected .fc-event-resizer{margin-top:calc(var(--fc-event-resizer-dot-total-width)*-.5);top:50%}.fc-direction-ltr .fc-h-event.fc-event-selected .fc-event-resizer-start,.fc-direction-rtl .fc-h-event.fc-event-selected .fc-event-resizer-end{left:calc(var(--fc-event-resizer-dot-total-width)*-.5)}.fc-direction-ltr .fc-h-event.fc-event-selected .fc-event-resizer-end,.fc-direction-rtl .fc-h-event.fc-event-selected .fc-event-resizer-start{right:calc(var(--fc-event-resizer-dot-total-width)*-.5)}.fc .fc-popover{box-shadow:0 2px 6px rgba(0,0,0,.15);position:absolute;z-index:9999}.fc .fc-popover-header{align-items:center;display:flex;flex-direction:row;justify-content:space-between;padding:3px 4px}.fc .fc-popover-title{margin:0 2px}.fc .fc-popover-close{cursor:pointer;font-size:1.1em;opacity:.65}.fc-theme-standard .fc-popover{background:var(--fc-page-bg-color);border:1px solid var(--fc-border-color)}.fc-theme-standard .fc-popover-header{background:var(--fc-neutral-bg-color)}';W0(tM);class Ry{constructor(e){this.drainedOption=e,this.isRunning=!1,this.isDirty=!1,this.pauseDepths={},this.timeoutId=0}request(e){this.isDirty=!0,this.isPaused()||(this.clearTimeout(),e==null?this.tryDrain():this.timeoutId=setTimeout(this.tryDrain.bind(this),e))}pause(e=""){let{pauseDepths:t}=this;t[e]=(t[e]||0)+1,this.clearTimeout()}resume(e="",t){let{pauseDepths:r}=this;e in r&&(t?delete r[e]:(r[e]-=1,r[e]<=0&&delete r[e]),this.tryDrain())}isPaused(){return Object.keys(this.pauseDepths).length}tryDrain(){if(!this.isRunning&&!this.isPaused()){for(this.isRunning=!0;this.isDirty;)this.isDirty=!1,this.drained();this.isRunning=!1}}clear(){this.clearTimeout(),this.isDirty=!1,this.pauseDepths={}}clearTimeout(){this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=0)}drained(){this.drainedOption&&this.drainedOption()}}function nM(n){n.parentNode&&n.parentNode.removeChild(n)}function Kr(n,e){if(n.closest)return n.closest(e);if(!document.documentElement.contains(n))return null;do{if(rM(n,e))return n;n=n.parentElement||n.parentNode}while(n!==null&&n.nodeType===1);return null}function rM(n,e){return(n.matches||n.matchesSelector||n.msMatchesSelector).call(n,e)}function iM(n,e){let t=n instanceof HTMLElement?[n]:n,r=[];for(let i=0;i<t.length;i+=1){let o=t[i].querySelectorAll(e);for(let l=0;l<o.length;l+=1)r.push(o[l])}return r}const sM=/(top|left|right|bottom|width|height)$/i;function oM(n,e){for(let t in e)$0(n,t,e[t])}function $0(n,e,t){t==null?n.style[e]="":typeof t=="number"&&sM.test(e)?n.style[e]=`${t}px`:n.style[e]=t}function aM(n){var e,t;return(t=(e=n.composedPath)===null||e===void 0?void 0:e.call(n)[0])!==null&&t!==void 0?t:n.target}let AT=0;function Rf(){return AT+=1,"fc-dom-"+AT}function lM(n,e){return t=>{let r=Kr(t.target,n);r&&e.call(r,t,r)}}function Q0(n,e,t,r){let i=lM(t,r);return n.addEventListener(e,i),()=>{n.removeEventListener(e,i)}}function uM(n,e,t,r){let i;return Q0(n,"mouseover",e,(o,l)=>{if(l!==i){i=l,t(o,l);let c=f=>{i=null,r(f,l),l.removeEventListener("mouseleave",c)};l.addEventListener("mouseleave",c)}})}function K0(n){return Object.assign({onClick:n},Y0(n))}function Y0(n){return{tabIndex:0,onKeyDown(e){(e.key==="Enter"||e.key===" ")&&(n(e),e.preventDefault())}}}let IT=0;function Io(){return IT+=1,String(IT)}function cM(n){let e=[],t=[],r,i;for(typeof n=="string"?t=n.split(/\s*,\s*/):typeof n=="function"?t=[n]:Array.isArray(n)&&(t=n),r=0;r<t.length;r+=1)i=t[r],typeof i=="string"?e.push(i.charAt(0)==="-"?{field:i.substring(1),order:-1}:{field:i,order:1}):typeof i=="function"&&e.push({func:i});return e}function dM(n,e,t){let r,i;for(r=0;r<t.length;r+=1)if(i=hM(n,e,t[r]),i)return i;return 0}function hM(n,e,t){return t.func?t.func(n,e):fM(n[t.field],e[t.field])*(t.order||1)}function fM(n,e){return!n&&!e?0:e==null?-1:n==null?1:typeof n=="string"||typeof e=="string"?String(n).localeCompare(String(e)):n-e}function Em(n,e){let t=String(n);return"000".substr(0,e-t.length)+t}function Su(n,e,t){return typeof n=="function"?n(...e):typeof n=="string"?e.reduce((r,i,o)=>r.replace("$"+o,i||""),n):t}function wm(n){return n%1===0}function pM(n){let e=n.querySelector(".fc-scrollgrid-shrink-frame"),t=n.querySelector(".fc-scrollgrid-shrink-cushion");if(!e)throw new Error("needs fc-scrollgrid-shrink-frame className");if(!t)throw new Error("needs fc-scrollgrid-shrink-cushion className");return n.getBoundingClientRect().width-e.getBoundingClientRect().width+t.getBoundingClientRect().width}const mM=/^(-?)(?:(\d+)\.)?(\d+):(\d\d)(?::(\d\d)(?:\.(\d\d\d))?)?/;function Qe(n,e){return typeof n=="string"?gM(n):typeof n=="object"&&n?ST(n):typeof n=="number"?ST({[e||"milliseconds"]:n}):null}function gM(n){let e=mM.exec(n);if(e){let t=e[1]?-1:1;return{years:0,months:0,days:t*(e[2]?parseInt(e[2],10):0),milliseconds:t*((e[3]?parseInt(e[3],10):0)*60*60*1e3+(e[4]?parseInt(e[4],10):0)*60*1e3+(e[5]?parseInt(e[5],10):0)*1e3+(e[6]?parseInt(e[6],10):0))}}return null}function ST(n){let e={years:n.years||n.year||0,months:n.months||n.month||0,days:n.days||n.day||0,milliseconds:(n.hours||n.hour||0)*60*60*1e3+(n.minutes||n.minute||0)*60*1e3+(n.seconds||n.second||0)*1e3+(n.milliseconds||n.millisecond||n.ms||0)},t=n.weeks||n.week;return t&&(e.days+=t*7,e.specifiedWeeks=!0),e}function yM(n,e){return n.years===e.years&&n.months===e.months&&n.days===e.days&&n.milliseconds===e.milliseconds}function vM(n,e){return{years:n.years-e.years,months:n.months-e.months,days:n.days-e.days,milliseconds:n.milliseconds-e.milliseconds}}function _M(n){return Ma(n)/365}function EM(n){return Ma(n)/30}function Ma(n){return $u(n)/864e5}function $u(n){return n.years*(365*864e5)+n.months*(30*864e5)+n.days*864e5+n.milliseconds}function vg(n){let e=n.milliseconds;if(e){if(e%1e3!==0)return{unit:"millisecond",value:e};if(e%(1e3*60)!==0)return{unit:"second",value:e/1e3};if(e%(1e3*60*60)!==0)return{unit:"minute",value:e/(1e3*60)};if(e)return{unit:"hour",value:e/(1e3*60*60)}}return n.days?n.specifiedWeeks&&n.days%7===0?{unit:"week",value:n.days/7}:{unit:"day",value:n.days}:n.months?{unit:"month",value:n.months}:n.years?{unit:"year",value:n.years}:{unit:"millisecond",value:0}}function ps(n,e,t){if(n===e)return!0;let r=n.length,i;if(r!==e.length)return!1;for(i=0;i<r;i+=1)if(!(t?t(n[i],e[i]):n[i]===e[i]))return!1;return!0}const wM=["sun","mon","tue","wed","thu","fri","sat"];function RT(n,e){let t=Ji(n);return t[2]+=e*7,gn(t)}function Ft(n,e){let t=Ji(n);return t[2]+=e,gn(t)}function ms(n,e){let t=Ji(n);return t[6]+=e,gn(t)}function TM(n,e){return ll(n,e)/7}function ll(n,e){return(e.valueOf()-n.valueOf())/(1e3*60*60*24)}function AM(n,e){return(e.valueOf()-n.valueOf())/(1e3*60*60)}function IM(n,e){return(e.valueOf()-n.valueOf())/(1e3*60)}function SM(n,e){return(e.valueOf()-n.valueOf())/1e3}function RM(n,e){let t=dt(n),r=dt(e);return{years:0,months:0,days:Math.round(ll(t,r)),milliseconds:e.valueOf()-r.valueOf()-(n.valueOf()-t.valueOf())}}function CM(n,e){let t=Bh(n,e);return t!==null&&t%7===0?t/7:null}function Bh(n,e){return Xi(n)===Xi(e)?Math.round(ll(n,e)):null}function dt(n){return gn([n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate()])}function bM(n){return gn([n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate(),n.getUTCHours()])}function DM(n){return gn([n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate(),n.getUTCHours(),n.getUTCMinutes()])}function kM(n){return gn([n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate(),n.getUTCHours(),n.getUTCMinutes(),n.getUTCSeconds()])}function PM(n,e,t){let r=n.getUTCFullYear(),i=Tm(n,r,e,t);if(i<1)return Tm(n,r-1,e,t);let o=Tm(n,r+1,e,t);return o>=1?Math.min(i,o):i}function Tm(n,e,t,r){let i=gn([e,0,1+xM(e,t,r)]),o=dt(n),l=Math.round(ll(i,o));return Math.floor(l/7)+1}function xM(n,e,t){let r=7+e-t;return-((7+gn([n,0,r]).getUTCDay()-e)%7)+r-1}function CT(n){return[n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()]}function bT(n){return new Date(n[0],n[1]||0,n[2]==null?1:n[2],n[3]||0,n[4]||0,n[5]||0)}function Ji(n){return[n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate(),n.getUTCHours(),n.getUTCMinutes(),n.getUTCSeconds(),n.getUTCMilliseconds()]}function gn(n){return n.length===1&&(n=n.concat([0])),new Date(Date.UTC(...n))}function J0(n){return!isNaN(n.valueOf())}function Xi(n){return n.getUTCHours()*1e3*60*60+n.getUTCMinutes()*1e3*60+n.getUTCSeconds()*1e3+n.getUTCMilliseconds()}function NM(n,e,t=!1){let r=n.toISOString();return r=r.replace(".000",""),t&&(r=r.replace("T00:00:00Z","")),r.length>10&&(e==null?r=r.replace("Z",""):e!==0&&(r=r.replace("Z",by(e,!0)))),r}function Cy(n){return n.toISOString().replace(/T.*$/,"")}function OM(n){return n.toISOString().match(/^\d{4}-\d{2}/)[0]}function by(n,e=!1){let t=n<0?"-":"+",r=Math.abs(n),i=Math.floor(r/60),o=Math.round(r%60);return e?`${t+Em(i,2)}:${Em(o,2)}`:`GMT${t}${i}${o?`:${Em(o,2)}`:""}`}function He(n,e,t){let r,i;return function(...o){if(!r)i=n.apply(this,o);else if(!ps(r,o)){let l=n.apply(this,o);(!e||!e(l,i))&&(i=l)}return r=o,i}}function lh(n,e,t){let r,i;return o=>(r?nr(r,o)||(i=n.call(this,o)):i=n.call(this,o),r=o,i)}const Am={week:3,separator:9,omitZeroMinute:9,meridiem:9,omitCommas:9},zh={timeZoneName:7,era:6,year:5,month:4,day:2,weekday:2,hour:1,minute:1,second:1},Fd=/\s*([ap])\.?m\.?/i,MM=/,/g,VM=/\s+/g,LM=/\u200e/g,FM=/UTC|GMT/;class UM{constructor(e){let t={},r={},i=9;for(let o in e)o in Am?(r[o]=e[o],Am[o]<9&&(i=Math.min(Am[o],i))):(t[o]=e[o],o in zh&&(i=Math.min(zh[o],i)));this.standardDateProps=t,this.extendedSettings=r,this.smallestUnitNum=i,this.buildFormattingFunc=He(DT)}format(e,t){return this.buildFormattingFunc(this.standardDateProps,this.extendedSettings,t)(e)}formatRange(e,t,r,i){let{standardDateProps:o,extendedSettings:l}=this,c=qM(e.marker,t.marker,r.calendarSystem);if(!c)return this.format(e,r);let f=c;f>1&&(o.year==="numeric"||o.year==="2-digit")&&(o.month==="numeric"||o.month==="2-digit")&&(o.day==="numeric"||o.day==="2-digit")&&(f=1);let p=this.format(e,r),g=this.format(t,r);if(p===g)return p;let E=GM(o,f),w=DT(E,l,r),A=w(e),b=w(t),V=$M(p,A,g,b),x=l.separator||i||r.defaultSeparator||"";return V?V.before+A+x+b+V.after:p+x+g}getSmallestUnit(){switch(this.smallestUnitNum){case 7:case 6:case 5:return"year";case 4:return"month";case 3:return"week";case 2:return"day";default:return"time"}}}function DT(n,e,t){let r=Object.keys(n).length;return r===1&&n.timeZoneName==="short"?i=>by(i.timeZoneOffset):r===0&&e.week?i=>WM(t.computeWeekNumber(i.marker),t.weekText,t.weekTextLong,t.locale,e.week):BM(n,e,t)}function BM(n,e,t){n=Object.assign({},n),e=Object.assign({},e),zM(n,e),n.timeZone="UTC";let r=new Intl.DateTimeFormat(t.locale.codes,n),i;if(e.omitZeroMinute){let o=Object.assign({},n);delete o.minute,i=new Intl.DateTimeFormat(t.locale.codes,o)}return o=>{let{marker:l}=o,c;i&&!l.getUTCMinutes()?c=i:c=r;let f=c.format(l);return jM(f,o,n,e,t)}}function zM(n,e){n.timeZoneName&&(n.hour||(n.hour="2-digit"),n.minute||(n.minute="2-digit")),n.timeZoneName==="long"&&(n.timeZoneName="short"),e.omitZeroMinute&&(n.second||n.millisecond)&&delete e.omitZeroMinute}function jM(n,e,t,r,i){return n=n.replace(LM,""),t.timeZoneName==="short"&&(n=HM(n,i.timeZone==="UTC"||e.timeZoneOffset==null?"UTC":by(e.timeZoneOffset))),r.omitCommas&&(n=n.replace(MM,"").trim()),r.omitZeroMinute&&(n=n.replace(":00","")),r.meridiem===!1?n=n.replace(Fd,"").trim():r.meridiem==="narrow"?n=n.replace(Fd,(o,l)=>l.toLocaleLowerCase()):r.meridiem==="short"?n=n.replace(Fd,(o,l)=>`${l.toLocaleLowerCase()}m`):r.meridiem==="lowercase"&&(n=n.replace(Fd,o=>o.toLocaleLowerCase())),n=n.replace(VM," "),n=n.trim(),n}function HM(n,e){let t=!1;return n=n.replace(FM,()=>(t=!0,e)),t||(n+=` ${e}`),n}function WM(n,e,t,r,i){let o=[];return i==="long"?o.push(t):(i==="short"||i==="narrow")&&o.push(e),(i==="long"||i==="short")&&o.push(" "),o.push(r.simpleNumberFormat.format(n)),r.options.direction==="rtl"&&o.reverse(),o.join("")}function qM(n,e,t){return t.getMarkerYear(n)!==t.getMarkerYear(e)?5:t.getMarkerMonth(n)!==t.getMarkerMonth(e)?4:t.getMarkerDay(n)!==t.getMarkerDay(e)?2:Xi(n)!==Xi(e)?1:0}function GM(n,e){let t={};for(let r in n)(!(r in zh)||zh[r]<=e)&&(t[r]=n[r]);return t}function $M(n,e,t,r){let i=0;for(;i<n.length;){let o=n.indexOf(e,i);if(o===-1)break;let l=n.substr(0,o);i=o+e.length;let c=n.substr(i),f=0;for(;f<t.length;){let p=t.indexOf(r,f);if(p===-1)break;let g=t.substr(0,p);f=p+r.length;let E=t.substr(f);if(l===g&&c===E)return{before:l,after:c}}}return null}function kT(n,e){let t=e.markerToArray(n.marker);return{marker:n.marker,timeZoneOffset:n.timeZoneOffset,array:t,year:t[0],month:t[1],day:t[2],hour:t[3],minute:t[4],second:t[5],millisecond:t[6]}}function jh(n,e,t,r){let i=kT(n,t.calendarSystem),o=e?kT(e,t.calendarSystem):null;return{date:i,start:i,end:o,timeZone:t.timeZone,localeCodes:t.locale.codes,defaultSeparator:r||t.defaultSeparator}}class QM{constructor(e){this.cmdStr=e}format(e,t,r){return t.cmdFormatter(this.cmdStr,jh(e,null,t,r))}formatRange(e,t,r,i){return r.cmdFormatter(this.cmdStr,jh(e,t,r,i))}}class KM{constructor(e){this.func=e}format(e,t,r){return this.func(jh(e,null,t,r))}formatRange(e,t,r,i){return this.func(jh(e,t,r,i))}}function Lt(n){return typeof n=="object"&&n?new UM(n):typeof n=="string"?new QM(n):typeof n=="function"?new KM(n):null}const PT={navLinkDayClick:$,navLinkWeekClick:$,duration:Qe,bootstrapFontAwesome:$,buttonIcons:$,customButtons:$,defaultAllDayEventDuration:Qe,defaultTimedEventDuration:Qe,nextDayThreshold:Qe,scrollTime:Qe,scrollTimeReset:Boolean,slotMinTime:Qe,slotMaxTime:Qe,dayPopoverFormat:Lt,slotDuration:Qe,snapDuration:Qe,headerToolbar:$,footerToolbar:$,defaultRangeSeparator:String,titleRangeSeparator:String,forceEventDuration:Boolean,dayHeaders:Boolean,dayHeaderFormat:Lt,dayHeaderClassNames:$,dayHeaderContent:$,dayHeaderDidMount:$,dayHeaderWillUnmount:$,dayCellClassNames:$,dayCellContent:$,dayCellDidMount:$,dayCellWillUnmount:$,initialView:String,aspectRatio:Number,weekends:Boolean,weekNumberCalculation:$,weekNumbers:Boolean,weekNumberClassNames:$,weekNumberContent:$,weekNumberDidMount:$,weekNumberWillUnmount:$,editable:Boolean,viewClassNames:$,viewDidMount:$,viewWillUnmount:$,nowIndicator:Boolean,nowIndicatorSnap:$,nowIndicatorClassNames:$,nowIndicatorContent:$,nowIndicatorDidMount:$,nowIndicatorWillUnmount:$,showNonCurrentDates:Boolean,lazyFetching:Boolean,startParam:String,endParam:String,timeZoneParam:String,timeZone:String,locales:$,locale:$,themeSystem:String,dragRevertDuration:Number,dragScroll:Boolean,allDayMaintainDuration:Boolean,unselectAuto:Boolean,dropAccept:$,eventOrder:cM,eventOrderStrict:Boolean,handleWindowResize:Boolean,windowResizeDelay:Number,longPressDelay:Number,eventDragMinDistance:Number,expandRows:Boolean,height:$,contentHeight:$,direction:String,weekNumberFormat:Lt,eventResizableFromStart:Boolean,displayEventTime:Boolean,displayEventEnd:Boolean,weekText:String,weekTextLong:String,progressiveEventRendering:Boolean,businessHours:$,initialDate:$,now:$,eventDataTransform:$,stickyHeaderDates:$,stickyFooterScrollbar:$,viewHeight:$,defaultAllDay:Boolean,eventSourceFailure:$,eventSourceSuccess:$,eventDisplay:String,eventStartEditable:Boolean,eventDurationEditable:Boolean,eventOverlap:$,eventConstraint:$,eventAllow:$,eventBackgroundColor:String,eventBorderColor:String,eventTextColor:String,eventColor:String,eventClassNames:$,eventContent:$,eventDidMount:$,eventWillUnmount:$,selectConstraint:$,selectOverlap:$,selectAllow:$,droppable:Boolean,unselectCancel:String,slotLabelFormat:$,slotLaneClassNames:$,slotLaneContent:$,slotLaneDidMount:$,slotLaneWillUnmount:$,slotLabelClassNames:$,slotLabelContent:$,slotLabelDidMount:$,slotLabelWillUnmount:$,dayMaxEvents:$,dayMaxEventRows:$,dayMinWidth:Number,slotLabelInterval:Qe,allDayText:String,allDayClassNames:$,allDayContent:$,allDayDidMount:$,allDayWillUnmount:$,slotMinWidth:Number,navLinks:Boolean,eventTimeFormat:Lt,rerenderDelay:Number,moreLinkText:$,moreLinkHint:$,selectMinDistance:Number,selectable:Boolean,selectLongPressDelay:Number,eventLongPressDelay:Number,selectMirror:Boolean,eventMaxStack:Number,eventMinHeight:Number,eventMinWidth:Number,eventShortHeight:Number,slotEventOverlap:Boolean,plugins:$,firstDay:Number,dayCount:Number,dateAlignment:String,dateIncrement:Qe,hiddenDays:$,fixedWeekCount:Boolean,validRange:$,visibleRange:$,titleFormat:$,eventInteractive:Boolean,noEventsText:String,viewHint:$,navLinkHint:$,closeHint:String,timeHint:String,eventHint:String,moreLinkClick:$,moreLinkClassNames:$,moreLinkContent:$,moreLinkDidMount:$,moreLinkWillUnmount:$,monthStartFormat:Lt,handleCustomRendering:$,customRenderingMetaMap:$,customRenderingReplaces:Boolean},Ru={eventDisplay:"auto",defaultRangeSeparator:" - ",titleRangeSeparator:" – ",defaultTimedEventDuration:"01:00:00",defaultAllDayEventDuration:{day:1},forceEventDuration:!1,nextDayThreshold:"00:00:00",dayHeaders:!0,initialView:"",aspectRatio:1.35,headerToolbar:{start:"title",center:"",end:"today prev,next"},weekends:!0,weekNumbers:!1,weekNumberCalculation:"local",editable:!1,nowIndicator:!1,scrollTime:"06:00:00",scrollTimeReset:!0,slotMinTime:"00:00:00",slotMaxTime:"24:00:00",showNonCurrentDates:!0,lazyFetching:!0,startParam:"start",endParam:"end",timeZoneParam:"timeZone",timeZone:"local",locales:[],locale:"",themeSystem:"standard",dragRevertDuration:500,dragScroll:!0,allDayMaintainDuration:!1,unselectAuto:!0,dropAccept:"*",eventOrder:"start,-duration,allDay,title",dayPopoverFormat:{month:"long",day:"numeric",year:"numeric"},handleWindowResize:!0,windowResizeDelay:100,longPressDelay:1e3,eventDragMinDistance:5,expandRows:!1,navLinks:!1,selectable:!1,eventMinHeight:15,eventMinWidth:30,eventShortHeight:30,monthStartFormat:{month:"long",day:"numeric"},nowIndicatorSnap:"auto"},xT={datesSet:$,eventsSet:$,eventAdd:$,eventChange:$,eventRemove:$,windowResize:$,eventClick:$,eventMouseEnter:$,eventMouseLeave:$,select:$,unselect:$,loading:$,_unmount:$,_beforeprint:$,_afterprint:$,_noEventDrop:$,_noEventResize:$,_resize:$,_scrollRequest:$},NT={buttonText:$,buttonHints:$,views:$,plugins:$,initialEvents:$,events:$,eventSources:$},Js={headerToolbar:Xs,footerToolbar:Xs,buttonText:Xs,buttonHints:Xs,buttonIcons:Xs,dateIncrement:Xs,plugins:Ud,events:Ud,eventSources:Ud,resources:Ud};function Xs(n,e){return typeof n=="object"&&typeof e=="object"&&n&&e?nr(n,e):n===e}function Ud(n,e){return Array.isArray(n)&&Array.isArray(e)?ps(n,e):n===e}const YM={type:String,component:$,buttonText:String,buttonTextKey:String,dateProfileGeneratorClass:$,usesMinMaxTime:Boolean,classNames:$,content:$,didMount:$,willUnmount:$};function Im(n){return ky(n,Js)}function Dy(n,e){let t={},r={};for(let i in e)i in n&&(t[i]=e[i](n[i]));for(let i in n)i in e||(r[i]=n[i]);return{refined:t,extra:r}}function $(n){return n}const{hasOwnProperty:Hh}=Object.prototype;function ky(n,e){let t={};if(e){for(let r in e)if(e[r]===Xs){let i=[];for(let o=n.length-1;o>=0;o-=1){let l=n[o][r];if(typeof l=="object"&&l)i.unshift(l);else if(l!==void 0){t[r]=l;break}}i.length&&(t[r]=ky(i))}}for(let r=n.length-1;r>=0;r-=1){let i=n[r];for(let o in i)o in t||(t[o]=i[o])}return t}function Za(n,e){let t={};for(let r in n)e(n[r],r)&&(t[r]=n[r]);return t}function cc(n,e){let t={};for(let r in n)t[r]=e(n[r],r);return t}function X0(n){let e={};for(let t of n)e[t]=!0;return e}function Py(n){let e=[];for(let t in n)e.push(n[t]);return e}function nr(n,e){if(n===e)return!0;for(let t in n)if(Hh.call(n,t)&&!(t in e))return!1;for(let t in e)if(Hh.call(e,t)&&n[t]!==e[t])return!1;return!0}const JM=/^on[A-Z]/;function XM(n,e){const t=ZM(n,e);for(let r of t)if(!JM.test(r))return!1;return!0}function ZM(n,e){let t=[];for(let r in n)Hh.call(n,r)&&(r in e||t.push(r));for(let r in e)Hh.call(e,r)&&n[r]!==e[r]&&t.push(r);return t}function Sm(n,e,t={}){if(n===e)return!0;for(let r in e)if(!(r in n&&eV(n[r],e[r],t[r])))return!1;for(let r in n)if(!(r in e))return!1;return!0}function eV(n,e,t){return n===e||t===!0?!0:t?t(n,e):!1}function tV(n,e=0,t,r=1){let i=[];t==null&&(t=Object.keys(n).length);for(let o=e;o<t;o+=r){let l=n[o];l!==void 0&&i.push(l)}return i}let Z0={};function nV(n,e){Z0[n]=e}function rV(n){return new Z0[n]}class iV{getMarkerYear(e){return e.getUTCFullYear()}getMarkerMonth(e){return e.getUTCMonth()}getMarkerDay(e){return e.getUTCDate()}arrayToMarker(e){return gn(e)}markerToArray(e){return Ji(e)}}nV("gregory",iV);const sV=/^\s*(\d{4})(-?(\d{2})(-?(\d{2})([T ](\d{2}):?(\d{2})(:?(\d{2})(\.(\d+))?)?(Z|(([-+])(\d{2})(:?(\d{2}))?))?)?)?)?$/;function oV(n){let e=sV.exec(n);if(e){let t=new Date(Date.UTC(Number(e[1]),e[3]?Number(e[3])-1:0,Number(e[5]||1),Number(e[7]||0),Number(e[8]||0),Number(e[10]||0),e[12]?+`0.${e[12]}`*1e3:0));if(J0(t)){let r=null;return e[13]&&(r=(e[15]==="-"?-1:1)*(Number(e[16]||0)*60+Number(e[18]||0))),{marker:t,isTimeUnspecified:!e[6],timeZoneOffset:r}}}return null}class aV{constructor(e){let t=this.timeZone=e.timeZone,r=t!=="local"&&t!=="UTC";e.namedTimeZoneImpl&&r&&(this.namedTimeZoneImpl=new e.namedTimeZoneImpl(t)),this.canComputeOffset=!!(!r||this.namedTimeZoneImpl),this.calendarSystem=rV(e.calendarSystem),this.locale=e.locale,this.weekDow=e.locale.week.dow,this.weekDoy=e.locale.week.doy,e.weekNumberCalculation==="ISO"&&(this.weekDow=1,this.weekDoy=4),typeof e.firstDay=="number"&&(this.weekDow=e.firstDay),typeof e.weekNumberCalculation=="function"&&(this.weekNumberFunc=e.weekNumberCalculation),this.weekText=e.weekText!=null?e.weekText:e.locale.options.weekText,this.weekTextLong=(e.weekTextLong!=null?e.weekTextLong:e.locale.options.weekTextLong)||this.weekText,this.cmdFormatter=e.cmdFormatter,this.defaultSeparator=e.defaultSeparator}createMarker(e){let t=this.createMarkerMeta(e);return t===null?null:t.marker}createNowMarker(){return this.canComputeOffset?this.timestampToMarker(new Date().valueOf()):gn(CT(new Date))}createMarkerMeta(e){if(typeof e=="string")return this.parse(e);let t=null;return typeof e=="number"?t=this.timestampToMarker(e):e instanceof Date?(e=e.valueOf(),isNaN(e)||(t=this.timestampToMarker(e))):Array.isArray(e)&&(t=gn(e)),t===null||!J0(t)?null:{marker:t,isTimeUnspecified:!1,forcedTzo:null}}parse(e){let t=oV(e);if(t===null)return null;let{marker:r}=t,i=null;return t.timeZoneOffset!==null&&(this.canComputeOffset?r=this.timestampToMarker(r.valueOf()-t.timeZoneOffset*60*1e3):i=t.timeZoneOffset),{marker:r,isTimeUnspecified:t.isTimeUnspecified,forcedTzo:i}}getYear(e){return this.calendarSystem.getMarkerYear(e)}getMonth(e){return this.calendarSystem.getMarkerMonth(e)}getDay(e){return this.calendarSystem.getMarkerDay(e)}add(e,t){let r=this.calendarSystem.markerToArray(e);return r[0]+=t.years,r[1]+=t.months,r[2]+=t.days,r[6]+=t.milliseconds,this.calendarSystem.arrayToMarker(r)}subtract(e,t){let r=this.calendarSystem.markerToArray(e);return r[0]-=t.years,r[1]-=t.months,r[2]-=t.days,r[6]-=t.milliseconds,this.calendarSystem.arrayToMarker(r)}addYears(e,t){let r=this.calendarSystem.markerToArray(e);return r[0]+=t,this.calendarSystem.arrayToMarker(r)}addMonths(e,t){let r=this.calendarSystem.markerToArray(e);return r[1]+=t,this.calendarSystem.arrayToMarker(r)}diffWholeYears(e,t){let{calendarSystem:r}=this;return Xi(e)===Xi(t)&&r.getMarkerDay(e)===r.getMarkerDay(t)&&r.getMarkerMonth(e)===r.getMarkerMonth(t)?r.getMarkerYear(t)-r.getMarkerYear(e):null}diffWholeMonths(e,t){let{calendarSystem:r}=this;return Xi(e)===Xi(t)&&r.getMarkerDay(e)===r.getMarkerDay(t)?r.getMarkerMonth(t)-r.getMarkerMonth(e)+(r.getMarkerYear(t)-r.getMarkerYear(e))*12:null}greatestWholeUnit(e,t){let r=this.diffWholeYears(e,t);return r!==null?{unit:"year",value:r}:(r=this.diffWholeMonths(e,t),r!==null?{unit:"month",value:r}:(r=CM(e,t),r!==null?{unit:"week",value:r}:(r=Bh(e,t),r!==null?{unit:"day",value:r}:(r=AM(e,t),wm(r)?{unit:"hour",value:r}:(r=IM(e,t),wm(r)?{unit:"minute",value:r}:(r=SM(e,t),wm(r)?{unit:"second",value:r}:{unit:"millisecond",value:t.valueOf()-e.valueOf()}))))))}countDurationsBetween(e,t,r){let i;return r.years&&(i=this.diffWholeYears(e,t),i!==null)?i/_M(r):r.months&&(i=this.diffWholeMonths(e,t),i!==null)?i/EM(r):r.days&&(i=Bh(e,t),i!==null)?i/Ma(r):(t.valueOf()-e.valueOf())/$u(r)}startOf(e,t){return t==="year"?this.startOfYear(e):t==="month"?this.startOfMonth(e):t==="week"?this.startOfWeek(e):t==="day"?dt(e):t==="hour"?bM(e):t==="minute"?DM(e):t==="second"?kM(e):null}startOfYear(e){return this.calendarSystem.arrayToMarker([this.calendarSystem.getMarkerYear(e)])}startOfMonth(e){return this.calendarSystem.arrayToMarker([this.calendarSystem.getMarkerYear(e),this.calendarSystem.getMarkerMonth(e)])}startOfWeek(e){return this.calendarSystem.arrayToMarker([this.calendarSystem.getMarkerYear(e),this.calendarSystem.getMarkerMonth(e),e.getUTCDate()-(e.getUTCDay()-this.weekDow+7)%7])}computeWeekNumber(e){return this.weekNumberFunc?this.weekNumberFunc(this.toDate(e)):PM(e,this.weekDow,this.weekDoy)}format(e,t,r={}){return t.format({marker:e,timeZoneOffset:r.forcedTzo!=null?r.forcedTzo:this.offsetForMarker(e)},this)}formatRange(e,t,r,i={}){return i.isEndExclusive&&(t=ms(t,-1)),r.formatRange({marker:e,timeZoneOffset:i.forcedStartTzo!=null?i.forcedStartTzo:this.offsetForMarker(e)},{marker:t,timeZoneOffset:i.forcedEndTzo!=null?i.forcedEndTzo:this.offsetForMarker(t)},this,i.defaultSeparator)}formatIso(e,t={}){let r=null;return t.omitTimeZoneOffset||(t.forcedTzo!=null?r=t.forcedTzo:r=this.offsetForMarker(e)),NM(e,r,t.omitTime)}timestampToMarker(e){return this.timeZone==="local"?gn(CT(new Date(e))):this.timeZone==="UTC"||!this.namedTimeZoneImpl?new Date(e):gn(this.namedTimeZoneImpl.timestampToArray(e))}offsetForMarker(e){return this.timeZone==="local"?-bT(Ji(e)).getTimezoneOffset():this.timeZone==="UTC"?0:this.namedTimeZoneImpl?this.namedTimeZoneImpl.offsetForArray(Ji(e)):null}toDate(e,t){return this.timeZone==="local"?bT(Ji(e)):this.timeZone==="UTC"?new Date(e.valueOf()):this.namedTimeZoneImpl?new Date(e.valueOf()-this.namedTimeZoneImpl.offsetForArray(Ji(e))*1e3*60):new Date(e.valueOf()-(t||0))}}class dc{constructor(e){this.iconOverrideOption&&this.setIconOverride(e[this.iconOverrideOption])}setIconOverride(e){let t,r;if(typeof e=="object"&&e){t=Object.assign({},this.iconClasses);for(r in e)t[r]=this.applyIconOverridePrefix(e[r]);this.iconClasses=t}else e===!1&&(this.iconClasses={})}applyIconOverridePrefix(e){let t=this.iconOverridePrefix;return t&&e.indexOf(t)!==0&&(e=t+e),e}getClass(e){return this.classes[e]||""}getIconClass(e,t){let r;return t&&this.rtlIconClasses?r=this.rtlIconClasses[e]||this.iconClasses[e]:r=this.iconClasses[e],r?`${this.baseIconClass} ${r}`:""}getCustomButtonIconClass(e){let t;return this.iconOverrideCustomButtonOption&&(t=e[this.iconOverrideCustomButtonOption],t)?`${this.baseIconClass} ${this.applyIconOverridePrefix(t)}`:""}}dc.prototype.classes={};dc.prototype.iconClasses={};dc.prototype.baseIconClass="";dc.prototype.iconOverridePrefix="";function Wh(n){n();let e=Ae.debounceRendering,t=[];function r(i){t.push(i)}for(Ae.debounceRendering=r,Gu(G(lV,{}),document.createElement("div"));t.length;)t.shift()();Ae.debounceRendering=e}class lV extends Dn{render(){return G("div",{})}componentDidMount(){this.setState({})}}function eR(n){let e=VO(n),t=e.Provider;return e.Provider=function(){let r=!this.getChildContext,i=t.apply(this,arguments);if(r){let o=[];this.shouldComponentUpdate=l=>{this.props.value!==l.value&&o.forEach(c=>{c.context=l.value,c.forceUpdate()})},this.sub=l=>{o.push(l);let c=l.componentWillUnmount;l.componentWillUnmount=()=>{o.splice(o.indexOf(l),1),c&&c.call(l)}}}return i},e}class uV{constructor(e,t,r,i){this.execFunc=e,this.emitter=t,this.scrollTime=r,this.scrollTimeReset=i,this.handleScrollRequest=o=>{this.queuedRequest=Object.assign({},this.queuedRequest||{},o),this.drain()},t.on("_scrollRequest",this.handleScrollRequest),this.fireInitialScroll()}detach(){this.emitter.off("_scrollRequest",this.handleScrollRequest)}update(e){e&&this.scrollTimeReset?this.fireInitialScroll():this.drain()}fireInitialScroll(){this.handleScrollRequest({time:this.scrollTime})}drain(){this.queuedRequest&&this.execFunc(this.queuedRequest)&&(this.queuedRequest=null)}}const So=eR({});function cV(n,e,t,r,i,o,l,c,f,p,g,E,w,A){return{dateEnv:i,nowManager:o,options:t,pluginHooks:c,emitter:g,dispatch:f,getCurrentData:p,calendarApi:E,viewSpec:n,viewApi:e,dateProfileGenerator:r,theme:l,isRtl:t.direction==="rtl",addResizeHandler(b){g.on("_resize",b)},removeResizeHandler(b){g.off("_resize",b)},createScrollResponder(b){return new uV(b,g,Qe(t.scrollTime),t.scrollTimeReset)},registerInteractiveComponent:w,unregisterInteractiveComponent:A}}class Ro extends Dn{shouldComponentUpdate(e,t){return!Sm(this.props,e,this.propEquality)||!Sm(this.state,t,this.stateEquality)}safeSetState(e){Sm(this.state,Object.assign(Object.assign({},this.state),e),this.stateEquality)||this.setState(e)}}Ro.addPropsEquality=dV;Ro.addStateEquality=hV;Ro.contextType=So;Ro.prototype.propEquality={};Ro.prototype.stateEquality={};class ht extends Ro{}ht.contextType=So;function dV(n){let e=Object.create(this.prototype.propEquality);Object.assign(e,n),this.prototype.propEquality=e}function hV(n){let e=Object.create(this.prototype.stateEquality);Object.assign(e,n),this.prototype.stateEquality=e}function kr(n,e){typeof n=="function"?n(e):n&&(n.current=e)}class xy extends ht{constructor(){super(...arguments),this.id=Io(),this.queuedDomNodes=[],this.currentDomNodes=[],this.handleEl=e=>{const{options:t}=this.context,{generatorName:r}=this.props;(!t.customRenderingReplaces||!_g(r,t))&&this.updateElRef(e)},this.updateElRef=e=>{this.props.elRef&&kr(this.props.elRef,e)}}render(){const{props:e,context:t}=this,{options:r}=t,{customGenerator:i,defaultGenerator:o,renderProps:l}=e,c=tR(e,[],this.handleEl);let f=!1,p,g=[],E;if(i!=null){const w=typeof i=="function"?i(l,G):i;if(w===!0)f=!0;else{const A=w&&typeof w=="object";A&&"html"in w?c.dangerouslySetInnerHTML={__html:w.html}:A&&"domNodes"in w?g=Array.prototype.slice.call(w.domNodes):(A?R0(w):typeof w!="function")?p=w:E=w}}else f=!_g(e.generatorName,r);return f&&o&&(p=o(l)),this.queuedDomNodes=g,this.currentGeneratorMeta=E,G(e.elTag,c,p)}componentDidMount(){this.applyQueueudDomNodes(),this.triggerCustomRendering(!0)}componentDidUpdate(){this.applyQueueudDomNodes(),this.triggerCustomRendering(!0)}componentWillUnmount(){this.triggerCustomRendering(!1)}triggerCustomRendering(e){var t;const{props:r,context:i}=this,{handleCustomRendering:o,customRenderingMetaMap:l}=i.options;if(o){const c=(t=this.currentGeneratorMeta)!==null&&t!==void 0?t:l?.[r.generatorName];c&&o(Object.assign(Object.assign({id:this.id,isActive:e,containerEl:this.base,reportNewContainerEl:this.updateElRef,generatorMeta:c},r),{elClasses:(r.elClasses||[]).filter(fV)}))}}applyQueueudDomNodes(){const{queuedDomNodes:e,currentDomNodes:t}=this,r=this.base;if(!ps(e,t)){t.forEach(nM);for(let i of e)r.appendChild(i);this.currentDomNodes=e}}}xy.addPropsEquality({elClasses:ps,elStyle:nr,elAttrs:XM,renderProps:nr});function _g(n,e){var t;return!!(e.handleCustomRendering&&n&&(!((t=e.customRenderingMetaMap)===null||t===void 0)&&t[n]))}function tR(n,e,t){const r=Object.assign(Object.assign({},n.elAttrs),{ref:t});return(n.elClasses||e)&&(r.className=(n.elClasses||[]).concat(e||[]).concat(r.className||[]).filter(Boolean).join(" ")),n.elStyle&&(r.style=n.elStyle),r}function fV(n){return!!n}const nR=eR(0);class ui extends Dn{constructor(){super(...arguments),this.InnerContent=pV.bind(void 0,this),this.handleEl=e=>{this.el=e,this.props.elRef&&(kr(this.props.elRef,e),e&&this.didMountMisfire&&this.componentDidMount())}}render(){const{props:e}=this,t=mV(e.classNameGenerator,e.renderProps);if(e.children){const r=tR(e,t,this.handleEl),i=e.children(this.InnerContent,e.renderProps,r);return e.elTag?G(e.elTag,r,i):i}else return G(xy,Object.assign(Object.assign({},e),{elRef:this.handleEl,elTag:e.elTag||"div",elClasses:(e.elClasses||[]).concat(t),renderId:this.context}))}componentDidMount(){var e,t;this.el?(t=(e=this.props).didMount)===null||t===void 0||t.call(e,Object.assign(Object.assign({},this.props.renderProps),{el:this.el})):this.didMountMisfire=!0}componentWillUnmount(){var e,t;(t=(e=this.props).willUnmount)===null||t===void 0||t.call(e,Object.assign(Object.assign({},this.props.renderProps),{el:this.el}))}}ui.contextType=nR;function pV(n,e){const t=n.props;return G(xy,Object.assign({renderProps:t.renderProps,generatorName:t.generatorName,customGenerator:t.customGenerator,defaultGenerator:t.defaultGenerator,renderId:n.context},e))}function mV(n,e){const t=typeof n=="function"?n(e):n||[];return typeof t=="string"?[t]:t}class OT extends ht{render(){let{props:e,context:t}=this,{options:r}=t,i={view:t.viewApi};return G(ui,{elRef:e.elRef,elTag:e.elTag||"div",elAttrs:e.elAttrs,elClasses:[...rR(e.viewSpec),...e.elClasses||[]],elStyle:e.elStyle,renderProps:i,classNameGenerator:r.viewClassNames,generatorName:void 0,didMount:r.viewDidMount,willUnmount:r.viewWillUnmount},()=>e.children)}}function rR(n){return[`fc-${n.type}-view`,"fc-view"]}function gV(n,e){let t=null,r=null;return n.start&&(t=e.createMarker(n.start)),n.end&&(r=e.createMarker(n.end)),!t&&!r||t&&r&&r<t?null:{start:t,end:r}}function MT(n,e){let t=[],{start:r}=e,i,o;for(n.sort(yV),i=0;i<n.length;i+=1)o=n[i],o.start>r&&t.push({start:r,end:o.start}),o.end>r&&(r=o.end);return r<e.end&&t.push({start:r,end:e.end}),t}function yV(n,e){return n.start.valueOf()-e.start.valueOf()}function el(n,e){let{start:t,end:r}=n,i=null;return e.start!==null&&(t===null?t=e.start:t=new Date(Math.max(t.valueOf(),e.start.valueOf()))),e.end!=null&&(r===null?r=e.end:r=new Date(Math.min(r.valueOf(),e.end.valueOf()))),(t===null||r===null||t<r)&&(i={start:t,end:r}),i}function vV(n,e){return(n.end===null||e.start===null||n.end>e.start)&&(n.start===null||e.end===null||n.start<e.end)}function os(n,e){return(n.start===null||e>=n.start)&&(n.end===null||e<n.end)}function _V(n,e){return e.start!=null&&n<e.start?e.start:e.end!=null&&n>=e.end?new Date(e.end.valueOf()-1):n}function iR(n){let e=Math.floor(ll(n.start,n.end))||1,t=dt(n.start),r=Ft(t,e);return{start:t,end:r}}function sR(n,e=Qe(0)){let t=null,r=null;if(n.end){r=dt(n.end);let i=n.end.valueOf()-r.valueOf();i&&i>=$u(e)&&(r=Ft(r,1))}return n.start&&(t=dt(n.start),r&&r<=t&&(r=Ft(t,1))),{start:t,end:r}}function Bd(n,e,t,r){return r==="year"?Qe(t.diffWholeYears(n,e),"year"):r==="month"?Qe(t.diffWholeMonths(n,e),"month"):RM(n,e)}class oR{constructor(e){this.props=e,this.initHiddenDays()}buildPrev(e,t,r){let{dateEnv:i}=this.props,o=i.subtract(i.startOf(t,e.currentRangeUnit),e.dateIncrement);return this.build(o,-1,r)}buildNext(e,t,r){let{dateEnv:i}=this.props,o=i.add(i.startOf(t,e.currentRangeUnit),e.dateIncrement);return this.build(o,1,r)}build(e,t,r=!0){let{props:i}=this,o,l,c,f,p,g;return o=this.buildValidRange(),o=this.trimHiddenDays(o),r&&(e=_V(e,o)),l=this.buildCurrentRangeInfo(e,t),c=/^(year|month|week|day)$/.test(l.unit),f=this.buildRenderRange(this.trimHiddenDays(l.range),l.unit,c),f=this.trimHiddenDays(f),p=f,i.showNonCurrentDates||(p=el(p,l.range)),p=this.adjustActiveRange(p),p=el(p,o),g=vV(l.range,o),os(f,e)||(e=f.start),{currentDate:e,validRange:o,currentRange:l.range,currentRangeUnit:l.unit,isRangeAllDay:c,activeRange:p,renderRange:f,slotMinTime:i.slotMinTime,slotMaxTime:i.slotMaxTime,isValid:g,dateIncrement:this.buildDateIncrement(l.duration)}}buildValidRange(){let e=this.props.validRangeInput,t=typeof e=="function"?e.call(this.props.calendarApi,this.props.dateEnv.toDate(this.props.nowManager.getDateMarker())):e;return this.refineRange(t)||{start:null,end:null}}buildCurrentRangeInfo(e,t){let{props:r}=this,i=null,o=null,l=null,c;return r.duration?(i=r.duration,o=r.durationUnit,l=this.buildRangeFromDuration(e,t,i,o)):(c=this.props.dayCount)?(o="day",l=this.buildRangeFromDayCount(e,t,c)):(l=this.buildCustomVisibleRange(e))?o=r.dateEnv.greatestWholeUnit(l.start,l.end).unit:(i=this.getFallbackDuration(),o=vg(i).unit,l=this.buildRangeFromDuration(e,t,i,o)),{duration:i,unit:o,range:l}}getFallbackDuration(){return Qe({day:1})}adjustActiveRange(e){let{dateEnv:t,usesMinMaxTime:r,slotMinTime:i,slotMaxTime:o}=this.props,{start:l,end:c}=e;return r&&(Ma(i)<0&&(l=dt(l),l=t.add(l,i)),Ma(o)>1&&(c=dt(c),c=Ft(c,-1),c=t.add(c,o))),{start:l,end:c}}buildRangeFromDuration(e,t,r,i){let{dateEnv:o,dateAlignment:l}=this.props,c,f,p;if(!l){let{dateIncrement:E}=this.props;E&&$u(E)<$u(r)?l=vg(E).unit:l=i}Ma(r)<=1&&this.isHiddenDay(c)&&(c=this.skipHiddenDays(c,t),c=dt(c));function g(){c=o.startOf(e,l),f=o.add(c,r),p={start:c,end:f}}return g(),this.trimHiddenDays(p)||(e=this.skipHiddenDays(e,t),g()),p}buildRangeFromDayCount(e,t,r){let{dateEnv:i,dateAlignment:o}=this.props,l=0,c=e,f;o&&(c=i.startOf(c,o)),c=dt(c),c=this.skipHiddenDays(c,t),f=c;do f=Ft(f,1),this.isHiddenDay(f)||(l+=1);while(l<r);return{start:c,end:f}}buildCustomVisibleRange(e){let{props:t}=this,r=t.visibleRangeInput,i=typeof r=="function"?r.call(t.calendarApi,t.dateEnv.toDate(e)):r,o=this.refineRange(i);return o&&(o.start==null||o.end==null)?null:o}buildRenderRange(e,t,r){return e}buildDateIncrement(e){let{dateIncrement:t}=this.props,r;return t||((r=this.props.dateAlignment)?Qe(1,r):e||Qe({days:1}))}refineRange(e){if(e){let t=gV(e,this.props.dateEnv);return t&&(t=sR(t)),t}return null}initHiddenDays(){let e=this.props.hiddenDays||[],t=[],r=0,i;for(this.props.weekends===!1&&e.push(0,6),i=0;i<7;i+=1)(t[i]=e.indexOf(i)!==-1)||(r+=1);if(!r)throw new Error("invalid hiddenDays");this.isHiddenDayHash=t}trimHiddenDays(e){let{start:t,end:r}=e;return t&&(t=this.skipHiddenDays(t)),r&&(r=this.skipHiddenDays(r,-1,!0)),t==null||r==null||t<r?{start:t,end:r}:null}isHiddenDay(e){return e instanceof Date&&(e=e.getUTCDay()),this.isHiddenDayHash[e]}skipHiddenDays(e,t=1,r=!1){for(;this.isHiddenDayHash[(e.getUTCDay()+(r?t:0)+7)%7];)e=Ft(e,t);return e}}function Ny(n,e,t,r){return{instanceId:Io(),defId:n,range:e,forcedStartTzo:t??null,forcedEndTzo:r??null}}function EV(n,e,t,r){for(let i=0;i<r.length;i+=1){let o=r[i].parse(n,t);if(o){let{allDay:l}=n;return l==null&&(l=e,l==null&&(l=o.allDayGuess,l==null&&(l=!1))),{allDay:l,duration:o.duration,typeData:o.typeData,typeId:i}}}return null}function hc(n,e,t){let{dateEnv:r,pluginHooks:i,options:o}=t,{defs:l,instances:c}=n;c=Za(c,f=>!l[f.defId].recurringDef);for(let f in l){let p=l[f];if(p.recurringDef){let{duration:g}=p.recurringDef;g||(g=p.allDay?o.defaultAllDayEventDuration:o.defaultTimedEventDuration);let E=wV(p,g,e,r,i.recurringTypes);for(let w of E){let A=Ny(f,{start:w,end:r.add(w,g)});c[A.instanceId]=A}}}return{defs:l,instances:c}}function wV(n,e,t,r,i){let l=i[n.recurringDef.typeId].expand(n.recurringDef.typeData,{start:r.subtract(t.start,e),end:t.end},r);return n.allDay&&(l=l.map(dt)),l}const uh={id:String,groupId:String,title:String,url:String,interactive:Boolean},aR={start:$,end:$,date:$,allDay:Boolean},TV=Object.assign(Object.assign(Object.assign({},uh),aR),{extendedProps:$});function lR(n,e,t,r,i=Oy(t),o,l){let{refined:c,extra:f}=uR(n,t,i),p=IV(e,t),g=EV(c,p,t.dateEnv,t.pluginHooks.recurringTypes);if(g){let w=Eg(c,f,e?e.sourceId:"",g.allDay,!!g.duration,t,o);return w.recurringDef={typeId:g.typeId,typeData:g.typeData,duration:g.duration},{def:w,instance:null}}let E=AV(c,p,t,r);if(E){let w=Eg(c,f,e?e.sourceId:"",E.allDay,E.hasEnd,t,o),A=Ny(w.defId,E.range,E.forcedStartTzo,E.forcedEndTzo);return l&&w.publicId&&l[w.publicId]&&(A.instanceId=l[w.publicId]),{def:w,instance:A}}return null}function uR(n,e,t=Oy(e)){return Dy(n,t)}function Oy(n){return Object.assign(Object.assign(Object.assign({},qh),TV),n.pluginHooks.eventRefiners)}function Eg(n,e,t,r,i,o,l){let c={title:n.title||"",groupId:n.groupId||"",publicId:n.id||"",url:n.url||"",recurringDef:null,defId:(l&&n.id?l[n.id]:"")||Io(),sourceId:t,allDay:r,hasEnd:i,interactive:n.interactive,ui:Gh(n,o),extendedProps:Object.assign(Object.assign({},n.extendedProps||{}),e)};for(let f of o.pluginHooks.eventDefMemberAdders)Object.assign(c,f(n));return Object.freeze(c.ui.classNames),Object.freeze(c.extendedProps),c}function AV(n,e,t,r){let{allDay:i}=n,o,l=null,c=!1,f,p=null,g=n.start!=null?n.start:n.date;if(o=t.dateEnv.createMarkerMeta(g),o)l=o.marker;else if(!r)return null;return n.end!=null&&(f=t.dateEnv.createMarkerMeta(n.end)),i==null&&(e!=null?i=e:i=(!o||o.isTimeUnspecified)&&(!f||f.isTimeUnspecified)),i&&l&&(l=dt(l)),f&&(p=f.marker,i&&(p=dt(p)),l&&p<=l&&(p=null)),p?c=!0:r||(c=t.options.forceEventDuration||!1,p=t.dateEnv.add(l,i?t.options.defaultAllDayEventDuration:t.options.defaultTimedEventDuration)),{allDay:i,hasEnd:c,range:{start:l,end:p},forcedStartTzo:o?o.forcedTzo:null,forcedEndTzo:f?f.forcedTzo:null}}function IV(n,e){let t=null;return n&&(t=n.defaultAllDay),t==null&&(t=e.options.defaultAllDay),t}function Qu(n,e,t,r,i,o){let l=wo(),c=Oy(t);for(let f of n){let p=lR(f,e,t,r,c,i,o);p&&wg(p,l)}return l}function wg(n,e=wo()){return e.defs[n.def.defId]=n.def,n.instance&&(e.instances[n.instance.instanceId]=n.instance),e}function SV(n,e){let t=n.instances[e];if(t){let r=n.defs[t.defId],i=Vy(n,o=>RV(r,o));return i.defs[r.defId]=r,i.instances[t.instanceId]=t,i}return wo()}function RV(n,e){return!!(n.groupId&&n.groupId===e.groupId)}function wo(){return{defs:{},instances:{}}}function My(n,e){return{defs:Object.assign(Object.assign({},n.defs),e.defs),instances:Object.assign(Object.assign({},n.instances),e.instances)}}function Vy(n,e){let t=Za(n.defs,e),r=Za(n.instances,i=>t[i.defId]);return{defs:t,instances:r}}function CV(n,e){let{defs:t,instances:r}=n,i={},o={};for(let l in t)e.defs[l]||(i[l]=t[l]);for(let l in r)!e.instances[l]&&i[r[l].defId]&&(o[l]=r[l]);return{defs:i,instances:o}}function bV(n,e){return Array.isArray(n)?Qu(n,null,e,!0):typeof n=="object"&&n?Qu([n],null,e,!0):n!=null?String(n):null}function VT(n){return Array.isArray(n)?n:typeof n=="string"?n.split(/\s+/):[]}const qh={display:String,editable:Boolean,startEditable:Boolean,durationEditable:Boolean,constraint:$,overlap:$,allow:$,className:VT,classNames:VT,color:String,backgroundColor:String,borderColor:String,textColor:String},DV={display:null,startEditable:null,durationEditable:null,constraints:[],overlap:null,allows:[],backgroundColor:"",borderColor:"",textColor:"",classNames:[]};function Gh(n,e){let t=bV(n.constraint,e);return{display:n.display||null,startEditable:n.startEditable!=null?n.startEditable:n.editable,durationEditable:n.durationEditable!=null?n.durationEditable:n.editable,constraints:t!=null?[t]:[],overlap:n.overlap!=null?n.overlap:null,allows:n.allow!=null?[n.allow]:[],backgroundColor:n.backgroundColor||n.color||"",borderColor:n.borderColor||n.color||"",textColor:n.textColor||"",classNames:(n.className||[]).concat(n.classNames||[])}}function kV(n){return n.reduce(PV,DV)}function PV(n,e){return{display:e.display!=null?e.display:n.display,startEditable:e.startEditable!=null?e.startEditable:n.startEditable,durationEditable:e.durationEditable!=null?e.durationEditable:n.durationEditable,constraints:n.constraints.concat(e.constraints),overlap:typeof e.overlap=="boolean"?e.overlap:n.overlap,allows:n.allows.concat(e.allows),backgroundColor:e.backgroundColor||n.backgroundColor,borderColor:e.borderColor||n.borderColor,textColor:e.textColor||n.textColor,classNames:n.classNames.concat(e.classNames)}}const xV={id:String,defaultAllDay:Boolean,url:String,format:String,events:$,eventDataTransform:$,success:$,failure:$};function cR(n,e,t=dR(e)){let r;if(typeof n=="string"?r={url:n}:typeof n=="function"||Array.isArray(n)?r={events:n}:typeof n=="object"&&n&&(r=n),r){let{refined:i,extra:o}=Dy(r,t),l=NV(i,e);if(l)return{_raw:n,isFetching:!1,latestFetchId:"",fetchRange:null,defaultAllDay:i.defaultAllDay,eventDataTransform:i.eventDataTransform,success:i.success,failure:i.failure,publicId:i.id||"",sourceId:Io(),sourceDefId:l.sourceDefId,meta:l.meta,ui:Gh(i,e),extendedProps:o}}return null}function dR(n){return Object.assign(Object.assign(Object.assign({},qh),xV),n.pluginHooks.eventSourceRefiners)}function NV(n,e){let t=e.pluginHooks.eventSourceDefs;for(let r=t.length-1;r>=0;r-=1){let o=t[r].parseMeta(n);if(o)return{sourceDefId:r,meta:o}}return null}function OV(n,e,t,r,i){switch(e.type){case"RECEIVE_EVENTS":return MV(n,t[e.sourceId],e.fetchId,e.fetchRange,e.rawEvents,i);case"RESET_RAW_EVENTS":return VV(n,t[e.sourceId],e.rawEvents,r.activeRange,i);case"ADD_EVENTS":return LV(n,e.eventStore,r?r.activeRange:null,i);case"RESET_EVENTS":return e.eventStore;case"MERGE_EVENTS":return My(n,e.eventStore);case"PREV":case"NEXT":case"CHANGE_DATE":case"CHANGE_VIEW_TYPE":return r?hc(n,r.activeRange,i):n;case"REMOVE_EVENTS":return CV(n,e.eventStore);case"REMOVE_EVENT_SOURCE":return fR(n,e.sourceId);case"REMOVE_ALL_EVENT_SOURCES":return Vy(n,o=>!o.sourceId);case"REMOVE_ALL_EVENTS":return wo();default:return n}}function MV(n,e,t,r,i,o){if(e&&t===e.latestFetchId){let l=Qu(hR(i,e,o),e,o);return r&&(l=hc(l,r,o)),My(fR(n,e.sourceId),l)}return n}function VV(n,e,t,r,i){const{defIdMap:o,instanceIdMap:l}=FV(n);let c=Qu(hR(t,e,i),e,i,!1,o,l);return hc(c,r,i)}function hR(n,e,t){let r=t.options.eventDataTransform,i=e?e.eventDataTransform:null;return i&&(n=LT(n,i)),r&&(n=LT(n,r)),n}function LT(n,e){let t;if(!e)t=n;else{t=[];for(let r of n){let i=e(r);i?t.push(i):i==null&&t.push(r)}}return t}function LV(n,e,t,r){return t&&(e=hc(e,t,r)),My(n,e)}function FT(n,e,t){let{defs:r}=n,i=cc(n.instances,o=>r[o.defId].allDay?o:Object.assign(Object.assign({},o),{range:{start:t.createMarker(e.toDate(o.range.start,o.forcedStartTzo)),end:t.createMarker(e.toDate(o.range.end,o.forcedEndTzo))},forcedStartTzo:t.canComputeOffset?null:o.forcedStartTzo,forcedEndTzo:t.canComputeOffset?null:o.forcedEndTzo}));return{defs:r,instances:i}}function fR(n,e){return Vy(n,t=>t.sourceId!==e)}function FV(n){const{defs:e,instances:t}=n,r={},i={};for(let o in e){const l=e[o],{publicId:c}=l;c&&(r[c]=o)}for(let o in t){const l=t[o],c=e[l.defId],{publicId:f}=c;f&&(i[f]=o)}return{defIdMap:r,instanceIdMap:i}}class UV{constructor(){this.handlers={},this.thisContext=null}setThisContext(e){this.thisContext=e}setOptions(e){this.options=e}on(e,t){BV(this.handlers,e,t)}off(e,t){zV(this.handlers,e,t)}trigger(e,...t){let r=this.handlers[e]||[],i=this.options&&this.options[e],o=[].concat(i||[],r);for(let l of o)l.apply(this.thisContext,t)}hasHandlers(e){return!!(this.handlers[e]&&this.handlers[e].length||this.options&&this.options[e])}}function BV(n,e,t){(n[e]||(n[e]=[])).push(t)}function zV(n,e,t){t?n[e]&&(n[e]=n[e].filter(r=>r!==t)):delete n[e]}const jV={startTime:"09:00",endTime:"17:00",daysOfWeek:[1,2,3,4,5],display:"inverse-background",classNames:"fc-non-business",groupId:"_businessHours"};function HV(n,e){return Qu(WV(n),null,e)}function WV(n){let e;return n===!0?e=[{}]:Array.isArray(n)?e=n.filter(t=>t.daysOfWeek):typeof n=="object"&&n?e=[n]:e=[],e=e.map(t=>Object.assign(Object.assign({},jV),t)),e}function qV(n,e,t){t.emitter.trigger("select",Object.assign(Object.assign({},$V(n,t)),{jsEvent:null,view:t.viewApi||t.calendarApi.view}))}function GV(n,e){e.emitter.trigger("unselect",{jsEvent:n?n.origEvent:null,view:e.viewApi||e.calendarApi.view})}function $V(n,e){let t={};for(let r of e.pluginHooks.dateSpanTransforms)Object.assign(t,r(n,e));return Object.assign(t,a2(n,e.dateEnv)),t}function UT(n,e,t){let{dateEnv:r,options:i}=t,o=e;return n?(o=dt(o),o=r.add(o,i.defaultAllDayEventDuration)):o=r.add(o,i.defaultTimedEventDuration),o}function QV(n,e,t,r){let i=mR(n.defs,e),o=wo();for(let l in n.defs){let c=n.defs[l];o.defs[l]=KV(c,i[l],t,r)}for(let l in n.instances){let c=n.instances[l],f=o.defs[c.defId];o.instances[l]=YV(c,f,i[c.defId],t,r)}return o}function KV(n,e,t,r){let i=t.standardProps||{};i.hasEnd==null&&e.durationEditable&&(t.startDelta||t.endDelta)&&(i.hasEnd=!0);let o=Object.assign(Object.assign(Object.assign({},n),i),{ui:Object.assign(Object.assign({},n.ui),i.ui)});t.extendedProps&&(o.extendedProps=Object.assign(Object.assign({},o.extendedProps),t.extendedProps));for(let l of r.pluginHooks.eventDefMutationAppliers)l(o,t,r);return!o.hasEnd&&r.options.forceEventDuration&&(o.hasEnd=!0),o}function YV(n,e,t,r,i){let{dateEnv:o}=i,l=r.standardProps&&r.standardProps.allDay===!0,c=r.standardProps&&r.standardProps.hasEnd===!1,f=Object.assign({},n);return l&&(f.range=iR(f.range)),r.datesDelta&&t.startEditable&&(f.range={start:o.add(f.range.start,r.datesDelta),end:o.add(f.range.end,r.datesDelta)}),r.startDelta&&t.durationEditable&&(f.range={start:o.add(f.range.start,r.startDelta),end:f.range.end}),r.endDelta&&t.durationEditable&&(f.range={start:f.range.start,end:o.add(f.range.end,r.endDelta)}),c&&(f.range={start:f.range.start,end:UT(e.allDay,f.range.start,i)}),e.allDay&&(f.range={start:dt(f.range.start),end:dt(f.range.end)}),f.range.end<f.range.start&&(f.range.end=UT(e.allDay,f.range.start,i)),f}class ba{constructor(e,t){this.context=e,this.internalEventSource=t}remove(){this.context.dispatch({type:"REMOVE_EVENT_SOURCE",sourceId:this.internalEventSource.sourceId})}refetch(){this.context.dispatch({type:"FETCH_EVENT_SOURCES",sourceIds:[this.internalEventSource.sourceId],isRefetch:!0})}get id(){return this.internalEventSource.publicId}get url(){return this.internalEventSource.meta.url}get format(){return this.internalEventSource.meta.format}}class Bn{constructor(e,t,r){this._context=e,this._def=t,this._instance=r||null}setProp(e,t){if(e in aR)console.warn("Could not set date-related prop 'name'. Use one of the date-related methods instead.");else if(e==="id")t=uh[e](t),this.mutate({standardProps:{publicId:t}});else if(e in uh)t=uh[e](t),this.mutate({standardProps:{[e]:t}});else if(e in qh){let r=qh[e](t);e==="color"?r={backgroundColor:t,borderColor:t}:e==="editable"?r={startEditable:t,durationEditable:t}:r={[e]:t},this.mutate({standardProps:{ui:r}})}else console.warn(`Could not set prop '${e}'. Use setExtendedProp instead.`)}setExtendedProp(e,t){this.mutate({extendedProps:{[e]:t}})}setStart(e,t={}){let{dateEnv:r}=this._context,i=r.createMarker(e);if(i&&this._instance){let o=this._instance.range,l=Bd(o.start,i,r,t.granularity);t.maintainDuration?this.mutate({datesDelta:l}):this.mutate({startDelta:l})}}setEnd(e,t={}){let{dateEnv:r}=this._context,i;if(!(e!=null&&(i=r.createMarker(e),!i))&&this._instance)if(i){let o=Bd(this._instance.range.end,i,r,t.granularity);this.mutate({endDelta:o})}else this.mutate({standardProps:{hasEnd:!1}})}setDates(e,t,r={}){let{dateEnv:i}=this._context,o={allDay:r.allDay},l=i.createMarker(e),c;if(l&&!(t!=null&&(c=i.createMarker(t),!c))&&this._instance){let f=this._instance.range;r.allDay===!0&&(f=iR(f));let p=Bd(f.start,l,i,r.granularity);if(c){let g=Bd(f.end,c,i,r.granularity);yM(p,g)?this.mutate({datesDelta:p,standardProps:o}):this.mutate({startDelta:p,endDelta:g,standardProps:o})}else o.hasEnd=!1,this.mutate({datesDelta:p,standardProps:o})}}moveStart(e){let t=Qe(e);t&&this.mutate({startDelta:t})}moveEnd(e){let t=Qe(e);t&&this.mutate({endDelta:t})}moveDates(e){let t=Qe(e);t&&this.mutate({datesDelta:t})}setAllDay(e,t={}){let r={allDay:e},{maintainDuration:i}=t;i==null&&(i=this._context.options.allDayMaintainDuration),this._def.allDay!==e&&(r.hasEnd=i),this.mutate({standardProps:r})}formatRange(e){let{dateEnv:t}=this._context,r=this._instance,i=Lt(e);return this._def.hasEnd?t.formatRange(r.range.start,r.range.end,i,{forcedStartTzo:r.forcedStartTzo,forcedEndTzo:r.forcedEndTzo}):t.format(r.range.start,i,{forcedTzo:r.forcedStartTzo})}mutate(e){let t=this._instance;if(t){let r=this._def,i=this._context,{eventStore:o}=i.getCurrentData(),l=SV(o,t.instanceId);l=QV(l,{"":{display:"",startEditable:!0,durationEditable:!0,constraints:[],overlap:null,allows:[],backgroundColor:"",borderColor:"",textColor:"",classNames:[]}},e,i);let f=new Bn(i,r,t);this._def=l.defs[r.defId],this._instance=l.instances[t.instanceId],i.dispatch({type:"MERGE_EVENTS",eventStore:l}),i.emitter.trigger("eventChange",{oldEvent:f,event:this,relatedEvents:Ly(l,i,t),revert(){i.dispatch({type:"RESET_EVENTS",eventStore:o})}})}}remove(){let e=this._context,t=pR(this);e.dispatch({type:"REMOVE_EVENTS",eventStore:t}),e.emitter.trigger("eventRemove",{event:this,relatedEvents:[],revert(){e.dispatch({type:"MERGE_EVENTS",eventStore:t})}})}get source(){let{sourceId:e}=this._def;return e?new ba(this._context,this._context.getCurrentData().eventSources[e]):null}get start(){return this._instance?this._context.dateEnv.toDate(this._instance.range.start):null}get end(){return this._instance&&this._def.hasEnd?this._context.dateEnv.toDate(this._instance.range.end):null}get startStr(){let e=this._instance;return e?this._context.dateEnv.formatIso(e.range.start,{omitTime:this._def.allDay,forcedTzo:e.forcedStartTzo}):""}get endStr(){let e=this._instance;return e&&this._def.hasEnd?this._context.dateEnv.formatIso(e.range.end,{omitTime:this._def.allDay,forcedTzo:e.forcedEndTzo}):""}get id(){return this._def.publicId}get groupId(){return this._def.groupId}get allDay(){return this._def.allDay}get title(){return this._def.title}get url(){return this._def.url}get display(){return this._def.ui.display||"auto"}get startEditable(){return this._def.ui.startEditable}get durationEditable(){return this._def.ui.durationEditable}get constraint(){return this._def.ui.constraints[0]||null}get overlap(){return this._def.ui.overlap}get allow(){return this._def.ui.allows[0]||null}get backgroundColor(){return this._def.ui.backgroundColor}get borderColor(){return this._def.ui.borderColor}get textColor(){return this._def.ui.textColor}get classNames(){return this._def.ui.classNames}get extendedProps(){return this._def.extendedProps}toPlainObject(e={}){let t=this._def,{ui:r}=t,{startStr:i,endStr:o}=this,l={allDay:t.allDay};return t.title&&(l.title=t.title),i&&(l.start=i),o&&(l.end=o),t.publicId&&(l.id=t.publicId),t.groupId&&(l.groupId=t.groupId),t.url&&(l.url=t.url),r.display&&r.display!=="auto"&&(l.display=r.display),e.collapseColor&&r.backgroundColor&&r.backgroundColor===r.borderColor?l.color=r.backgroundColor:(r.backgroundColor&&(l.backgroundColor=r.backgroundColor),r.borderColor&&(l.borderColor=r.borderColor)),r.textColor&&(l.textColor=r.textColor),r.classNames.length&&(l.classNames=r.classNames),Object.keys(t.extendedProps).length&&(e.collapseExtendedProps?Object.assign(l,t.extendedProps):l.extendedProps=t.extendedProps),l}toJSON(){return this.toPlainObject()}}function pR(n){let e=n._def,t=n._instance;return{defs:{[e.defId]:e},instances:t?{[t.instanceId]:t}:{}}}function Ly(n,e,t){let{defs:r,instances:i}=n,o=[],l=t?t.instanceId:"";for(let c in i){let f=i[c],p=r[f.defId];f.instanceId!==l&&o.push(new Bn(e,p,f))}return o}function BT(n,e,t,r){let i={},o={},l={},c=[],f=[],p=mR(n.defs,e);for(let g in n.defs){let E=n.defs[g];p[E.defId].display==="inverse-background"&&(E.groupId?(i[E.groupId]=[],l[E.groupId]||(l[E.groupId]=E)):o[g]=[])}for(let g in n.instances){let E=n.instances[g],w=n.defs[E.defId],A=p[w.defId],b=E.range,V=!w.allDay&&r?sR(b,r):b,x=el(V,t);x&&(A.display==="inverse-background"?w.groupId?i[w.groupId].push(x):o[E.defId].push(x):A.display!=="none"&&(A.display==="background"?c:f).push({def:w,ui:A,instance:E,range:x,isStart:V.start&&V.start.valueOf()===x.start.valueOf(),isEnd:V.end&&V.end.valueOf()===x.end.valueOf()}))}for(let g in i){let E=i[g],w=MT(E,t);for(let A of w){let b=l[g],V=p[b.defId];c.push({def:b,ui:V,instance:null,range:A,isStart:!1,isEnd:!1})}}for(let g in o){let E=o[g],w=MT(E,t);for(let A of w)c.push({def:n.defs[g],ui:p[g],instance:null,range:A,isStart:!1,isEnd:!1})}return{bg:c,fg:f}}function zT(n,e){n.fcSeg=e}function Tg(n){return n.fcSeg||n.parentNode.fcSeg||null}function mR(n,e){return cc(n,t=>gR(t,e))}function gR(n,e){let t=[];return e[""]&&t.push(e[""]),e[n.defId]&&t.push(e[n.defId]),t.push(n.ui),kV(t)}function JV(n,e){let t=n.map(XV);return t.sort((r,i)=>dM(r,i,e)),t.map(r=>r._seg)}function XV(n){let{eventRange:e}=n,t=e.def,r=e.instance?e.instance.range:e.range,i=r.start?r.start.valueOf():0,o=r.end?r.end.valueOf():0;return Object.assign(Object.assign(Object.assign({},t.extendedProps),t),{id:t.publicId,start:i,end:o,duration:o-i,allDay:Number(t.allDay),_seg:n})}function ZV(n,e){let{pluginHooks:t}=e,r=t.isDraggableTransformers,{def:i,ui:o}=n.eventRange,l=o.startEditable;for(let c of r)l=c(l,i,o,e);return l}function e2(n,e){return n.isStart&&n.eventRange.ui.durationEditable&&e.options.eventResizableFromStart}function t2(n,e){return n.isEnd&&n.eventRange.ui.durationEditable}function yR(n,e,t,r,i,o,l){let{dateEnv:c,options:f}=t,{displayEventTime:p,displayEventEnd:g}=f,E=n.eventRange.def,w=n.eventRange.instance;p==null&&(p=r!==!1),g==null&&(g=i!==!1);let A=w.range.start,b=w.range.end,V=n.start||n.eventRange.range.start,x=n.end||n.eventRange.range.end,H=dt(A).valueOf()===dt(V).valueOf(),Q=dt(ms(b,-1)).valueOf()===dt(ms(x,-1)).valueOf();return p&&!E.allDay&&(H||Q)?(V=H?A:V,x=Q?b:x,g&&E.hasEnd?c.formatRange(V,x,e,{forcedStartTzo:w.forcedStartTzo,forcedEndTzo:w.forcedEndTzo}):c.format(V,e,{forcedTzo:w.forcedStartTzo})):""}function Cu(n,e,t){let r=n.eventRange.range;return{isPast:r.end<=e.start,isFuture:r.start>=e.end,isToday:e&&os(e,r.start)}}function n2(n){let e=["fc-event"];return n.isMirror&&e.push("fc-event-mirror"),n.isDraggable&&e.push("fc-event-draggable"),(n.isStartResizable||n.isEndResizable)&&e.push("fc-event-resizable"),n.isDragging&&e.push("fc-event-dragging"),n.isResizing&&e.push("fc-event-resizing"),n.isSelected&&e.push("fc-event-selected"),n.isStart&&e.push("fc-event-start"),n.isEnd&&e.push("fc-event-end"),n.isPast&&e.push("fc-event-past"),n.isToday&&e.push("fc-event-today"),n.isFuture&&e.push("fc-event-future"),e}function r2(n){return n.instance?n.instance.instanceId:`${n.def.defId}:${n.range.start.toISOString()}`}function vR(n,e){let{def:t,instance:r}=n.eventRange,{url:i}=t;if(i)return{href:i};let{emitter:o,options:l}=e,{eventInteractive:c}=l;return c==null&&(c=t.interactive,c==null&&(c=!!o.hasHandlers("eventClick"))),c?Y0(f=>{o.trigger("eventClick",{el:f.target,event:new Bn(e,t,r),jsEvent:f,view:e.viewApi})}):{}}const i2={start:$,end:$,allDay:Boolean};function s2(n,e,t){let r=o2(n,e),{range:i}=r;if(!i.start)return null;if(!i.end){if(t==null)return null;i.end=e.add(i.start,t)}return r}function o2(n,e){let{refined:t,extra:r}=Dy(n,i2),i=t.start?e.createMarkerMeta(t.start):null,o=t.end?e.createMarkerMeta(t.end):null,{allDay:l}=t;return l==null&&(l=i&&i.isTimeUnspecified&&(!o||o.isTimeUnspecified)),Object.assign({range:{start:i?i.marker:null,end:o?o.marker:null},allDay:l},r)}function a2(n,e){return Object.assign(Object.assign({},ER(n.range,e,n.allDay)),{allDay:n.allDay})}function _R(n,e,t){return Object.assign(Object.assign({},ER(n,e,t)),{timeZone:e.timeZone})}function ER(n,e,t){return{start:e.toDate(n.start),end:e.toDate(n.end),startStr:e.formatIso(n.start,{omitTime:t}),endStr:e.formatIso(n.end,{omitTime:t})}}function l2(n,e,t){let r=uR({editable:!1},t),i=Eg(r.refined,r.extra,"",n.allDay,!0,t);return{def:i,ui:gR(i,e),instance:Ny(i.defId,n.range),range:n.range,isStart:!0,isEnd:!0}}function u2(n,e,t){let r=!1,i=function(c){r||(r=!0,e(c))},o=function(c){r||(r=!0,t(c))},l=n(i,o);l&&typeof l.then=="function"&&l.then(i,o)}class jT extends Error{constructor(e,t){super(e),this.response=t}}function c2(n,e,t){n=n.toUpperCase();const r={method:n};return n==="GET"?e+=(e.indexOf("?")===-1?"?":"&")+new URLSearchParams(t):(r.body=new URLSearchParams(t),r.headers={"Content-Type":"application/x-www-form-urlencoded"}),fetch(e,r).then(i=>{if(i.ok)return i.json().then(o=>[o,i],()=>{throw new jT("Failure parsing JSON",i)});throw new jT("Request failed",i)})}let Rm;function wR(){return Rm==null&&(Rm=d2()),Rm}function d2(){if(typeof document>"u")return!0;let n=document.createElement("div");n.style.position="absolute",n.style.top="0px",n.style.left="0px",n.innerHTML="<table><tr><td><div></div></td></tr></table>",n.querySelector("table").style.height="100px",n.querySelector("div").style.height="100%",document.body.appendChild(n);let t=n.querySelector("div").offsetHeight>0;return document.body.removeChild(n),t}class h2 extends ht{constructor(){super(...arguments),this.state={forPrint:!1},this.handleBeforePrint=()=>{Wh(()=>{this.setState({forPrint:!0})})},this.handleAfterPrint=()=>{Wh(()=>{this.setState({forPrint:!1})})}}render(){let{props:e}=this,{options:t}=e,{forPrint:r}=this.state,i=r||t.height==="auto"||t.contentHeight==="auto",o=!i&&t.height!=null?t.height:"",l=["fc",r?"fc-media-print":"fc-media-screen",`fc-direction-${t.direction}`,e.theme.getClass("root")];return wR()||l.push("fc-liquid-hack"),e.children(l,o,i,r)}componentDidMount(){let{emitter:e}=this.props;e.on("_beforeprint",this.handleBeforePrint),e.on("_afterprint",this.handleAfterPrint)}componentWillUnmount(){let{emitter:e}=this.props;e.off("_beforeprint",this.handleBeforePrint),e.off("_afterprint",this.handleAfterPrint)}}class TR{constructor(e){this.component=e.component,this.isHitComboAllowed=e.isHitComboAllowed||null}destroy(){}}function f2(n,e){return{component:n,el:e.el,useEventCenter:e.useEventCenter!=null?e.useEventCenter:!0,isHitComboAllowed:e.isHitComboAllowed||null}}const HT={};class Cf extends Dn{constructor(e,t){super(e,t),this.handleRefresh=()=>{let r=this.computeTiming();r.state.nowDate.valueOf()!==this.state.nowDate.valueOf()&&this.setState(r.state),this.clearTimeout(),this.setTimeout(r.waitMs)},this.handleVisibilityChange=()=>{document.hidden||this.handleRefresh()},this.state=this.computeTiming().state}render(){let{props:e,state:t}=this;return e.children(t.nowDate,t.todayRange)}componentDidMount(){this.setTimeout(),this.context.nowManager.addResetListener(this.handleRefresh),document.addEventListener("visibilitychange",this.handleVisibilityChange)}componentDidUpdate(e){e.unit!==this.props.unit&&(this.clearTimeout(),this.setTimeout())}componentWillUnmount(){this.clearTimeout(),this.context.nowManager.removeResetListener(this.handleRefresh),document.removeEventListener("visibilitychange",this.handleVisibilityChange)}computeTiming(){let{props:e,context:t}=this,r=t.nowManager.getDateMarker(),{nowIndicatorSnap:i}=t.options;i==="auto"&&(i=/year|month|week|day/.test(e.unit)||(e.unitValue||1)===1);let o,l;return i?(o=t.dateEnv.startOf(r,e.unit),l=t.dateEnv.add(o,Qe(1,e.unit)).valueOf()-r.valueOf()):(o=r,l=1e3*60),l=Math.min(1e3*60*60*24,l),{state:{nowDate:o,todayRange:p2(o)},waitMs:l}}setTimeout(e=this.computeTiming().waitMs){this.timeoutId=setTimeout(()=>{const t=this.computeTiming();this.setState(t.state,()=>{this.setTimeout(t.waitMs)})},e)}clearTimeout(){this.timeoutId&&clearTimeout(this.timeoutId)}}Cf.contextType=So;function p2(n){let e=dt(n),t=Ft(e,1);return{start:e,end:t}}class m2{getCurrentData(){return this.currentDataManager.getCurrentData()}dispatch(e){this.currentDataManager.dispatch(e)}get view(){return this.getCurrentData().viewApi}batchRendering(e){e()}updateSize(){this.trigger("_resize",!0)}setOption(e,t){this.dispatch({type:"SET_OPTION",optionName:e,rawOptionValue:t})}getOption(e){return this.currentDataManager.currentCalendarOptionsInput[e]}getAvailableLocaleCodes(){return Object.keys(this.getCurrentData().availableRawLocales)}on(e,t){let{currentDataManager:r}=this;r.currentCalendarOptionsRefiners[e]?r.emitter.on(e,t):console.warn(`Unknown listener name '${e}'`)}off(e,t){this.currentDataManager.emitter.off(e,t)}trigger(e,...t){this.currentDataManager.emitter.trigger(e,...t)}changeView(e,t){this.batchRendering(()=>{if(this.unselect(),t)if(t.start&&t.end)this.dispatch({type:"CHANGE_VIEW_TYPE",viewType:e}),this.dispatch({type:"SET_OPTION",optionName:"visibleRange",rawOptionValue:t});else{let{dateEnv:r}=this.getCurrentData();this.dispatch({type:"CHANGE_VIEW_TYPE",viewType:e,dateMarker:r.createMarker(t)})}else this.dispatch({type:"CHANGE_VIEW_TYPE",viewType:e})})}zoomTo(e,t){let r=this.getCurrentData(),i;t=t||"day",i=r.viewSpecs[t]||this.getUnitViewSpec(t),this.unselect(),i?this.dispatch({type:"CHANGE_VIEW_TYPE",viewType:i.type,dateMarker:e}):this.dispatch({type:"CHANGE_DATE",dateMarker:e})}getUnitViewSpec(e){let{viewSpecs:t,toolbarConfig:r}=this.getCurrentData(),i=[].concat(r.header?r.header.viewsWithButtons:[],r.footer?r.footer.viewsWithButtons:[]),o,l;for(let c in t)i.push(c);for(o=0;o<i.length;o+=1)if(l=t[i[o]],l&&l.singleUnit===e)return l;return null}prev(){this.unselect(),this.dispatch({type:"PREV"})}next(){this.unselect(),this.dispatch({type:"NEXT"})}prevYear(){let e=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:e.dateEnv.addYears(e.currentDate,-1)})}nextYear(){let e=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:e.dateEnv.addYears(e.currentDate,1)})}today(){let e=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:e.nowManager.getDateMarker()})}gotoDate(e){let t=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:t.dateEnv.createMarker(e)})}incrementDate(e){let t=this.getCurrentData(),r=Qe(e);r&&(this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:t.dateEnv.add(t.currentDate,r)}))}getDate(){let e=this.getCurrentData();return e.dateEnv.toDate(e.currentDate)}formatDate(e,t){let{dateEnv:r}=this.getCurrentData();return r.format(r.createMarker(e),Lt(t))}formatRange(e,t,r){let{dateEnv:i}=this.getCurrentData();return i.formatRange(i.createMarker(e),i.createMarker(t),Lt(r),r)}formatIso(e,t){let{dateEnv:r}=this.getCurrentData();return r.formatIso(r.createMarker(e),{omitTime:t})}select(e,t){let r;t==null?e.start!=null?r=e:r={start:e,end:null}:r={start:e,end:t};let i=this.getCurrentData(),o=s2(r,i.dateEnv,Qe({days:1}));o&&(this.dispatch({type:"SELECT_DATES",selection:o}),qV(o,null,i))}unselect(e){let t=this.getCurrentData();t.dateSelection&&(this.dispatch({type:"UNSELECT_DATES"}),GV(e,t))}addEvent(e,t){if(e instanceof Bn){let l=e._def,c=e._instance;return this.getCurrentData().eventStore.defs[l.defId]||(this.dispatch({type:"ADD_EVENTS",eventStore:wg({def:l,instance:c})}),this.triggerEventAdd(e)),e}let r=this.getCurrentData(),i;if(t instanceof ba)i=t.internalEventSource;else if(typeof t=="boolean")t&&([i]=Py(r.eventSources));else if(t!=null){let l=this.getEventSourceById(t);if(!l)return console.warn(`Could not find an event source with ID "${t}"`),null;i=l.internalEventSource}let o=lR(e,i,r,!1);if(o){let l=new Bn(r,o.def,o.def.recurringDef?null:o.instance);return this.dispatch({type:"ADD_EVENTS",eventStore:wg(o)}),this.triggerEventAdd(l),l}return null}triggerEventAdd(e){let{emitter:t}=this.getCurrentData();t.trigger("eventAdd",{event:e,relatedEvents:[],revert:()=>{this.dispatch({type:"REMOVE_EVENTS",eventStore:pR(e)})}})}getEventById(e){let t=this.getCurrentData(),{defs:r,instances:i}=t.eventStore;e=String(e);for(let o in r){let l=r[o];if(l.publicId===e){if(l.recurringDef)return new Bn(t,l,null);for(let c in i){let f=i[c];if(f.defId===l.defId)return new Bn(t,l,f)}}}return null}getEvents(){let e=this.getCurrentData();return Ly(e.eventStore,e)}removeAllEvents(){this.dispatch({type:"REMOVE_ALL_EVENTS"})}getEventSources(){let e=this.getCurrentData(),t=e.eventSources,r=[];for(let i in t)r.push(new ba(e,t[i]));return r}getEventSourceById(e){let t=this.getCurrentData(),r=t.eventSources;e=String(e);for(let i in r)if(r[i].publicId===e)return new ba(t,r[i]);return null}addEventSource(e){let t=this.getCurrentData();if(e instanceof ba)return t.eventSources[e.internalEventSource.sourceId]||this.dispatch({type:"ADD_EVENT_SOURCES",sources:[e.internalEventSource]}),e;let r=cR(e,t);return r?(this.dispatch({type:"ADD_EVENT_SOURCES",sources:[r]}),new ba(t,r)):null}removeAllEventSources(){this.dispatch({type:"REMOVE_ALL_EVENT_SOURCES"})}refetchEvents(){this.dispatch({type:"FETCH_EVENT_SOURCES",isRefetch:!0})}scrollToTime(e){let t=Qe(e);t&&this.trigger("_scrollRequest",{time:t})}}function g2(n,e){let t={left:Math.max(n.left,e.left),right:Math.min(n.right,e.right),top:Math.max(n.top,e.top),bottom:Math.min(n.bottom,e.bottom)};return t.left<t.right&&t.top<t.bottom?t:!1}function AR(n,e,t,r){return{dow:n.getUTCDay(),isDisabled:!!(r&&(!r.activeRange||!os(r.activeRange,n))),isOther:!!(r&&!os(r.currentRange,n)),isToday:!!(e&&os(e,n)),isPast:!!(e&&n<e.start),isFuture:!!(e&&n>=e.end)}}function Fy(n,e){let t=["fc-day",`fc-day-${wM[n.dow]}`];return n.isDisabled?t.push("fc-day-disabled"):(n.isToday&&(t.push("fc-day-today"),t.push(e.getClass("today"))),n.isPast&&t.push("fc-day-past"),n.isFuture&&t.push("fc-day-future"),n.isOther&&t.push("fc-day-other")),t}const y2=Lt({year:"numeric",month:"long",day:"numeric"}),v2=Lt({week:"long"});function Ag(n,e,t="day",r=!0){const{dateEnv:i,options:o,calendarApi:l}=n;let c=i.format(e,t==="week"?v2:y2);if(o.navLinks){let f=i.toDate(e);const p=g=>{let E=t==="day"?o.navLinkDayClick:t==="week"?o.navLinkWeekClick:null;typeof E=="function"?E.call(l,i.toDate(e),g):(typeof E=="string"&&(t=E),l.zoomTo(e,t))};return Object.assign({title:Su(o.navLinkHint,[c,f],c),"data-navlink":""},r?K0(p):{onClick:p})}return{"aria-label":c}}let Cm;function _2(){return Cm||(Cm=E2()),Cm}function E2(){let n=document.createElement("div");n.style.overflow="scroll",n.style.position="absolute",n.style.top="-9999px",n.style.left="-9999px",document.body.appendChild(n);let e=w2(n);return document.body.removeChild(n),e}function w2(n){return{x:n.offsetHeight-n.clientHeight,y:n.offsetWidth-n.clientWidth}}function T2(n){let e=A2(n),t=n.getBoundingClientRect();for(let r of e){let i=g2(t,r.getBoundingClientRect());if(i)t=i;else return null}return t}function A2(n){let e=[];for(;n instanceof HTMLElement;){let t=window.getComputedStyle(n);if(t.position==="fixed")break;/(auto|scroll)/.test(t.overflow+t.overflowY+t.overflowX)&&e.push(n),n=n.parentNode}return e}class $h{constructor(e,t,r,i){this.els=t;let o=this.originClientRect=e.getBoundingClientRect();r&&this.buildElHorizontals(o.left),i&&this.buildElVerticals(o.top)}buildElHorizontals(e){let t=[],r=[];for(let i of this.els){let o=i.getBoundingClientRect();t.push(o.left-e),r.push(o.right-e)}this.lefts=t,this.rights=r}buildElVerticals(e){let t=[],r=[];for(let i of this.els){let o=i.getBoundingClientRect();t.push(o.top-e),r.push(o.bottom-e)}this.tops=t,this.bottoms=r}leftToIndex(e){let{lefts:t,rights:r}=this,i=t.length,o;for(o=0;o<i;o+=1)if(e>=t[o]&&e<r[o])return o}topToIndex(e){let{tops:t,bottoms:r}=this,i=t.length,o;for(o=0;o<i;o+=1)if(e>=t[o]&&e<r[o])return o}getWidth(e){return this.rights[e]-this.lefts[e]}getHeight(e){return this.bottoms[e]-this.tops[e]}similarTo(e){return zd(this.tops||[],e.tops||[])&&zd(this.bottoms||[],e.bottoms||[])&&zd(this.lefts||[],e.lefts||[])&&zd(this.rights||[],e.rights||[])}}function zd(n,e){const t=n.length;if(t!==e.length)return!1;for(let r=0;r<t;r++)if(Math.round(n[r])!==Math.round(e[r]))return!1;return!0}class Co extends ht{constructor(){super(...arguments),this.uid=Io()}prepareHits(){}queryHit(e,t,r,i){return null}isValidSegDownEl(e){return!this.props.eventDrag&&!this.props.eventResize&&!Kr(e,".fc-event-mirror")}isValidDateDownEl(e){return!Kr(e,".fc-event:not(.fc-bg-event)")&&!Kr(e,".fc-more-link")&&!Kr(e,"a[data-navlink]")&&!Kr(e,".fc-popover")}}class I2{constructor(e=t=>t.thickness||1){this.getEntryThickness=e,this.strictOrder=!1,this.allowReslicing=!1,this.maxCoord=-1,this.maxStackCnt=-1,this.levelCoords=[],this.entriesByLevel=[],this.stackCnts={}}addSegs(e){let t=[];for(let r of e)this.insertEntry(r,t);return t}insertEntry(e,t){let r=this.findInsertion(e);this.isInsertionValid(r,e)?this.insertEntryAt(e,r):this.handleInvalidInsertion(r,e,t)}isInsertionValid(e,t){return(this.maxCoord===-1||e.levelCoord+this.getEntryThickness(t)<=this.maxCoord)&&(this.maxStackCnt===-1||e.stackCnt<this.maxStackCnt)}handleInvalidInsertion(e,t,r){if(this.allowReslicing&&e.touchingEntry){const i=Object.assign(Object.assign({},t),{span:IR(t.span,e.touchingEntry.span)});r.push(i),this.splitEntry(t,e.touchingEntry,r)}else r.push(t)}splitEntry(e,t,r){let i=e.span,o=t.span;i.start<o.start&&this.insertEntry({index:e.index,thickness:e.thickness,span:{start:i.start,end:o.start}},r),i.end>o.end&&this.insertEntry({index:e.index,thickness:e.thickness,span:{start:o.end,end:i.end}},r)}insertEntryAt(e,t){let{entriesByLevel:r,levelCoords:i}=this;t.lateral===-1?(bm(i,t.level,t.levelCoord),bm(r,t.level,[e])):bm(r[t.level],t.lateral,e),this.stackCnts[bu(e)]=t.stackCnt}findInsertion(e){let{levelCoords:t,entriesByLevel:r,strictOrder:i,stackCnts:o}=this,l=t.length,c=0,f=-1,p=-1,g=null,E=0;for(let b=0;b<l;b+=1){const V=t[b];if(!i&&V>=c+this.getEntryThickness(e))break;let x=r[b],H,Q=qT(x,e.span.start,WT),Z=Q[0]+Q[1];for(;(H=x[Z])&&H.span.start<e.span.end;){let ae=V+this.getEntryThickness(H);ae>c&&(c=ae,g=H,f=b,p=Z),ae===c&&(E=Math.max(E,o[bu(H)]+1)),Z+=1}}let w=0;if(g)for(w=f+1;w<l&&t[w]<c;)w+=1;let A=-1;return w<l&&t[w]===c&&(A=qT(r[w],e.span.end,WT)[0]),{touchingLevel:f,touchingLateral:p,touchingEntry:g,stackCnt:E,levelCoord:c,level:w,lateral:A}}toRects(){let{entriesByLevel:e,levelCoords:t}=this,r=e.length,i=[];for(let o=0;o<r;o+=1){let l=e[o],c=t[o];for(let f of l)i.push(Object.assign(Object.assign({},f),{thickness:this.getEntryThickness(f),levelCoord:c}))}return i}}function WT(n){return n.span.end}function bu(n){return n.index+":"+n.span.start}function IR(n,e){let t=Math.max(n.start,e.start),r=Math.min(n.end,e.end);return t<r?{start:t,end:r}:null}function bm(n,e,t){n.splice(e,0,t)}function qT(n,e,t){let r=0,i=n.length;if(!i||e<t(n[r]))return[0,0];if(e>t(n[i-1]))return[i,0];for(;r<i;){let o=Math.floor(r+(i-r)/2),l=t(n[o]);if(e<l)i=o;else if(e>l)r=o+1;else return[o,1]}return[r,0]}function S2(n,e){return!n||e>10?Lt({weekday:"short"}):e>1?Lt({weekday:"short",month:"numeric",day:"numeric",omitCommas:!0}):Lt({weekday:"long"})}const SR="fc-col-header-cell";function RR(n){return n.text}class R2 extends ht{render(){let{dateEnv:e,options:t,theme:r,viewApi:i}=this.context,{props:o}=this,{date:l,dateProfile:c}=o,f=AR(l,o.todayRange,null,c),p=[SR].concat(Fy(f,r)),g=e.format(l,o.dayHeaderFormat),E=!f.isDisabled&&o.colCnt>1?Ag(this.context,l):{},w=e.toDate(l);e.namedTimeZoneImpl&&(w=ms(w,36e5));let A=Object.assign(Object.assign(Object.assign({date:w,view:i},o.extraRenderProps),{text:g}),f);return G(ui,{elTag:"th",elClasses:p,elAttrs:Object.assign({role:"columnheader",colSpan:o.colSpan,"data-date":f.isDisabled?void 0:Cy(l)},o.extraDataAttrs),renderProps:A,generatorName:"dayHeaderContent",customGenerator:t.dayHeaderContent,defaultGenerator:RR,classNameGenerator:t.dayHeaderClassNames,didMount:t.dayHeaderDidMount,willUnmount:t.dayHeaderWillUnmount},b=>G("div",{className:"fc-scrollgrid-sync-inner"},!f.isDisabled&&G(b,{elTag:"a",elAttrs:E,elClasses:["fc-col-header-cell-cushion",o.isSticky&&"fc-sticky"]})))}}const C2=Lt({weekday:"long"});class b2 extends ht{render(){let{props:e}=this,{dateEnv:t,theme:r,viewApi:i,options:o}=this.context,l=Ft(new Date(2592e5),e.dow),c={dow:e.dow,isDisabled:!1,isFuture:!1,isPast:!1,isToday:!1,isOther:!1},f=t.format(l,e.dayHeaderFormat),p=Object.assign(Object.assign(Object.assign(Object.assign({date:l},c),{view:i}),e.extraRenderProps),{text:f});return G(ui,{elTag:"th",elClasses:[SR,...Fy(c,r),...e.extraClassNames||[]],elAttrs:Object.assign({role:"columnheader",colSpan:e.colSpan},e.extraDataAttrs),renderProps:p,generatorName:"dayHeaderContent",customGenerator:o.dayHeaderContent,defaultGenerator:RR,classNameGenerator:o.dayHeaderClassNames,didMount:o.dayHeaderDidMount,willUnmount:o.dayHeaderWillUnmount},g=>G("div",{className:"fc-scrollgrid-sync-inner"},G(g,{elTag:"a",elClasses:["fc-col-header-cell-cushion",e.isSticky&&"fc-sticky"],elAttrs:{"aria-label":t.format(l,C2)}})))}}class D2 extends ht{constructor(){super(...arguments),this.createDayHeaderFormatter=He(k2)}render(){let{context:e}=this,{dates:t,dateProfile:r,datesRepDistinctDays:i,renderIntro:o}=this.props,l=this.createDayHeaderFormatter(e.options.dayHeaderFormat,i,t.length);return G(Cf,{unit:"day"},(c,f)=>G("tr",{role:"row"},o&&o("day"),t.map(p=>i?G(R2,{key:p.toISOString(),date:p,dateProfile:r,todayRange:f,colCnt:t.length,dayHeaderFormat:l}):G(b2,{key:p.getUTCDay(),dow:p.getUTCDay(),dayHeaderFormat:l}))))}}function k2(n,e,t){return n||S2(e,t)}class P2{constructor(e,t){let r=e.start,{end:i}=e,o=[],l=[],c=-1;for(;r<i;)t.isHiddenDay(r)?o.push(c+.5):(c+=1,o.push(c),l.push(r)),r=Ft(r,1);this.dates=l,this.indices=o,this.cnt=l.length}sliceRange(e){let t=this.getDateDayIndex(e.start),r=this.getDateDayIndex(Ft(e.end,-1)),i=Math.max(0,t),o=Math.min(this.cnt-1,r);return i=Math.ceil(i),o=Math.floor(o),i<=o?{firstIndex:i,lastIndex:o,isStart:t===i,isEnd:r===o}:null}getDateDayIndex(e){let{indices:t}=this,r=Math.floor(ll(this.dates[0],e));return r<0?t[0]-1:r>=t.length?t[t.length-1]+1:t[r]}}class x2{constructor(e,t){let{dates:r}=e,i,o,l;if(t){for(o=r[0].getUTCDay(),i=1;i<r.length&&r[i].getUTCDay()!==o;i+=1);l=Math.ceil(r.length/i)}else l=1,i=r.length;this.rowCnt=l,this.colCnt=i,this.daySeries=e,this.cells=this.buildCells(),this.headerDates=this.buildHeaderDates()}buildCells(){let e=[];for(let t=0;t<this.rowCnt;t+=1){let r=[];for(let i=0;i<this.colCnt;i+=1)r.push(this.buildCell(t,i));e.push(r)}return e}buildCell(e,t){let r=this.daySeries.dates[e*this.colCnt+t];return{key:r.toISOString(),date:r}}buildHeaderDates(){let e=[];for(let t=0;t<this.colCnt;t+=1)e.push(this.cells[0][t].date);return e}sliceRange(e){let{colCnt:t}=this,r=this.daySeries.sliceRange(e),i=[];if(r){let{firstIndex:o,lastIndex:l}=r,c=o;for(;c<=l;){let f=Math.floor(c/t),p=Math.min((f+1)*t,l+1);i.push({row:f,firstCol:c%t,lastCol:(p-1)%t,isStart:r.isStart&&c===o,isEnd:r.isEnd&&p-1===l}),c=p}}return i}}class N2{constructor(){this.sliceBusinessHours=He(this._sliceBusinessHours),this.sliceDateSelection=He(this._sliceDateSpan),this.sliceEventStore=He(this._sliceEventStore),this.sliceEventDrag=He(this._sliceInteraction),this.sliceEventResize=He(this._sliceInteraction),this.forceDayIfListItem=!1}sliceProps(e,t,r,i,...o){let{eventUiBases:l}=e,c=this.sliceEventStore(e.eventStore,l,t,r,...o);return{dateSelectionSegs:this.sliceDateSelection(e.dateSelection,t,r,l,i,...o),businessHourSegs:this.sliceBusinessHours(e.businessHours,t,r,i,...o),fgEventSegs:c.fg,bgEventSegs:c.bg,eventDrag:this.sliceEventDrag(e.eventDrag,l,t,r,...o),eventResize:this.sliceEventResize(e.eventResize,l,t,r,...o),eventSelection:e.eventSelection}}sliceNowDate(e,t,r,i,...o){return this._sliceDateSpan({range:{start:e,end:ms(e,1)},allDay:!1},t,r,{},i,...o)}_sliceBusinessHours(e,t,r,i,...o){return e?this._sliceEventStore(hc(e,jd(t,!!r),i),{},t,r,...o).bg:[]}_sliceEventStore(e,t,r,i,...o){if(e){let l=BT(e,t,jd(r,!!i),i);return{bg:this.sliceEventRanges(l.bg,o),fg:this.sliceEventRanges(l.fg,o)}}return{bg:[],fg:[]}}_sliceInteraction(e,t,r,i,...o){if(!e)return null;let l=BT(e.mutatedEvents,t,jd(r,!!i),i);return{segs:this.sliceEventRanges(l.fg,o),affectedInstances:e.affectedEvents.instances,isEvent:e.isEvent}}_sliceDateSpan(e,t,r,i,o,...l){if(!e)return[];let c=jd(t,!!r),f=el(e.range,c);if(f){e=Object.assign(Object.assign({},e),{range:f});let p=l2(e,i,o),g=this.sliceRange(e.range,...l);for(let E of g)E.eventRange=p;return g}return[]}sliceEventRanges(e,t){let r=[];for(let i of e)r.push(...this.sliceEventRange(i,t));return r}sliceEventRange(e,t){let r=e.range;this.forceDayIfListItem&&e.ui.display==="list-item"&&(r={start:r.start,end:Ft(r.start,1)});let i=this.sliceRange(r,...t);for(let o of i)o.eventRange=e,o.isStart=e.isStart&&o.isStart,o.isEnd=e.isEnd&&o.isEnd;return i}}function jd(n,e){let t=n.activeRange;return e?t:{start:ms(t.start,n.slotMinTime.milliseconds),end:ms(t.end,n.slotMaxTime.milliseconds-864e5)}}const Hd=/^(visible|hidden)$/;class O2 extends ht{constructor(){super(...arguments),this.handleEl=e=>{this.el=e,kr(this.props.elRef,e)}}render(){let{props:e}=this,{liquid:t,liquidIsAbsolute:r}=e,i=t&&r,o=["fc-scroller"];return t&&(r?o.push("fc-scroller-liquid-absolute"):o.push("fc-scroller-liquid")),G("div",{ref:this.handleEl,className:o.join(" "),style:{overflowX:e.overflowX,overflowY:e.overflowY,left:i&&-(e.overcomeLeft||0)||"",right:i&&-(e.overcomeRight||0)||"",bottom:i&&-(e.overcomeBottom||0)||"",marginLeft:!i&&-(e.overcomeLeft||0)||"",marginRight:!i&&-(e.overcomeRight||0)||"",marginBottom:!i&&-(e.overcomeBottom||0)||"",maxHeight:e.maxHeight||""}},e.children)}needsXScrolling(){if(Hd.test(this.props.overflowX))return!1;let{el:e}=this,t=this.el.getBoundingClientRect().width-this.getYScrollbarWidth(),{children:r}=e;for(let i=0;i<r.length;i+=1)if(r[i].getBoundingClientRect().width>t)return!0;return!1}needsYScrolling(){if(Hd.test(this.props.overflowY))return!1;let{el:e}=this,t=this.el.getBoundingClientRect().height-this.getXScrollbarWidth(),{children:r}=e;for(let i=0;i<r.length;i+=1)if(r[i].getBoundingClientRect().height>t)return!0;return!1}getXScrollbarWidth(){return Hd.test(this.props.overflowX)?0:this.el.offsetHeight-this.el.clientHeight}getYScrollbarWidth(){return Hd.test(this.props.overflowY)?0:this.el.offsetWidth-this.el.clientWidth}}class so{constructor(e){this.masterCallback=e,this.currentMap={},this.depths={},this.callbackMap={},this.handleValue=(t,r)=>{let{depths:i,currentMap:o}=this,l=!1,c=!1;t!==null?(l=r in o,o[r]=t,i[r]=(i[r]||0)+1,c=!0):(i[r]-=1,i[r]||(delete o[r],delete this.callbackMap[r],l=!0)),this.masterCallback&&(l&&this.masterCallback(null,String(r)),c&&this.masterCallback(t,String(r)))}}createRef(e){let t=this.callbackMap[e];return t||(t=this.callbackMap[e]=r=>{this.handleValue(r,String(e))}),t}collect(e,t,r){return tV(this.currentMap,e,t,r)}getAll(){return Py(this.currentMap)}}function M2(n){let e=iM(n,".fc-scrollgrid-shrink"),t=0;for(let r of e)t=Math.max(t,pM(r));return Math.ceil(t)}function CR(n,e){return n.liquid&&e.liquid}function V2(n,e){return e.maxHeight!=null||CR(n,e)}function L2(n,e,t,r){let{expandRows:i}=t;return typeof e.content=="function"?e.content(t):G("table",{role:"presentation",className:[e.tableClassName,n.syncRowHeights?"fc-scrollgrid-sync-table":""].join(" "),style:{minWidth:t.tableMinWidth,width:t.clientWidth,height:i?t.clientHeight:""}},t.tableColGroupNode,G(r?"thead":"tbody",{role:"presentation"},typeof e.rowContent=="function"?e.rowContent(t):e.rowContent))}function F2(n,e){return ps(n,e,nr)}function U2(n,e){let t=[];for(let r of n){let i=r.span||1;for(let o=0;o<i;o+=1)t.push(G("col",{style:{width:r.width==="shrink"?B2(e):r.width||"",minWidth:r.minWidth||""}}))}return G("colgroup",{},...t)}function B2(n){return n??4}function z2(n){for(let e of n)if(e.width==="shrink")return!0;return!1}function j2(n,e){let t=["fc-scrollgrid",e.theme.getClass("table")];return n&&t.push("fc-scrollgrid-liquid"),t}function H2(n,e){let t=["fc-scrollgrid-section",`fc-scrollgrid-section-${n.type}`,n.className];return e&&n.liquid&&n.maxHeight==null&&t.push("fc-scrollgrid-section-liquid"),n.isSticky&&t.push("fc-scrollgrid-section-sticky"),t}function W2(n){return G("div",{className:"fc-scrollgrid-sticky-shim",style:{width:n.clientWidth,minWidth:n.tableMinWidth}})}function GT(n){let{stickyHeaderDates:e}=n;return(e==null||e==="auto")&&(e=n.height==="auto"||n.viewHeight==="auto"),e}function q2(n){let{stickyFooterScrollbar:e}=n;return(e==null||e==="auto")&&(e=n.height==="auto"||n.viewHeight==="auto"),e}class bR extends ht{constructor(){super(...arguments),this.processCols=He(e=>e,F2),this.renderMicroColGroup=He(U2),this.scrollerRefs=new so,this.scrollerElRefs=new so(this._handleScrollerEl.bind(this)),this.state={shrinkWidth:null,forceYScrollbars:!1,scrollerClientWidths:{},scrollerClientHeights:{}},this.handleSizing=()=>{this.safeSetState(Object.assign({shrinkWidth:this.computeShrinkWidth()},this.computeScrollerDims()))}}render(){let{props:e,state:t,context:r}=this,i=e.sections||[],o=this.processCols(e.cols),l=this.renderMicroColGroup(o,t.shrinkWidth),c=j2(e.liquid,r);e.collapsibleWidth&&c.push("fc-scrollgrid-collapsible");let f=i.length,p=0,g,E=[],w=[],A=[];for(;p<f&&(g=i[p]).type==="header";)E.push(this.renderSection(g,l,!0)),p+=1;for(;p<f&&(g=i[p]).type==="body";)w.push(this.renderSection(g,l,!1)),p+=1;for(;p<f&&(g=i[p]).type==="footer";)A.push(this.renderSection(g,l,!0)),p+=1;let b=!wR();const V={role:"rowgroup"};return G("table",{role:"grid",className:c.join(" "),style:{height:e.height}},!!(!b&&E.length)&&G("thead",V,...E),!!(!b&&w.length)&&G("tbody",V,...w),!!(!b&&A.length)&&G("tfoot",V,...A),b&&G("tbody",V,...E,...w,...A))}renderSection(e,t,r){return"outerContent"in e?G(gt,{key:e.key},e.outerContent):G("tr",{key:e.key,role:"presentation",className:H2(e,this.props.liquid).join(" ")},this.renderChunkTd(e,t,e.chunk,r))}renderChunkTd(e,t,r,i){if("outerContent"in r)return r.outerContent;let{props:o}=this,{forceYScrollbars:l,scrollerClientWidths:c,scrollerClientHeights:f}=this.state,p=V2(o,e),g=CR(o,e),E=o.liquid?l?"scroll":p?"auto":"hidden":"visible",w=e.key,A=L2(e,r,{tableColGroupNode:t,tableMinWidth:"",clientWidth:!o.collapsibleWidth&&c[w]!==void 0?c[w]:null,clientHeight:f[w]!==void 0?f[w]:null,expandRows:e.expandRows,syncRowHeights:!1,rowSyncHeights:[],reportRowHeightChange:()=>{}},i);return G(i?"th":"td",{ref:r.elRef,role:"presentation"},G("div",{className:`fc-scroller-harness${g?" fc-scroller-harness-liquid":""}`},G(O2,{ref:this.scrollerRefs.createRef(w),elRef:this.scrollerElRefs.createRef(w),overflowY:E,overflowX:o.liquid?"hidden":"visible",maxHeight:e.maxHeight,liquid:g,liquidIsAbsolute:!0},A)))}_handleScrollerEl(e,t){let r=G2(this.props.sections,t);r&&kr(r.chunk.scrollerElRef,e)}componentDidMount(){this.handleSizing(),this.context.addResizeHandler(this.handleSizing)}componentDidUpdate(){this.handleSizing()}componentWillUnmount(){this.context.removeResizeHandler(this.handleSizing)}computeShrinkWidth(){return z2(this.props.cols)?M2(this.scrollerElRefs.getAll()):0}computeScrollerDims(){let e=_2(),{scrollerRefs:t,scrollerElRefs:r}=this,i=!1,o={},l={};for(let c in t.currentMap){let f=t.currentMap[c];if(f&&f.needsYScrolling()){i=!0;break}}for(let c of this.props.sections){let f=c.key,p=r.currentMap[f];if(p){let g=p.parentNode;o[f]=Math.floor(g.getBoundingClientRect().width-(i?e.y:0)),l[f]=Math.floor(g.getBoundingClientRect().height)}}return{forceYScrollbars:i,scrollerClientWidths:o,scrollerClientHeights:l}}}bR.addStateEquality({scrollerClientWidths:nr,scrollerClientHeights:nr});function G2(n,e){for(let t of n)if(t.key===e)return t;return null}class Uy extends ht{constructor(){super(...arguments),this.buildPublicEvent=He((e,t,r)=>new Bn(e,t,r)),this.handleEl=e=>{this.el=e,kr(this.props.elRef,e),e&&zT(e,this.props.seg)}}render(){const{props:e,context:t}=this,{options:r}=t,{seg:i}=e,{eventRange:o}=i,{ui:l}=o,c={event:this.buildPublicEvent(t,o.def,o.instance),view:t.viewApi,timeText:e.timeText,textColor:l.textColor,backgroundColor:l.backgroundColor,borderColor:l.borderColor,isDraggable:!e.disableDragging&&ZV(i,t),isStartResizable:!e.disableResizing&&e2(i,t),isEndResizable:!e.disableResizing&&t2(i),isMirror:!!(e.isDragging||e.isResizing||e.isDateSelecting),isStart:!!i.isStart,isEnd:!!i.isEnd,isPast:!!e.isPast,isFuture:!!e.isFuture,isToday:!!e.isToday,isSelected:!!e.isSelected,isDragging:!!e.isDragging,isResizing:!!e.isResizing};return G(ui,{elRef:this.handleEl,elTag:e.elTag,elAttrs:e.elAttrs,elClasses:[...n2(c),...i.eventRange.ui.classNames,...e.elClasses||[]],elStyle:e.elStyle,renderProps:c,generatorName:"eventContent",customGenerator:r.eventContent,defaultGenerator:e.defaultGenerator,classNameGenerator:r.eventClassNames,didMount:r.eventDidMount,willUnmount:r.eventWillUnmount},e.children)}componentDidUpdate(e){this.el&&this.props.seg!==e.seg&&zT(this.el,this.props.seg)}}class DR extends ht{render(){let{props:e,context:t}=this,{options:r}=t,{seg:i}=e,{ui:o}=i.eventRange,l=r.eventTimeFormat||e.defaultTimeFormat,c=yR(i,l,t,e.defaultDisplayEventTime,e.defaultDisplayEventEnd);return G(Uy,Object.assign({},e,{elTag:"a",elStyle:{borderColor:o.borderColor,backgroundColor:o.backgroundColor},elAttrs:vR(i,t),defaultGenerator:$2,timeText:c}),(f,p)=>G(gt,null,G(f,{elTag:"div",elClasses:["fc-event-main"],elStyle:{color:p.textColor}}),!!p.isStartResizable&&G("div",{className:"fc-event-resizer fc-event-resizer-start"}),!!p.isEndResizable&&G("div",{className:"fc-event-resizer fc-event-resizer-end"})))}}DR.addPropsEquality({seg:nr});function $2(n){return G("div",{className:"fc-event-main-frame"},n.timeText&&G("div",{className:"fc-event-time"},n.timeText),G("div",{className:"fc-event-title-container"},G("div",{className:"fc-event-title fc-sticky"},n.event.title||G(gt,null," "))))}const Q2=Lt({day:"numeric"});class kR extends ht{constructor(){super(...arguments),this.refineRenderProps=lh(K2)}render(){let{props:e,context:t}=this,{options:r}=t,i=this.refineRenderProps({date:e.date,dateProfile:e.dateProfile,todayRange:e.todayRange,isMonthStart:e.isMonthStart||!1,showDayNumber:e.showDayNumber,extraRenderProps:e.extraRenderProps,viewApi:t.viewApi,dateEnv:t.dateEnv,monthStartFormat:r.monthStartFormat});return G(ui,{elRef:e.elRef,elTag:e.elTag,elAttrs:Object.assign(Object.assign({},e.elAttrs),i.isDisabled?{}:{"data-date":Cy(e.date)}),elClasses:[...Fy(i,t.theme),...e.elClasses||[]],elStyle:e.elStyle,renderProps:i,generatorName:"dayCellContent",customGenerator:r.dayCellContent,defaultGenerator:e.defaultGenerator,classNameGenerator:i.isDisabled?void 0:r.dayCellClassNames,didMount:r.dayCellDidMount,willUnmount:r.dayCellWillUnmount},e.children)}}function PR(n){return!!(n.dayCellContent||_g("dayCellContent",n))}function K2(n){let{date:e,dateEnv:t,dateProfile:r,isMonthStart:i}=n,o=AR(e,n.todayRange,null,r),l=n.showDayNumber?t.format(e,i?n.monthStartFormat:Q2):"";return Object.assign(Object.assign(Object.assign({date:t.toDate(e),view:n.viewApi},o),{isMonthStart:i,dayNumberText:l}),n.extraRenderProps)}class Y2 extends ht{render(){let{props:e}=this,{seg:t}=e;return G(Uy,{elTag:"div",elClasses:["fc-bg-event"],elStyle:{backgroundColor:t.eventRange.ui.backgroundColor},defaultGenerator:J2,seg:t,timeText:"",isDragging:!1,isResizing:!1,isDateSelecting:!1,isSelected:!1,isPast:e.isPast,isFuture:e.isFuture,isToday:e.isToday,disableDragging:!0,disableResizing:!0})}}function J2(n){let{title:e}=n.event;return e&&G("div",{className:"fc-event-title"},n.event.title)}function X2(n){return G("div",{className:`fc-${n}`})}const Z2=n=>G(So.Consumer,null,e=>{let{dateEnv:t,options:r}=e,{date:i}=n,o=r.weekNumberFormat||n.defaultFormat,l=t.computeWeekNumber(i),c=t.format(i,o),f={num:l,text:c,date:i};return G(ui,{elRef:n.elRef,elTag:n.elTag,elAttrs:n.elAttrs,elClasses:n.elClasses,elStyle:n.elStyle,renderProps:f,generatorName:"weekNumberContent",customGenerator:r.weekNumberContent,defaultGenerator:eL,classNameGenerator:r.weekNumberClassNames,didMount:r.weekNumberDidMount,willUnmount:r.weekNumberWillUnmount},n.children)});function eL(n){return n.text}const Dm=10;class tL extends ht{constructor(){super(...arguments),this.state={titleId:Rf()},this.handleRootEl=e=>{this.rootEl=e,this.props.elRef&&kr(this.props.elRef,e)},this.handleDocumentMouseDown=e=>{const t=aM(e);this.rootEl.contains(t)||this.handleCloseClick()},this.handleDocumentKeyDown=e=>{e.key==="Escape"&&this.handleCloseClick()},this.handleCloseClick=()=>{let{onClose:e}=this.props;e&&e()}}render(){let{theme:e,options:t}=this.context,{props:r,state:i}=this,o=["fc-popover",e.getClass("popover")].concat(r.extraClassNames||[]);return HO(G("div",Object.assign({},r.extraAttrs,{id:r.id,className:o.join(" "),"aria-labelledby":i.titleId,ref:this.handleRootEl}),G("div",{className:"fc-popover-header "+e.getClass("popoverHeader")},G("span",{className:"fc-popover-title",id:i.titleId},r.title),G("span",{className:"fc-popover-close "+e.getIconClass("close"),title:t.closeHint,onClick:this.handleCloseClick})),G("div",{className:"fc-popover-body "+e.getClass("popoverContent")},r.children)),r.parentEl)}componentDidMount(){document.addEventListener("mousedown",this.handleDocumentMouseDown),document.addEventListener("keydown",this.handleDocumentKeyDown),this.updateSize()}componentWillUnmount(){document.removeEventListener("mousedown",this.handleDocumentMouseDown),document.removeEventListener("keydown",this.handleDocumentKeyDown)}updateSize(){let{isRtl:e}=this.context,{alignmentEl:t,alignGridTop:r}=this.props,{rootEl:i}=this,o=T2(t);if(o){let l=i.getBoundingClientRect(),c=r?Kr(t,".fc-scrollgrid").getBoundingClientRect().top:o.top,f=e?o.right-l.width:o.left;c=Math.max(c,Dm),f=Math.min(f,document.documentElement.clientWidth-Dm-l.width),f=Math.max(f,Dm);let p=i.offsetParent.getBoundingClientRect();oM(i,{top:c-p.top,left:f-p.left})}}}class nL extends Co{constructor(){super(...arguments),this.handleRootEl=e=>{this.rootEl=e,e?this.context.registerInteractiveComponent(this,{el:e,useEventCenter:!1}):this.context.unregisterInteractiveComponent(this)}}render(){let{options:e,dateEnv:t}=this.context,{props:r}=this,{startDate:i,todayRange:o,dateProfile:l}=r,c=t.format(i,e.dayPopoverFormat);return G(kR,{elRef:this.handleRootEl,date:i,dateProfile:l,todayRange:o},(f,p,g)=>G(tL,{elRef:g.ref,id:r.id,title:c,extraClassNames:["fc-more-popover"].concat(g.className||[]),extraAttrs:g,parentEl:r.parentEl,alignmentEl:r.alignmentEl,alignGridTop:r.alignGridTop,onClose:r.onClose},PR(e)&&G(f,{elTag:"div",elClasses:["fc-more-popover-misc"]}),r.children))}queryHit(e,t,r,i){let{rootEl:o,props:l}=this;return e>=0&&e<r&&t>=0&&t<i?{dateProfile:l.dateProfile,dateSpan:Object.assign({allDay:!l.forceTimed,range:{start:l.startDate,end:l.endDate}},l.extraDateSpan),dayEl:o,rect:{left:0,top:0,right:r,bottom:i},layer:1}:null}}class rL extends ht{constructor(){super(...arguments),this.state={isPopoverOpen:!1,popoverId:Rf()},this.handleLinkEl=e=>{this.linkEl=e,this.props.elRef&&kr(this.props.elRef,e)},this.handleClick=e=>{let{props:t,context:r}=this,{moreLinkClick:i}=r.options,o=$T(t).start;function l(c){let{def:f,instance:p,range:g}=c.eventRange;return{event:new Bn(r,f,p),start:r.dateEnv.toDate(g.start),end:r.dateEnv.toDate(g.end),isStart:c.isStart,isEnd:c.isEnd}}typeof i=="function"&&(i=i({date:o,allDay:!!t.allDayDate,allSegs:t.allSegs.map(l),hiddenSegs:t.hiddenSegs.map(l),jsEvent:e,view:r.viewApi})),!i||i==="popover"?this.setState({isPopoverOpen:!0}):typeof i=="string"&&r.calendarApi.zoomTo(o,i)},this.handlePopoverClose=()=>{this.setState({isPopoverOpen:!1})}}render(){let{props:e,state:t}=this;return G(So.Consumer,null,r=>{let{viewApi:i,options:o,calendarApi:l}=r,{moreLinkText:c}=o,{moreCnt:f}=e,p=$T(e),g=typeof c=="function"?c.call(l,f):`+${f} ${c}`,E=Su(o.moreLinkHint,[f],g),w={num:f,shortText:`+${f}`,text:g,view:i};return G(gt,null,!!e.moreCnt&&G(ui,{elTag:e.elTag||"a",elRef:this.handleLinkEl,elClasses:[...e.elClasses||[],"fc-more-link"],elStyle:e.elStyle,elAttrs:Object.assign(Object.assign(Object.assign({},e.elAttrs),K0(this.handleClick)),{title:E,"aria-expanded":t.isPopoverOpen,"aria-controls":t.isPopoverOpen?t.popoverId:""}),renderProps:w,generatorName:"moreLinkContent",customGenerator:o.moreLinkContent,defaultGenerator:e.defaultGenerator||iL,classNameGenerator:o.moreLinkClassNames,didMount:o.moreLinkDidMount,willUnmount:o.moreLinkWillUnmount},e.children),t.isPopoverOpen&&G(nL,{id:t.popoverId,startDate:p.start,endDate:p.end,dateProfile:e.dateProfile,todayRange:e.todayRange,extraDateSpan:e.extraDateSpan,parentEl:this.parentEl,alignmentEl:e.alignmentElRef?e.alignmentElRef.current:this.linkEl,alignGridTop:e.alignGridTop,forceTimed:e.forceTimed,onClose:this.handlePopoverClose},e.popoverContent()))})}componentDidMount(){this.updateParentEl()}componentDidUpdate(){this.updateParentEl()}updateParentEl(){this.linkEl&&(this.parentEl=Kr(this.linkEl,".fc-view-harness"))}}function iL(n){return n.text}function $T(n){if(n.allDayDate)return{start:n.allDayDate,end:Ft(n.allDayDate,1)};let{hiddenSegs:e}=n;return{start:sL(e),end:aL(e)}}function sL(n){return n.reduce(oL).eventRange.range.start}function oL(n,e){return n.eventRange.range.start<e.eventRange.range.start?n:e}function aL(n){return n.reduce(lL).eventRange.range.end}function lL(n,e){return n.eventRange.range.end>e.eventRange.range.end?n:e}class uL{constructor(){this.handlers=[]}set(e){this.currentValue=e;for(let t of this.handlers)t(e)}subscribe(e){this.handlers.push(e),this.currentValue!==void 0&&e(this.currentValue)}}class cL extends uL{constructor(){super(...arguments),this.map=new Map}handle(e){const{map:t}=this;let r=!1;e.isActive?(t.set(e.id,e),r=!0):t.has(e.id)&&(t.delete(e.id),r=!0),r&&this.set(t)}}const dL=[],xR={code:"en",week:{dow:0,doy:4},direction:"ltr",buttonText:{prev:"prev",next:"next",prevYear:"prev year",nextYear:"next year",year:"year",today:"today",month:"month",week:"week",day:"day",list:"list"},weekText:"W",weekTextLong:"Week",closeHint:"Close",timeHint:"Time",eventHint:"Event",allDayText:"all-day",moreLinkText:"more",noEventsText:"No events to display"},NR=Object.assign(Object.assign({},xR),{buttonHints:{prev:"Previous $0",next:"Next $0",today(n,e){return e==="day"?"Today":`This ${n}`}},viewHint:"$0 view",navLinkHint:"Go to $0",moreLinkHint(n){return`Show ${n} more event${n===1?"":"s"}`}});function hL(n){let e=n.length>0?n[0].code:"en",t=dL.concat(n),r={en:NR};for(let i of t)r[i.code]=i;return{map:r,defaultCode:e}}function OR(n,e){return typeof n=="object"&&!Array.isArray(n)?MR(n.code,[n.code],n):fL(n,e)}function fL(n,e){let t=[].concat(n||[]),r=pL(t,e)||NR;return MR(n,t,r)}function pL(n,e){for(let t=0;t<n.length;t+=1){let r=n[t].toLocaleLowerCase().split("-");for(let i=r.length;i>0;i-=1){let o=r.slice(0,i).join("-");if(e[o])return e[o]}}return null}function MR(n,e,t){let r=ky([xR,t],["buttonText"]);delete r.code;let{week:i}=r;return delete r.week,{codeArg:n,codes:e,week:i,simpleNumberFormat:new Intl.NumberFormat(n),options:r}}function bo(n){return{id:Io(),name:n.name,premiumReleaseDate:n.premiumReleaseDate?new Date(n.premiumReleaseDate):void 0,deps:n.deps||[],reducers:n.reducers||[],isLoadingFuncs:n.isLoadingFuncs||[],contextInit:[].concat(n.contextInit||[]),eventRefiners:n.eventRefiners||{},eventDefMemberAdders:n.eventDefMemberAdders||[],eventSourceRefiners:n.eventSourceRefiners||{},isDraggableTransformers:n.isDraggableTransformers||[],eventDragMutationMassagers:n.eventDragMutationMassagers||[],eventDefMutationAppliers:n.eventDefMutationAppliers||[],dateSelectionTransformers:n.dateSelectionTransformers||[],datePointTransforms:n.datePointTransforms||[],dateSpanTransforms:n.dateSpanTransforms||[],views:n.views||{},viewPropsTransformers:n.viewPropsTransformers||[],isPropsValid:n.isPropsValid||null,externalDefTransforms:n.externalDefTransforms||[],viewContainerAppends:n.viewContainerAppends||[],eventDropTransformers:n.eventDropTransformers||[],componentInteractions:n.componentInteractions||[],calendarInteractions:n.calendarInteractions||[],themeClasses:n.themeClasses||{},eventSourceDefs:n.eventSourceDefs||[],cmdFormatter:n.cmdFormatter,recurringTypes:n.recurringTypes||[],namedTimeZonedImpl:n.namedTimeZonedImpl,initialView:n.initialView||"",elementDraggingImpl:n.elementDraggingImpl,optionChangeHandlers:n.optionChangeHandlers||{},scrollGridImpl:n.scrollGridImpl||null,listenerRefiners:n.listenerRefiners||{},optionRefiners:n.optionRefiners||{},propSetHandlers:n.propSetHandlers||{}}}function mL(n,e){let t={},r={premiumReleaseDate:void 0,reducers:[],isLoadingFuncs:[],contextInit:[],eventRefiners:{},eventDefMemberAdders:[],eventSourceRefiners:{},isDraggableTransformers:[],eventDragMutationMassagers:[],eventDefMutationAppliers:[],dateSelectionTransformers:[],datePointTransforms:[],dateSpanTransforms:[],views:{},viewPropsTransformers:[],isPropsValid:null,externalDefTransforms:[],viewContainerAppends:[],eventDropTransformers:[],componentInteractions:[],calendarInteractions:[],themeClasses:{},eventSourceDefs:[],cmdFormatter:null,recurringTypes:[],namedTimeZonedImpl:null,initialView:"",elementDraggingImpl:null,optionChangeHandlers:{},scrollGridImpl:null,listenerRefiners:{},optionRefiners:{},propSetHandlers:{}};function i(o){for(let l of o){const c=l.name,f=t[c];f===void 0?(t[c]=l.id,i(l.deps),r=yL(r,l)):f!==l.id&&console.warn(`Duplicate plugin '${c}'`)}}return n&&i(n),i(e),r}function gL(){let n=[],e=[],t;return(r,i)=>((!t||!ps(r,n)||!ps(i,e))&&(t=mL(r,i)),n=r,e=i,t)}function yL(n,e){return{premiumReleaseDate:vL(n.premiumReleaseDate,e.premiumReleaseDate),reducers:n.reducers.concat(e.reducers),isLoadingFuncs:n.isLoadingFuncs.concat(e.isLoadingFuncs),contextInit:n.contextInit.concat(e.contextInit),eventRefiners:Object.assign(Object.assign({},n.eventRefiners),e.eventRefiners),eventDefMemberAdders:n.eventDefMemberAdders.concat(e.eventDefMemberAdders),eventSourceRefiners:Object.assign(Object.assign({},n.eventSourceRefiners),e.eventSourceRefiners),isDraggableTransformers:n.isDraggableTransformers.concat(e.isDraggableTransformers),eventDragMutationMassagers:n.eventDragMutationMassagers.concat(e.eventDragMutationMassagers),eventDefMutationAppliers:n.eventDefMutationAppliers.concat(e.eventDefMutationAppliers),dateSelectionTransformers:n.dateSelectionTransformers.concat(e.dateSelectionTransformers),datePointTransforms:n.datePointTransforms.concat(e.datePointTransforms),dateSpanTransforms:n.dateSpanTransforms.concat(e.dateSpanTransforms),views:Object.assign(Object.assign({},n.views),e.views),viewPropsTransformers:n.viewPropsTransformers.concat(e.viewPropsTransformers),isPropsValid:e.isPropsValid||n.isPropsValid,externalDefTransforms:n.externalDefTransforms.concat(e.externalDefTransforms),viewContainerAppends:n.viewContainerAppends.concat(e.viewContainerAppends),eventDropTransformers:n.eventDropTransformers.concat(e.eventDropTransformers),calendarInteractions:n.calendarInteractions.concat(e.calendarInteractions),componentInteractions:n.componentInteractions.concat(e.componentInteractions),themeClasses:Object.assign(Object.assign({},n.themeClasses),e.themeClasses),eventSourceDefs:n.eventSourceDefs.concat(e.eventSourceDefs),cmdFormatter:e.cmdFormatter||n.cmdFormatter,recurringTypes:n.recurringTypes.concat(e.recurringTypes),namedTimeZonedImpl:e.namedTimeZonedImpl||n.namedTimeZonedImpl,initialView:n.initialView||e.initialView,elementDraggingImpl:n.elementDraggingImpl||e.elementDraggingImpl,optionChangeHandlers:Object.assign(Object.assign({},n.optionChangeHandlers),e.optionChangeHandlers),scrollGridImpl:e.scrollGridImpl||n.scrollGridImpl,listenerRefiners:Object.assign(Object.assign({},n.listenerRefiners),e.listenerRefiners),optionRefiners:Object.assign(Object.assign({},n.optionRefiners),e.optionRefiners),propSetHandlers:Object.assign(Object.assign({},n.propSetHandlers),e.propSetHandlers)}}function vL(n,e){return n===void 0?e:e===void 0?n:new Date(Math.max(n.valueOf(),e.valueOf()))}class _s extends dc{}_s.prototype.classes={root:"fc-theme-standard",tableCellShaded:"fc-cell-shaded",buttonGroup:"fc-button-group",button:"fc-button fc-button-primary",buttonActive:"fc-button-active"};_s.prototype.baseIconClass="fc-icon";_s.prototype.iconClasses={close:"fc-icon-x",prev:"fc-icon-chevron-left",next:"fc-icon-chevron-right",prevYear:"fc-icon-chevrons-left",nextYear:"fc-icon-chevrons-right"};_s.prototype.rtlIconClasses={prev:"fc-icon-chevron-right",next:"fc-icon-chevron-left",prevYear:"fc-icon-chevrons-right",nextYear:"fc-icon-chevrons-left"};_s.prototype.iconOverrideOption="buttonIcons";_s.prototype.iconOverrideCustomButtonOption="icon";_s.prototype.iconOverridePrefix="fc-icon-";function _L(n,e){let t={},r;for(r in n)Ig(r,t,n,e);for(r in e)Ig(r,t,n,e);return t}function Ig(n,e,t,r){if(e[n])return e[n];let i=EL(n,e,t,r);return i&&(e[n]=i),i}function EL(n,e,t,r){let i=t[n],o=r[n],l=g=>i&&i[g]!==null?i[g]:o&&o[g]!==null?o[g]:null,c=l("component"),f=l("superType"),p=null;if(f){if(f===n)throw new Error("Can't have a custom view type that references itself");p=Ig(f,e,t,r)}return!c&&p&&(c=p.component),c?{type:n,component:c,defaults:Object.assign(Object.assign({},p?p.defaults:{}),i?i.rawOptions:{}),overrides:Object.assign(Object.assign({},p?p.overrides:{}),o?o.rawOptions:{})}:null}function QT(n){return cc(n,wL)}function wL(n){let e=typeof n=="function"?{component:n}:n,{component:t}=e;return e.content?t=KT(e):t&&!(t.prototype instanceof ht)&&(t=KT(Object.assign(Object.assign({},e),{content:t}))),{superType:e.type,component:t,rawOptions:e}}function KT(n){return e=>G(So.Consumer,null,t=>G(ui,{elTag:"div",elClasses:rR(t.viewSpec),renderProps:Object.assign(Object.assign({},e),{nextDayThreshold:t.options.nextDayThreshold}),generatorName:void 0,customGenerator:n.content,classNameGenerator:n.classNames,didMount:n.didMount,willUnmount:n.willUnmount}))}function TL(n,e,t,r){let i=QT(n),o=QT(e.views),l=_L(i,o);return cc(l,c=>AL(c,o,e,t,r))}function AL(n,e,t,r,i){let o=n.overrides.duration||n.defaults.duration||r.duration||t.duration,l=null,c="",f="",p={};if(o&&(l=IL(o),l)){let w=vg(l);c=w.unit,w.value===1&&(f=c,p=e[c]?e[c].rawOptions:{})}let g=w=>{let A=w.buttonText||{},b=n.defaults.buttonTextKey;return b!=null&&A[b]!=null?A[b]:A[n.type]!=null?A[n.type]:A[f]!=null?A[f]:null},E=w=>{let A=w.buttonHints||{},b=n.defaults.buttonTextKey;return b!=null&&A[b]!=null?A[b]:A[n.type]!=null?A[n.type]:A[f]!=null?A[f]:null};return{type:n.type,component:n.component,duration:l,durationUnit:c,singleUnit:f,optionDefaults:n.defaults,optionOverrides:Object.assign(Object.assign({},p),n.overrides),buttonTextOverride:g(r)||g(t)||n.overrides.buttonText,buttonTextDefault:g(i)||n.defaults.buttonText||g(Ru)||n.type,buttonTitleOverride:E(r)||E(t)||n.overrides.buttonHint,buttonTitleDefault:E(i)||n.defaults.buttonHint||E(Ru)}}let YT={};function IL(n){let e=JSON.stringify(n),t=YT[e];return t===void 0&&(t=Qe(n),YT[e]=t),t}function SL(n,e){switch(e.type){case"CHANGE_VIEW_TYPE":n=e.viewType}return n}function RL(n,e){switch(e.type){case"CHANGE_DATE":return e.dateMarker;default:return n}}function CL(n,e,t){let r=n.initialDate;return r!=null?e.createMarker(r):t.getDateMarker()}function bL(n,e){switch(e.type){case"SET_OPTION":return Object.assign(Object.assign({},n),{[e.optionName]:e.rawOptionValue});default:return n}}function DL(n,e,t,r){let i;switch(e.type){case"CHANGE_VIEW_TYPE":return r.build(e.dateMarker||t);case"CHANGE_DATE":return r.build(e.dateMarker);case"PREV":if(i=r.buildPrev(n,t),i.isValid)return i;break;case"NEXT":if(i=r.buildNext(n,t),i.isValid)return i;break}return n}function kL(n,e,t){let r=e?e.activeRange:null;return LR({},LL(n,t),r,t)}function PL(n,e,t,r){let i=t?t.activeRange:null;switch(e.type){case"ADD_EVENT_SOURCES":return LR(n,e.sources,i,r);case"REMOVE_EVENT_SOURCE":return NL(n,e.sourceId);case"PREV":case"NEXT":case"CHANGE_DATE":case"CHANGE_VIEW_TYPE":return t?FR(n,i,r):n;case"FETCH_EVENT_SOURCES":return By(n,e.sourceIds?X0(e.sourceIds):UR(n,r),i,e.isRefetch||!1,r);case"RECEIVE_EVENTS":case"RECEIVE_EVENT_ERROR":return VL(n,e.sourceId,e.fetchId,e.fetchRange);case"REMOVE_ALL_EVENT_SOURCES":return{};default:return n}}function xL(n,e,t){let r=e?e.activeRange:null;return By(n,UR(n,t),r,!0,t)}function VR(n){for(let e in n)if(n[e].isFetching)return!0;return!1}function LR(n,e,t,r){let i={};for(let o of e)i[o.sourceId]=o;return t&&(i=FR(i,t,r)),Object.assign(Object.assign({},n),i)}function NL(n,e){return Za(n,t=>t.sourceId!==e)}function FR(n,e,t){return By(n,Za(n,r=>OL(r,e,t)),e,!1,t)}function OL(n,e,t){return BR(n,t)?!t.options.lazyFetching||!n.fetchRange||n.isFetching||e.start<n.fetchRange.start||e.end>n.fetchRange.end:!n.latestFetchId}function By(n,e,t,r,i){let o={};for(let l in n){let c=n[l];e[l]?o[l]=ML(c,t,r,i):o[l]=c}return o}function ML(n,e,t,r){let{options:i,calendarApi:o}=r,l=r.pluginHooks.eventSourceDefs[n.sourceDefId],c=Io();return l.fetch({eventSource:n,range:e,isRefetch:t,context:r},f=>{let{rawEvents:p}=f;i.eventSourceSuccess&&(p=i.eventSourceSuccess.call(o,p,f.response)||p),n.success&&(p=n.success.call(o,p,f.response)||p),r.dispatch({type:"RECEIVE_EVENTS",sourceId:n.sourceId,fetchId:c,fetchRange:e,rawEvents:p})},f=>{let p=!1;i.eventSourceFailure&&(i.eventSourceFailure.call(o,f),p=!0),n.failure&&(n.failure(f),p=!0),p||console.warn(f.message,f),r.dispatch({type:"RECEIVE_EVENT_ERROR",sourceId:n.sourceId,fetchId:c,fetchRange:e,error:f})}),Object.assign(Object.assign({},n),{isFetching:!0,latestFetchId:c})}function VL(n,e,t,r){let i=n[e];return i&&t===i.latestFetchId?Object.assign(Object.assign({},n),{[e]:Object.assign(Object.assign({},i),{isFetching:!1,fetchRange:r})}):n}function UR(n,e){return Za(n,t=>BR(t,e))}function LL(n,e){let t=dR(e),r=[].concat(n.eventSources||[]),i=[];n.initialEvents&&r.unshift(n.initialEvents),n.events&&r.unshift(n.events);for(let o of r){let l=cR(o,e,t);l&&i.push(l)}return i}function BR(n,e){return!e.pluginHooks.eventSourceDefs[n.sourceDefId].ignoreRange}function FL(n,e){switch(e.type){case"UNSELECT_DATES":return null;case"SELECT_DATES":return e.selection;default:return n}}function UL(n,e){switch(e.type){case"UNSELECT_EVENT":return"";case"SELECT_EVENT":return e.eventInstanceId;default:return n}}function BL(n,e){let t;switch(e.type){case"UNSET_EVENT_DRAG":return null;case"SET_EVENT_DRAG":return t=e.state,{affectedEvents:t.affectedEvents,mutatedEvents:t.mutatedEvents,isEvent:t.isEvent};default:return n}}function zL(n,e){let t;switch(e.type){case"UNSET_EVENT_RESIZE":return null;case"SET_EVENT_RESIZE":return t=e.state,{affectedEvents:t.affectedEvents,mutatedEvents:t.mutatedEvents,isEvent:t.isEvent};default:return n}}function jL(n,e,t,r,i){let o=n.headerToolbar?JT(n.headerToolbar,n,e,t,r,i):null,l=n.footerToolbar?JT(n.footerToolbar,n,e,t,r,i):null;return{header:o,footer:l}}function JT(n,e,t,r,i,o){let l={},c=[],f=!1;for(let p in n){let g=n[p],E=HL(g,e,t,r,i,o);l[p]=E.widgets,c.push(...E.viewsWithButtons),f=f||E.hasTitle}return{sectionWidgets:l,viewsWithButtons:c,hasTitle:f}}function HL(n,e,t,r,i,o){let l=e.direction==="rtl",c=e.customButtons||{},f=t.buttonText||{},p=e.buttonText||{},g=t.buttonHints||{},E=e.buttonHints||{},w=n?n.split(" "):[],A=[],b=!1;return{widgets:w.map(x=>x.split(",").map(H=>{if(H==="title")return b=!0,{buttonName:H};let Q,Z,ae,ve,he,k;if(Q=c[H])ae=S=>{Q.click&&Q.click.call(S.target,S,S.target)},(ve=r.getCustomButtonIconClass(Q))||(ve=r.getIconClass(H,l))||(he=Q.text),k=Q.hint||Q.text;else if(Z=i[H]){A.push(H),ae=()=>{o.changeView(H)},(he=Z.buttonTextOverride)||(ve=r.getIconClass(H,l))||(he=Z.buttonTextDefault);let S=Z.buttonTextOverride||Z.buttonTextDefault;k=Su(Z.buttonTitleOverride||Z.buttonTitleDefault||e.viewHint,[S,H],S)}else if(o[H])if(ae=()=>{o[H]()},(he=f[H])||(ve=r.getIconClass(H,l))||(he=p[H]),H==="prevYear"||H==="nextYear"){let S=H==="prevYear"?"prev":"next";k=Su(g[S]||E[S],[p.year||"year","year"],p[H])}else k=S=>Su(g[H]||E[H],[p[S]||S,S],p[H]);return{buttonName:H,buttonClick:ae,buttonIcon:ve,buttonText:he,buttonHint:k}})),viewsWithButtons:A,hasTitle:b}}class WL{constructor(e,t,r){this.type=e,this.getCurrentData=t,this.dateEnv=r}get calendar(){return this.getCurrentData().calendarApi}get title(){return this.getCurrentData().viewTitle}get activeStart(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.activeRange.start)}get activeEnd(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.activeRange.end)}get currentStart(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.currentRange.start)}get currentEnd(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.currentRange.end)}getOption(e){return this.getCurrentData().options[e]}}let qL={ignoreRange:!0,parseMeta(n){return Array.isArray(n.events)?n.events:null},fetch(n,e){e({rawEvents:n.eventSource.meta})}};const GL=bo({name:"array-event-source",eventSourceDefs:[qL]});let $L={parseMeta(n){return typeof n.events=="function"?n.events:null},fetch(n,e,t){const{dateEnv:r}=n.context,i=n.eventSource.meta;u2(i.bind(null,_R(n.range,r)),o=>e({rawEvents:o}),t)}};const QL=bo({name:"func-event-source",eventSourceDefs:[$L]}),KL={method:String,extraParams:$,startParam:String,endParam:String,timeZoneParam:String};let YL={parseMeta(n){return n.url&&(n.format==="json"||!n.format)?{url:n.url,format:"json",method:(n.method||"GET").toUpperCase(),extraParams:n.extraParams,startParam:n.startParam,endParam:n.endParam,timeZoneParam:n.timeZoneParam}:null},fetch(n,e,t){const{meta:r}=n.eventSource,i=XL(r,n.range,n.context);c2(r.method,r.url,i).then(([o,l])=>{e({rawEvents:o,response:l})},t)}};const JL=bo({name:"json-event-source",eventSourceRefiners:KL,eventSourceDefs:[YL]});function XL(n,e,t){let{dateEnv:r,options:i}=t,o,l,c,f,p={};return o=n.startParam,o==null&&(o=i.startParam),l=n.endParam,l==null&&(l=i.endParam),c=n.timeZoneParam,c==null&&(c=i.timeZoneParam),typeof n.extraParams=="function"?f=n.extraParams():f=n.extraParams||{},Object.assign(p,f),p[o]=r.formatIso(e.start),p[l]=r.formatIso(e.end),r.timeZone!=="local"&&(p[c]=r.timeZone),p}const ZL={daysOfWeek:$,startTime:Qe,endTime:Qe,duration:Qe,startRecur:$,endRecur:$};let eF={parse(n,e){if(n.daysOfWeek||n.startTime||n.endTime||n.startRecur||n.endRecur){let t={daysOfWeek:n.daysOfWeek||null,startTime:n.startTime||null,endTime:n.endTime||null,startRecur:n.startRecur?e.createMarker(n.startRecur):null,endRecur:n.endRecur?e.createMarker(n.endRecur):null,dateEnv:e},r;return n.duration&&(r=n.duration),!r&&n.startTime&&n.endTime&&(r=vM(n.endTime,n.startTime)),{allDayGuess:!n.startTime&&!n.endTime,duration:r,typeData:t}}return null},expand(n,e,t){let r=el(e,{start:n.startRecur,end:n.endRecur});return r?nF(n.daysOfWeek,n.startTime,n.dateEnv,t,r):[]}};const tF=bo({name:"simple-recurring-event",recurringTypes:[eF],eventRefiners:ZL});function nF(n,e,t,r,i){let o=n?X0(n):null,l=dt(i.start),c=i.end,f=[];for(e&&(e.milliseconds<0?c=Ft(c,1):e.milliseconds>=1e3*60*60*24&&(l=Ft(l,-1)));l<c;){let p;(!o||o[l.getUTCDay()])&&(e?p=r.add(l,e):p=l,f.push(r.createMarker(t.toDate(p)))),l=Ft(l,1)}return f}const rF=bo({name:"change-handler",optionChangeHandlers:{events(n,e){XT([n],e)},eventSources:XT}});function XT(n,e){let t=Py(e.getCurrentData().eventSources);if(t.length===1&&n.length===1&&Array.isArray(t[0]._raw)&&Array.isArray(n[0])){e.dispatch({type:"RESET_RAW_EVENTS",sourceId:t[0].sourceId,rawEvents:n[0]});return}let r=[];for(let i of n){let o=!1;for(let l=0;l<t.length;l+=1)if(t[l]._raw===i){t.splice(l,1),o=!0;break}o||r.push(i)}for(let i of t)e.dispatch({type:"REMOVE_EVENT_SOURCE",sourceId:i.sourceId});for(let i of r)e.calendarApi.addEventSource(i)}function iF(n,e){e.emitter.trigger("datesSet",Object.assign(Object.assign({},_R(n.activeRange,e.dateEnv)),{view:e.viewApi}))}function sF(n,e){let{emitter:t}=e;t.hasHandlers("eventsSet")&&t.trigger("eventsSet",Ly(n,e))}const oF=[GL,QL,JL,tF,rF,bo({name:"misc",isLoadingFuncs:[n=>VR(n.eventSources)],propSetHandlers:{dateProfile:iF,eventStore:sF}})];class aF{constructor(e,t){this.runTaskOption=e,this.drainedOption=t,this.queue=[],this.delayedRunner=new Ry(this.drain.bind(this))}request(e,t){this.queue.push(e),this.delayedRunner.request(t)}pause(e){this.delayedRunner.pause(e)}resume(e,t){this.delayedRunner.resume(e,t)}drain(){let{queue:e}=this;for(;e.length;){let t=[],r;for(;r=e.shift();)this.runTask(r),t.push(r);this.drained(t)}}runTask(e){this.runTaskOption&&this.runTaskOption(e)}drained(e){this.drainedOption&&this.drainedOption(e)}}function lF(n,e,t){let r;return/^(year|month)$/.test(n.currentRangeUnit)?r=n.currentRange:r=n.activeRange,t.formatRange(r.start,r.end,Lt(e.titleFormat||uF(n)),{isEndExclusive:n.isRangeAllDay,defaultSeparator:e.titleRangeSeparator})}function uF(n){let{currentRangeUnit:e}=n;if(e==="year")return{year:"numeric"};if(e==="month")return{year:"numeric",month:"long"};let t=Bh(n.currentRange.start,n.currentRange.end);return t!==null&&t>1?{year:"numeric",month:"short",day:"numeric"}:{year:"numeric",month:"long",day:"numeric"}}class ZT{constructor(){this.resetListeners=new Set}handleInput(e,t){const r=this.dateEnv;if(e!==r&&(typeof t=="function"?this.nowFn=t:r||(this.nowAnchorDate=e.toDate(t?e.createMarker(t):e.createNowMarker()),this.nowAnchorQueried=Date.now()),this.dateEnv=e,r))for(const i of this.resetListeners.values())i()}getDateMarker(){return this.nowAnchorDate?this.dateEnv.timestampToMarker(this.nowAnchorDate.valueOf()+(Date.now()-this.nowAnchorQueried)):this.dateEnv.createMarker(this.nowFn())}addResetListener(e){this.resetListeners.add(e)}removeResetListener(e){this.resetListeners.delete(e)}}class cF{constructor(e){this.computeCurrentViewData=He(this._computeCurrentViewData),this.organizeRawLocales=He(hL),this.buildLocale=He(OR),this.buildPluginHooks=gL(),this.buildDateEnv=He(dF),this.buildTheme=He(hF),this.parseToolbars=He(jL),this.buildViewSpecs=He(TL),this.buildDateProfileGenerator=lh(fF),this.buildViewApi=He(pF),this.buildViewUiProps=lh(yF),this.buildEventUiBySource=He(mF,nr),this.buildEventUiBases=He(gF),this.parseContextBusinessHours=lh(vF),this.buildTitle=He(lF),this.nowManager=new ZT,this.emitter=new UV,this.actionRunner=new aF(this._handleAction.bind(this),this.updateData.bind(this)),this.currentCalendarOptionsInput={},this.currentCalendarOptionsRefined={},this.currentViewOptionsInput={},this.currentViewOptionsRefined={},this.currentCalendarOptionsRefiners={},this.optionsForRefining=[],this.optionsForHandling=[],this.getCurrentData=()=>this.data,this.dispatch=w=>{this.actionRunner.request(w)},this.props=e,this.actionRunner.pause(),this.nowManager=new ZT;let t={},r=this.computeOptionsData(e.optionOverrides,t,e.calendarApi),i=r.calendarOptions.initialView||r.pluginHooks.initialView,o=this.computeCurrentViewData(i,r,e.optionOverrides,t);e.calendarApi.currentDataManager=this,this.emitter.setThisContext(e.calendarApi),this.emitter.setOptions(o.options);let l={nowManager:this.nowManager,dateEnv:r.dateEnv,options:r.calendarOptions,pluginHooks:r.pluginHooks,calendarApi:e.calendarApi,dispatch:this.dispatch,emitter:this.emitter,getCurrentData:this.getCurrentData},c=CL(r.calendarOptions,r.dateEnv,this.nowManager),f=o.dateProfileGenerator.build(c);os(f.activeRange,c)||(c=f.currentRange.start);for(let w of r.pluginHooks.contextInit)w(l);let p=kL(r.calendarOptions,f,l),g={dynamicOptionOverrides:t,currentViewType:i,currentDate:c,dateProfile:f,businessHours:this.parseContextBusinessHours(l),eventSources:p,eventUiBases:{},eventStore:wo(),renderableEventStore:wo(),dateSelection:null,eventSelection:"",eventDrag:null,eventResize:null,selectionConfig:this.buildViewUiProps(l).selectionConfig},E=Object.assign(Object.assign({},l),g);for(let w of r.pluginHooks.reducers)Object.assign(g,w(null,null,E));km(g,l)&&this.emitter.trigger("loading",!0),this.state=g,this.updateData(),this.actionRunner.resume()}resetOptions(e,t){let{props:r}=this;t===void 0?r.optionOverrides=e:(r.optionOverrides=Object.assign(Object.assign({},r.optionOverrides||{}),e),this.optionsForRefining.push(...t)),(t===void 0||t.length)&&this.actionRunner.request({type:"NOTHING"})}_handleAction(e){let{props:t,state:r,emitter:i}=this,o=bL(r.dynamicOptionOverrides,e),l=this.computeOptionsData(t.optionOverrides,o,t.calendarApi),c=SL(r.currentViewType,e),f=this.computeCurrentViewData(c,l,t.optionOverrides,o);t.calendarApi.currentDataManager=this,i.setThisContext(t.calendarApi),i.setOptions(f.options);let p={nowManager:this.nowManager,dateEnv:l.dateEnv,options:l.calendarOptions,pluginHooks:l.pluginHooks,calendarApi:t.calendarApi,dispatch:this.dispatch,emitter:i,getCurrentData:this.getCurrentData},{currentDate:g,dateProfile:E}=r;this.data&&this.data.dateProfileGenerator!==f.dateProfileGenerator&&(E=f.dateProfileGenerator.build(g)),g=RL(g,e),E=DL(E,e,g,f.dateProfileGenerator),(e.type==="PREV"||e.type==="NEXT"||!os(E.currentRange,g))&&(g=E.currentRange.start);let w=PL(r.eventSources,e,E,p),A=OV(r.eventStore,e,w,E,p),V=VR(w)&&!f.options.progressiveEventRendering&&r.renderableEventStore||A,{eventUiSingleBase:x,selectionConfig:H}=this.buildViewUiProps(p),Q=this.buildEventUiBySource(w),Z=this.buildEventUiBases(V.defs,x,Q),ae={dynamicOptionOverrides:o,currentViewType:c,currentDate:g,dateProfile:E,eventSources:w,eventStore:A,renderableEventStore:V,selectionConfig:H,eventUiBases:Z,businessHours:this.parseContextBusinessHours(p),dateSelection:FL(r.dateSelection,e),eventSelection:UL(r.eventSelection,e),eventDrag:BL(r.eventDrag,e),eventResize:zL(r.eventResize,e)},ve=Object.assign(Object.assign({},p),ae);for(let S of l.pluginHooks.reducers)Object.assign(ae,S(r,e,ve));let he=km(r,p),k=km(ae,p);!he&&k?i.trigger("loading",!0):he&&!k&&i.trigger("loading",!1),this.state=ae,t.onAction&&t.onAction(e)}updateData(){let{props:e,state:t}=this,r=this.data,i=this.computeOptionsData(e.optionOverrides,t.dynamicOptionOverrides,e.calendarApi),o=this.computeCurrentViewData(t.currentViewType,i,e.optionOverrides,t.dynamicOptionOverrides),l=this.data=Object.assign(Object.assign(Object.assign({nowManager:this.nowManager,viewTitle:this.buildTitle(t.dateProfile,o.options,i.dateEnv),calendarApi:e.calendarApi,dispatch:this.dispatch,emitter:this.emitter,getCurrentData:this.getCurrentData},i),o),t),c=i.pluginHooks.optionChangeHandlers,f=r&&r.calendarOptions,p=i.calendarOptions;if(f&&f!==p){f.timeZone!==p.timeZone&&(t.eventSources=l.eventSources=xL(l.eventSources,t.dateProfile,l),t.eventStore=l.eventStore=FT(l.eventStore,r.dateEnv,l.dateEnv),t.renderableEventStore=l.renderableEventStore=FT(l.renderableEventStore,r.dateEnv,l.dateEnv));for(let g in c)(this.optionsForHandling.indexOf(g)!==-1||f[g]!==p[g])&&c[g](p[g],l)}this.optionsForHandling=[],e.onData&&e.onData(l)}computeOptionsData(e,t,r){if(!this.optionsForRefining.length&&e===this.stableOptionOverrides&&t===this.stableDynamicOptionOverrides)return this.stableCalendarOptionsData;let{refinedOptions:i,pluginHooks:o,localeDefaults:l,availableLocaleData:c,extra:f}=this.processRawCalendarOptions(e,t);eA(f);let p=this.buildDateEnv(i.timeZone,i.locale,i.weekNumberCalculation,i.firstDay,i.weekText,o,c,i.defaultRangeSeparator),g=this.buildViewSpecs(o.views,this.stableOptionOverrides,this.stableDynamicOptionOverrides,l),E=this.buildTheme(i,o),w=this.parseToolbars(i,this.stableOptionOverrides,E,g,r);return this.stableCalendarOptionsData={calendarOptions:i,pluginHooks:o,dateEnv:p,viewSpecs:g,theme:E,toolbarConfig:w,localeDefaults:l,availableRawLocales:c.map}}processRawCalendarOptions(e,t){let{locales:r,locale:i}=Im([Ru,e,t]),o=this.organizeRawLocales(r),l=o.map,c=this.buildLocale(i||o.defaultCode,l).options,f=this.buildPluginHooks(e.plugins||[],oF),p=this.currentCalendarOptionsRefiners=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},PT),xT),NT),f.listenerRefiners),f.optionRefiners),g={},E=Im([Ru,c,e,t]),w={},A=this.currentCalendarOptionsInput,b=this.currentCalendarOptionsRefined,V=!1;for(let x in E)this.optionsForRefining.indexOf(x)===-1&&(E[x]===A[x]||Js[x]&&x in A&&Js[x](A[x],E[x]))?w[x]=b[x]:p[x]?(w[x]=p[x](E[x]),V=!0):g[x]=A[x];return V&&(this.currentCalendarOptionsInput=E,this.currentCalendarOptionsRefined=w,this.stableOptionOverrides=e,this.stableDynamicOptionOverrides=t),this.optionsForHandling.push(...this.optionsForRefining),this.optionsForRefining=[],{rawOptions:this.currentCalendarOptionsInput,refinedOptions:this.currentCalendarOptionsRefined,pluginHooks:f,availableLocaleData:o,localeDefaults:c,extra:g}}_computeCurrentViewData(e,t,r,i){let o=t.viewSpecs[e];if(!o)throw new Error(`viewType "${e}" is not available. Please make sure you've loaded all neccessary plugins`);let{refinedOptions:l,extra:c}=this.processRawViewOptions(o,t.pluginHooks,t.localeDefaults,r,i);eA(c),this.nowManager.handleInput(t.dateEnv,l.now);let f=this.buildDateProfileGenerator({dateProfileGeneratorClass:o.optionDefaults.dateProfileGeneratorClass,nowManager:this.nowManager,duration:o.duration,durationUnit:o.durationUnit,usesMinMaxTime:o.optionDefaults.usesMinMaxTime,dateEnv:t.dateEnv,calendarApi:this.props.calendarApi,slotMinTime:l.slotMinTime,slotMaxTime:l.slotMaxTime,showNonCurrentDates:l.showNonCurrentDates,dayCount:l.dayCount,dateAlignment:l.dateAlignment,dateIncrement:l.dateIncrement,hiddenDays:l.hiddenDays,weekends:l.weekends,validRangeInput:l.validRange,visibleRangeInput:l.visibleRange,fixedWeekCount:l.fixedWeekCount}),p=this.buildViewApi(e,this.getCurrentData,t.dateEnv);return{viewSpec:o,options:l,dateProfileGenerator:f,viewApi:p}}processRawViewOptions(e,t,r,i,o){let l=Im([Ru,e.optionDefaults,r,i,e.optionOverrides,o]),c=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},PT),xT),NT),YM),t.listenerRefiners),t.optionRefiners),f={},p=this.currentViewOptionsInput,g=this.currentViewOptionsRefined,E=!1,w={};for(let A in l)l[A]===p[A]||Js[A]&&Js[A](l[A],p[A])?f[A]=g[A]:(l[A]===this.currentCalendarOptionsInput[A]||Js[A]&&Js[A](l[A],this.currentCalendarOptionsInput[A])?A in this.currentCalendarOptionsRefined&&(f[A]=this.currentCalendarOptionsRefined[A]):c[A]?f[A]=c[A](l[A]):w[A]=l[A],E=!0);return E&&(this.currentViewOptionsInput=l,this.currentViewOptionsRefined=f),{rawOptions:this.currentViewOptionsInput,refinedOptions:this.currentViewOptionsRefined,extra:w}}}function dF(n,e,t,r,i,o,l,c){let f=OR(e||l.defaultCode,l.map);return new aV({calendarSystem:"gregory",timeZone:n,namedTimeZoneImpl:o.namedTimeZonedImpl,locale:f,weekNumberCalculation:t,firstDay:r,weekText:i,cmdFormatter:o.cmdFormatter,defaultSeparator:c})}function hF(n,e){let t=e.themeClasses[n.themeSystem]||_s;return new t(n)}function fF(n){let e=n.dateProfileGeneratorClass||oR;return new e(n)}function pF(n,e,t){return new WL(n,e,t)}function mF(n){return cc(n,e=>e.ui)}function gF(n,e,t){let r={"":e};for(let i in n){let o=n[i];o.sourceId&&t[o.sourceId]&&(r[i]=t[o.sourceId])}return r}function yF(n){let{options:e}=n;return{eventUiSingleBase:Gh({display:e.eventDisplay,editable:e.editable,startEditable:e.eventStartEditable,durationEditable:e.eventDurationEditable,constraint:e.eventConstraint,overlap:typeof e.eventOverlap=="boolean"?e.eventOverlap:void 0,allow:e.eventAllow,backgroundColor:e.eventBackgroundColor,borderColor:e.eventBorderColor,textColor:e.eventTextColor,color:e.eventColor},n),selectionConfig:Gh({constraint:e.selectConstraint,overlap:typeof e.selectOverlap=="boolean"?e.selectOverlap:void 0,allow:e.selectAllow},n)}}function km(n,e){for(let t of e.pluginHooks.isLoadingFuncs)if(t(n))return!0;return!1}function vF(n){return HV(n.options.businessHours,n)}function eA(n,e){for(let t in n)console.warn(`Unknown option '${t}'`)}class _F extends ht{render(){let e=this.props.widgetGroups.map(t=>this.renderWidgetGroup(t));return G("div",{className:"fc-toolbar-chunk"},...e)}renderWidgetGroup(e){let{props:t}=this,{theme:r}=this.context,i=[],o=!0;for(let l of e){let{buttonName:c,buttonClick:f,buttonText:p,buttonIcon:g,buttonHint:E}=l;if(c==="title")o=!1,i.push(G("h2",{className:"fc-toolbar-title",id:t.titleId},t.title));else{let w=c===t.activeButton,A=!t.isTodayEnabled&&c==="today"||!t.isPrevEnabled&&c==="prev"||!t.isNextEnabled&&c==="next",b=[`fc-${c}-button`,r.getClass("button")];w&&b.push(r.getClass("buttonActive")),i.push(G("button",{type:"button",title:typeof E=="function"?E(t.navUnit):E,disabled:A,"aria-pressed":w,className:b.join(" "),onClick:f},p||(g?G("span",{className:g,role:"img"}):"")))}}if(i.length>1){let l=o&&r.getClass("buttonGroup")||"";return G("div",{className:l},...i)}return i[0]}}class tA extends ht{render(){let{model:e,extraClassName:t}=this.props,r=!1,i,o,l=e.sectionWidgets,c=l.center;return l.left?(r=!0,i=l.left):i=l.start,l.right?(r=!0,o=l.right):o=l.end,G("div",{className:[t||"","fc-toolbar",r?"fc-toolbar-ltr":""].join(" ")},this.renderSection("start",i||[]),this.renderSection("center",c||[]),this.renderSection("end",o||[]))}renderSection(e,t){let{props:r}=this;return G(_F,{key:e,widgetGroups:t,title:r.title,navUnit:r.navUnit,activeButton:r.activeButton,isTodayEnabled:r.isTodayEnabled,isPrevEnabled:r.isPrevEnabled,isNextEnabled:r.isNextEnabled,titleId:r.titleId})}}class EF extends ht{constructor(){super(...arguments),this.state={availableWidth:null},this.handleEl=e=>{this.el=e,kr(this.props.elRef,e),this.updateAvailableWidth()},this.handleResize=()=>{this.updateAvailableWidth()}}render(){let{props:e,state:t}=this,{aspectRatio:r}=e,i=["fc-view-harness",r||e.liquid||e.height?"fc-view-harness-active":"fc-view-harness-passive"],o="",l="";return r?t.availableWidth!==null?o=t.availableWidth/r:l=`${1/r*100}%`:o=e.height||"",G("div",{"aria-labelledby":e.labeledById,ref:this.handleEl,className:i.join(" "),style:{height:o,paddingBottom:l}},e.children)}componentDidMount(){this.context.addResizeHandler(this.handleResize)}componentWillUnmount(){this.context.removeResizeHandler(this.handleResize)}updateAvailableWidth(){this.el&&this.props.aspectRatio&&this.setState({availableWidth:this.el.offsetWidth})}}class wF extends TR{constructor(e){super(e),this.handleSegClick=(t,r)=>{let{component:i}=this,{context:o}=i,l=Tg(r);if(l&&i.isValidSegDownEl(t.target)){let c=Kr(t.target,".fc-event-forced-url"),f=c?c.querySelector("a[href]").href:"";o.emitter.trigger("eventClick",{el:r,event:new Bn(i.context,l.eventRange.def,l.eventRange.instance),jsEvent:t,view:o.viewApi}),f&&!t.defaultPrevented&&(window.location.href=f)}},this.destroy=Q0(e.el,"click",".fc-event",this.handleSegClick)}}class TF extends TR{constructor(e){super(e),this.handleEventElRemove=t=>{t===this.currentSegEl&&this.handleSegLeave(null,this.currentSegEl)},this.handleSegEnter=(t,r)=>{Tg(r)&&(this.currentSegEl=r,this.triggerEvent("eventMouseEnter",t,r))},this.handleSegLeave=(t,r)=>{this.currentSegEl&&(this.currentSegEl=null,this.triggerEvent("eventMouseLeave",t,r))},this.removeHoverListeners=uM(e.el,".fc-event",this.handleSegEnter,this.handleSegLeave)}destroy(){this.removeHoverListeners()}triggerEvent(e,t,r){let{component:i}=this,{context:o}=i,l=Tg(r);(!t||i.isValidSegDownEl(t.target))&&o.emitter.trigger(e,{el:r,event:new Bn(o,l.eventRange.def,l.eventRange.instance),jsEvent:t,view:o.viewApi})}}class AF extends Ro{constructor(){super(...arguments),this.buildViewContext=He(cV),this.buildViewPropTransformers=He(SF),this.buildToolbarProps=He(IF),this.headerRef=si(),this.footerRef=si(),this.interactionsStore={},this.state={viewLabelId:Rf()},this.registerInteractiveComponent=(e,t)=>{let r=f2(e,t),l=[wF,TF].concat(this.props.pluginHooks.componentInteractions).map(c=>new c(r));this.interactionsStore[e.uid]=l,HT[e.uid]=r},this.unregisterInteractiveComponent=e=>{let t=this.interactionsStore[e.uid];if(t){for(let r of t)r.destroy();delete this.interactionsStore[e.uid]}delete HT[e.uid]},this.resizeRunner=new Ry(()=>{this.props.emitter.trigger("_resize",!0),this.props.emitter.trigger("windowResize",{view:this.props.viewApi})}),this.handleWindowResize=e=>{let{options:t}=this.props;t.handleWindowResize&&e.target===window&&this.resizeRunner.request(t.windowResizeDelay)}}render(){let{props:e}=this,{toolbarConfig:t,options:r}=e,i=!1,o="",l;e.isHeightAuto||e.forPrint?o="":r.height!=null?i=!0:r.contentHeight!=null?o=r.contentHeight:l=Math.max(r.aspectRatio,.5);let c=this.buildViewContext(e.viewSpec,e.viewApi,e.options,e.dateProfileGenerator,e.dateEnv,e.nowManager,e.theme,e.pluginHooks,e.dispatch,e.getCurrentData,e.emitter,e.calendarApi,this.registerInteractiveComponent,this.unregisterInteractiveComponent),f=t.header&&t.header.hasTitle?this.state.viewLabelId:void 0;return G(So.Provider,{value:c},G(Cf,{unit:"day"},p=>{let g=this.buildToolbarProps(e.viewSpec,e.dateProfile,e.dateProfileGenerator,e.currentDate,p,e.viewTitle);return G(gt,null,t.header&&G(tA,Object.assign({ref:this.headerRef,extraClassName:"fc-header-toolbar",model:t.header,titleId:f},g)),G(EF,{liquid:i,height:o,aspectRatio:l,labeledById:f},this.renderView(e),this.buildAppendContent()),t.footer&&G(tA,Object.assign({ref:this.footerRef,extraClassName:"fc-footer-toolbar",model:t.footer,titleId:""},g)))}))}componentDidMount(){let{props:e}=this;this.calendarInteractions=e.pluginHooks.calendarInteractions.map(r=>new r(e)),window.addEventListener("resize",this.handleWindowResize);let{propSetHandlers:t}=e.pluginHooks;for(let r in t)t[r](e[r],e)}componentDidUpdate(e){let{props:t}=this,{propSetHandlers:r}=t.pluginHooks;for(let i in r)t[i]!==e[i]&&r[i](t[i],t)}componentWillUnmount(){window.removeEventListener("resize",this.handleWindowResize),this.resizeRunner.clear();for(let e of this.calendarInteractions)e.destroy();this.props.emitter.trigger("_unmount")}buildAppendContent(){let{props:e}=this,t=e.pluginHooks.viewContainerAppends.map(r=>r(e));return G(gt,{},...t)}renderView(e){let{pluginHooks:t}=e,{viewSpec:r}=e,i={dateProfile:e.dateProfile,businessHours:e.businessHours,eventStore:e.renderableEventStore,eventUiBases:e.eventUiBases,dateSelection:e.dateSelection,eventSelection:e.eventSelection,eventDrag:e.eventDrag,eventResize:e.eventResize,isHeightAuto:e.isHeightAuto,forPrint:e.forPrint},o=this.buildViewPropTransformers(t.viewPropsTransformers);for(let c of o)Object.assign(i,c.transform(i,e));let l=r.component;return G(l,Object.assign({},i))}}function IF(n,e,t,r,i,o){let l=t.build(i,void 0,!1),c=t.buildPrev(e,r,!1),f=t.buildNext(e,r,!1);return{title:o,activeButton:n.type,navUnit:n.singleUnit,isTodayEnabled:l.isValid&&!os(e.currentRange,i),isPrevEnabled:c.isValid,isNextEnabled:f.isValid}}function SF(n){return n.map(e=>new e)}let RF=class extends m2{constructor(e,t={}){super(),this.isRendering=!1,this.isRendered=!1,this.currentClassNames=[],this.customContentRenderId=0,this.handleAction=r=>{switch(r.type){case"SET_EVENT_DRAG":case"SET_EVENT_RESIZE":this.renderRunner.tryDrain()}},this.handleData=r=>{this.currentData=r,this.renderRunner.request(r.calendarOptions.rerenderDelay)},this.handleRenderRequest=()=>{if(this.isRendering){this.isRendered=!0;let{currentData:r}=this;Wh(()=>{Gu(G(h2,{options:r.calendarOptions,theme:r.theme,emitter:r.emitter},(i,o,l,c)=>(this.setClassNames(i),this.setHeight(o),G(nR.Provider,{value:this.customContentRenderId},G(AF,Object.assign({isHeightAuto:l,forPrint:c},r))))),this.el)})}else this.isRendered&&(this.isRendered=!1,Gu(null,this.el),this.setClassNames([]),this.setHeight(""))},JO(e),this.el=e,this.renderRunner=new Ry(this.handleRenderRequest),new cF({optionOverrides:t,calendarApi:this,onAction:this.handleAction,onData:this.handleData})}render(){let e=this.isRendering;e?this.customContentRenderId+=1:this.isRendering=!0,this.renderRunner.request(),e&&this.updateSize()}destroy(){this.isRendering&&(this.isRendering=!1,this.renderRunner.request())}updateSize(){Wh(()=>{super.updateSize()})}batchRendering(e){this.renderRunner.pause("batchRendering"),e(),this.renderRunner.resume("batchRendering")}pauseRendering(){this.renderRunner.pause("pauseRendering")}resumeRendering(){this.renderRunner.resume("pauseRendering",!0)}resetOptions(e,t){this.currentDataManager.resetOptions(e,t)}setClassNames(e){if(!ps(e,this.currentClassNames)){let{classList:t}=this.el;for(let r of this.currentClassNames)t.remove(r);for(let r of e)t.add(r);this.currentClassNames=e}}setHeight(e){$0(this.el,"height",e)}};const CF=parseInt(String(Pm.version).split(".")[0]),bF=CF<18;class zR extends Dt.Component{constructor(){super(...arguments),this.elRef=Dt.createRef(),this.isUpdating=!1,this.isUnmounting=!1,this.state={customRenderingMap:new Map},this.requestResize=()=>{this.isUnmounting||(this.cancelResize(),this.resizeId=requestAnimationFrame(()=>{this.doResize()}))}}render(){const e=[];for(const t of this.state.customRenderingMap.values())e.push(Pm.createElement(DF,{key:t.id,customRendering:t}));return Pm.createElement("div",{ref:this.elRef},e)}componentDidMount(){this.isUnmounting=!1;const e=new cL;this.handleCustomRendering=e.handle.bind(e),this.calendar=new RF(this.elRef.current,Object.assign(Object.assign({},this.props),{handleCustomRendering:this.handleCustomRendering})),this.calendar.render(),this.calendar.on("_beforeprint",()=>{pg.flushSync(()=>{})});let t;e.subscribe(r=>{const i=Date.now(),o=!t;(bF||o||this.isUpdating||this.isUnmounting||i-t<100?jR:pg.flushSync)(()=>{this.setState({customRenderingMap:r},()=>{t=i,o?this.doResize():this.requestResize()})})})}componentDidUpdate(){this.isUpdating=!0,this.calendar.resetOptions(Object.assign(Object.assign({},this.props),{handleCustomRendering:this.handleCustomRendering})),this.isUpdating=!1}componentWillUnmount(){this.isUnmounting=!0,this.cancelResize(),this.calendar.destroy()}doResize(){this.calendar.updateSize()}cancelResize(){this.resizeId!==void 0&&(cancelAnimationFrame(this.resizeId),this.resizeId=void 0)}getApi(){return this.calendar}}zR.act=jR;class DF extends Dt.PureComponent{render(){const{customRendering:e}=this.props,{generatorMeta:t}=e,r=typeof t=="function"?t(e.renderProps):t;return pg.createPortal(r,e.containerEl)}}function jR(n){n()}class kF extends Co{constructor(){super(...arguments),this.headerElRef=si()}renderSimpleLayout(e,t){let{props:r,context:i}=this,o=[],l=GT(i.options);return e&&o.push({type:"header",key:"header",isSticky:l,chunk:{elRef:this.headerElRef,tableClassName:"fc-col-header",rowContent:e}}),o.push({type:"body",key:"body",liquid:!0,chunk:{content:t}}),G(OT,{elClasses:["fc-daygrid"],viewSpec:i.viewSpec},G(bR,{liquid:!r.isHeightAuto&&!r.forPrint,collapsibleWidth:r.forPrint,cols:[],sections:o}))}renderHScrollLayout(e,t,r,i){let o=this.context.pluginHooks.scrollGridImpl;if(!o)throw new Error("No ScrollGrid implementation");let{props:l,context:c}=this,f=!l.forPrint&&GT(c.options),p=!l.forPrint&&q2(c.options),g=[];return e&&g.push({type:"header",key:"header",isSticky:f,chunks:[{key:"main",elRef:this.headerElRef,tableClassName:"fc-col-header",rowContent:e}]}),g.push({type:"body",key:"body",liquid:!0,chunks:[{key:"main",content:t}]}),p&&g.push({type:"footer",key:"footer",isSticky:!0,chunks:[{key:"main",content:W2}]}),G(OT,{elClasses:["fc-daygrid"],viewSpec:c.viewSpec},G(o,{liquid:!l.isHeightAuto&&!l.forPrint,forPrint:l.forPrint,collapsibleWidth:l.forPrint,colGroups:[{cols:[{span:r,minWidth:i}]}],sections:g}))}}function ch(n,e){let t=[];for(let r=0;r<e;r+=1)t[r]=[];for(let r of n)t[r.row].push(r);return t}function Wd(n,e){let t=[];for(let r=0;r<e;r+=1)t[r]=[];for(let r of n)t[r.firstCol].push(r);return t}function nA(n,e){let t=[];if(n){for(let r=0;r<e;r+=1)t[r]={affectedInstances:n.affectedInstances,isEvent:n.isEvent,segs:[]};for(let r of n.segs)t[r.row].segs.push(r)}else for(let r=0;r<e;r+=1)t[r]=null;return t}const HR=Lt({hour:"numeric",minute:"2-digit",omitZeroMinute:!0,meridiem:"narrow"});function WR(n){let{display:e}=n.eventRange.ui;return e==="list-item"||e==="auto"&&!n.eventRange.def.allDay&&n.firstCol===n.lastCol&&n.isStart&&n.isEnd}class qR extends ht{render(){let{props:e}=this;return G(DR,Object.assign({},e,{elClasses:["fc-daygrid-event","fc-daygrid-block-event","fc-h-event"],defaultTimeFormat:HR,defaultDisplayEventEnd:e.defaultDisplayEventEnd,disableResizing:!e.seg.eventRange.def.allDay}))}}class GR extends ht{render(){let{props:e,context:t}=this,{options:r}=t,{seg:i}=e,o=r.eventTimeFormat||HR,l=yR(i,o,t,!0,e.defaultDisplayEventEnd);return G(Uy,Object.assign({},e,{elTag:"a",elClasses:["fc-daygrid-event","fc-daygrid-dot-event"],elAttrs:vR(e.seg,t),defaultGenerator:PF,timeText:l,isResizing:!1,isDateSelecting:!1}))}}function PF(n){return G(gt,null,G("div",{className:"fc-daygrid-event-dot",style:{borderColor:n.borderColor||n.backgroundColor}}),n.timeText&&G("div",{className:"fc-event-time"},n.timeText),G("div",{className:"fc-event-title"},n.event.title||G(gt,null," ")))}class xF extends ht{constructor(){super(...arguments),this.compileSegs=He(NF)}render(){let{props:e}=this,{allSegs:t,invisibleSegs:r}=this.compileSegs(e.singlePlacements);return G(rL,{elClasses:["fc-daygrid-more-link"],dateProfile:e.dateProfile,todayRange:e.todayRange,allDayDate:e.allDayDate,moreCnt:e.moreCnt,allSegs:t,hiddenSegs:r,alignmentElRef:e.alignmentElRef,alignGridTop:e.alignGridTop,extraDateSpan:e.extraDateSpan,popoverContent:()=>{let i=(e.eventDrag?e.eventDrag.affectedInstances:null)||(e.eventResize?e.eventResize.affectedInstances:null)||{};return G(gt,null,t.map(o=>{let l=o.eventRange.instance.instanceId;return G("div",{className:"fc-daygrid-event-harness",key:l,style:{visibility:i[l]?"hidden":""}},WR(o)?G(GR,Object.assign({seg:o,isDragging:!1,isSelected:l===e.eventSelection,defaultDisplayEventEnd:!1},Cu(o,e.todayRange))):G(qR,Object.assign({seg:o,isDragging:!1,isResizing:!1,isDateSelecting:!1,isSelected:l===e.eventSelection,defaultDisplayEventEnd:!1},Cu(o,e.todayRange))))}))}})}}function NF(n){let e=[],t=[];for(let r of n)e.push(r.seg),r.isVisible||t.push(r.seg);return{allSegs:e,invisibleSegs:t}}const OF=Lt({week:"narrow"});class MF extends Co{constructor(){super(...arguments),this.rootElRef=si(),this.state={dayNumberId:Rf()},this.handleRootEl=e=>{kr(this.rootElRef,e),kr(this.props.elRef,e)}}render(){let{context:e,props:t,state:r,rootElRef:i}=this,{options:o,dateEnv:l}=e,{date:c,dateProfile:f}=t;const p=t.showDayNumber&&LF(c,f.currentRange,l);return G(kR,{elTag:"td",elRef:this.handleRootEl,elClasses:["fc-daygrid-day",...t.extraClassNames||[]],elAttrs:Object.assign(Object.assign(Object.assign({},t.extraDataAttrs),t.showDayNumber?{"aria-labelledby":r.dayNumberId}:{}),{role:"gridcell"}),defaultGenerator:VF,date:c,dateProfile:f,todayRange:t.todayRange,showDayNumber:t.showDayNumber,isMonthStart:p,extraRenderProps:t.extraRenderProps},(g,E)=>G("div",{ref:t.innerElRef,className:"fc-daygrid-day-frame fc-scrollgrid-sync-inner",style:{minHeight:t.minHeight}},t.showWeekNumber&&G(Z2,{elTag:"a",elClasses:["fc-daygrid-week-number"],elAttrs:Ag(e,c,"week"),date:c,defaultFormat:OF}),!E.isDisabled&&(t.showDayNumber||PR(o)||t.forceDayTop)?G("div",{className:"fc-daygrid-day-top"},G(g,{elTag:"a",elClasses:["fc-daygrid-day-number",p&&"fc-daygrid-month-start"],elAttrs:Object.assign(Object.assign({},Ag(e,c)),{id:r.dayNumberId})})):t.showDayNumber?G("div",{className:"fc-daygrid-day-top",style:{visibility:"hidden"}},G("a",{className:"fc-daygrid-day-number"}," ")):void 0,G("div",{className:"fc-daygrid-day-events",ref:t.fgContentElRef},t.fgContent,G("div",{className:"fc-daygrid-day-bottom",style:{marginTop:t.moreMarginTop}},G(xF,{allDayDate:c,singlePlacements:t.singlePlacements,moreCnt:t.moreCnt,alignmentElRef:i,alignGridTop:!t.showDayNumber,extraDateSpan:t.extraDateSpan,dateProfile:t.dateProfile,eventSelection:t.eventSelection,eventDrag:t.eventDrag,eventResize:t.eventResize,todayRange:t.todayRange}))),G("div",{className:"fc-daygrid-day-bg"},t.bgContent)))}}function VF(n){return n.dayNumberText||G(gt,null," ")}function LF(n,e,t){const{start:r,end:i}=e,o=ms(i,-1),l=t.getYear(r),c=t.getMonth(r),f=t.getYear(o),p=t.getMonth(o);return!(l===f&&c===p)&&(n.valueOf()===r.valueOf()||t.getDay(n)===1&&n.valueOf()<i.valueOf())}function $R(n){return n.eventRange.instance.instanceId+":"+n.firstCol}function QR(n){return $R(n)+":"+n.lastCol}function FF(n,e,t,r,i,o,l){let c=new zF(H=>{let Q=n[H.index].eventRange.instance.instanceId+":"+H.span.start+":"+(H.span.end-1);return i[Q]||1});c.allowReslicing=!0,c.strictOrder=r,e===!0||t===!0?(c.maxCoord=o,c.hiddenConsumes=!0):typeof e=="number"?c.maxStackCnt=e:typeof t=="number"&&(c.maxStackCnt=t,c.hiddenConsumes=!0);let f=[],p=[];for(let H=0;H<n.length;H+=1){let Q=n[H],Z=QR(Q);i[Z]!=null?f.push({index:H,span:{start:Q.firstCol,end:Q.lastCol+1}}):p.push(Q)}let g=c.addSegs(f),E=c.toRects(),{singleColPlacements:w,multiColPlacements:A,leftoverMargins:b}=UF(E,n,l),V=[],x=[];for(let H of p){A[H.firstCol].push({seg:H,isVisible:!1,isAbsolute:!0,absoluteTop:0,marginTop:0});for(let Q=H.firstCol;Q<=H.lastCol;Q+=1)w[Q].push({seg:Va(H,Q,Q+1,l),isVisible:!1,isAbsolute:!1,absoluteTop:0,marginTop:0})}for(let H=0;H<l.length;H+=1)V.push(0);for(let H of g){let Q=n[H.index],Z=H.span;A[Z.start].push({seg:Va(Q,Z.start,Z.end,l),isVisible:!1,isAbsolute:!0,absoluteTop:0,marginTop:0});for(let ae=Z.start;ae<Z.end;ae+=1)V[ae]+=1,w[ae].push({seg:Va(Q,ae,ae+1,l),isVisible:!1,isAbsolute:!1,absoluteTop:0,marginTop:0})}for(let H=0;H<l.length;H+=1)x.push(b[H]);return{singleColPlacements:w,multiColPlacements:A,moreCnts:V,moreMarginTops:x}}function UF(n,e,t){let r=BF(n,t.length),i=[],o=[],l=[];for(let c=0;c<t.length;c+=1){let f=r[c],p=[],g=0,E=0;for(let A of f){let b=e[A.index];p.push({seg:Va(b,c,c+1,t),isVisible:!0,isAbsolute:!1,absoluteTop:A.levelCoord,marginTop:A.levelCoord-g}),g=A.levelCoord+A.thickness}let w=[];g=0,E=0;for(let A of f){let b=e[A.index],V=A.span.end-A.span.start>1,x=A.span.start===c;E+=A.levelCoord-g,g=A.levelCoord+A.thickness,V?(E+=A.thickness,x&&w.push({seg:Va(b,A.span.start,A.span.end,t),isVisible:!0,isAbsolute:!0,absoluteTop:A.levelCoord,marginTop:0})):x&&(w.push({seg:Va(b,A.span.start,A.span.end,t),isVisible:!0,isAbsolute:!1,absoluteTop:A.levelCoord,marginTop:E}),E=0)}i.push(p),o.push(w),l.push(E)}return{singleColPlacements:i,multiColPlacements:o,leftoverMargins:l}}function BF(n,e){let t=[];for(let r=0;r<e;r+=1)t.push([]);for(let r of n)for(let i=r.span.start;i<r.span.end;i+=1)t[i].push(r);return t}function Va(n,e,t,r){if(n.firstCol===e&&n.lastCol===t-1)return n;let i=n.eventRange,o=i.range,l=el(o,{start:r[e].date,end:Ft(r[t-1].date,1)});return Object.assign(Object.assign({},n),{firstCol:e,lastCol:t-1,eventRange:{def:i.def,ui:Object.assign(Object.assign({},i.ui),{durationEditable:!1}),instance:i.instance,range:l},isStart:n.isStart&&l.start.valueOf()===o.start.valueOf(),isEnd:n.isEnd&&l.end.valueOf()===o.end.valueOf()})}class zF extends I2{constructor(){super(...arguments),this.hiddenConsumes=!1,this.forceHidden={}}addSegs(e){const t=super.addSegs(e),{entriesByLevel:r}=this,i=o=>!this.forceHidden[bu(o)];for(let o=0;o<r.length;o+=1)r[o]=r[o].filter(i);return t}handleInvalidInsertion(e,t,r){const{entriesByLevel:i,forceHidden:o}=this,{touchingEntry:l,touchingLevel:c,touchingLateral:f}=e;if(this.hiddenConsumes&&l){const p=bu(l);if(!o[p])if(this.allowReslicing){const g=Object.assign(Object.assign({},l),{span:IR(l.span,t.span)}),E=bu(g);o[E]=!0,i[c][f]=g,r.push(g),this.splitEntry(l,t,r)}else o[p]=!0,r.push(l)}super.handleInvalidInsertion(e,t,r)}}class KR extends Co{constructor(){super(...arguments),this.cellElRefs=new so,this.frameElRefs=new so,this.fgElRefs=new so,this.segHarnessRefs=new so,this.rootElRef=si(),this.state={framePositions:null,maxContentHeight:null,segHeights:{}},this.handleResize=e=>{e&&this.updateSizing(!0)}}render(){let{props:e,state:t,context:r}=this,{options:i}=r,o=e.cells.length,l=Wd(e.businessHourSegs,o),c=Wd(e.bgEventSegs,o),f=Wd(this.getHighlightSegs(),o),p=Wd(this.getMirrorSegs(),o),{singleColPlacements:g,multiColPlacements:E,moreCnts:w,moreMarginTops:A}=FF(JV(e.fgEventSegs,i.eventOrder),e.dayMaxEvents,e.dayMaxEventRows,i.eventOrderStrict,t.segHeights,t.maxContentHeight,e.cells),b=e.eventDrag&&e.eventDrag.affectedInstances||e.eventResize&&e.eventResize.affectedInstances||{};return G("tr",{ref:this.rootElRef,role:"row"},e.renderIntro&&e.renderIntro(),e.cells.map((V,x)=>{let H=this.renderFgSegs(x,e.forPrint?g[x]:E[x],e.todayRange,b),Q=this.renderFgSegs(x,jF(p[x],E),e.todayRange,{},!!e.eventDrag,!!e.eventResize,!1);return G(MF,{key:V.key,elRef:this.cellElRefs.createRef(V.key),innerElRef:this.frameElRefs.createRef(V.key),dateProfile:e.dateProfile,date:V.date,showDayNumber:e.showDayNumbers,showWeekNumber:e.showWeekNumbers&&x===0,forceDayTop:e.showWeekNumbers,todayRange:e.todayRange,eventSelection:e.eventSelection,eventDrag:e.eventDrag,eventResize:e.eventResize,extraRenderProps:V.extraRenderProps,extraDataAttrs:V.extraDataAttrs,extraClassNames:V.extraClassNames,extraDateSpan:V.extraDateSpan,moreCnt:w[x],moreMarginTop:A[x],singlePlacements:g[x],fgContentElRef:this.fgElRefs.createRef(V.key),fgContent:G(gt,null,G(gt,null,H),G(gt,null,Q)),bgContent:G(gt,null,this.renderFillSegs(f[x],"highlight"),this.renderFillSegs(l[x],"non-business"),this.renderFillSegs(c[x],"bg-event")),minHeight:e.cellMinHeight})}))}componentDidMount(){this.updateSizing(!0),this.context.addResizeHandler(this.handleResize)}componentDidUpdate(e,t){let r=this.props;this.updateSizing(!nr(e,r))}componentWillUnmount(){this.context.removeResizeHandler(this.handleResize)}getHighlightSegs(){let{props:e}=this;return e.eventDrag&&e.eventDrag.segs.length?e.eventDrag.segs:e.eventResize&&e.eventResize.segs.length?e.eventResize.segs:e.dateSelectionSegs}getMirrorSegs(){let{props:e}=this;return e.eventResize&&e.eventResize.segs.length?e.eventResize.segs:[]}renderFgSegs(e,t,r,i,o,l,c){let{context:f}=this,{eventSelection:p}=this.props,{framePositions:g}=this.state,E=this.props.cells.length===1,w=o||l||c,A=[];if(g)for(let b of t){let{seg:V}=b,{instanceId:x}=V.eventRange.instance,H=b.isVisible&&!i[x],Q=b.isAbsolute,Z="",ae="";Q&&(f.isRtl?(ae=0,Z=g.lefts[V.lastCol]-g.lefts[V.firstCol]):(Z=0,ae=g.rights[V.firstCol]-g.rights[V.lastCol])),A.push(G("div",{className:"fc-daygrid-event-harness"+(Q?" fc-daygrid-event-harness-abs":""),key:$R(V),ref:w?null:this.segHarnessRefs.createRef(QR(V)),style:{visibility:H?"":"hidden",marginTop:Q?"":b.marginTop,top:Q?b.absoluteTop:"",left:Z,right:ae}},WR(V)?G(GR,Object.assign({seg:V,isDragging:o,isSelected:x===p,defaultDisplayEventEnd:E},Cu(V,r))):G(qR,Object.assign({seg:V,isDragging:o,isResizing:l,isDateSelecting:c,isSelected:x===p,defaultDisplayEventEnd:E},Cu(V,r)))))}return A}renderFillSegs(e,t){let{isRtl:r}=this.context,{todayRange:i}=this.props,{framePositions:o}=this.state,l=[];if(o)for(let c of e){let f=r?{right:0,left:o.lefts[c.lastCol]-o.lefts[c.firstCol]}:{left:0,right:o.rights[c.firstCol]-o.rights[c.lastCol]};l.push(G("div",{key:r2(c.eventRange),className:"fc-daygrid-bg-harness",style:f},t==="bg-event"?G(Y2,Object.assign({seg:c},Cu(c,i))):X2(t)))}return G(gt,{},...l)}updateSizing(e){let{props:t,state:r,frameElRefs:i}=this;if(!t.forPrint&&t.clientWidth!==null){if(e){let f=t.cells.map(p=>i.currentMap[p.key]);if(f.length){let p=this.rootElRef.current,g=new $h(p,f,!0,!1);(!r.framePositions||!r.framePositions.similarTo(g))&&this.setState({framePositions:new $h(p,f,!0,!1)})}}const o=this.state.segHeights,l=this.querySegHeights(),c=t.dayMaxEvents===!0||t.dayMaxEventRows===!0;this.safeSetState({segHeights:Object.assign(Object.assign({},o),l),maxContentHeight:c?this.computeMaxContentHeight():null})}}querySegHeights(){let e=this.segHarnessRefs.currentMap,t={};for(let r in e){let i=Math.round(e[r].getBoundingClientRect().height);t[r]=Math.max(t[r]||0,i)}return t}computeMaxContentHeight(){let e=this.props.cells[0].key,t=this.cellElRefs.currentMap[e],r=this.fgElRefs.currentMap[e];return t.getBoundingClientRect().bottom-r.getBoundingClientRect().top}getCellEls(){let e=this.cellElRefs.currentMap;return this.props.cells.map(t=>e[t.key])}}KR.addStateEquality({segHeights:nr});function jF(n,e){if(!n.length)return[];let t=HF(e);return n.map(r=>({seg:r,isVisible:!0,isAbsolute:!0,absoluteTop:t[r.eventRange.instance.instanceId],marginTop:0}))}function HF(n){let e={};for(let t of n)for(let r of t)e[r.seg.eventRange.instance.instanceId]=r.absoluteTop;return e}class WF extends Co{constructor(){super(...arguments),this.splitBusinessHourSegs=He(ch),this.splitBgEventSegs=He(qF),this.splitFgEventSegs=He(ch),this.splitDateSelectionSegs=He(ch),this.splitEventDrag=He(nA),this.splitEventResize=He(nA),this.rowRefs=new so}render(){let{props:e,context:t}=this,r=e.cells.length,i=this.splitBusinessHourSegs(e.businessHourSegs,r),o=this.splitBgEventSegs(e.bgEventSegs,r),l=this.splitFgEventSegs(e.fgEventSegs,r),c=this.splitDateSelectionSegs(e.dateSelectionSegs,r),f=this.splitEventDrag(e.eventDrag,r),p=this.splitEventResize(e.eventResize,r),g=r>=7&&e.clientWidth?e.clientWidth/t.options.aspectRatio/6:null;return G(Cf,{unit:"day"},(E,w)=>G(gt,null,e.cells.map((A,b)=>G(KR,{ref:this.rowRefs.createRef(b),key:A.length?A[0].date.toISOString():b,showDayNumbers:r>1,showWeekNumbers:e.showWeekNumbers,todayRange:w,dateProfile:e.dateProfile,cells:A,renderIntro:e.renderRowIntro,businessHourSegs:i[b],eventSelection:e.eventSelection,bgEventSegs:o[b],fgEventSegs:l[b],dateSelectionSegs:c[b],eventDrag:f[b],eventResize:p[b],dayMaxEvents:e.dayMaxEvents,dayMaxEventRows:e.dayMaxEventRows,clientWidth:e.clientWidth,clientHeight:e.clientHeight,cellMinHeight:g,forPrint:e.forPrint}))))}componentDidMount(){this.registerInteractiveComponent()}componentDidUpdate(){this.registerInteractiveComponent()}registerInteractiveComponent(){if(!this.rootEl){const e=this.rowRefs.currentMap[0].getCellEls()[0],t=e?e.closest(".fc-daygrid-body"):null;t&&(this.rootEl=t,this.context.registerInteractiveComponent(this,{el:t,isHitComboAllowed:this.props.isHitComboAllowed}))}}componentWillUnmount(){this.rootEl&&(this.context.unregisterInteractiveComponent(this),this.rootEl=null)}prepareHits(){this.rowPositions=new $h(this.rootEl,this.rowRefs.collect().map(e=>e.getCellEls()[0]),!1,!0),this.colPositions=new $h(this.rootEl,this.rowRefs.currentMap[0].getCellEls(),!0,!1)}queryHit(e,t){let{colPositions:r,rowPositions:i}=this,o=r.leftToIndex(e),l=i.topToIndex(t);if(l!=null&&o!=null){let c=this.props.cells[l][o];return{dateProfile:this.props.dateProfile,dateSpan:Object.assign({range:this.getCellRange(l,o),allDay:!0},c.extraDateSpan),dayEl:this.getCellEl(l,o),rect:{left:r.lefts[o],right:r.rights[o],top:i.tops[l],bottom:i.bottoms[l]},layer:0}}return null}getCellEl(e,t){return this.rowRefs.currentMap[e].getCellEls()[t]}getCellRange(e,t){let r=this.props.cells[e][t].date,i=Ft(r,1);return{start:r,end:i}}}function qF(n,e){return ch(n.filter(GF),e)}function GF(n){return n.eventRange.def.allDay}class $F extends Co{constructor(){super(...arguments),this.elRef=si(),this.needsScrollReset=!1}render(){let{props:e}=this,{dayMaxEventRows:t,dayMaxEvents:r,expandRows:i}=e,o=r===!0||t===!0;o&&!i&&(o=!1,t=null,r=null);let l=["fc-daygrid-body",o?"fc-daygrid-body-balanced":"fc-daygrid-body-unbalanced",i?"":"fc-daygrid-body-natural"];return G("div",{ref:this.elRef,className:l.join(" "),style:{width:e.clientWidth,minWidth:e.tableMinWidth}},G("table",{role:"presentation",className:"fc-scrollgrid-sync-table",style:{width:e.clientWidth,minWidth:e.tableMinWidth,height:i?e.clientHeight:""}},e.colGroupNode,G("tbody",{role:"presentation"},G(WF,{dateProfile:e.dateProfile,cells:e.cells,renderRowIntro:e.renderRowIntro,showWeekNumbers:e.showWeekNumbers,clientWidth:e.clientWidth,clientHeight:e.clientHeight,businessHourSegs:e.businessHourSegs,bgEventSegs:e.bgEventSegs,fgEventSegs:e.fgEventSegs,dateSelectionSegs:e.dateSelectionSegs,eventSelection:e.eventSelection,eventDrag:e.eventDrag,eventResize:e.eventResize,dayMaxEvents:r,dayMaxEventRows:t,forPrint:e.forPrint,isHitComboAllowed:e.isHitComboAllowed}))))}componentDidMount(){this.requestScrollReset()}componentDidUpdate(e){e.dateProfile!==this.props.dateProfile?this.requestScrollReset():this.flushScrollReset()}requestScrollReset(){this.needsScrollReset=!0,this.flushScrollReset()}flushScrollReset(){if(this.needsScrollReset&&this.props.clientWidth){const e=QF(this.elRef.current,this.props.dateProfile);if(e){const t=e.closest(".fc-daygrid-body"),r=t.closest(".fc-scroller"),i=e.getBoundingClientRect().top-t.getBoundingClientRect().top;r.scrollTop=i?i+1:0}this.needsScrollReset=!1}}}function QF(n,e){let t;return e.currentRangeUnit.match(/year|month/)&&(t=n.querySelector(`[data-date="${OM(e.currentDate)}-01"]`)),t||(t=n.querySelector(`[data-date="${Cy(e.currentDate)}"]`)),t}class KF extends N2{constructor(){super(...arguments),this.forceDayIfListItem=!0}sliceRange(e,t){return t.sliceRange(e)}}class YF extends Co{constructor(){super(...arguments),this.slicer=new KF,this.tableRef=si()}render(){let{props:e,context:t}=this;return G($F,Object.assign({ref:this.tableRef},this.slicer.sliceProps(e,e.dateProfile,e.nextDayThreshold,t,e.dayTableModel),{dateProfile:e.dateProfile,cells:e.dayTableModel.cells,colGroupNode:e.colGroupNode,tableMinWidth:e.tableMinWidth,renderRowIntro:e.renderRowIntro,dayMaxEvents:e.dayMaxEvents,dayMaxEventRows:e.dayMaxEventRows,showWeekNumbers:e.showWeekNumbers,expandRows:e.expandRows,headerAlignElRef:e.headerAlignElRef,clientWidth:e.clientWidth,clientHeight:e.clientHeight,forPrint:e.forPrint}))}}class JF extends kF{constructor(){super(...arguments),this.buildDayTableModel=He(XF),this.headerRef=si(),this.tableRef=si()}render(){let{options:e,dateProfileGenerator:t}=this.context,{props:r}=this,i=this.buildDayTableModel(r.dateProfile,t),o=e.dayHeaders&&G(D2,{ref:this.headerRef,dateProfile:r.dateProfile,dates:i.headerDates,datesRepDistinctDays:i.rowCnt===1}),l=c=>G(YF,{ref:this.tableRef,dateProfile:r.dateProfile,dayTableModel:i,businessHours:r.businessHours,dateSelection:r.dateSelection,eventStore:r.eventStore,eventUiBases:r.eventUiBases,eventSelection:r.eventSelection,eventDrag:r.eventDrag,eventResize:r.eventResize,nextDayThreshold:e.nextDayThreshold,colGroupNode:c.tableColGroupNode,tableMinWidth:c.tableMinWidth,dayMaxEvents:e.dayMaxEvents,dayMaxEventRows:e.dayMaxEventRows,showWeekNumbers:e.weekNumbers,expandRows:!r.isHeightAuto,headerAlignElRef:this.headerElRef,clientWidth:c.clientWidth,clientHeight:c.clientHeight,forPrint:r.forPrint});return e.dayMinWidth?this.renderHScrollLayout(o,l,i.colCnt,e.dayMinWidth):this.renderSimpleLayout(o,l)}}function XF(n,e){let t=new P2(n.renderRange,e);return new x2(t,/year|month|week/.test(n.currentRangeUnit))}class ZF extends oR{buildRenderRange(e,t,r){let i=super.buildRenderRange(e,t,r),{props:o}=this;return e4({currentRange:i,snapToWeek:/^(year|month)$/.test(t),fixedWeekCount:o.fixedWeekCount,dateEnv:o.dateEnv})}}function e4(n){let{dateEnv:e,currentRange:t}=n,{start:r,end:i}=t,o;if(n.snapToWeek&&(r=e.startOfWeek(r),o=e.startOfWeek(i),o.valueOf()!==i.valueOf()&&(i=RT(o,1))),n.fixedWeekCount){let l=e.startOfWeek(e.startOfMonth(Ft(t.end,-1))),c=Math.ceil(TM(l,i));i=RT(i,6-c)}return{start:r,end:i}}var t4=':root{--fc-daygrid-event-dot-width:8px}.fc-daygrid-day-events:after,.fc-daygrid-day-events:before,.fc-daygrid-day-frame:after,.fc-daygrid-day-frame:before,.fc-daygrid-event-harness:after,.fc-daygrid-event-harness:before{clear:both;content:"";display:table}.fc .fc-daygrid-body{position:relative;z-index:1}.fc .fc-daygrid-day.fc-day-today{background-color:var(--fc-today-bg-color)}.fc .fc-daygrid-day-frame{min-height:100%;position:relative}.fc .fc-daygrid-day-top{display:flex;flex-direction:row-reverse}.fc .fc-day-other .fc-daygrid-day-top{opacity:.3}.fc .fc-daygrid-day-number{padding:4px;position:relative;z-index:4}.fc .fc-daygrid-month-start{font-size:1.1em;font-weight:700}.fc .fc-daygrid-day-events{margin-top:1px}.fc .fc-daygrid-body-balanced .fc-daygrid-day-events{left:0;position:absolute;right:0}.fc .fc-daygrid-body-unbalanced .fc-daygrid-day-events{min-height:2em;position:relative}.fc .fc-daygrid-body-natural .fc-daygrid-day-events{margin-bottom:1em}.fc .fc-daygrid-event-harness{position:relative}.fc .fc-daygrid-event-harness-abs{left:0;position:absolute;right:0;top:0}.fc .fc-daygrid-bg-harness{bottom:0;position:absolute;top:0}.fc .fc-daygrid-day-bg .fc-non-business{z-index:1}.fc .fc-daygrid-day-bg .fc-bg-event{z-index:2}.fc .fc-daygrid-day-bg .fc-highlight{z-index:3}.fc .fc-daygrid-event{margin-top:1px;z-index:6}.fc .fc-daygrid-event.fc-event-mirror{z-index:7}.fc .fc-daygrid-day-bottom{font-size:.85em;margin:0 2px}.fc .fc-daygrid-day-bottom:after,.fc .fc-daygrid-day-bottom:before{clear:both;content:"";display:table}.fc .fc-daygrid-more-link{border-radius:3px;cursor:pointer;line-height:1;margin-top:1px;max-width:100%;overflow:hidden;padding:2px;position:relative;white-space:nowrap;z-index:4}.fc .fc-daygrid-more-link:hover{background-color:rgba(0,0,0,.1)}.fc .fc-daygrid-week-number{background-color:var(--fc-neutral-bg-color);color:var(--fc-neutral-text-color);min-width:1.5em;padding:2px;position:absolute;text-align:center;top:0;z-index:5}.fc .fc-more-popover .fc-popover-body{min-width:220px;padding:10px}.fc-direction-ltr .fc-daygrid-event.fc-event-start,.fc-direction-rtl .fc-daygrid-event.fc-event-end{margin-left:2px}.fc-direction-ltr .fc-daygrid-event.fc-event-end,.fc-direction-rtl .fc-daygrid-event.fc-event-start{margin-right:2px}.fc-direction-ltr .fc-daygrid-more-link{float:left}.fc-direction-ltr .fc-daygrid-week-number{border-radius:0 0 3px 0;left:0}.fc-direction-rtl .fc-daygrid-more-link{float:right}.fc-direction-rtl .fc-daygrid-week-number{border-radius:0 0 0 3px;right:0}.fc-liquid-hack .fc-daygrid-day-frame{position:static}.fc-daygrid-event{border-radius:3px;font-size:var(--fc-small-font-size);position:relative;white-space:nowrap}.fc-daygrid-block-event .fc-event-time{font-weight:700}.fc-daygrid-block-event .fc-event-time,.fc-daygrid-block-event .fc-event-title{padding:1px}.fc-daygrid-dot-event{align-items:center;display:flex;padding:2px 0}.fc-daygrid-dot-event .fc-event-title{flex-grow:1;flex-shrink:1;font-weight:700;min-width:0;overflow:hidden}.fc-daygrid-dot-event.fc-event-mirror,.fc-daygrid-dot-event:hover{background:rgba(0,0,0,.1)}.fc-daygrid-dot-event.fc-event-selected:before{bottom:-10px;top:-10px}.fc-daygrid-event-dot{border:calc(var(--fc-daygrid-event-dot-width)/2) solid var(--fc-event-border-color);border-radius:calc(var(--fc-daygrid-event-dot-width)/2);box-sizing:content-box;height:0;margin:0 4px;width:0}.fc-direction-ltr .fc-daygrid-event .fc-event-time{margin-right:3px}.fc-direction-rtl .fc-daygrid-event .fc-event-time{margin-left:3px}';W0(t4);var n4=bo({name:"@fullcalendar/daygrid",initialView:"dayGridMonth",views:{dayGrid:{component:JF,dateProfileGeneratorClass:ZF},dayGridDay:{type:"dayGrid",duration:{days:1}},dayGridWeek:{type:"dayGrid",duration:{weeks:1}},dayGridMonth:{type:"dayGrid",duration:{months:1},fixedWeekCount:!0},dayGridYear:{type:"dayGrid",duration:{years:1}}}});const r4=({event:n,selectedDate:e,onSubmit:t,onDelete:r,onClose:i})=>{const[o,l]=Dt.useState({title:"",description:"",start:"",end:"",category:"trabajo",allDay:!1,userId:""});Dt.useEffect(()=>{if(n)l({title:n.title,description:n.description||"",start:n.start,end:n.end,category:n.category,allDay:n.allDay||!1,userId:n.userId});else{const p=e?e.toISOString().slice(0,16):"";l({title:"",description:"",start:p,end:"",category:"trabajo",allDay:!1,userId:""})}},[n,e]);const c=async p=>{p.preventDefault(),o.title&&o.start&&(await t(o),i())},f=p=>{const{name:g,value:E,type:w}=p.target;l(A=>({...A,[g]:w==="checkbox"?p.target.checked:E}))};return re.jsx("div",{className:"modal-overlay",children:re.jsxs("div",{className:"modal-content",children:[re.jsx("h2",{children:n?"Editar Evento":"Nuevo Evento"}),re.jsxs("form",{onSubmit:c,children:[re.jsxs("div",{className:"form-group",children:[re.jsx("label",{htmlFor:"title",children:"Título *"}),re.jsx("input",{type:"text",id:"title",name:"title",value:o.title,onChange:f,required:!0})]}),re.jsxs("div",{className:"form-group",children:[re.jsx("label",{htmlFor:"description",children:"Descripción"}),re.jsx("textarea",{id:"description",name:"description",value:o.description,onChange:f,rows:3})]}),re.jsxs("div",{className:"form-row",children:[re.jsxs("div",{className:"form-group",children:[re.jsx("label",{htmlFor:"start",children:"Inicio *"}),re.jsx("input",{type:"datetime-local",id:"start",name:"start",value:o.start,onChange:f,required:!0})]}),re.jsxs("div",{className:"form-group",children:[re.jsx("label",{htmlFor:"end",children:"Fin"}),re.jsx("input",{type:"datetime-local",id:"end",name:"end",value:o.end,onChange:f})]})]}),re.jsxs("div",{className:"form-row",children:[re.jsxs("div",{className:"form-group",children:[re.jsx("label",{htmlFor:"category",children:"Categoría"}),re.jsxs("select",{id:"category",name:"category",value:o.category,onChange:f,children:[re.jsx("option",{value:"trabajo",children:"Trabajo"}),re.jsx("option",{value:"personal",children:"Personal"}),re.jsx("option",{value:"familia",children:"Familia"}),re.jsx("option",{value:"salud",children:"Salud"}),re.jsx("option",{value:"otro",children:"Otro"})]})]}),re.jsx("div",{className:"form-group",children:re.jsxs("label",{children:[re.jsx("input",{type:"checkbox",name:"allDay",checked:o.allDay,onChange:f}),"Todo el día"]})})]}),re.jsxs("div",{className:"form-actions",children:[re.jsx("button",{type:"button",onClick:i,className:"btn-secondary",children:"Cancelar"}),n&&r&&re.jsx("button",{type:"button",onClick:r,className:"btn-danger",children:"Eliminar"}),re.jsx("button",{type:"submit",className:"btn-primary",children:n?"Actualizar":"Crear"})]})]})]})})},i4=()=>{const{state:n,createEvent:e,updateEvent:t,deleteEvent:r}=I0(),[i,o]=Dt.useState(void 0),[l,c]=Dt.useState(!1),[f,p]=Dt.useState(void 0),g=Dt.useRef(null),E=H=>{p(H.start),c(!0)},w=H=>{const Q=n.events.find(Z=>Z.id===H.event.id);Q&&(o(Q),c(!0))},A=async H=>{i?await t(i.id,H):await e(H),c(!1),o(void 0),p(void 0)},b=async()=>{i&&(await r(i.id),c(!1),o(void 0))},V=()=>{c(!1),o(void 0),p(void 0)},x=H=>H.map(Q=>({id:Q.id,title:Q.title,start:Q.start,end:Q.end,backgroundColor:Q.userColor,borderColor:Q.userColor,textColor:"#ffffff",extendedProps:{description:Q.description,category:Q.category,userName:Q.userName,userColor:Q.userColor,isOwnEvent:Q.userId===n.currentUser?.id}}));return re.jsxs("div",{className:"calendar-container",children:[re.jsxs("div",{className:"calendar-header",children:[re.jsxs("div",{className:"header-left",children:[re.jsx("h1",{children:"CalendarioSync"}),re.jsxs("div",{className:"user-info",children:[re.jsx("div",{className:"user-indicator",style:{backgroundColor:n.currentUser?.color},children:n.currentUser?.name.charAt(0)}),re.jsx("span",{children:n.currentUser?.name})]})]}),re.jsx("div",{className:"header-right",children:n.isOffline&&re.jsx("div",{className:"offline-indicator",children:re.jsx("span",{children:"Sin conexión"})})})]}),re.jsx("div",{className:"calendar-wrapper",children:re.jsx(zR,{ref:g,plugins:[n4],initialView:"dayGridMonth",headerToolbar:!1,height:"100%",events:x(n.events),selectable:!0,selectMirror:!0,dayMaxEvents:!0,weekends:!0,locale:"es",select:E,eventClick:w,eventContent:H=>re.jsxs("div",{className:"event-content",children:[re.jsx("div",{className:"event-title",children:H.event.title}),re.jsx("div",{className:"event-user",children:H.event.extendedProps.userName})]})})}),re.jsxs("div",{className:"bottom-nav-bar",children:[re.jsxs("button",{className:"nav-button",children:[re.jsx("span",{className:"nav-icon",children:"🎨"}),re.jsx("span",{className:"nav-text",children:"Pintar"})]}),re.jsxs("button",{className:"nav-button",children:[re.jsx("span",{className:"nav-icon",children:"✏️"}),re.jsx("span",{className:"nav-text",children:"Editar"})]}),re.jsxs("button",{className:"nav-button",children:[re.jsx("span",{className:"nav-icon",children:"🔄"}),re.jsx("span",{className:"nav-text",children:"Turnos"})]})]}),l&&re.jsx(r4,{event:i,selectedDate:f,onSubmit:A,onDelete:i?b:void 0,onClose:V}),re.jsx("style",{children:`
        .calendar-container {
          height: 100vh;
          display: flex;
          flex-direction: column;
          background: #f8fafc;
        }
        
        .bottom-nav-bar {
          position: fixed;
          bottom: 0;
          left: 0;
          right: 0;
          height: 60px;
          background: white;
          border-top: 1px solid #e2e8f0;
          display: flex;
          z-index: 1000;
          box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.1);
        }
        
        .nav-button {
          flex: 1;
          display: flex;
          flex-direction: column;
          align-items: center;
          justify-content: center;
          background: none;
          border: none;
          cursor: pointer;
          padding: 8px;
          transition: background-color 0.2s;
          gap: 4px;
        }
        
        .nav-button:hover {
          background: #f3f4f6;
        }
        
        .nav-button:active {
          background: #e5e7eb;
        }
        
        .nav-icon {
          font-size: 20px;
          line-height: 1;
        }
        
        .nav-text {
          font-size: 12px;
          font-weight: 500;
          color: #374151;
          line-height: 1;
        }
        
        .calendar-header {
          display: flex;
          justify-content: space-between;
          align-items: center;
          padding: 1rem 2rem;
          background: white;
          border-bottom: 1px solid #e2e8f0;
          box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }
        
        .header-left {
          display: flex;
          align-items: center;
          gap: 2rem;
        }
        
        .header-left h1 {
          margin: 0;
          color: #1e293b;
          font-size: 1.5rem;
          font-weight: 700;
        }
        
        .user-info {
          display: flex;
          align-items: center;
          gap: 0.5rem;
        }
        
        .user-indicator {
          width: 32px;
          height: 32px;
          border-radius: 50%;
          display: flex;
          align-items: center;
          justify-content: center;
          color: white;
          font-weight: bold;
          font-size: 0.875rem;
        }
        
        .header-right {
          display: flex;
          align-items: center;
          gap: 1rem;
        }
        
        .offline-indicator {
          background: #ef4444;
          color: white;
          padding: 0.25rem 0.75rem;
          border-radius: 0.375rem;
          font-size: 0.875rem;
          font-weight: 500;
        }
        
        .calendar-wrapper {
          flex: 1;
          padding: 1rem 2rem;
          padding-bottom: 80px; /* Espacio para la barra inferior */
        }
        
        .event-content {
          padding: 0.25rem;
          font-size: 0.75rem;
          line-height: 1.2;
        }
        
        .event-title {
          font-weight: 600;
          overflow: hidden;
          text-overflow: ellipsis;
          white-space: nowrap;
        }
        
        .event-user {
          font-size: 0.625rem;
          opacity: 0.8;
        }
        
        @media (max-width: 768px) {
          .calendar-header {
            flex-direction: column;
            gap: 1rem;
            padding: 1rem;
          }
          
          .header-left {
            flex-direction: column;
            gap: 1rem;
            text-align: center;
          }
          
          .header-right {
            flex-direction: column;
            gap: 0.5rem;
          }
          
          .calendar-wrapper {
            padding: 0.5rem;
            padding-bottom: 80px; /* Espacio para la barra inferior en móvil */
          }
        }
      `})]})},s4=()=>{const{state:n,selectUser:e}=I0(),[t,r]=Dt.useState(!1),[i,o]=Dt.useState(null);return Dt.useEffect(()=>{(async()=>{try{console.log("Inicializando Firebase..."),await SO()?(await T0(),r(!0),console.log("Firebase inicializado correctamente")):o("Error de conexión a Firebase")}catch(c){console.error("Error al inicializar Firebase:",c),o("Error al inicializar Firebase")}})()},[]),Dt.useEffect(()=>{localStorage.removeItem("currentUser")},[]),i?re.jsxs("div",{style:{padding:"20px",textAlign:"center",color:"red",backgroundColor:"#f8f9fa",minHeight:"100vh",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[re.jsx("h1",{children:"Error de Conexión"}),re.jsx("p",{children:i}),re.jsx("button",{onClick:()=>window.location.reload(),style:{padding:"10px 20px",backgroundColor:"#007bff",color:"white",border:"none",borderRadius:"5px",cursor:"pointer"},children:"Reintentar"})]}):t?n.currentUser?re.jsx(i4,{}):re.jsx(kO,{onUserSelect:e}):re.jsxs("div",{style:{padding:"20px",textAlign:"center",backgroundColor:"#f8f9fa",minHeight:"100vh",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[re.jsx("h1",{children:"CalendarioSync"}),re.jsx("p",{children:"Cargando..."}),re.jsx("div",{style:{width:"40px",height:"40px",border:"4px solid #f3f3f3",borderTop:"4px solid #007bff",borderRadius:"50%",animation:"spin 1s linear infinite"}}),re.jsx("style",{children:`
          @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
          }
        `})]})};T0();cb.createRoot(document.getElementById("root")).render(re.jsx(Dt.StrictMode,{children:re.jsx(DO,{children:re.jsx(s4,{})})}));
